function strip_tags(t,e){e=(((e||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var n=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,i=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;return t.replace(i,"").replace(n,function(t,n){return e.indexOf("<"+n.toLowerCase()+">")>-1?t:""})}function escapeJavascript(t){return t.replace(/<\/?script\s?.*?>/g,"")}function anchorScroll(t,e,n){var i=t.offset(),o=e.offset(),r=Math.abs(o.top-i.top),s=r*n/1e3;$("html,body").animate({scrollTop:o.top},s)}function debounce(t,e){var n=null;return function(){var i=this,o=arguments;clearTimeout(n),n=setTimeout(function(){t.apply(i,o)},e)}}function debounce(t,e,n){var i;return function(){var o=this,r=arguments,s=function(){i=null,n||t.apply(o,r)},a=n&&!i;clearTimeout(i),i=setTimeout(s,e),a&&t.apply(o,r)}}function isInViewport(t){var e=t.getBoundingClientRect();return(e.height>0||e.width>0)&&e.bottom>=0&&e.right>=0&&e.top<=(window.innerHeight||document.documentElement.clientHeight)&&e.left<=(window.innerWidth||document.documentElement.clientWidth)}function reducedMotionCheck(){motionQuery.matches&&$('#post[data-author-viewing="false"] #video-container video').hide()}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(function(){window.Constants={photo_group_limit:9}}).call(this),!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Quill=e():t.Quill=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=45)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(17),o=n(18),r=n(19),s=n(48),a=n(49),l=n(50),u=n(51),c=n(52),h=n(11),d=n(29),p=n(30),f=n(28),g=n(1),m={Scope:g.Scope,create:g.create,find:g.find,query:g.query,register:g.register,Container:i["default"],Format:o["default"],Leaf:r["default"],Embed:u["default"],Scroll:s["default"],Block:l["default"],Inline:a["default"],Text:c["default"],Attributor:{Attribute:h["default"],Class:d["default"],Style:p["default"],Store:f["default"]}};e["default"]=m},function(t,e,n){"use strict";function i(t,e){var n=r(t);if(null==n)throw new l("Unable to create "+t+" blot");var i=n;return new i(t instanceof Node||t.nodeType===Node.TEXT_NODE?t:i.create(e),e)}function o(t,n){return void 0===n&&(n=!1),null==t?null:null!=t[e.DATA_KEY]?t[e.DATA_KEY].blot:n?o(t.parentNode,n):null}function r(t,e){void 0===e&&(e=p.ANY);var n;if("string"==typeof t)n=d[t]||u[t];else if(t instanceof Text||t.nodeType===Node.TEXT_NODE)n=d.text;else if("number"==typeof t)t&p.LEVEL&p.BLOCK?n=d.block:t&p.LEVEL&p.INLINE&&(n=d.inline);else if(t instanceof HTMLElement){var i=(t.getAttribute("class")||"").split(/\s+/);for(var o in i)if(n=c[i[o]])break;n=n||h[t.tagName]}return null==n?null:e&p.LEVEL&n.scope&&e&p.TYPE&n.scope?n:null}function s(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length>1)return t.map(function(t){return s(t)});var n=t[0];if("string"!=typeof n.blotName&&"string"!=typeof n.attrName)throw new l("Invalid definition");if("abstract"===n.blotName)throw new l("Cannot register abstract class");if(d[n.blotName||n.attrName]=n,"string"==typeof n.keyName)u[n.keyName]=n;else if(null!=n.className&&(c[n.className]=n),null!=n.tagName){Array.isArray(n.tagName)?n.tagName=n.tagName.map(function(t){return t.toUpperCase()}):n.tagName=n.tagName.toUpperCase();var i=Array.isArray(n.tagName)?n.tagName:[n.tagName];i.forEach(function(t){null!=h[t]&&null!=n.className||(h[t]=n)})}return n}var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var l=function(t){function e(e){var n=this;return e="[Parchment] "+e,n=t.call(this,e)||this,n.message=e,n.name=n.constructor.name,n}return a(e,t),e}(Error);e.ParchmentError=l;var u={},c={},h={},d={};e.DATA_KEY="__blot";var p;!function(t){t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY"}(p=e.Scope||(e.Scope={})),e.create=i,e.find=o,e.query=r,e.register=s},function(t,e){"use strict";var n=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===i.call(t)},r=function(t){if(!t||"[object Object]"!==i.call(t))return!1;var e=n.call(t,"constructor"),o=t.constructor&&t.constructor.prototype&&n.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!e&&!o)return!1;var r;for(r in t);return void 0===r||n.call(t,r)};t.exports=function s(){var t,e,n,i,a,l,u=arguments[0],c=1,h=arguments.length,d=!1;for("boolean"==typeof u&&(d=u,u=arguments[1]||{},c=2),(null==u||"object"!=typeof u&&"function"!=typeof u)&&(u={});h>c;++c)if(null!=(t=arguments[c]))for(e in t)n=u[e],i=t[e],u!==i&&(d&&i&&(r(i)||(a=o(i)))?(a?(a=!1,l=n&&o(n)?n:[]):l=n&&r(n)?n:{},u[e]=s(d,l,i)):void 0!==i&&(u[e]=i));return u}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==t?e:("function"==typeof t.formats&&(e=h["default"](e,t.formats())),null==t.parent||"scroll"==t.parent.blotName||t.parent.statics.scope!==t.statics.scope?e:a(t.parent,e))}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=e.BlockEmbed=e.bubbleFormats=void 0;var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=function C(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:C(o,e,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},c=n(2),h=i(c),d=n(4),p=i(d),f=n(0),g=i(f),m=n(14),v=i(m),y=n(5),b=i(y),w=n(8),_=i(w),x=function(t){function e(){return o(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),l(e,[{key:"attach",value:function(){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"attach",this).call(this),this.attributes=new g["default"].Attributor.Store(this.domNode)}},{key:"delta",value:function(){return(new p["default"]).insert(this.value(),h["default"](this.formats(),this.attributes.values()))}},{key:"format",value:function(t,e){var n=g["default"].query(t,g["default"].Scope.BLOCK_ATTRIBUTE);null!=n&&this.attributes.attribute(n,e)}},{key:"formatAt",value:function(t,e,n,i){this.format(n,i)}},{key:"insertAt",value:function(t,n,i){if("string"==typeof n&&n.endsWith("\n")){var o=g["default"].create(k.blotName);this.parent.insertBefore(o,0===t?this:this.next),o.insertAt(0,n.slice(0,-1))}else u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertAt",this).call(this,t,n,i)}}]),e}(g["default"].Embed);x.scope=g["default"].Scope.BLOCK_BLOT;var k=function(t){function e(t){o(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.cache={},n}return s(e,t),l(e,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=this.descendants(g["default"].Leaf).reduce(function(t,e){return 0===e.length()?t:t.insert(e.value(),a(e))},new p["default"]).insert("\n",a(this))),this.cache.delta}},{key:"deleteAt",value:function(t,n){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"deleteAt",this).call(this,t,n),this.cache={}}},{key:"formatAt",value:function(t,n,i,o){0>=n||(g["default"].query(i,g["default"].Scope.BLOCK)?t+n===this.length()&&this.format(i,o):u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"formatAt",this).call(this,t,Math.min(n,this.length()-t-1),i,o),this.cache={})}},{key:"insertAt",value:function(t,n,i){if(null!=i)return u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertAt",this).call(this,t,n,i);if(0!==n.length){var o=n.split("\n"),r=o.shift();r.length>0&&(t<this.length()-1||null==this.children.tail?u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertAt",this).call(this,Math.min(t,this.length()-1),r):this.children.tail.insertAt(this.children.tail.length(),r),this.cache={});var s=this;o.reduce(function(t,e){return s=s.split(t,!0),s.insertAt(0,e),e.length},t+r.length)}}},{key:"insertBefore",value:function(t,n){var i=this.children.head;u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertBefore",this).call(this,t,n),i instanceof v["default"]&&i.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(t,n){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveChildren",this).call(this,t,n),this.cache={}}},{key:"optimize",value:function(t){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t),this.cache={}}},{key:"path",value:function(t){return u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"path",this).call(this,t,!0)}},{key:"removeChild",value:function(t){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removeChild",this).call(this,t),this.cache={}}},{key:"split",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n&&(0===t||t>=this.length()-1)){var i=this.clone();return 0===t?(this.parent.insertBefore(i,this),this):(this.parent.insertBefore(i,this.next),i)}var o=u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"split",this).call(this,t,n);return this.cache={},o}}]),e}(g["default"].Block);k.blotName="block",k.tagName="P",k.defaultChild="break",k.allowedChildren=[b["default"],g["default"].Embed,_["default"]],e.bubbleFormats=a,e.BlockEmbed=x,e["default"]=k},function(t,e,n){var i=n(54),o=n(12),r=n(2),s=n(20),a=String.fromCharCode(0),l=function(t){Array.isArray(t)?this.ops=t:null!=t&&Array.isArray(t.ops)?this.ops=t.ops:this.ops=[]};l.prototype.insert=function(t,e){var n={};return 0===t.length?this:(n.insert=t,null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(n.attributes=e),this.push(n))},l.prototype["delete"]=function(t){return 0>=t?this:this.push({"delete":t})},l.prototype.retain=function(t,e){if(0>=t)return this;var n={retain:t};return null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(n.attributes=e),this.push(n)},l.prototype.push=function(t){var e=this.ops.length,n=this.ops[e-1];if(t=r(!0,{},t),"object"==typeof n){if("number"==typeof t["delete"]&&"number"==typeof n["delete"])return this.ops[e-1]={"delete":n["delete"]+t["delete"]},this;if("number"==typeof n["delete"]&&null!=t.insert&&(e-=1,"object"!=typeof(n=this.ops[e-1])))return this.ops.unshift(t),this;if(o(t.attributes,n.attributes)){if("string"==typeof t.insert&&"string"==typeof n.insert)return this.ops[e-1]={insert:n.insert+t.insert},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this;if("number"==typeof t.retain&&"number"==typeof n.retain)return this.ops[e-1]={retain:n.retain+t.retain},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this}}return e===this.ops.length?this.ops.push(t):this.ops.splice(e,0,t),this},l.prototype.chop=function(){var t=this.ops[this.ops.length-1];return t&&t.retain&&!t.attributes&&this.ops.pop(),this},l.prototype.filter=function(t){return this.ops.filter(t)},l.prototype.forEach=function(t){this.ops.forEach(t)},l.prototype.map=function(t){return this.ops.map(t)},l.prototype.partition=function(t){var e=[],n=[];return this.forEach(function(i){(t(i)?e:n).push(i)}),[e,n]},l.prototype.reduce=function(t,e){return this.ops.reduce(t,e)},l.prototype.changeLength=function(){return this.reduce(function(t,e){return e.insert?t+s.length(e):e["delete"]?t-e["delete"]:t},0)},l.prototype.length=function(){return this.reduce(function(t,e){return t+s.length(e)},0)},l.prototype.slice=function(t,e){t=t||0,"number"!=typeof e&&(e=1/0);for(var n=[],i=s.iterator(this.ops),o=0;e>o&&i.hasNext();){var r;t>o?r=i.next(t-o):(r=i.next(e-o),n.push(r)),o+=s.length(r)}return new l(n)},l.prototype.compose=function(t){for(var e=s.iterator(this.ops),n=s.iterator(t.ops),i=new l;e.hasNext()||n.hasNext();)if("insert"===n.peekType())i.push(n.next());else if("delete"===e.peekType())i.push(e.next());else{var o=Math.min(e.peekLength(),n.peekLength()),r=e.next(o),a=n.next(o);if("number"==typeof a.retain){var u={};"number"==typeof r.retain?u.retain=o:u.insert=r.insert;var c=s.attributes.compose(r.attributes,a.attributes,"number"==typeof r.retain);c&&(u.attributes=c),i.push(u)}else"number"==typeof a["delete"]&&"number"==typeof r.retain&&i.push(a)}return i.chop()},l.prototype.concat=function(t){var e=new l(this.ops.slice());return t.ops.length>0&&(e.push(t.ops[0]),e.ops=e.ops.concat(t.ops.slice(1))),e},l.prototype.diff=function(t,e){if(this.ops===t.ops)return new l;var n=[this,t].map(function(e){return e.map(function(n){if(null!=n.insert)return"string"==typeof n.insert?n.insert:a;var i=e===t?"on":"with";throw new Error("diff() called "+i+" non-document")}).join("")}),r=new l,u=i(n[0],n[1],e),c=s.iterator(this.ops),h=s.iterator(t.ops);return u.forEach(function(t){for(var e=t[1].length;e>0;){var n=0;switch(t[0]){case i.INSERT:n=Math.min(h.peekLength(),e),r.push(h.next(n));break;case i.DELETE:n=Math.min(e,c.peekLength()),c.next(n),r["delete"](n);break;case i.EQUAL:n=Math.min(c.peekLength(),h.peekLength(),e);var a=c.next(n),l=h.next(n);o(a.insert,l.insert)?r.retain(n,s.attributes.diff(a.attributes,l.attributes)):r.push(l)["delete"](n)}e-=n}}),r.chop()},l.prototype.eachLine=function(t,e){e=e||"\n";for(var n=s.iterator(this.ops),i=new l,o=0;n.hasNext();){if("insert"!==n.peekType())return;var r=n.peek(),a=s.length(r)-n.peekLength(),u="string"==typeof r.insert?r.insert.indexOf(e,a)-a:-1;if(0>u)i.push(n.next());else if(u>0)i.push(n.next(u));else{if(!1===t(i,n.next(1).attributes||{},o))return;o+=1,i=new l}}i.length()>0&&t(i,{},o)},l.prototype.transform=function(t,e){if(e=!!e,"number"==typeof t)return this.transformPosition(t,e);for(var n=s.iterator(this.ops),i=s.iterator(t.ops),o=new l;n.hasNext()||i.hasNext();)if("insert"!==n.peekType()||!e&&"insert"===i.peekType())if("insert"===i.peekType())o.push(i.next());else{var r=Math.min(n.peekLength(),i.peekLength()),a=n.next(r),u=i.next(r);if(a["delete"])continue;u["delete"]?o.push(u):o.retain(r,s.attributes.transform(a.attributes,u.attributes,e))}else o.retain(s.length(n.next()));return o.chop()},l.prototype.transformPosition=function(t,e){e=!!e;for(var n=s.iterator(this.ops),i=0;n.hasNext()&&t>=i;){var o=n.peekLength(),r=n.peekType();n.next(),"delete"!==r?("insert"===r&&(t>i||!e)&&(t+=o),i+=o):t-=Math.min(o,t-i)}return t},t.exports=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function f(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:f(o,e,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},u=n(8),c=i(u),h=n(0),d=i(h),p=function(t){function e(){return o(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),a(e,[{key:"formatAt",value:function(t,n,i,o){if(e.compare(this.statics.blotName,i)<0&&d["default"].query(i,d["default"].Scope.BLOT)){var r=this.isolate(t,n);o&&r.wrap(i,o)}else l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"formatAt",this).call(this,t,n,i,o)}},{key:"optimize",value:function(t){if(l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t),this.parent instanceof e&&e.compare(this.statics.blotName,this.parent.statics.blotName)>0){var n=this.parent.isolate(this.offset(),this.length());this.moveChildren(n),n.wrap(this)}}}],[{key:"compare",value:function(t,n){var i=e.order.indexOf(t),o=e.order.indexOf(n);return i>=0||o>=0?i-o:t===n?0:n>t?-1:1}}]),e}(d["default"].Inline);p.allowedChildren=[p,d["default"].Embed,c["default"]],p.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],e["default"]=p},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(e=S["default"](!0,{container:t,modules:{clipboard:!0,keyboard:!0,history:!0}},e),e.theme&&e.theme!==L.DEFAULTS.theme){if(e.theme=L["import"]("themes/"+e.theme),null==e.theme)throw new Error("Invalid theme "+e.theme+". Did you register it?")}else e.theme=A["default"];var n=S["default"](!0,{},e.theme.DEFAULTS);[n,e].forEach(function(t){t.modules=t.modules||{},Object.keys(t.modules).forEach(function(e){!0===t.modules[e]&&(t.modules[e]={})})});var i=Object.keys(n.modules).concat(Object.keys(e.modules)),o=i.reduce(function(t,e){var n=L["import"]("modules/"+e);return null==n?P.error("Cannot load "+e+" module. Are you sure you registered it?"):t[e]=n.DEFAULTS||{},t},{});return null!=e.modules&&e.modules.toolbar&&e.modules.toolbar.constructor!==Object&&(e.modules.toolbar={container:e.modules.toolbar}),e=S["default"](!0,{},L.DEFAULTS,{modules:o},n,e),["bounds","container","scrollingContainer"].forEach(function(t){"string"==typeof e[t]&&(e[t]=document.querySelector(e[t]))}),e.modules=Object.keys(e.modules).reduce(function(t,n){return e.modules[n]&&(t[n]=e.modules[n]),t},{}),e}function a(t,e,n,i){if(this.options.strict&&!this.isEnabled()&&e===y["default"].sources.USER)return new f["default"];var o=null==n?null:this.getSelection(),r=this.editor.delta,s=t();if(null!=o&&(!0===n&&(n=o.index),null==i?o=u(o,s,e):0!==i&&(o=u(o,n,i,e)),this.setSelection(o,y["default"].sources.SILENT)),s.length()>0){var a,l=[y["default"].events.TEXT_CHANGE,s,r,e];if((a=this.emitter).emit.apply(a,[y["default"].events.EDITOR_CHANGE].concat(l)),e!==y["default"].sources.SILENT){var c;(c=this.emitter).emit.apply(c,l)}}return s}function l(t,e,n,i,o){var r={};return"number"==typeof t.index&&"number"==typeof t.length?"number"!=typeof e?(o=i,i=n,n=e,e=t.length,t=t.index):(e=t.length,t=t.index):"number"!=typeof e&&(o=i,i=n,n=e,e=0),"object"===(void 0===n?"undefined":c(n))?(r=n,o=i):"string"==typeof n&&(null!=i?r[n]=i:o=n),o=o||y["default"].sources.API,[t,e,r,o]}function u(t,e,n,i){if(null==t)return null;var o=void 0,r=void 0;if(e instanceof f["default"]){var s=[t.index,t.index+t.length].map(function(t){return e.transformPosition(t,i!==y["default"].sources.USER)}),a=h(s,2);o=a[0],r=a[1]}else{var l=[t.index,t.index+t.length].map(function(t){return e>t||t===e&&i===y["default"].sources.USER?t:n>=0?t+n:Math.max(e,t+n)}),u=h(l,2);o=u[0],r=u[1]}return new k.Range(o,r-o)}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=e.overload=e.expandConfig=void 0;var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h=function(){function t(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&a["return"]&&a["return"]()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();n(53);var p=n(4),f=i(p),g=n(57),m=i(g),v=n(9),y=i(v),b=n(7),w=i(b),_=n(0),x=i(_),k=n(22),C=i(k),E=n(2),S=i(E),$=n(10),T=i($),O=n(32),A=i(O),P=T["default"]("quill"),L=function(){function t(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r(this,t),this.options=s(e,i),this.container=this.options.container,null==this.container)return P.error("Invalid Quill container",e);this.options.debug&&t.debug(this.options.debug);var o=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root,this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new y["default"],this.scroll=x["default"].create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new m["default"](this.scroll),this.selection=new C["default"](this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(y["default"].events.EDITOR_CHANGE,function(t){t===y["default"].events.TEXT_CHANGE&&n.root.classList.toggle("ql-blank",n.editor.isBlank())}),this.emitter.on(y["default"].events.SCROLL_UPDATE,function(t,e){var i=n.selection.lastRange,o=i&&0===i.length?i.index:void 0;a.call(n,function(){return n.editor.update(null,e,o)},t)});var l=this.clipboard.convert("<div class='ql-editor' style=\"white-space: normal;\">"+o+"<p><br></p></div>");this.setContents(l),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return d(t,null,[{key:"debug",value:function(t){!0===t&&(t="log"),T["default"].level(t)}},{key:"find",value:function(t){return t.__quill||x["default"].find(t)}},{key:"import",value:function(t){return null==this.imports[t]&&P.error("Cannot import "+t+". Are you sure it was registered?"),this.imports[t]}},{key:"register",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!=typeof t){var o=t.attrName||t.blotName;"string"==typeof o?this.register("formats/"+o,t,e):Object.keys(t).forEach(function(i){n.register(i,t[i],e)})}else null==this.imports[t]||i||P.warn("Overwriting "+t+" with",e),this.imports[t]=e,(t.startsWith("blots/")||t.startsWith("formats/"))&&"abstract"!==e.blotName?x["default"].register(e):t.startsWith("modules")&&"function"==typeof e.register&&e.register()}}]),d(t,[{key:"addContainer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof t){var n=t;t=document.createElement("div"),t.classList.add(n)}return this.container.insertBefore(t,e),t}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(t,e,n){var i=this,o=l(t,e,n),r=h(o,4);return t=r[0],e=r[1],n=r[3],a.call(this,function(){return i.editor.deleteText(t,e)},n,t,-1*e)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}},{key:"focus",value:function(){var t=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=t,this.scrollIntoView()}},{key:"format",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y["default"].sources.API;return a.call(this,function(){var i=n.getSelection(!0),r=new f["default"];if(null==i)return r;if(x["default"].query(t,x["default"].Scope.BLOCK))r=n.editor.formatLine(i.index,i.length,o({},t,e));else{if(0===i.length)return n.selection.format(t,e),r;r=n.editor.formatText(i.index,i.length,o({},t,e))}return n.setSelection(i,y["default"].sources.SILENT),r},i)}},{key:"formatLine",value:function(t,e,n,i,o){var r=this,s=void 0,u=l(t,e,n,i,o),c=h(u,4);return t=c[0],e=c[1],s=c[2],o=c[3],a.call(this,function(){return r.editor.formatLine(t,e,s)},o,t,0)}},{key:"formatText",value:function(t,e,n,i,o){var r=this,s=void 0,u=l(t,e,n,i,o),c=h(u,4);return t=c[0],e=c[1],s=c[2],o=c[3],a.call(this,function(){return r.editor.formatText(t,e,s)},o,t,0)}},{key:"getBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=void 0;n="number"==typeof t?this.selection.getBounds(t,e):this.selection.getBounds(t.index,t.length);var i=this.container.getBoundingClientRect();return{bottom:n.bottom-i.top,height:n.height,left:n.left-i.left,right:n.right-i.left,top:n.top-i.top,width:n.width}}},{key:"getContents",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-t,n=l(t,e),i=h(n,2);return t=i[0],e=i[1],this.editor.getContents(t,e)}},{key:"getFormat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"number"==typeof t?this.editor.getFormat(t,e):this.editor.getFormat(t.index,t.length)}},{key:"getIndex",value:function(t){return t.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(t){return this.scroll.leaf(t)}},{key:"getLine",value:function(t){return this.scroll.line(t)}},{key:"getLines",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof t?this.scroll.lines(t.index,t.length):this.scroll.lines(t,e)}},{key:"getModule",value:function(t){return this.theme.modules[t]}},{key:"getSelection",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-t,n=l(t,e),i=h(n,2);return t=i[0],e=i[1],this.editor.getText(t,e)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(e,n,i){var o=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.sources.API;return a.call(this,function(){return o.editor.insertEmbed(e,n,i)},r,e)}},{key:"insertText",value:function(t,e,n,i,o){var r=this,s=void 0,u=l(t,0,n,i,o),c=h(u,4);return t=c[0],s=c[2],o=c[3],a.call(this,function(){return r.editor.insertText(t,e,s)},o,t,e.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(t,e,n){this.clipboard.dangerouslyPasteHTML(t,e,n)}},{key:"removeFormat",value:function(t,e,n){var i=this,o=l(t,e,n),r=h(o,4);return t=r[0],e=r[1],n=r[3],a.call(this,function(){return i.editor.removeFormat(t,e)},n,t)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y["default"].sources.API;return a.call(this,function(){t=new f["default"](t);var n=e.getLength(),i=e.editor.deleteText(0,n),o=e.editor.applyDelta(t),r=o.ops[o.ops.length-1];return null!=r&&"string"==typeof r.insert&&"\n"===r.insert[r.insert.length-1]&&(e.editor.deleteText(e.getLength()-1,1),o["delete"](1)),i.compose(o)},n)}},{key:"setSelection",value:function(e,n,i){if(null==e)this.selection.setRange(null,n||t.sources.API);else{var o=l(e,n,i),r=h(o,4);e=r[0],n=r[1],i=r[3],this.selection.setRange(new k.Range(e,n),i),i!==y["default"].sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y["default"].sources.API,n=(new f["default"]).insert(t);return this.setContents(n,e)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y["default"].sources.USER,e=this.scroll.update(t);return this.selection.update(t),e}},{key:"updateContents",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y["default"].sources.API;return a.call(this,function(){return t=new f["default"](t),e.editor.applyDelta(t,n)},n,!0)}}]),t}();L.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},L.events=y["default"].events,L.sources=y["default"].sources,L.version="1.3.4",L.imports={delta:f["default"],parchment:x["default"],"core/module":w["default"],"core/theme":A["default"]},e.expandConfig=s,e.overload=l,e["default"]=L},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,r),this.quill=t,this.options=e};o.DEFAULTS={},e["default"]=o},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),a=function(t){return t&&t.__esModule?t:{"default":t}}(s),l=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return r(e,t),e}(a["default"].Text);e["default"]=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);
t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function g(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:g(o,e,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},u=n(58),c=i(u),h=n(10),d=i(h),p=d["default"]("quill:events");["selectionchange","mousedown","mouseup","click"].forEach(function(t){document.addEventListener(t,function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(t){if(t.__quill&&t.__quill.emitter){var n;(n=t.__quill.emitter).handleDOM.apply(n,e)}})})});var f=function(t){function e(){o(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.listeners={},t.on("error",p.error),t}return s(e,t),a(e,[{key:"emit",value:function(){p.log.apply(p,arguments),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;e>i;i++)n[i-1]=arguments[i];(this.listeners[t.type]||[]).forEach(function(e){var i=e.node,o=e.handler;(t.target===i||i.contains(t.target))&&o.apply(void 0,[t].concat(n))})}},{key:"listenDOM",value:function(t,e,n){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push({node:e,handler:n})}}]),e}(c["default"]);f.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},f.sources={API:"api",SILENT:"silent",USER:"user"},e["default"]=f},function(t,e,n){"use strict";function i(t){if(r.indexOf(t)<=r.indexOf(s)){for(var e,n=arguments.length,i=Array(n>1?n-1:0),o=1;n>o;o++)i[o-1]=arguments[o];(e=console)[t].apply(e,i)}}function o(t){return r.reduce(function(e,n){return e[n]=i.bind(console,n,t),e},{})}Object.defineProperty(e,"__esModule",{value:!0});var r=["error","warn","log","info"],s="warn";i.level=o.level=function(t){s=t},e["default"]=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=function(){function t(t,e,n){void 0===n&&(n={}),this.attrName=t,this.keyName=e;var o=i.Scope.TYPE&i.Scope.ATTRIBUTE;null!=n.scope?this.scope=n.scope&i.Scope.LEVEL|o:this.scope=i.Scope.ATTRIBUTE,null!=n.whitelist&&(this.whitelist=n.whitelist)}return t.keys=function(t){return[].map.call(t.attributes,function(t){return t.name})},t.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(t.setAttribute(this.keyName,e),!0)},t.prototype.canAdd=function(t,e){return null!=i.query(t,i.Scope.BLOT&(this.scope|i.Scope.TYPE))&&(null==this.whitelist||this.whitelist.indexOf(e)>-1)},t.prototype.remove=function(t){t.removeAttribute(this.keyName)},t.prototype.value=function(t){var e=t.getAttribute(this.keyName);return this.canAdd(t,e)?e:""},t}();e["default"]=o},function(t,e,n){function i(t){return null===t||void 0===t}function o(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}function r(t,e,n){var r,c;if(i(t)||i(e))return!1;if(t.prototype!==e.prototype)return!1;if(l(t))return!!l(e)&&(t=s.call(t),e=s.call(e),u(t,e,n));if(o(t)){if(!o(e))return!1;if(t.length!==e.length)return!1;for(r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}try{var h=a(t),d=a(e)}catch(t){return!1}if(h.length!=d.length)return!1;for(h.sort(),d.sort(),r=h.length-1;r>=0;r--)if(h[r]!=d[r])return!1;for(r=h.length-1;r>=0;r--)if(c=h[r],!u(t[c],e[c],n))return!1;return typeof t==typeof e}var s=Array.prototype.slice,a=n(55),l=n(56),u=t.exports=function(t,e,n){return n||(n={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?n.strict?t===e:t==e:r(t,e,n))}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=e.Code=void 0;var a=function(){function t(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&a["return"]&&a["return"]()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=function x(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:x(o,e,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},c=n(4),h=i(c),d=n(0),p=i(d),f=n(3),g=i(f),m=n(5),v=i(m),y=n(8),b=i(y),w=function(t){function e(){return o(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),e}(v["default"]);w.blotName="code",w.tagName="CODE";var _=function(t){function e(){return o(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),l(e,[{key:"delta",value:function(){var t=this,e=this.domNode.textContent;return e.endsWith("\n")&&(e=e.slice(0,-1)),e.split("\n").reduce(function(e,n){return e.insert(n).insert("\n",t.formats())},new h["default"])}},{key:"format",value:function(t,n){if(t!==this.statics.blotName||!n){var i=this.descendant(b["default"],this.length()-1),o=a(i,1),r=o[0];null!=r&&r.deleteAt(r.length()-1,1),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,n)}}},{key:"formatAt",value:function(t,n,i,o){if(0!==n&&null!=p["default"].query(i,p["default"].Scope.BLOCK)&&(i!==this.statics.blotName||o!==this.statics.formats(this.domNode))){var r=this.newlineIndex(t);if(!(0>r||r>=t+n)){var s=this.newlineIndex(t,!0)+1,a=r-s+1,l=this.isolate(s,a),u=l.next;l.format(i,o),u instanceof e&&u.formatAt(0,t-s+n-a,i,o)}}}},{key:"insertAt",value:function(t,e,n){if(null==n){var i=this.descendant(b["default"],t),o=a(i,2),r=o[0],s=o[1];r.insertAt(s,e)}}},{key:"length",value:function(){var t=this.domNode.textContent.length;return this.domNode.textContent.endsWith("\n")?t:t+1}},{key:"newlineIndex",value:function(t){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return this.domNode.textContent.slice(0,t).lastIndexOf("\n");var e=this.domNode.textContent.slice(t).indexOf("\n");return e>-1?t+e:-1}},{key:"optimize",value:function(t){this.domNode.textContent.endsWith("\n")||this.appendChild(p["default"].create("text","\n")),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t);var n=this.next;null!=n&&n.prev===this&&n.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===n.statics.formats(n.domNode)&&(n.optimize(t),n.moveChildren(this),n.remove())}},{key:"replace",value:function(t){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"replace",this).call(this,t),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(t){var e=p["default"].find(t);null==e?t.parentNode.removeChild(t):e instanceof p["default"].Embed?e.remove():e.unwrap()})}}],[{key:"create",value:function(t){var n=u(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t);return n.setAttribute("spellcheck",!1),n}},{key:"formats",value:function(){return!0}}]),e}(g["default"]);_.blotName="code-block",_.tagName="PRE",_.TAB="  ",e.Code=w,e["default"]=_},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function h(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:h(o,e,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},l=n(0),u=function(t){return t&&t.__esModule?t:{"default":t}}(l),c=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return r(e,t),s(e,[{key:"insertInto",value:function(t,n){0===t.children.length?a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertInto",this).call(this,t,n):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),e}(u["default"].Embed);c.blotName="break",c.tagName="BR",e["default"]=c},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){var n=document.createElement("a");n.href=t;var i=n.href.slice(0,n.href.indexOf(":"));return e.indexOf(i)>-1}Object.defineProperty(e,"__esModule",{value:!0}),e.sanitize=e["default"]=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function d(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:d(o,e,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},u=n(5),c=function(t){return t&&t.__esModule?t:{"default":t}}(u),h=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return r(e,t),a(e,[{key:"format",value:function(t,n){return t===this.statics.blotName&&n?(n=this.constructor.sanitize(n),void this.domNode.setAttribute("href",n)):l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,n)}}],[{key:"create",value:function(t){var n=l(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t);return t=this.sanitize(t),n.setAttribute("href",t),n.setAttribute("target","_blank"),n.setAttribute("rel","noopener noreferrer"),n}},{key:"formats",value:function(t){return t.getAttribute("href")}},{key:"sanitize",value:function(t){return s(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}}]),e}(c["default"]);h.blotName="link",h.tagName="A",h.SANITIZED_URL="about:blank",h.PROTOCOL_WHITELIST=["http","https","mailto","tel"],e["default"]=h,e.sanitize=s},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(106),a=function(t){return t&&t.__esModule?t:{"default":t}}(s),l=function(){function t(e){var n=this;i(this,t),this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){n.container.classList.toggle("ql-expanded")}),this.select.addEventListener("change",this.update.bind(this))}return r(t,[{key:"buildItem",value:function(t){var e=this,n=document.createElement("span");return n.classList.add("ql-picker-item"),t.hasAttribute("value")&&n.setAttribute("data-value",t.getAttribute("value")),t.textContent&&n.setAttribute("data-label",t.textContent),n.addEventListener("click",function(){e.selectItem(n,!0)}),n}},{key:"buildLabel",value:function(){var t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML=a["default"],this.container.appendChild(t),t}},{key:"buildOptions",value:function(){var t=this,e=document.createElement("span");e.classList.add("ql-picker-options"),[].slice.call(this.select.options).forEach(function(n){var i=t.buildItem(n);e.appendChild(i),!0===n.selected&&t.selectItem(i)}),this.container.appendChild(e)}},{key:"buildPicker",value:function(){var t=this;[].slice.call(this.select.attributes).forEach(function(e){t.container.setAttribute(e.name,e.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"close",value:function(){this.container.classList.remove("ql-expanded")}},{key:"selectItem",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.container.querySelector(".ql-selected");if(t!==n&&(null!=n&&n.classList.remove("ql-selected"),null!=t&&(t.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(t.parentNode.children,t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),e))){if("function"==typeof Event)this.select.dispatchEvent(new Event("change"));else if("object"===("undefined"==typeof Event?"undefined":o(Event))){var i=document.createEvent("Event");i.initEvent("change",!0,!0),this.select.dispatchEvent(i)}this.close()}}},{key:"update",value:function(){var t=void 0;if(this.select.selectedIndex>-1){var e=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex],this.selectItem(e)}else this.selectItem(null);var n=null!=t&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",n)}}]),t}();e["default"]=l},function(t,e,n){"use strict";function i(t){var e=a.find(t);if(null==e)try{e=a.create(t)}catch(n){e=a.create(a.Scope.INLINE),[].slice.call(t.childNodes).forEach(function(t){e.domNode.appendChild(t)}),t.parentNode.replaceChild(e.domNode,t),e.attach()}return e}var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(47),s=n(27),a=n(1),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.appendChild=function(t){this.insertBefore(t)},e.prototype.attach=function(){var e=this;t.prototype.attach.call(this),this.children=new r["default"],[].slice.call(this.domNode.childNodes).reverse().forEach(function(t){try{var n=i(t);e.insertBefore(n,e.children.head)}catch(t){if(t instanceof a.ParchmentError)return;throw t}})},e.prototype.deleteAt=function(t,e){return 0===t&&e===this.length()?this.remove():void this.children.forEachAt(t,e,function(t,e,n){t.deleteAt(e,n)})},e.prototype.descendant=function(t,n){var i=this.children.find(n),o=i[0],r=i[1];return null==t.blotName&&t(o)||null!=t.blotName&&o instanceof t?[o,r]:o instanceof e?o.descendant(t,r):[null,-1]},e.prototype.descendants=function(t,n,i){void 0===n&&(n=0),void 0===i&&(i=Number.MAX_VALUE);var o=[],r=i;return this.children.forEachAt(n,i,function(n,i,s){(null==t.blotName&&t(n)||null!=t.blotName&&n instanceof t)&&o.push(n),n instanceof e&&(o=o.concat(n.descendants(t,i,r))),r-=s}),o},e.prototype.detach=function(){this.children.forEach(function(t){t.detach()}),t.prototype.detach.call(this)},e.prototype.formatAt=function(t,e,n,i){this.children.forEachAt(t,e,function(t,e,o){t.formatAt(e,o,n,i)})},e.prototype.insertAt=function(t,e,n){var i=this.children.find(t),o=i[0],r=i[1];if(o)o.insertAt(r,e,n);else{var s=null==n?a.create("text",e):a.create(e,n);this.appendChild(s)}},e.prototype.insertBefore=function(t,e){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some(function(e){return t instanceof e}))throw new a.ParchmentError("Cannot insert "+t.statics.blotName+" into "+this.statics.blotName);t.insertInto(this,e)},e.prototype.length=function(){return this.children.reduce(function(t,e){return t+e.length()},0)},e.prototype.moveChildren=function(t,e){this.children.forEach(function(n){t.insertBefore(n,e)})},e.prototype.optimize=function(e){if(t.prototype.optimize.call(this,e),0===this.children.length)if(null!=this.statics.defaultChild){var n=a.create(this.statics.defaultChild);this.appendChild(n),n.optimize(e)}else this.remove()},e.prototype.path=function(t,n){void 0===n&&(n=!1);var i=this.children.find(t,n),o=i[0],r=i[1],s=[[this,t]];return o instanceof e?s.concat(o.path(r,n)):(null!=o&&s.push([o,r]),s)},e.prototype.removeChild=function(t){this.children.remove(t)},e.prototype.replace=function(n){n instanceof e&&n.moveChildren(this),t.prototype.replace.call(this,n)},e.prototype.split=function(t,e){if(void 0===e&&(e=!1),!e){if(0===t)return this;if(t===this.length())return this.next}var n=this.clone();return this.parent.insertBefore(n,this.next),this.children.forEachAt(t,this.length(),function(t,i,o){t=t.split(i,e),n.appendChild(t)}),n},e.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},e.prototype.update=function(t,e){var n=this,o=[],r=[];t.forEach(function(t){t.target===n.domNode&&"childList"===t.type&&(o.push.apply(o,t.addedNodes),r.push.apply(r,t.removedNodes))}),r.forEach(function(t){if(!(null!=t.parentNode&&"IFRAME"!==t.tagName&&document.body.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var e=a.find(t);null!=e&&(null!=e.domNode.parentNode&&e.domNode.parentNode!==n.domNode||e.detach())}}),o.filter(function(t){return t.parentNode==n.domNode}).sort(function(t,e){return t===e?0:t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(t){var e=null;null!=t.nextSibling&&(e=a.find(t.nextSibling));var o=i(t);o.next==e&&null!=o.next||(null!=o.parent&&o.parent.removeChild(n),n.insertBefore(o,e))})},e}(s["default"]);e["default"]=l},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(11),r=n(28),s=n(17),a=n(1),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.formats=function(t){return"string"==typeof this.tagName||(Array.isArray(this.tagName)?t.tagName.toLowerCase():void 0)},e.prototype.attach=function(){t.prototype.attach.call(this),this.attributes=new r["default"](this.domNode)},e.prototype.format=function(t,e){var n=a.query(t);n instanceof o["default"]?this.attributes.attribute(n,e):e&&(null==n||t===this.statics.blotName&&this.formats()[t]===e||this.replaceWith(t,e))},e.prototype.formats=function(){var t=this.attributes.values(),e=this.statics.formats(this.domNode);return null!=e&&(t[this.statics.blotName]=e),t},e.prototype.replaceWith=function(e,n){var i=t.prototype.replaceWith.call(this,e,n);return this.attributes.copy(i),i},e.prototype.update=function(e,n){var i=this;t.prototype.update.call(this,e,n),e.some(function(t){return t.target===i.domNode&&"attributes"===t.type})&&this.attributes.build()},e.prototype.wrap=function(n,i){var o=t.prototype.wrap.call(this,n,i);return o instanceof e&&o.statics.scope===this.statics.scope&&this.attributes.move(o),o},e}(s["default"]);e["default"]=l},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(27),r=n(1),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.value=function(t){return!0},e.prototype.index=function(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1},e.prototype.position=function(t,e){var n=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return t>0&&(n+=1),[this.parent.domNode,n]},e.prototype.value=function(){return t={},t[this.statics.blotName]=this.statics.value(this.domNode)||!0,t;var t},e.scope=r.Scope.INLINE_BLOT,e}(o["default"]);e["default"]=s},function(t,e,n){function i(t){this.ops=t,this.index=0,this.offset=0}var o=n(12),r=n(2),s={attributes:{compose:function(t,e,n){"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={});var i=r(!0,{},e);n||(i=Object.keys(i).reduce(function(t,e){return null!=i[e]&&(t[e]=i[e]),t},{}));for(var o in t)void 0!==t[o]&&void 0===e[o]&&(i[o]=t[o]);return Object.keys(i).length>0?i:void 0},diff:function(t,e){"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={});var n=Object.keys(t).concat(Object.keys(e)).reduce(function(n,i){return o(t[i],e[i])||(n[i]=void 0===e[i]?null:e[i]),n},{});return Object.keys(n).length>0?n:void 0},transform:function(t,e,n){if("object"!=typeof t)return e;if("object"==typeof e){if(!n)return e;var i=Object.keys(e).reduce(function(n,i){return void 0===t[i]&&(n[i]=e[i]),n},{});return Object.keys(i).length>0?i:void 0}}},iterator:function(t){return new i(t)},length:function(t){return"number"==typeof t["delete"]?t["delete"]:"number"==typeof t.retain?t.retain:"string"==typeof t.insert?t.insert.length:1}};i.prototype.hasNext=function(){return this.peekLength()<1/0},i.prototype.next=function(t){t||(t=1/0);var e=this.ops[this.index];if(e){var n=this.offset,i=s.length(e);if(t>=i-n?(t=i-n,this.index+=1,this.offset=0):this.offset+=t,"number"==typeof e["delete"])return{"delete":t};var o={};return e.attributes&&(o.attributes=e.attributes),"number"==typeof e.retain?o.retain=t:"string"==typeof e.insert?o.insert=e.insert.substr(n,t):o.insert=e.insert,o}return{retain:1/0}},i.prototype.peek=function(){return this.ops[this.index]},i.prototype.peekLength=function(){return this.ops[this.index]?s.length(this.ops[this.index])-this.offset:1/0},i.prototype.peekType=function(){return this.ops[this.index]?"number"==typeof this.ops[this.index]["delete"]?"delete":"number"==typeof this.ops[this.index].retain?"retain":"insert":"retain"},t.exports=s},function(t,e){var n=function(){"use strict";function t(t,e){return null!=e&&t instanceof e}function e(n,i,o,r,c){function h(n,o){if(null===n)return null;if(0===o)return n;var g,m;if("object"!=typeof n)return n;if(t(n,a))g=new a;else if(t(n,l))g=new l;else if(t(n,u))g=new u(function(t,e){n.then(function(e){t(h(e,o-1))},function(t){e(h(t,o-1))})});else if(e.__isArray(n))g=[];else if(e.__isRegExp(n))g=new RegExp(n.source,s(n)),n.lastIndex&&(g.lastIndex=n.lastIndex);else if(e.__isDate(n))g=new Date(n.getTime());else{if(f&&Buffer.isBuffer(n))return g=new Buffer(n.length),n.copy(g),g;t(n,Error)?g=Object.create(n):void 0===r?(m=Object.getPrototypeOf(n),g=Object.create(m)):(g=Object.create(r),m=r)}if(i){var v=d.indexOf(n);if(-1!=v)return p[v];d.push(n),p.push(g)}t(n,a)&&n.forEach(function(t,e){var n=h(e,o-1),i=h(t,o-1);g.set(n,i)}),t(n,l)&&n.forEach(function(t){var e=h(t,o-1);g.add(e)});for(var y in n){var b;m&&(b=Object.getOwnPropertyDescriptor(m,y)),b&&null==b.set||(g[y]=h(n[y],o-1))}if(Object.getOwnPropertySymbols)for(var w=Object.getOwnPropertySymbols(n),y=0;y<w.length;y++){var _=w[y],x=Object.getOwnPropertyDescriptor(n,_);(!x||x.enumerable||c)&&(g[_]=h(n[_],o-1),x.enumerable||Object.defineProperty(g,_,{enumerable:!1}))}if(c)for(var k=Object.getOwnPropertyNames(n),y=0;y<k.length;y++){var C=k[y],x=Object.getOwnPropertyDescriptor(n,C);x&&x.enumerable||(g[C]=h(n[C],o-1),Object.defineProperty(g,C,{enumerable:!1}))}return g}"object"==typeof i&&(o=i.depth,r=i.prototype,c=i.includeNonEnumerable,i=i.circular);var d=[],p=[],f="undefined"!=typeof Buffer;return void 0===i&&(i=!0),void 0===o&&(o=1/0),h(n,o)}function n(t){return Object.prototype.toString.call(t)}function i(t){return"object"==typeof t&&"[object Date]"===n(t)}function o(t){return"object"==typeof t&&"[object Array]"===n(t)}function r(t){return"object"==typeof t&&"[object RegExp]"===n(t)}function s(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}var a;try{a=Map}catch(t){a=function(){}}var l;try{l=Set}catch(t){l=function(){}}var u;try{u=Promise}catch(t){u=function(){}}return e.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},e.__objToStr=n,e.__isDate=i,e.__isArray=o,e.__isRegExp=r,e.__getRegExpFlags=s,e}();"object"==typeof t&&t.exports&&(t.exports=n)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){try{e.parentNode}catch(t){return!1}return e instanceof Text&&(e=e.parentNode),t.contains(e)}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=e.Range=void 0;var a=function(){function t(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&a["return"]&&a["return"]()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(0),c=i(u),h=n(21),d=i(h),p=n(12),f=i(p),g=n(9),m=i(g),v=n(10),y=i(v),b=y["default"]("quill:selection"),w=function x(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r(this,x),this.index=t,this.length=e},_=function(){function t(e,n){var i=this;r(this,t),this.emitter=n,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=c["default"].create("cursor",this),this.lastRange=this.savedRange=new w(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){i.mouseDown||setTimeout(i.update.bind(i,m["default"].sources.USER),1)}),this.emitter.on(m["default"].events.EDITOR_CHANGE,function(t,e){t===m["default"].events.TEXT_CHANGE&&e.length()>0&&i.update(m["default"].sources.SILENT)}),this.emitter.on(m["default"].events.SCROLL_BEFORE_UPDATE,function(){if(i.hasFocus()){var t=i.getNativeRange();null!=t&&t.start.node!==i.cursor.textNode&&i.emitter.once(m["default"].events.SCROLL_UPDATE,function(){try{i.setNativeRange(t.start.node,t.start.offset,t.end.node,t.end.offset)}catch(t){}})}}),this.emitter.on(m["default"].events.SCROLL_OPTIMIZE,function(t,e){if(e.range){var n=e.range,o=n.startNode,r=n.startOffset,s=n.endNode,a=n.endOffset;i.setNativeRange(o,r,s,a)}}),this.update(m["default"].sources.SILENT)}return l(t,[{key:"handleComposition",value:function(){var t=this;this.root.addEventListener("compositionstart",function(){t.composing=!0}),this.root.addEventListener("compositionend",function(){if(t.composing=!1,t.cursor.parent){var e=t.cursor.restore();if(!e)return;setTimeout(function(){t.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)},1)}})}},{key:"handleDragging",value:function(){var t=this;this.emitter.listenDOM("mousedown",document.body,function(){t.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){t.mouseDown=!1,t.update(m["default"].sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(t,e){if(null==this.scroll.whitelist||this.scroll.whitelist[t]){this.scroll.update();var n=this.getNativeRange();if(null!=n&&n["native"].collapsed&&!c["default"].query(t,c["default"].Scope.BLOCK)){if(n.start.node!==this.cursor.textNode){var i=c["default"].find(n.start.node,!1);if(null==i)return;if(i instanceof c["default"].Leaf){var o=i.split(n.start.offset);i.parent.insertBefore(this.cursor,o)}else i.insertBefore(this.cursor,n.start.node);this.cursor.attach()}this.cursor.format(t,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.scroll.length();t=Math.min(t,n-1),e=Math.min(t+e,n-1)-t;var i=void 0,o=this.scroll.leaf(t),r=a(o,2),s=r[0],l=r[1];if(null==s)return null;var u=s.position(l,!0),c=a(u,2);i=c[0],l=c[1];var h=document.createRange();if(e>0){h.setStart(i,l);var d=this.scroll.leaf(t+e),p=a(d,2);if(s=p[0],l=p[1],null==s)return null;var f=s.position(l,!0),g=a(f,2);return i=g[0],l=g[1],h.setEnd(i,l),h.getBoundingClientRect()}var m="left",v=void 0;return i instanceof Text?(l<i.data.length?(h.setStart(i,l),h.setEnd(i,l+1)):(h.setStart(i,l-1),h.setEnd(i,l),m="right"),v=h.getBoundingClientRect()):(v=s.domNode.getBoundingClientRect(),l>0&&(m="right")),{bottom:v.top+v.height,height:v.height,left:v[m],right:v[m],top:v.top,width:0}}},{key:"getNativeRange",value:function(){var t=document.getSelection();if(null==t||t.rangeCount<=0)return null;var e=t.getRangeAt(0);if(null==e)return null;var n=this.normalizeNative(e);return b.info("getNativeRange",n),n}},{key:"getRange",value:function(){var t=this.getNativeRange();return null==t?[null,null]:[this.normalizedToRange(t),t]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(t){var e=this,n=[[t.start.node,t.start.offset]];t["native"].collapsed||n.push([t.end.node,t.end.offset]);var i=n.map(function(t){var n=a(t,2),i=n[0],o=n[1],r=c["default"].find(i,!0),s=r.offset(e.scroll);return 0===o?s:r instanceof c["default"].Container?s+r.length():s+r.index(i,o)}),r=Math.min(Math.max.apply(Math,o(i)),this.scroll.length()-1),s=Math.min.apply(Math,[r].concat(o(i)));return new w(s,r-s)}},{key:"normalizeNative",value:function(t){if(!s(this.root,t.startContainer)||!t.collapsed&&!s(this.root,t.endContainer))return null;
var e={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},"native":t};return[e.start,e.end].forEach(function(t){for(var e=t.node,n=t.offset;!(e instanceof Text)&&e.childNodes.length>0;)if(e.childNodes.length>n)e=e.childNodes[n],n=0;else{if(e.childNodes.length!==n)break;e=e.lastChild,n=e instanceof Text?e.data.length:e.childNodes.length+1}t.node=e,t.offset=n}),e}},{key:"rangeToNative",value:function(t){var e=this,n=t.collapsed?[t.index]:[t.index,t.index+t.length],i=[],o=this.scroll.length();return n.forEach(function(t,n){t=Math.min(o-1,t);var r=void 0,s=e.scroll.leaf(t),l=a(s,2),u=l[0],c=l[1],h=u.position(c,0!==n),d=a(h,2);r=d[0],c=d[1],i.push(r,c)}),i.length<2&&(i=i.concat(i)),i}},{key:"scrollIntoView",value:function(t){var e=this.lastRange;if(null!=e){var n=this.getBounds(e.index,e.length);if(null!=n){var i=this.scroll.length()-1,o=this.scroll.line(Math.min(e.index,i)),r=a(o,1),s=r[0],l=s;if(e.length>0){var u=this.scroll.line(Math.min(e.index+e.length,i));l=a(u,1)[0]}if(null!=s&&null!=l){var c=t.getBoundingClientRect();n.top<c.top?t.scrollTop-=c.top-n.top:n.bottom>c.bottom&&(t.scrollTop+=n.bottom-c.bottom)}}}}},{key:"setNativeRange",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(b.info("setNativeRange",t,e,n,i),null==t||null!=this.root.parentNode&&null!=t.parentNode&&null!=n.parentNode){var r=document.getSelection();if(null!=r)if(null!=t){this.hasFocus()||this.root.focus();var s=(this.getNativeRange()||{})["native"];if(null==s||o||t!==s.startContainer||e!==s.startOffset||n!==s.endContainer||i!==s.endOffset){"BR"==t.tagName&&(e=[].indexOf.call(t.parentNode.childNodes,t),t=t.parentNode),"BR"==n.tagName&&(i=[].indexOf.call(n.parentNode.childNodes,n),n=n.parentNode);var a=document.createRange();a.setStart(t,e),a.setEnd(n,i),r.removeAllRanges(),r.addRange(a)}}else r.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m["default"].sources.API;if("string"==typeof e&&(n=e,e=!1),b.info("setRange",t),null!=t){var i=this.rangeToNative(t);this.setNativeRange.apply(this,o(i).concat([e]))}else this.setNativeRange(null);this.update(n)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m["default"].sources.USER,e=this.lastRange,n=this.getRange(),i=a(n,2),o=i[0],r=i[1];if(this.lastRange=o,null!=this.lastRange&&(this.savedRange=this.lastRange),!f["default"](e,this.lastRange)){var s;!this.composing&&null!=r&&r["native"].collapsed&&r.start.node!==this.cursor.textNode&&this.cursor.restore();var l=[m["default"].events.SELECTION_CHANGE,d["default"](this.lastRange),d["default"](e),t];if((s=this.emitter).emit.apply(s,[m["default"].events.EDITOR_CHANGE].concat(l)),t!==m["default"].sources.SILENT){var u;(u=this.emitter).emit.apply(u,l)}}}}]),t}();e.Range=w,e["default"]=_},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),l=i(a),u=n(3),c=i(u),h=function(t){function e(){return o(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),e}(l["default"].Container);h.allowedChildren=[c["default"],u.BlockEmbed,h],e["default"]=h},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function g(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:g(o,e,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},u=n(0),c=i(u),h=n(8),d=i(h),p="\ufeff",f=function(t){function e(t){o(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.contentNode=document.createElement("span"),n.contentNode.setAttribute("contenteditable",!1),[].slice.call(n.domNode.childNodes).forEach(function(t){n.contentNode.appendChild(t)}),n.leftGuard=document.createTextNode(p),n.rightGuard=document.createTextNode(p),n.domNode.appendChild(n.leftGuard),n.domNode.appendChild(n.contentNode),n.domNode.appendChild(n.rightGuard),n}return s(e,t),a(e,[{key:"index",value:function(t,n){return t===this.leftGuard?0:t===this.rightGuard?1:l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"index",this).call(this,t,n)}},{key:"restore",value:function(t){var e=void 0,n=void 0,i=t.data.split(p).join("");if(t===this.leftGuard)if(this.prev instanceof d["default"]){var o=this.prev.length();this.prev.insertAt(o,i),e={startNode:this.prev.domNode,startOffset:o+i.length}}else n=document.createTextNode(i),this.parent.insertBefore(c["default"].create(n),this),e={startNode:n,startOffset:i.length};else t===this.rightGuard&&(this.next instanceof d["default"]?(this.next.insertAt(0,i),e={startNode:this.next.domNode,startOffset:i.length}):(n=document.createTextNode(i),this.parent.insertBefore(c["default"].create(n),this.next),e={startNode:n,startOffset:i.length}));return t.data=p,e}},{key:"update",value:function(t,e){var n=this;t.forEach(function(t){if("characterData"===t.type&&(t.target===n.leftGuard||t.target===n.rightGuard)){var i=n.restore(t.target);i&&(e.range=i)}})}}]),e}(c["default"].Embed);e["default"]=f},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.ColorStyle=e.ColorClass=e.ColorAttributor=void 0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function p(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:p(o,e,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},l=n(0),u=function(t){return t&&t.__esModule?t:{"default":t}}(l),c=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return r(e,t),s(e,[{key:"value",value:function(t){var n=a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"value",this).call(this,t);return n.startsWith("rgb(")?(n=n.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+n.split(",").map(function(t){return("00"+parseInt(t).toString(16)).slice(-2)}).join("")):n}}]),e}(u["default"].Attributor.Style),h=new u["default"].Attributor.Class("color","ql-color",{scope:u["default"].Scope.INLINE}),d=new c("color","color",{scope:u["default"].Scope.INLINE});e.ColorAttributor=c,e.ColorClass=h,e.ColorStyle=d},function(t,e,n){"use strict";t.exports={align:{"":n(75),center:n(76),right:n(77),justify:n(78)},background:n(79),blockquote:n(80),bold:n(81),clean:n(82),code:n(40),"code-block":n(40),color:n(83),direction:{"":n(84),rtl:n(85)},"float":{center:n(86),full:n(87),left:n(88),right:n(89)},formula:n(90),header:{1:n(91),2:n(92)},italic:n(93),image:n(94),indent:{"+1":n(95),"-1":n(96)},link:n(97),list:{ordered:n(98),bullet:n(99),check:n(100)},script:{sub:n(101),"super":n(102)},strike:n(103),underline:n(104),video:n(105)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=function(){function t(t){this.domNode=t,this.attach()}return Object.defineProperty(t.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),t.create=function(t){if(null==this.tagName)throw new i.ParchmentError("Blot definition missing tagName");var e;return Array.isArray(this.tagName)?("string"==typeof t&&(t=t.toUpperCase(),parseInt(t).toString()===t&&(t=parseInt(t))),e="number"==typeof t?document.createElement(this.tagName[t-1]):this.tagName.indexOf(t)>-1?document.createElement(t):document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e},t.prototype.attach=function(){this.domNode[i.DATA_KEY]={blot:this}},t.prototype.clone=function(){var t=this.domNode.cloneNode(!1);return i.create(t)},t.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),delete this.domNode[i.DATA_KEY]},t.prototype.deleteAt=function(t,e){this.isolate(t,e).remove()},t.prototype.formatAt=function(t,e,n,o){var r=this.isolate(t,e);if(null!=i.query(n,i.Scope.BLOT)&&o)r.wrap(n,o);else if(null!=i.query(n,i.Scope.ATTRIBUTE)){var s=i.create(this.statics.scope);r.wrap(s),s.format(n,o)}},t.prototype.insertAt=function(t,e,n){var o=null==n?i.create("text",e):i.create(e,n),r=this.split(t);this.parent.insertBefore(o,r)},t.prototype.insertInto=function(t,e){if(null!=this.parent&&this.parent.children.remove(this),t.children.insertBefore(this,e),null!=e)var n=e.domNode;null!=this.next&&this.domNode.nextSibling==n||t.domNode.insertBefore(this.domNode,void 0!==n?n:null),this.parent=t,this.scroll=t.scroll},t.prototype.isolate=function(t,e){var n=this.split(t);return n.split(e),n},t.prototype.length=function(){return 1},t.prototype.offset=function(t){return void 0===t&&(t=this.parent),null==this.parent||this==t?0:this.parent.children.offset(this)+this.parent.offset(t)},t.prototype.optimize=function(t){null!=this.domNode[i.DATA_KEY]&&delete this.domNode[i.DATA_KEY].mutations},t.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},t.prototype.replace=function(t){null!=t.parent&&(t.parent.insertBefore(this,t.next),t.remove())},t.prototype.replaceWith=function(t,e){var n="string"==typeof t?i.create(t,e):t;return n.replace(this),n},t.prototype.split=function(t,e){return 0===t?this:this.next},t.prototype.update=function(t,e){},t.prototype.wrap=function(t,e){var n="string"==typeof t?i.create(t,e):t;return null!=this.parent&&this.parent.insertBefore(n,this.next),n.appendChild(this),n},t.blotName="abstract",t}();e["default"]=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(11),o=n(29),r=n(30),s=n(1),a=function(){function t(t){this.attributes={},this.domNode=t,this.build()}return t.prototype.attribute=function(t,e){e?t.add(this.domNode,e)&&(null!=t.value(this.domNode)?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])},t.prototype.build=function(){var t=this;this.attributes={};var e=i["default"].keys(this.domNode),n=o["default"].keys(this.domNode),a=r["default"].keys(this.domNode);e.concat(n).concat(a).forEach(function(e){var n=s.query(e,s.Scope.ATTRIBUTE);n instanceof i["default"]&&(t.attributes[n.attrName]=n)})},t.prototype.copy=function(t){var e=this;Object.keys(this.attributes).forEach(function(n){var i=e.attributes[n].value(e.domNode);t.format(n,i)})},t.prototype.move=function(t){var e=this;this.copy(t),Object.keys(this.attributes).forEach(function(t){e.attributes[t].remove(e.domNode)}),this.attributes={}},t.prototype.values=function(){var t=this;return Object.keys(this.attributes).reduce(function(e,n){return e[n]=t.attributes[n].value(t.domNode),e},{})},t}();e["default"]=a},function(t,e,n){"use strict";function i(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter(function(t){return 0===t.indexOf(e+"-")})}var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(11),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.keys=function(t){return(t.getAttribute("class")||"").split(/\s+/).map(function(t){return t.split("-").slice(0,-1).join("-")})},e.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(this.remove(t),t.classList.add(this.keyName+"-"+e),!0)},e.prototype.remove=function(t){i(t,this.keyName).forEach(function(e){t.classList.remove(e)}),0===t.classList.length&&t.removeAttribute("class")},e.prototype.value=function(t){var e=i(t,this.keyName)[0]||"",n=e.slice(this.keyName.length+1);return this.canAdd(t,n)?n:""},e}(r["default"]);e["default"]=s},function(t,e,n){"use strict";function i(t){var e=t.split("-"),n=e.slice(1).map(function(t){return t[0].toUpperCase()+t.slice(1)}).join("");return e[0]+n}var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(11),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.keys=function(t){return(t.getAttribute("style")||"").split(";").map(function(t){return t.split(":")[0].trim()})},e.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(t.style[i(this.keyName)]=e,!0)},e.prototype.remove=function(t){t.style[i(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")},e.prototype.value=function(t){var e=t.style[i(this.keyName)];return this.canAdd(t,e)?e:""},e}(r["default"]);e["default"]=s},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&a["return"]&&a["return"]()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function g(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:g(o,e,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c=n(0),h=i(c),d=n(8),p=i(d),f=function(t){function e(t,n){o(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.selection=n,i.textNode=document.createTextNode(e.CONTENTS),i.domNode.appendChild(i.textNode),i._length=0,i}return s(e,t),u(e,null,[{key:"value",value:function(){}}]),u(e,[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(t,n){if(0!==this._length)return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,n);for(var i=this,o=0;null!=i&&i.statics.scope!==h["default"].Scope.BLOCK_BLOT;)o+=i.offset(i.parent),i=i.parent;null!=i&&(this._length=e.CONTENTS.length,i.optimize(),i.formatAt(o,e.CONTENTS.length,t,n),this._length=0)}},{key:"index",value:function(t,n){return t===this.textNode?0:l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"index",this).call(this,t,n)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!this.selection.composing&&null!=this.parent){var t=this.textNode,n=this.selection.getNativeRange(),i=void 0,o=void 0,r=void 0;if(null!=n&&n.start.node===t&&n.end.node===t){var s=[t,n.start.offset,n.end.offset];i=s[0],o=s[1],r=s[2]}for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==e.CONTENTS){var l=this.textNode.data.split(e.CONTENTS).join("");this.next instanceof p["default"]?(i=this.next.domNode,this.next.insertAt(0,l),this.textNode.data=e.CONTENTS):(this.textNode.data=l,this.parent.insertBefore(h["default"].create(this.textNode),this),this.textNode=document.createTextNode(e.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),null!=o){var u=[o,r].map(function(t){return Math.max(0,Math.min(i.data.length,t-1))}),c=a(u,2);return o=c[0],r=c[1],{startNode:i,startOffset:o,endNode:i,endOffset:r}}}}},{key:"update",value:function(t,e){var n=this;if(t.some(function(t){return"characterData"===t.type&&t.target===n.textNode})){var i=this.restore();i&&(e.range=i)}}},{key:"value",value:function(){return""}}]),e}(h["default"].Embed);f.blotName="cursor",f.className="ql-cursor",f.tagName="span",f.CONTENTS="\ufeff",e["default"]=f},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e,n){i(this,t),this.quill=e,this.options=n,this.modules={}}return o(t,[{key:"init",value:function(){var t=this;Object.keys(this.options.modules).forEach(function(e){null==t.modules[e]&&t.addModule(e)})}},{key:"addModule",value:function(t){var e=this.quill.constructor["import"]("modules/"+t);return this.modules[t]=new e(this.quill,this.options.modules[t]||{}),this.modules[t]}}]),t}();r.DEFAULTS={modules:{}},r.themes={"default":r},e["default"]=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlignStyle=e.AlignClass=e.AlignAttribute=void 0;var i=n(0),o=function(t){return t&&t.__esModule?t:{"default":t}}(i),r={scope:o["default"].Scope.BLOCK,whitelist:["right","center","justify"]},s=new o["default"].Attributor.Attribute("align","align",r),a=new o["default"].Attributor.Class("align","ql-align",r),l=new o["default"].Attributor.Style("align","text-align",r);e.AlignAttribute=s,e.AlignClass=a,e.AlignStyle=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BackgroundStyle=e.BackgroundClass=void 0;var i=n(0),o=function(t){return t&&t.__esModule?t:{"default":t}}(i),r=n(25),s=new o["default"].Attributor.Class("background","ql-bg",{scope:o["default"].Scope.INLINE}),a=new r.ColorAttributor("background","background-color",{scope:o["default"].Scope.INLINE});e.BackgroundClass=s,e.BackgroundStyle=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DirectionStyle=e.DirectionClass=e.DirectionAttribute=void 0;var i=n(0),o=function(t){return t&&t.__esModule?t:{"default":t}}(i),r={scope:o["default"].Scope.BLOCK,whitelist:["rtl"]},s=new o["default"].Attributor.Attribute("direction","dir",r),a=new o["default"].Attributor.Class("direction","ql-direction",r),l=new o["default"].Attributor.Style("direction","direction",r);e.DirectionAttribute=s,e.DirectionClass=a,e.DirectionStyle=l},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.FontClass=e.FontStyle=void 0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function f(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:f(o,e,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},l=n(0),u=function(t){return t&&t.__esModule?t:{"default":t}}(l),c={scope:u["default"].Scope.INLINE,whitelist:["serif","monospace"]},h=new u["default"].Attributor.Class("font","ql-font",c),d=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return r(e,t),s(e,[{key:"value",value:function(t){return a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"value",this).call(this,t).replace(/["']/g,"")}}]),e}(u["default"].Attributor.Style),p=new d("font","font-family",c);e.FontStyle=p,e.FontClass=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SizeStyle=e.SizeClass=void 0;var i=n(0),o=function(t){return t&&t.__esModule?t:{"default":t}}(i),r=new o["default"].Attributor.Class("size","ql-size",{scope:o["default"].Scope.INLINE,whitelist:["small","large","huge"]}),s=new o["default"].Attributor.Style("size","font-size",{scope:o["default"].Scope.INLINE,whitelist:["10px","18px","32px"]});e.SizeClass=r,e.SizeStyle=s},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(t,e){var n,i=t===B.keys.LEFT?"prefix":"suffix";return n={key:t,shiftKey:e},o(n,i,/^$/),o(n,"handler",function(n){var i=n.index;t===B.keys.RIGHT&&(i+=n.length+1);var o=this.quill.getLeaf(i);return!(v(o,1)[0]instanceof L["default"]&&(t===B.keys.LEFT?e?this.quill.setSelection(n.index-1,n.length+1,M["default"].sources.USER):this.quill.setSelection(n.index-1,M["default"].sources.USER):e?this.quill.setSelection(n.index,n.length+1,M["default"].sources.USER):this.quill.setSelection(n.index+n.length+1,M["default"].sources.USER),1))}),n}function u(t,e){if(!(0===t.index||this.quill.getLength()<=1)){var n=this.quill.getLine(t.index),i=v(n,1),o=i[0],r={};if(0===e.offset){var s=this.quill.getLine(t.index-1),a=v(s,1),l=a[0];if(null!=l&&l.length()>1){var u=o.formats(),c=this.quill.getFormat(t.index-1,1);r=T["default"].attributes.diff(u,c)||{}}}var h=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;this.quill.deleteText(t.index-h,h,M["default"].sources.USER),Object.keys(r).length>0&&this.quill.formatLine(t.index-h,h,r,M["default"].sources.USER),this.quill.focus()}}function c(t,e){var n=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(!(t.index>=this.quill.getLength()-n)){var i={},o=0,r=this.quill.getLine(t.index),s=v(r,1),a=s[0];if(e.offset>=a.length()-1){var l=this.quill.getLine(t.index+1),u=v(l,1),c=u[0];if(c){var h=a.formats(),d=this.quill.getFormat(t.index,1);i=T["default"].attributes.diff(h,d)||{},o=c.length()}}this.quill.deleteText(t.index,n,M["default"].sources.USER),Object.keys(i).length>0&&this.quill.formatLine(t.index+o-1,n,i,M["default"].sources.USER)}}function h(t){var e=this.quill.getLines(t),n={};if(e.length>1){var i=e[0].formats(),o=e[e.length-1].formats();n=T["default"].attributes.diff(o,i)||{}}this.quill.deleteText(t,M["default"].sources.USER),Object.keys(n).length>0&&this.quill.formatLine(t.index,1,n,M["default"].sources.USER),this.quill.setSelection(t.index,M["default"].sources.SILENT),this.quill.focus()}function d(t,e){var n=this;t.length>0&&this.quill.scroll.deleteAt(t.index,t.length);var i=Object.keys(e.format).reduce(function(t,n){return A["default"].query(n,A["default"].Scope.BLOCK)&&!Array.isArray(e.format[n])&&(t[n]=e.format[n]),t},{});this.quill.insertText(t.index,"\n",i,M["default"].sources.USER),this.quill.setSelection(t.index+1,M["default"].sources.SILENT),this.quill.focus(),Object.keys(e.format).forEach(function(t){null==i[t]&&(Array.isArray(e.format[t])||"link"!==t&&n.quill.format(t,e.format[t],M["default"].sources.USER))})}function p(t){return{key:B.keys.TAB,shiftKey:!t,format:{"code-block":!0},handler:function(e){var n=A["default"].query("code-block"),i=e.index,o=e.length,r=this.quill.scroll.descendant(n,i),s=v(r,2),a=s[0],l=s[1];if(null!=a){var u=this.quill.getIndex(a),c=a.newlineIndex(l,!0)+1,h=a.newlineIndex(u+l+o),d=a.domNode.textContent.slice(c,h).split("\n");l=0,d.forEach(function(e,r){t?(a.insertAt(c+l,n.TAB),l+=n.TAB.length,0===r?i+=n.TAB.length:o+=n.TAB.length):e.startsWith(n.TAB)&&(a.deleteAt(c+l,n.TAB.length),l-=n.TAB.length,0===r?i-=n.TAB.length:o-=n.TAB.length),l+=e.length+1}),this.quill.update(M["default"].sources.USER),this.quill.setSelection(i,o,M["default"].sources.SILENT)}}}}function f(t){return{key:t[0].toUpperCase(),shortKey:!0,handler:function(e,n){this.quill.format(t,!n.format[t],M["default"].sources.USER)}}}function g(t){if("string"==typeof t||"number"==typeof t)return g({key:t});if("object"===(void 0===t?"undefined":m(t))&&(t=w["default"](t,!1)),"string"==typeof t.key)if(null!=B.keys[t.key.toUpperCase()])t.key=B.keys[t.key.toUpperCase()];else{if(1!==t.key.length)return null;t.key=t.key.toUpperCase().charCodeAt(0)}return t.shortKey&&(t[F]=t.shortKey,delete t.shortKey),t}Object.defineProperty(e,"__esModule",{value:!0}),e.SHORTKEY=e["default"]=void 0;var m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v=function(){function t(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&a["return"]&&a["return"]()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),y=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),b=n(21),w=i(b),_=n(12),x=i(_),k=n(2),C=i(k),E=n(4),S=i(E),$=n(20),T=i($),O=n(0),A=i(O),P=n(24),L=i(P),N=n(6),M=i(N),j=n(10),D=i(j),I=n(7),q=i(I),R=D["default"]("quill:keyboard"),F=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",B=function(t){function e(t,n){r(this,e);var i=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.bindings={},Object.keys(i.options.bindings).forEach(function(e){("list autofill"!==e||null==t.scroll.whitelist||t.scroll.whitelist.list)&&i.options.bindings[e]&&i.addBinding(i.options.bindings[e])}),i.addBinding({key:e.keys.ENTER,shiftKey:null},d),i.addBinding({key:e.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(i.addBinding({key:e.keys.BACKSPACE},{collapsed:!0},u),i.addBinding({key:e.keys.DELETE},{collapsed:!0},c)):(i.addBinding({key:e.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},u),i.addBinding({key:e.keys.DELETE},{collapsed:!0,suffix:/^.?$/},c)),i.addBinding({key:e.keys.BACKSPACE},{collapsed:!1},h),i.addBinding({key:e.keys.DELETE},{collapsed:!1},h),i.addBinding({key:e.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},u),i.listen(),i}return a(e,t),y(e,null,[{key:"match",value:function(t,e){return e=g(e),!["altKey","ctrlKey","metaKey","shiftKey"].some(function(n){return!!e[n]!==t[n]&&null!==e[n]})&&e.key===(t.which||t.keyCode)}}]),y(e,[{key:"addBinding",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=g(t);return null==i||null==i.key?R.warn("Attempted to add invalid keyboard binding",i):("function"==typeof e&&(e={handler:e}),"function"==typeof n&&(n={handler:n}),i=C["default"](i,e,n),this.bindings[i.key]=this.bindings[i.key]||[],this.bindings[i.key].push(i),void 0)}},{key:"listen",value:function(){var t=this;this.quill.root.addEventListener("keydown",function(n){if(!n.defaultPrevented){var i=n.which||n.keyCode,o=(t.bindings[i]||[]).filter(function(t){return e.match(n,t)});if(0!==o.length){var r=t.quill.getSelection();if(null!=r&&t.quill.hasFocus()){var s=t.quill.getLine(r.index),a=v(s,2),l=a[0],u=a[1],c=t.quill.getLeaf(r.index),h=v(c,2),d=h[0],p=h[1],f=0===r.length?[d,p]:t.quill.getLeaf(r.index+r.length),g=v(f,2),y=g[0],b=g[1],w=d instanceof A["default"].Text?d.value().slice(0,p):"",_=y instanceof A["default"].Text?y.value().slice(b):"",k={collapsed:0===r.length,empty:0===r.length&&l.length()<=1,format:t.quill.getFormat(r),offset:u,prefix:w,suffix:_};o.some(function(e){if(null!=e.collapsed&&e.collapsed!==k.collapsed)return!1;if(null!=e.empty&&e.empty!==k.empty)return!1;if(null!=e.offset&&e.offset!==k.offset)return!1;if(Array.isArray(e.format)){if(e.format.every(function(t){return null==k.format[t]}))return!1}else if("object"===m(e.format)&&!Object.keys(e.format).every(function(t){return!0===e.format[t]?null!=k.format[t]:!1===e.format[t]?null==k.format[t]:x["default"](e.format[t],k.format[t])}))return!1;return!(null!=e.prefix&&!e.prefix.test(k.prefix)||null!=e.suffix&&!e.suffix.test(k.suffix)||!0===e.handler.call(t,r,k))})&&n.preventDefault()}}}})}}]),e}(q["default"]);B.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},
B.DEFAULTS={bindings:{bold:f("bold"),italic:f("italic"),underline:f("underline"),indent:{key:B.keys.TAB,format:["blockquote","indent","list"],handler:function(t,e){return e.collapsed&&0!==e.offset?!0:void this.quill.format("indent","+1",M["default"].sources.USER)}},outdent:{key:B.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(t,e){return e.collapsed&&0!==e.offset?!0:void this.quill.format("indent","-1",M["default"].sources.USER)}},"outdent backspace":{key:B.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(t,e){null!=e.format.indent?this.quill.format("indent","-1",M["default"].sources.USER):null!=e.format.list&&this.quill.format("list",!1,M["default"].sources.USER)}},"indent code-block":p(!0),"outdent code-block":p(!1),"remove tab":{key:B.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(t){this.quill.deleteText(t.index-1,1,M["default"].sources.USER)}},tab:{key:B.keys.TAB,handler:function(t){this.quill.history.cutoff();var e=(new S["default"]).retain(t.index)["delete"](t.length).insert("	");this.quill.updateContents(e,M["default"].sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,M["default"].sources.SILENT)}},"list empty enter":{key:B.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(t,e){this.quill.format("list",!1,M["default"].sources.USER),e.format.indent&&this.quill.format("indent",!1,M["default"].sources.USER)}},"checklist enter":{key:B.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(t){var e=this.quill.getLine(t.index),n=v(e,2),i=n[0],o=n[1],r=(new S["default"]).retain(t.index).insert("\n",{list:"checked"}).retain(i.length()-o-1).retain(1,{list:"unchecked"});this.quill.updateContents(r,M["default"].sources.USER),this.quill.setSelection(t.index+1,M["default"].sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:B.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(t,e){var n=this.quill.getLine(t.index),i=v(n,2),o=i[0],r=i[1],s=(new S["default"]).retain(t.index).insert("\n",e.format).retain(o.length()-r-1).retain(1,{header:null});this.quill.updateContents(s,M["default"].sources.USER),this.quill.setSelection(t.index+1,M["default"].sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\[ ?\]|\[x\])$/,handler:function(t,e){var n=e.prefix.length,i=this.quill.getLine(t.index),o=v(i,2),r=o[0],s=o[1];if(s>n)return!0;var a=void 0;switch(e.prefix.trim()){case"[]":case"[ ]":a="unchecked";break;case"[x]":a="checked";break;case"-":a="bullet";break;default:a="ordered"}this.quill.insertText(t.index," ",M["default"].sources.USER),this.quill.history.cutoff();var l=(new S["default"]).retain(t.index-s)["delete"](n+1).retain(r.length()-2-s).retain(1,{list:a});this.quill.updateContents(l,M["default"].sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-n,M["default"].sources.SILENT)}},"code exit":{key:B.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(t){var e=this.quill.getLine(t.index),n=v(e,2),i=n[0],o=n[1],r=(new S["default"]).retain(t.index+i.length()-o-2).retain(1,{"code-block":null})["delete"](1);this.quill.updateContents(r,M["default"].sources.USER)}},"embed left":l(B.keys.LEFT,!1),"embed left shift":l(B.keys.LEFT,!0),"embed right":l(B.keys.RIGHT,!1),"embed right shift":l(B.keys.RIGHT,!0)}},e["default"]=B,e.SHORTKEY=F},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function h(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:h(o,e,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},l=n(5),u=function(t){return t&&t.__esModule?t:{"default":t}}(l),c=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return r(e,t),s(e,[{key:"optimize",value:function(t){a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return a(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),e}(u["default"]);c.blotName="bold",c.tagName=["STRONG","B"],e["default"]=c},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function h(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:h(o,e,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},l=n(16),u=function(t){return t&&t.__esModule?t:{"default":t}}(l),c=function(t){function e(t,n){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.label.innerHTML=n,r.container.classList.add("ql-color-picker"),[].slice.call(r.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(t){t.classList.add("ql-primary")}),r}return r(e,t),s(e,[{key:"buildItem",value:function(t){var n=a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"buildItem",this).call(this,t);return n.style.backgroundColor=t.getAttribute("value")||"",n}},{key:"selectItem",value:function(t,n){a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"selectItem",this).call(this,t,n);var i=this.label.querySelector(".ql-color-label"),o=t?t.getAttribute("data-value")||"":"";i&&("line"===i.tagName?i.style.stroke=o:i.style.fill=o)}}]),e}(u["default"]);e["default"]=c},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function h(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:h(o,e,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},l=n(16),u=function(t){return t&&t.__esModule?t:{"default":t}}(l),c=function(t){function e(t,n){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.container.classList.add("ql-icon-picker"),[].forEach.call(r.container.querySelectorAll(".ql-picker-item"),function(t){t.innerHTML=n[t.getAttribute("data-value")||""]}),r.defaultItem=r.container.querySelector(".ql-selected"),r.selectItem(r.defaultItem),r}return r(e,t),s(e,[{key:"selectItem",value:function(t,n){a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"selectItem",this).call(this,t,n),t=t||this.defaultItem,this.label.innerHTML=t.innerHTML}}]),e}(u["default"]);e["default"]=c},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e,n){var o=this;i(this,t),this.quill=e,this.boundsContainer=n||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){o.root.style.marginTop=-1*o.quill.root.scrollTop+"px"}),this.hide()}return o(t,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(t){var e=t.left+t.width/2-this.root.offsetWidth/2,n=t.bottom+this.quill.root.scrollTop;this.root.style.left=e+"px",this.root.style.top=n+"px",this.root.classList.remove("ql-flip");var i=this.boundsContainer.getBoundingClientRect(),o=this.root.getBoundingClientRect(),r=0;if(o.right>i.right&&(r=i.right-o.right,this.root.style.left=e+r+"px"),o.left<i.left&&(r=i.left-o.left,this.root.style.left=e+r+"px"),o.bottom>i.bottom){var s=o.bottom-o.top,a=t.bottom-t.top+s;this.root.style.top=n-a+"px",this.root.classList.add("ql-flip")}return r}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),t}();e["default"]=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){var e=t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?(e[1]||"https")+"://www.youtube.com/embed/"+e[2]+"?showinfo=0":(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(e[1]||"https")+"://player.vimeo.com/video/"+e[2]+"/":t}function l(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.forEach(function(e){var i=document.createElement("option");e===n?i.setAttribute("selected","selected"):i.setAttribute("value",e),t.appendChild(i)})}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=e.BaseTooltip=void 0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c=function D(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:D(o,e,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},h=n(2),d=i(h),p=n(4),f=i(p),g=n(9),m=i(g),v=n(38),y=i(v),b=n(32),w=i(b),_=n(41),x=i(_),k=n(42),C=i(k),E=n(16),S=i(E),$=n(43),T=i($),O=[!1,"center","right","justify"],A=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],P=[!1,"serif","monospace"],L=["1","2","3",!1],N=["small",!1,"large","huge"],M=function(t){function e(t,n){o(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),s=function a(e){return document.body.contains(t.root)?(null==i.tooltip||i.tooltip.root.contains(e.target)||document.activeElement===i.tooltip.textbox||i.quill.hasFocus()||i.tooltip.hide(),void(null!=i.pickers&&i.pickers.forEach(function(t){t.container.contains(e.target)||t.close()}))):document.body.removeEventListener("click",a)};return t.emitter.listenDOM("click",document.body,s),i}return s(e,t),u(e,[{key:"addModule",value:function(t){var n=c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addModule",this).call(this,t);return"toolbar"===t&&this.extendToolbar(n),n}},{key:"buildButtons",value:function(t,e){t.forEach(function(t){(t.getAttribute("class")||"").split(/\s+/).forEach(function(n){if(n.startsWith("ql-")&&(n=n.slice("ql-".length),null!=e[n]))if("direction"===n)t.innerHTML=e[n][""]+e[n].rtl;else if("string"==typeof e[n])t.innerHTML=e[n];else{var i=t.value||"";null!=i&&e[n][i]&&(t.innerHTML=e[n][i])}})})}},{key:"buildPickers",value:function(t,e){var n=this;this.pickers=t.map(function(t){if(t.classList.contains("ql-align"))return null==t.querySelector("option")&&l(t,O),new C["default"](t,e.align);if(t.classList.contains("ql-background")||t.classList.contains("ql-color")){var n=t.classList.contains("ql-background")?"background":"color";return null==t.querySelector("option")&&l(t,A,"background"===n?"#ffffff":"#000000"),new x["default"](t,e[n])}return null==t.querySelector("option")&&(t.classList.contains("ql-font")?l(t,P):t.classList.contains("ql-header")?l(t,L):t.classList.contains("ql-size")&&l(t,N)),new S["default"](t)});var i=function(){n.pickers.forEach(function(t){t.update()})};this.quill.on(m["default"].events.EDITOR_CHANGE,i)}}]),e}(w["default"]);M.DEFAULTS=d["default"](!0,{},w["default"].DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var t=this,e=this.container.querySelector("input.ql-image[type=file]");null==e&&(e=document.createElement("input"),e.setAttribute("type","file"),e.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),e.classList.add("ql-image"),e.addEventListener("change",function(){if(null!=e.files&&null!=e.files[0]){var n=new FileReader;n.onload=function(n){var i=t.quill.getSelection(!0);t.quill.updateContents((new f["default"]).retain(i.index)["delete"](i.length).insert({image:n.target.result}),m["default"].sources.USER),t.quill.setSelection(i.index+1,m["default"].sources.SILENT),e.value=""},n.readAsDataURL(e.files[0])}}),this.container.appendChild(e)),e.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var j=function(t){function e(t,n){o(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.textbox=i.root.querySelector('input[type="url"]'),i.listen(),i}return s(e,t),u(e,[{key:"listen",value:function(){var t=this;this.textbox.addEventListener("keydown",function(e){y["default"].match(e,"enter")?(t.save(),e.preventDefault()):y["default"].match(e,"escape")&&(t.cancel(),e.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null!=e?this.textbox.value=e:t!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+t)||""),this.root.setAttribute("data-mode",t)}},{key:"restoreFocus",value:function(){var t=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=t}},{key:"save",value:function(){var t=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":var e=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",t,m["default"].sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",t,m["default"].sources.USER)),this.quill.root.scrollTop=e;break;case"video":t=a(t);case"formula":if(!t)break;var n=this.quill.getSelection(!0);if(null!=n){var i=n.index+n.length;this.quill.insertEmbed(i,this.root.getAttribute("data-mode"),t,m["default"].sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(i+1," ",m["default"].sources.USER),this.quill.setSelection(i+2,m["default"].sources.USER)}}this.textbox.value="",this.hide()}}]),e}(T["default"]);e.BaseTooltip=j,e["default"]=M},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(46),r=i(o),s=n(33),a=n(35),l=n(62),u=n(63),c=i(u),h=n(64),d=i(h),p=n(65),f=i(p),g=n(34),m=n(25),v=n(36),y=n(37),b=n(39),w=i(b),_=n(66),x=i(_),k=n(15),C=i(k),E=n(67),S=i(E),$=n(68),T=i($),O=n(69),A=i(O),P=n(70),L=i(P),N=n(71),M=i(N),j=n(13),D=i(j),I=n(72),q=i(I),R=n(73),F=i(R),B=n(74),H=i(B),z=n(26),W=i(z),U=n(16),Y=i(U),V=n(41),G=i(V),X=n(42),K=i(X),Z=n(43),Q=i(Z),J=n(107),tt=i(J),et=n(108),nt=i(et);r["default"].register({"attributors/attribute/direction":a.DirectionAttribute,"attributors/class/align":s.AlignClass,"attributors/class/background":g.BackgroundClass,"attributors/class/color":m.ColorClass,"attributors/class/direction":a.DirectionClass,"attributors/class/font":v.FontClass,"attributors/class/size":y.SizeClass,"attributors/style/align":s.AlignStyle,"attributors/style/background":g.BackgroundStyle,"attributors/style/color":m.ColorStyle,"attributors/style/direction":a.DirectionStyle,"attributors/style/font":v.FontStyle,"attributors/style/size":y.SizeStyle},!0),r["default"].register({"formats/align":s.AlignClass,"formats/direction":a.DirectionClass,"formats/indent":l.IndentClass,"formats/background":g.BackgroundStyle,"formats/color":m.ColorStyle,"formats/font":v.FontClass,"formats/size":y.SizeClass,"formats/blockquote":c["default"],"formats/code-block":D["default"],"formats/header":d["default"],"formats/list":f["default"],"formats/bold":w["default"],"formats/code":j.Code,"formats/italic":x["default"],"formats/link":C["default"],"formats/script":S["default"],"formats/strike":T["default"],"formats/underline":A["default"],"formats/image":L["default"],"formats/video":M["default"],"formats/list/item":p.ListItem,"modules/formula":q["default"],"modules/syntax":F["default"],"modules/toolbar":H["default"],"themes/bubble":tt["default"],"themes/snow":nt["default"],"ui/icons":W["default"],"ui/picker":Y["default"],"ui/icon-picker":K["default"],"ui/color-picker":G["default"],"ui/tooltip":Q["default"]},!0),e["default"]=r["default"]},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=i(o),s=n(6),a=i(s),l=n(3),u=i(l),c=n(14),h=i(c),d=n(23),p=i(d),f=n(31),g=i(f),m=n(24),v=i(m),y=n(5),b=i(y),w=n(59),_=i(w),x=n(8),k=i(x),C=n(60),E=i(C),S=n(61),$=i(S),T=n(38),O=i(T);a["default"].register({"blots/block":u["default"],"blots/block/embed":l.BlockEmbed,"blots/break":h["default"],"blots/container":p["default"],"blots/cursor":g["default"],"blots/embed":v["default"],"blots/inline":b["default"],"blots/scroll":_["default"],"blots/text":k["default"],"modules/clipboard":E["default"],"modules/history":$["default"],"modules/keyboard":O["default"]}),r["default"].register(u["default"],h["default"],g["default"],b["default"],_["default"],k["default"]),e["default"]=a["default"]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.head=this.tail=void 0,this.length=0}return t.prototype.append=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.insertBefore(t[0],void 0),t.length>1&&this.append.apply(this,t.slice(1))},t.prototype.contains=function(t){for(var e,n=this.iterator();e=n();)if(e===t)return!0;return!1},t.prototype.insertBefore=function(t,e){t.next=e,null!=e?(t.prev=e.prev,null!=e.prev&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):null!=this.tail?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=void 0,this.head=this.tail=t),this.length+=1},t.prototype.offset=function(t){for(var e=0,n=this.head;null!=n;){if(n===t)return e;e+=n.length(),n=n.next}return-1},t.prototype.remove=function(t){this.contains(t)&&(null!=t.prev&&(t.prev.next=t.next),null!=t.next&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)},t.prototype.iterator=function(t){return void 0===t&&(t=this.head),function(){var e=t;return null!=t&&(t=t.next),e}},t.prototype.find=function(t,e){void 0===e&&(e=!1);for(var n,i=this.iterator();n=i();){var o=n.length();if(o>t||e&&t===o&&(null==n.next||0!==n.next.length()))return[n,t];t-=o}return[null,0]},t.prototype.forEach=function(t){for(var e,n=this.iterator();e=n();)t(e)},t.prototype.forEachAt=function(t,e,n){if(!(0>=e))for(var i,o=this.find(t),r=o[0],s=o[1],a=t-s,l=this.iterator(r);(i=l())&&t+e>a;){var u=i.length();t>a?n(i,t-a,Math.min(e,a+u-t)):n(i,0,Math.min(u,t+e-a)),a+=u}},t.prototype.map=function(t){return this.reduce(function(e,n){return e.push(t(n)),e},[])},t.prototype.reduce=function(t,e){for(var n,i=this.iterator();n=i();)e=t(e,n);return e},t}();e["default"]=i},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(17),r=n(1),s={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},a=function(t){function e(e){var n=t.call(this,e)||this;return n.parent=null,n.observer=new MutationObserver(function(t){n.update(t)}),n.observer.observe(n.domNode,s),n.scroll=n,n}return i(e,t),e.prototype.detach=function(){t.prototype.detach.call(this),this.observer.disconnect()},e.prototype.deleteAt=function(e,n){this.update(),0===e&&n===this.length()?this.children.forEach(function(t){t.remove()}):t.prototype.deleteAt.call(this,e,n)},e.prototype.formatAt=function(e,n,i,o){this.update(),t.prototype.formatAt.call(this,e,n,i,o)},e.prototype.insertAt=function(e,n,i){this.update(),t.prototype.insertAt.call(this,e,n,i)},e.prototype.optimize=function(e,n){var i=this;void 0===e&&(e=[]),void 0===n&&(n={}),t.prototype.optimize.call(this,n);for(var s=[].slice.call(this.observer.takeRecords());s.length>0;)e.push(s.pop());for(var a=function(t,e){void 0===e&&(e=!0),null!=t&&t!==i&&null!=t.domNode.parentNode&&(null==t.domNode[r.DATA_KEY].mutations&&(t.domNode[r.DATA_KEY].mutations=[]),e&&a(t.parent))},l=function(t){null!=t.domNode[r.DATA_KEY]&&null!=t.domNode[r.DATA_KEY].mutations&&(t instanceof o["default"]&&t.children.forEach(l),t.optimize(n))},u=e,c=0;u.length>0;c+=1){if(c>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(u.forEach(function(t){var e=r.find(t.target,!0);null!=e&&(e.domNode===t.target&&("childList"===t.type?(a(r.find(t.previousSibling,!1)),[].forEach.call(t.addedNodes,function(t){var e=r.find(t,!1);a(e,!1),e instanceof o["default"]&&e.children.forEach(function(t){a(t,!1)})})):"attributes"===t.type&&a(e.prev)),a(e))}),this.children.forEach(l),u=[].slice.call(this.observer.takeRecords()),s=u.slice();s.length>0;)e.push(s.pop())}},e.prototype.update=function(e,n){var i=this;void 0===n&&(n={}),e=e||this.observer.takeRecords(),e.map(function(t){var e=r.find(t.target,!0);return null!=e?null==e.domNode[r.DATA_KEY].mutations?(e.domNode[r.DATA_KEY].mutations=[t],e):(e.domNode[r.DATA_KEY].mutations.push(t),null):void 0}).forEach(function(t){null!=t&&t!==i&&null!=t.domNode[r.DATA_KEY]&&t.update(t.domNode[r.DATA_KEY].mutations||[],n)}),null!=this.domNode[r.DATA_KEY].mutations&&t.prototype.update.call(this,this.domNode[r.DATA_KEY].mutations,n),this.optimize(e,n)},e.blotName="scroll",e.defaultChild="block",e.scope=r.Scope.BLOCK_BLOT,e.tagName="DIV",e}(o["default"]);e["default"]=a},function(t,e,n){"use strict";function i(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(t[n]!==e[n])return!1;return!0}var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(18),s=n(1),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.formats=function(n){return n.tagName!==e.tagName?t.formats.call(this,n):void 0},e.prototype.format=function(n,i){var o=this;n!==this.statics.blotName||i?t.prototype.format.call(this,n,i):(this.children.forEach(function(t){t instanceof r["default"]||(t=t.wrap(e.blotName,!0)),o.attributes.copy(t)}),this.unwrap())},e.prototype.formatAt=function(e,n,i,o){null!=this.formats()[i]||s.query(i,s.Scope.ATTRIBUTE)?this.isolate(e,n).format(i,o):t.prototype.formatAt.call(this,e,n,i,o)},e.prototype.optimize=function(n){t.prototype.optimize.call(this,n);var o=this.formats();if(0===Object.keys(o).length)return this.unwrap();var r=this.next;r instanceof e&&r.prev===this&&i(o,r.formats())&&(r.moveChildren(this),r.remove())},e.blotName="inline",e.scope=s.Scope.INLINE_BLOT,e.tagName="SPAN",e}(r["default"]);e["default"]=a},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(18),r=n(1),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.formats=function(n){var i=r.query(e.blotName).tagName;return n.tagName!==i?t.formats.call(this,n):void 0},e.prototype.format=function(n,i){null!=r.query(n,r.Scope.BLOCK)&&(n!==this.statics.blotName||i?t.prototype.format.call(this,n,i):this.replaceWith(e.blotName))},e.prototype.formatAt=function(e,n,i,o){null!=r.query(i,r.Scope.BLOCK)?this.format(i,o):t.prototype.formatAt.call(this,e,n,i,o)},e.prototype.insertAt=function(e,n,i){if(null==i||null!=r.query(n,r.Scope.INLINE))t.prototype.insertAt.call(this,e,n,i);else{var o=this.split(e),s=r.create(n,i);o.parent.insertBefore(s,o)}},e.prototype.update=function(e,n){navigator.userAgent.match(/Trident/)?this.attach():t.prototype.update.call(this,e,n)},e.blotName="block",e.scope=r.Scope.BLOCK_BLOT,e.tagName="P",e}(o["default"]);e["default"]=s},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(19),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.formats=function(t){},e.prototype.format=function(e,n){t.prototype.formatAt.call(this,0,this.length(),e,n)},e.prototype.formatAt=function(e,n,i,o){0===e&&n===this.length()?this.format(i,o):t.prototype.formatAt.call(this,e,n,i,o)},e.prototype.formats=function(){return this.statics.formats(this.domNode)},e}(o["default"]);e["default"]=r},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(19),r=n(1),s=function(t){function e(e){var n=t.call(this,e)||this;return n.text=n.statics.value(n.domNode),n}return i(e,t),e.create=function(t){return document.createTextNode(t)},e.value=function(t){var e=t.data;return e.normalize&&(e=e.normalize()),e},e.prototype.deleteAt=function(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)},e.prototype.index=function(t,e){return this.domNode===t?e:-1},e.prototype.insertAt=function(e,n,i){null==i?(this.text=this.text.slice(0,e)+n+this.text.slice(e),this.domNode.data=this.text):t.prototype.insertAt.call(this,e,n,i)},e.prototype.length=function(){return this.text.length},e.prototype.optimize=function(n){t.prototype.optimize.call(this,n),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof e&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},e.prototype.position=function(t,e){return void 0===e&&(e=!1),[this.domNode,t]},e.prototype.split=function(t,e){if(void 0===e&&(e=!1),!e){if(0===t)return this;if(t===this.length())return this.next}var n=r.create(this.domNode.splitText(t));return this.parent.insertBefore(n,this.next),this.text=this.statics.value(this.domNode),n},e.prototype.update=function(t,e){var n=this;t.some(function(t){return"characterData"===t.type&&t.target===n.domNode})&&(this.text=this.statics.value(this.domNode))},e.prototype.value=function(){return this.text},e.blotName="text",e.scope=r.Scope.INLINE_BLOT,e}(o["default"]);e["default"]=s},function(t,e,n){"use strict";var i=document.createElement("div");if(i.classList.toggle("test-class",!1),i.classList.contains("test-class")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return arguments.length>1&&!this.contains(t)==!e?e:o.call(this,t)}}String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return e=e||0,this.substr(e,t.length)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(t,e){var n=this.toString();("number"!=typeof e||!isFinite(e)||Math.floor(e)!==e||e>n.length)&&(e=n.length),e-=t.length;var i=n.indexOf(t,e);return-1!==i&&i===e}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,n=Object(this),i=n.length>>>0,o=arguments[1],r=0;i>r;r++)if(e=n[r],t.call(o,e,r,n))return e}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(t,e){function n(t,e,n){if(t==e)return t?[[m,t]]:[];(0>n||t.length<n)&&(n=null);var o=s(t,e),r=t.substring(0,o);t=t.substring(o),e=e.substring(o),o=a(t,e);var l=t.substring(t.length-o);t=t.substring(0,t.length-o),e=e.substring(0,e.length-o);var c=i(t,e);return r&&c.unshift([m,r]),l&&c.push([m,l]),u(c),null!=n&&(c=h(c,n)),c=d(c)}function i(t,e){var i;if(!t)return[[g,e]];if(!e)return[[f,t]];var r=t.length>e.length?t:e,s=t.length>e.length?e:t,a=r.indexOf(s);
if(-1!=a)return i=[[g,r.substring(0,a)],[m,s],[g,r.substring(a+s.length)]],t.length>e.length&&(i[0][0]=i[2][0]=f),i;if(1==s.length)return[[f,t],[g,e]];var u=l(t,e);if(u){var c=u[0],h=u[1],d=u[2],p=u[3],v=u[4],y=n(c,d),b=n(h,p);return y.concat([[m,v]],b)}return o(t,e)}function o(t,e){for(var n=t.length,i=e.length,o=Math.ceil((n+i)/2),s=o,a=2*o,l=new Array(a),u=new Array(a),c=0;a>c;c++)l[c]=-1,u[c]=-1;l[s+1]=0,u[s+1]=0;for(var h=n-i,d=h%2!=0,p=0,m=0,v=0,y=0,b=0;o>b;b++){for(var w=-b+p;b-m>=w;w+=2){var _,x=s+w;_=w==-b||w!=b&&l[x-1]<l[x+1]?l[x+1]:l[x-1]+1;for(var k=_-w;n>_&&i>k&&t.charAt(_)==e.charAt(k);)_++,k++;if(l[x]=_,_>n)m+=2;else if(k>i)p+=2;else if(d){var C=s+h-w;if(C>=0&&a>C&&-1!=u[C]){var E=n-u[C];if(_>=E)return r(t,e,_,k)}}}for(var S=-b+v;b-y>=S;S+=2){var E,C=s+S;E=S==-b||S!=b&&u[C-1]<u[C+1]?u[C+1]:u[C-1]+1;for(var $=E-S;n>E&&i>$&&t.charAt(n-E-1)==e.charAt(i-$-1);)E++,$++;if(u[C]=E,E>n)y+=2;else if($>i)v+=2;else if(!d){var x=s+h-S;if(x>=0&&a>x&&-1!=l[x]){var _=l[x],k=s+_-x;if(E=n-E,_>=E)return r(t,e,_,k)}}}}return[[f,t],[g,e]]}function r(t,e,i,o){var r=t.substring(0,i),s=e.substring(0,o),a=t.substring(i),l=e.substring(o),u=n(r,s),c=n(a,l);return u.concat(c)}function s(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,i=Math.min(t.length,e.length),o=i,r=0;o>n;)t.substring(r,o)==e.substring(r,o)?(n=o,r=n):i=o,o=Math.floor((i-n)/2+n);return o}function a(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,i=Math.min(t.length,e.length),o=i,r=0;o>n;)t.substring(t.length-o,t.length-r)==e.substring(e.length-o,e.length-r)?(n=o,r=n):i=o,o=Math.floor((i-n)/2+n);return o}function l(t,e){function n(t,e,n){for(var i,o,r,l,u=t.substring(n,n+Math.floor(t.length/4)),c=-1,h="";-1!=(c=e.indexOf(u,c+1));){var d=s(t.substring(n),e.substring(c)),p=a(t.substring(0,n),e.substring(0,c));h.length<p+d&&(h=e.substring(c-p,c)+e.substring(c,c+d),i=t.substring(0,n-p),o=t.substring(n+d),r=e.substring(0,c-p),l=e.substring(c+d))}return 2*h.length>=t.length?[i,o,r,l,h]:null}var i=t.length>e.length?t:e,o=t.length>e.length?e:t;if(i.length<4||2*o.length<i.length)return null;var r,l=n(i,o,Math.ceil(i.length/4)),u=n(i,o,Math.ceil(i.length/2));if(!l&&!u)return null;r=u?l&&l[4].length>u[4].length?l:u:l;var c,h,d,p;return t.length>e.length?(c=r[0],h=r[1],d=r[2],p=r[3]):(d=r[0],p=r[1],c=r[2],h=r[3]),[c,h,d,p,r[4]]}function u(t){t.push([m,""]);for(var e,n=0,i=0,o=0,r="",l="";n<t.length;)switch(t[n][0]){case g:o++,l+=t[n][1],n++;break;case f:i++,r+=t[n][1],n++;break;case m:i+o>1?(0!==i&&0!==o&&(e=s(l,r),0!==e&&(n-i-o>0&&t[n-i-o-1][0]==m?t[n-i-o-1][1]+=l.substring(0,e):(t.splice(0,0,[m,l.substring(0,e)]),n++),l=l.substring(e),r=r.substring(e)),0!==(e=a(l,r))&&(t[n][1]=l.substring(l.length-e)+t[n][1],l=l.substring(0,l.length-e),r=r.substring(0,r.length-e))),0===i?t.splice(n-o,i+o,[g,l]):0===o?t.splice(n-i,i+o,[f,r]):t.splice(n-i-o,i+o,[f,r],[g,l]),n=n-i-o+(i?1:0)+(o?1:0)+1):0!==n&&t[n-1][0]==m?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,o=0,i=0,r="",l=""}""===t[t.length-1][1]&&t.pop();var c=!1;for(n=1;n<t.length-1;)t[n-1][0]==m&&t[n+1][0]==m&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)==t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),c=!0):t[n][1].substring(0,t[n+1][1].length)==t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),c=!0)),n++;c&&u(t)}function c(t,e){if(0===e)return[m,t];for(var n=0,i=0;i<t.length;i++){var o=t[i];if(o[0]===f||o[0]===m){var r=n+o[1].length;if(e===r)return[i+1,t];if(r>e){t=t.slice();var s=e-n,a=[o[0],o[1].slice(0,s)],l=[o[0],o[1].slice(s)];return t.splice(i,1,a,l),[i+1,t]}n=r}}throw new Error("cursor_pos is out of bounds!")}function h(t,e){var n=c(t,e),i=n[1],o=n[0],r=i[o],s=i[o+1];if(null==r)return t;if(r[0]!==m)return t;if(null!=s&&r[1]+s[1]===s[1]+r[1])return i.splice(o,2,s,r),p(i,o,2);if(null!=s&&0===s[1].indexOf(r[1])){i.splice(o,2,[s[0],r[1]],[0,r[1]]);var a=s[1].slice(r[1].length);return a.length>0&&i.splice(o+2,0,[s[0],a]),p(i,o,3)}return t}function d(t){for(var e=!1,n=function(t){return t.charCodeAt(0)>=56320&&t.charCodeAt(0)<=57343},i=2;i<t.length;i+=1)t[i-2][0]===m&&function(t){return t.charCodeAt(t.length-1)>=55296&&t.charCodeAt(t.length-1)<=56319}(t[i-2][1])&&t[i-1][0]===f&&n(t[i-1][1])&&t[i][0]===g&&n(t[i][1])&&(e=!0,t[i-1][1]=t[i-2][1].slice(-1)+t[i-1][1],t[i][1]=t[i-2][1].slice(-1)+t[i][1],t[i-2][1]=t[i-2][1].slice(0,-1));if(!e)return t;for(var o=[],i=0;i<t.length;i+=1)t[i][1].length>0&&o.push(t[i]);return o}function p(t,e,n){for(var i=e+n-1;i>=0&&i>=e-1;i--)if(i+1<t.length){var o=t[i],r=t[i+1];o[0]===r[1]&&t.splice(i,2,[o[0],o[1]+r[1]])}return t}var f=-1,g=1,m=0,v=n;v.INSERT=g,v.DELETE=f,v.EQUAL=m,t.exports=v},function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}e=t.exports="function"==typeof Object.keys?Object.keys:n,e.shim=n},function(t,e){function n(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function i(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var o="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();e=t.exports=o?n:i,e.supported=n,e.unsupported=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){return Object.keys(e).reduce(function(n,i){return null==t[i]?n:(e[i]===t[i]?n[i]=e[i]:Array.isArray(e[i])?e[i].indexOf(t[i])<0&&(n[i]=e[i].concat([t[i]])):n[i]=[e[i],t[i]],n)},{})}function a(t){return t.reduce(function(t,e){if(1===e.insert){var n=S["default"](e.attributes);return delete n.image,t.insert({image:e.attributes.image},n)}if(null==e.attributes||!0!==e.attributes.list&&!0!==e.attributes.bullet||(e=S["default"](e),e.attributes.list?e.attributes.list="ordered":(e.attributes.list="bullet",delete e.attributes.bullet)),"string"==typeof e.insert){var i=e.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return t.insert(i,e.attributes)}return t.push(e)},new d["default"])}Object.defineProperty(e,"__esModule",{value:!0});var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=function(){function t(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&a["return"]&&a["return"]()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),h=n(4),d=i(h),p=n(20),f=i(p),g=n(0),m=i(g),v=n(13),y=i(v),b=n(31),w=i(b),_=n(3),x=i(_),k=n(14),C=i(k),E=n(21),S=i(E),$=n(12),T=i($),O=n(2),A=i(O),P=/^[ -~]*$/,L=function(){function t(e){r(this,t),this.scroll=e,this.delta=this.getDelta()}return c(t,[{key:"applyDelta",value:function(t){var e=this,n=!1;this.scroll.update();var i=this.scroll.length();return this.scroll.batchStart(),t=a(t),t.reduce(function(t,o){var r=o.retain||o["delete"]||o.insert.length||1,s=o.attributes||{};if(null!=o.insert){if("string"==typeof o.insert){var a=o.insert;a.endsWith("\n")&&n&&(n=!1,a=a.slice(0,-1)),t>=i&&!a.endsWith("\n")&&(n=!0),e.scroll.insertAt(t,a);var c=e.scroll.line(t),h=u(c,2),d=h[0],p=h[1],g=A["default"]({},_.bubbleFormats(d));if(d instanceof x["default"]){var v=d.descendant(m["default"].Leaf,p),y=u(v,1),b=y[0];g=A["default"](g,_.bubbleFormats(b))}s=f["default"].attributes.diff(g,s)||{}}else if("object"===l(o.insert)){var w=Object.keys(o.insert)[0];if(null==w)return t;e.scroll.insertAt(t,w,o.insert[w])}i+=r}return Object.keys(s).forEach(function(n){e.scroll.formatAt(t,r,n,s[n])}),t+r},0),t.reduce(function(t,n){return"number"==typeof n["delete"]?(e.scroll.deleteAt(t,n["delete"]),t):t+(n.retain||n.insert.length||1)},0),this.scroll.batchEnd(),this.update(t)}},{key:"deleteText",value:function(t,e){return this.scroll.deleteAt(t,e),this.update((new d["default"]).retain(t)["delete"](e))}},{key:"formatLine",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.scroll.update(),Object.keys(i).forEach(function(o){if(null==n.scroll.whitelist||n.scroll.whitelist[o]){var r=n.scroll.lines(t,Math.max(e,1)),s=e;r.forEach(function(e){var r=e.length();if(e instanceof y["default"]){var a=t-e.offset(n.scroll),l=e.newlineIndex(a+s)-a+1;e.formatAt(a,l,o,i[o])}else e.format(o,i[o]);s-=r})}}),this.scroll.optimize(),this.update((new d["default"]).retain(t).retain(e,S["default"](i)))}},{key:"formatText",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(i).forEach(function(o){n.scroll.formatAt(t,e,o,i[o])}),this.update((new d["default"]).retain(t).retain(e,S["default"](i)))}},{key:"getContents",value:function(t,e){return this.delta.slice(t,t+e)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(t,e){return t.concat(e.delta())},new d["default"])}},{key:"getFormat",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],i=[];0===e?this.scroll.path(t).forEach(function(t){var e=u(t,1),o=e[0];o instanceof x["default"]?n.push(o):o instanceof m["default"].Leaf&&i.push(o)}):(n=this.scroll.lines(t,e),i=this.scroll.descendants(m["default"].Leaf,t,e));var o=[n,i].map(function(t){if(0===t.length)return{};for(var e=_.bubbleFormats(t.shift());Object.keys(e).length>0;){var n=t.shift();if(null==n)return e;e=s(_.bubbleFormats(n),e)}return e});return A["default"].apply(A["default"],o)}},{key:"getText",value:function(t,e){return this.getContents(t,e).filter(function(t){return"string"==typeof t.insert}).map(function(t){return t.insert}).join("")}},{key:"insertEmbed",value:function(t,e,n){return this.scroll.insertAt(t,e,n),this.update((new d["default"]).retain(t).insert(o({},e,n)))}},{key:"insertText",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(t,e),Object.keys(i).forEach(function(o){n.scroll.formatAt(t,e.length,o,i[o])}),this.update((new d["default"]).retain(t).insert(e,S["default"](i)))}},{key:"isBlank",value:function(){if(0==this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;var t=this.scroll.children.head;return t.statics.blotName===x["default"].blotName&&!(t.children.length>1)&&t.children.head instanceof C["default"]}},{key:"removeFormat",value:function(t,e){var n=this.getText(t,e),i=this.scroll.line(t+e),o=u(i,2),r=o[0],s=o[1],a=0,l=new d["default"];null!=r&&(a=r instanceof y["default"]?r.newlineIndex(s)-s+1:r.length()-s,l=r.delta().slice(s,s+a-1).insert("\n"));var c=this.getContents(t,e+a),h=c.diff((new d["default"]).insert(n).concat(l)),p=(new d["default"]).retain(t).concat(h);return this.applyDelta(p)}},{key:"update",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=this.delta;if(1===e.length&&"characterData"===e[0].type&&e[0].target.data.match(P)&&m["default"].find(e[0].target)){var o=m["default"].find(e[0].target),r=_.bubbleFormats(o),s=o.offset(this.scroll),a=e[0].oldValue.replace(w["default"].CONTENTS,""),l=(new d["default"]).insert(a),u=(new d["default"]).insert(o.value());t=(new d["default"]).retain(s).concat(l.diff(u,n)).reduce(function(t,e){return e.insert?t.insert(e.insert,r):t.push(e)},new d["default"]),this.delta=i.compose(t)}else this.delta=this.getDelta(),t&&T["default"](i.compose(t),this.delta)||(t=i.diff(this.delta,n));return t}}]),t}();e["default"]=L},function(t,e){"use strict";function n(){}function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(){this._events=new n,this._eventsCount=0}var r=Object.prototype.hasOwnProperty,s="~";Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(s=!1)),o.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(s?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},o.prototype.listeners=function(t,e){var n=s?s+t:t,i=this._events[n];if(e)return!!i;if(!i)return[];if(i.fn)return[i.fn];for(var o=0,r=i.length,a=new Array(r);r>o;o++)a[o]=i[o].fn;return a},o.prototype.emit=function(t,e,n,i,o,r){var a=s?s+t:t;if(!this._events[a])return!1;var l,u,c=this._events[a],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,n),!0;case 4:return c.fn.call(c.context,e,n,i),!0;case 5:return c.fn.call(c.context,e,n,i,o),!0;case 6:return c.fn.call(c.context,e,n,i,o,r),!0}for(u=1,l=new Array(h-1);h>u;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var d,p=c.length;for(u=0;p>u;u++)switch(c[u].once&&this.removeListener(t,c[u].fn,void 0,!0),h){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,e);break;case 3:c[u].fn.call(c[u].context,e,n);break;case 4:c[u].fn.call(c[u].context,e,n,i);break;default:if(!l)for(d=1,l=new Array(h-1);h>d;d++)l[d-1]=arguments[d];c[u].fn.apply(c[u].context,l)}}return!0},o.prototype.on=function(t,e,n){var o=new i(e,n||this),r=s?s+t:t;return this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],o]:this._events[r].push(o):(this._events[r]=o,this._eventsCount++),this},o.prototype.once=function(t,e,n){var o=new i(e,n||this,!0),r=s?s+t:t;return this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],o]:this._events[r].push(o):(this._events[r]=o,this._eventsCount++),this},o.prototype.removeListener=function(t,e,i,o){var r=s?s+t:t;if(!this._events[r])return this;if(!e)return 0==--this._eventsCount?this._events=new n:delete this._events[r],this;var a=this._events[r];if(a.fn)a.fn!==e||o&&!a.once||i&&a.context!==i||(0==--this._eventsCount?this._events=new n:delete this._events[r]);else{for(var l=0,u=[],c=a.length;c>l;l++)(a[l].fn!==e||o&&!a[l].once||i&&a[l].context!==i)&&u.push(a[l]);u.length?this._events[r]=1===u.length?u[0]:u:0==--this._eventsCount?this._events=new n:delete this._events[r]}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=s?s+t:t,this._events[e]&&(0==--this._eventsCount?this._events=new n:delete this._events[e])):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=s,o.EventEmitter=o,void 0!==t&&(t.exports=o)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){return t instanceof m["default"]||t instanceof g.BlockEmbed}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&a["return"]&&a["return"]()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c=function C(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:C(o,e,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},h=n(0),d=i(h),p=n(9),f=i(p),g=n(3),m=i(g),v=n(14),y=i(v),b=n(13),w=i(b),_=n(23),x=i(_),k=function(t){function e(t,n){o(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.emitter=n.emitter,Array.isArray(n.whitelist)&&(i.whitelist=n.whitelist.reduce(function(t,e){return t[e]=!0,t},{})),i.domNode.addEventListener("DOMNodeInserted",function(){}),i.optimize(),i.enable(),i}return s(e,t),u(e,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(t,n){var i=this.line(t),o=l(i,2),r=o[0],s=o[1],a=this.line(t+n),u=l(a,1),h=u[0];if(c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"deleteAt",this).call(this,t,n),null!=h&&r!==h&&s>0){if(r instanceof g.BlockEmbed||h instanceof g.BlockEmbed)return void this.optimize();if(r instanceof w["default"]){var d=r.newlineIndex(r.length(),!0);if(d>-1&&(r=r.split(d+1))===h)return void this.optimize()}else if(h instanceof w["default"]){var p=h.newlineIndex(0);p>-1&&h.split(p+1)}var f=h.children.head instanceof y["default"]?null:h.children.head;r.moveChildren(h,f),r.remove()}this.optimize()}},{key:"enable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",t)}},{key:"formatAt",value:function(t,n,i,o){(null==this.whitelist||this.whitelist[i])&&(c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"formatAt",this).call(this,t,n,i,o),this.optimize())}},{key:"insertAt",value:function(t,n,i){if(null==i||null==this.whitelist||this.whitelist[n]){if(t>=this.length())if(null==i||null==d["default"].query(n,d["default"].Scope.BLOCK)){var o=d["default"].create(this.statics.defaultChild);this.appendChild(o),null==i&&n.endsWith("\n")&&(n=n.slice(0,-1)),o.insertAt(0,n,i)}else{var r=d["default"].create(n,i);this.appendChild(r)}else c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertAt",this).call(this,t,n,i);this.optimize()}}},{key:"insertBefore",value:function(t,n){if(t.statics.scope===d["default"].Scope.INLINE_BLOT){var i=d["default"].create(this.statics.defaultChild);i.appendChild(t),t=i}c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertBefore",this).call(this,t,n)}},{key:"leaf",value:function(t){return this.path(t).pop()||[null,-1]}},{key:"line",value:function(t){return t===this.length()?this.line(t-1):this.descendant(a,t)}},{key:"lines",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return function n(t,e,i){var o=[],r=i;return t.children.forEachAt(e,i,function(t,e,i){a(t)?o.push(t):t instanceof d["default"].Container&&(o=o.concat(n(t,e,r))),r-=i}),o}(this,t,e)}},{key:"optimize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!0!==this.batch&&(c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t,n),t.length>0&&this.emitter.emit(f["default"].events.SCROLL_OPTIMIZE,t,n))}},{key:"path",value:function(t){return c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"path",this).call(this,t).slice(1)}},{key:"update",value:function(t){if(!0!==this.batch){var n=f["default"].sources.USER;"string"==typeof t&&(n=t),Array.isArray(t)||(t=this.observer.takeRecords()),t.length>0&&this.emitter.emit(f["default"].events.SCROLL_BEFORE_UPDATE,n,t),c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this,t.concat([])),t.length>0&&this.emitter.emit(f["default"].events.SCROLL_UPDATE,n,t)}}}]),e}(d["default"].Scroll);k.blotName="scroll",k.className="ql-editor",k.tagName="DIV",k.defaultChild="block",k.allowedChildren=[m["default"],g.BlockEmbed,x["default"]],e["default"]=k},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(t,e,n){return"object"===(void 0===e?"undefined":k(e))?Object.keys(e).reduce(function(t,n){return l(t,n,e[n])},t):t.reduce(function(t,i){return i.attributes&&i.attributes[e]?t.push(i):t.insert(i.insert,$["default"]({},o({},e,n),i.attributes))},new O["default"])}function u(t){return t.nodeType!==Node.ELEMENT_NODE?{}:t["__ql-computed-style"]||(t["__ql-computed-style"]=window.getComputedStyle(t))}function c(t,e){for(var n="",i=t.ops.length-1;i>=0&&n.length<e.length;--i){var o=t.ops[i];if("string"!=typeof o.insert)break;n=o.insert+n}return n.slice(-1*e.length)===e}function h(t){return 0!==t.childNodes.length&&["block","list-item"].indexOf(u(t).display)>-1}function d(t,e,n){return t.nodeType===t.TEXT_NODE?n.reduce(function(e,n){return n(t,e)},new O["default"]):t.nodeType===t.ELEMENT_NODE?[].reduce.call(t.childNodes||[],function(i,o){var r=d(o,e,n);return o.nodeType===t.ELEMENT_NODE&&(r=e.reduce(function(t,e){return e(o,t)},r),r=(o[V]||[]).reduce(function(t,e){return e(o,t)},r)),i.concat(r)},new O["default"]):new O["default"]}function p(t,e,n){return l(n,t,!0)}function f(t,e){var n=P["default"].Attributor.Attribute.keys(t),i=P["default"].Attributor.Class.keys(t),o=P["default"].Attributor.Style.keys(t),r={};return n.concat(i).concat(o).forEach(function(e){var n=P["default"].query(e,P["default"].Scope.ATTRIBUTE);null!=n&&(r[n.attrName]=n.value(t),r[n.attrName])||(n=X[e],null!=n&&n.attrName===e&&(r[n.attrName]=n.value(t)||void 0),null!=(n=K[e])&&n.attrName===e&&(n=K[e],r[n.attrName]=n.value(t)||void 0))}),Object.keys(r).length>0&&(e=l(e,r)),e}function g(t,e){var n=P["default"].query(t);if(null==n)return e;if(n.prototype instanceof P["default"].Embed){var i={},o=n.value(t);null!=o&&(i[n.blotName]=o,e=(new O["default"]).insert(i,n.formats(t)))}else"function"==typeof n.formats&&(e=l(e,n.blotName,n.formats(t)));return e}function m(t,e){return c(e,"\n")||e.insert("\n"),e}function v(){return new O["default"]}function y(t,e){var n=P["default"].query(t);if(null==n||"list-item"!==n.blotName||!c(e,"\n"))return e;for(var i=-1,o=t.parentNode;!o.classList.contains("ql-clipboard");)"list"===(P["default"].query(o)||{}).blotName&&(i+=1),o=o.parentNode;return 0>=i?e:e.compose((new O["default"]).retain(e.length()-1).retain(1,{indent:i}))}function b(t,e){return c(e,"\n")||(h(t)||e.length()>0&&t.nextSibling&&h(t.nextSibling))&&e.insert("\n"),e}function w(t,e){if(h(t)&&null!=t.nextElementSibling&&!c(e,"\n\n")){var n=t.offsetHeight+parseFloat(u(t).marginTop)+parseFloat(u(t).marginBottom);t.nextElementSibling.offsetTop>t.offsetTop+1.5*n&&e.insert("\n")}return e}function _(t,e){var n={},i=t.style||{};return i.fontStyle&&"italic"===u(t).fontStyle&&(n.italic=!0),i.fontWeight&&(u(t).fontWeight.startsWith("bold")||parseInt(u(t).fontWeight)>=700)&&(n.bold=!0),Object.keys(n).length>0&&(e=l(e,n)),parseFloat(i.textIndent||0)>0&&(e=(new O["default"]).insert("	").concat(e)),e}function x(t,e){var n=t.data;if("O:P"===t.parentNode.tagName)return e.insert(n.trim());if(0===n.trim().length&&t.parentNode.classList.contains("ql-clipboard"))return e;if(!u(t.parentNode).whiteSpace.startsWith("pre")){var i=function(t,e){return e=e.replace(/[^\u00a0]/g,""),e.length<1&&t?" ":e};n=n.replace(/\r\n/g," ").replace(/\n/g," "),n=n.replace(/\s\s+/g,i.bind(i,!0)),(null==t.previousSibling&&h(t.parentNode)||null!=t.previousSibling&&h(t.previousSibling))&&(n=n.replace(/^\s+/,i.bind(i,!1))),(null==t.nextSibling&&h(t.parentNode)||null!=t.nextSibling&&h(t.nextSibling))&&(n=n.replace(/\s+$/,i.bind(i,!1)))}return e.insert(n)}Object.defineProperty(e,"__esModule",{value:!0}),e.matchText=e.matchSpacing=e.matchNewline=e.matchBlot=e.matchAttributor=e["default"]=void 0;var k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C=function(){function t(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&a["return"]&&a["return"]()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),E=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),S=n(2),$=i(S),T=n(4),O=i(T),A=n(0),P=i(A),L=n(6),N=i(L),M=n(10),j=i(M),D=n(7),I=i(D),q=n(33),R=n(34),F=n(13),B=i(F),H=n(25),z=n(35),W=n(36),U=n(37),Y=j["default"]("quill:clipboard"),V="__ql-matcher",G=[[Node.TEXT_NODE,x],[Node.TEXT_NODE,b],["br",m],[Node.ELEMENT_NODE,b],[Node.ELEMENT_NODE,g],[Node.ELEMENT_NODE,w],[Node.ELEMENT_NODE,f],[Node.ELEMENT_NODE,_],["li",y],["b",p.bind(p,"bold")],["i",p.bind(p,"italic")],["style",v]],X=[q.AlignAttribute,z.DirectionAttribute].reduce(function(t,e){return t[e.keyName]=e,t},{}),K=[q.AlignStyle,R.BackgroundStyle,H.ColorStyle,z.DirectionStyle,W.FontStyle,U.SizeStyle].reduce(function(t,e){return t[e.keyName]=e,t},{}),Z=function(t){function e(t,n){r(this,e);var i=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.quill.root.addEventListener("paste",i.onPaste.bind(i)),i.container=i.quill.addContainer("ql-clipboard"),i.container.setAttribute("contenteditable",!0),i.container.setAttribute("tabindex",-1),i.matchers=[],G.concat(i.options.matchers).forEach(function(t){var e=C(t,2),o=e[0],r=e[1];(n.matchVisual||r!==w)&&i.addMatcher(o,r)}),i}return a(e,t),E(e,[{key:"addMatcher",value:function(t,e){this.matchers.push([t,e])}},{key:"convert",value:function(t){if("string"==typeof t)return this.container.innerHTML=t.replace(/\>\r?\n +\</g,"><"),this.convert();var e=this.quill.getFormat(this.quill.selection.savedRange.index);if(e[B["default"].blotName]){var n=this.container.innerText;return this.container.innerHTML="",(new O["default"]).insert(n,o({},B["default"].blotName,e[B["default"].blotName]))}var i=this.prepareMatching(),r=C(i,2),s=r[0],a=r[1],l=d(this.container,s,a);return c(l,"\n")&&null==l.ops[l.ops.length-1].attributes&&(l=l.compose((new O["default"]).retain(l.length()-1)["delete"](1))),Y.log("convert",this.container.innerHTML,l),this.container.innerHTML="",l}},{key:"dangerouslyPasteHTML",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:N["default"].sources.API;if("string"==typeof t)return this.quill.setContents(this.convert(t),e);var i=this.convert(e);return this.quill.updateContents((new O["default"]).retain(t).concat(i),n)}},{key:"onPaste",value:function(t){var e=this;if(!t.defaultPrevented&&this.quill.isEnabled()){var n=this.quill.getSelection(),i=(new O["default"]).retain(n.index),o=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(N["default"].sources.SILENT),setTimeout(function(){i=i.concat(e.convert())["delete"](n.length),e.quill.updateContents(i,N["default"].sources.USER),e.quill.setSelection(i.length()-n.length,N["default"].sources.SILENT),e.quill.scrollingContainer.scrollTop=o,e.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var t=this,e=[],n=[];return this.matchers.forEach(function(i){var o=C(i,2),r=o[0],s=o[1];switch(r){case Node.TEXT_NODE:n.push(s);break;case Node.ELEMENT_NODE:e.push(s);break;default:[].forEach.call(t.container.querySelectorAll(r),function(t){t[V]=t[V]||[],t[V].push(s)})}}),[e,n]}}]),e}(I["default"]);Z.DEFAULTS={matchers:[],matchVisual:!0},e["default"]=Z,e.matchAttributor=f,e.matchBlot=g,e.matchNewline=b,e.matchSpacing=w,e.matchText=x},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){var e=t.ops[t.ops.length-1];return null!=e&&(null!=e.insert?"string"==typeof e.insert&&e.insert.endsWith("\n"):null!=e.attributes&&Object.keys(e.attributes).some(function(t){return null!=h["default"].query(t,h["default"].Scope.BLOCK)}))}function l(t){var e=t.reduce(function(t,e){return t+=e["delete"]||0},0),n=t.length()-e;return a(t)&&(n-=1),n}Object.defineProperty(e,"__esModule",{value:!0}),e.getLastChangeIndex=e["default"]=void 0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c=n(0),h=i(c),d=n(6),p=i(d),f=n(7),g=i(f),m=function(t){function e(t,n){o(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.lastRecorded=0,i.ignoreChange=!1,i.clear(),i.quill.on(p["default"].events.EDITOR_CHANGE,function(t,e,n,o){t!==p["default"].events.TEXT_CHANGE||i.ignoreChange||(i.options.userOnly&&o!==p["default"].sources.USER?i.transform(e):i.record(e,n))}),i.quill.keyboard.addBinding({key:"Z",shortKey:!0},i.undo.bind(i)),i.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},i.redo.bind(i)),/Win/i.test(navigator.platform)&&i.quill.keyboard.addBinding({key:"Y",shortKey:!0},i.redo.bind(i)),i}return s(e,t),u(e,[{key:"change",value:function(t,e){if(0!==this.stack[t].length){var n=this.stack[t].pop();this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(n[t],p["default"].sources.USER),this.ignoreChange=!1;var i=l(n[t]);this.quill.setSelection(i),this.stack[e].push(n)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(t,e){if(0!==t.ops.length){this.stack.redo=[];var n=this.quill.getContents().diff(e),i=Date.now();if(this.lastRecorded+this.options.delay>i&&this.stack.undo.length>0){var o=this.stack.undo.pop();n=n.compose(o.undo),t=o.redo.compose(t)}else this.lastRecorded=i;this.stack.undo.push({redo:t,undo:n}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(t){this.stack.undo.forEach(function(e){e.undo=t.transform(e.undo,!0),e.redo=t.transform(e.redo,!0)}),this.stack.redo.forEach(function(e){e.undo=t.transform(e.undo,!0),e.redo=t.transform(e.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),e}(g["default"]);m.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},e["default"]=m,e.getLastChangeIndex=l},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e;
}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.IndentClass=void 0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function d(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:d(o,e,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},l=n(0),u=function(t){return t&&t.__esModule?t:{"default":t}}(l),c=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return r(e,t),s(e,[{key:"add",value:function(t,n){if("+1"===n||"-1"===n){var i=this.value(t)||0;n="+1"===n?i+1:i-1}return 0===n?(this.remove(t),!0):a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"add",this).call(this,t,n)}},{key:"canAdd",value:function(t,n){return a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"canAdd",this).call(this,t,n)||a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"canAdd",this).call(this,t,parseInt(n))}},{key:"value",value:function(t){return parseInt(a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"value",this).call(this,t))||void 0}}]),e}(u["default"].Attributor.Class),h=new c("indent","ql-indent",{scope:u["default"].Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});e.IndentClass=h},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(3),a=function(t){return t&&t.__esModule?t:{"default":t}}(s),l=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return r(e,t),e}(a["default"]);l.blotName="blockquote",l.tagName="blockquote",e["default"]=l},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(3),l=function(t){return t&&t.__esModule?t:{"default":t}}(a),u=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return r(e,t),s(e,null,[{key:"formats",value:function(t){return this.tagName.indexOf(t.tagName)+1}}]),e}(l["default"]);u.blotName="header",u.tagName=["H1","H2","H3","H4","H5","H6"],e["default"]=u},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=e.ListItem=void 0;var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=function y(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:y(o,e,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},c=n(0),h=i(c),d=n(3),p=i(d),f=n(23),g=i(f),m=function(t){function e(){return r(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),l(e,[{key:"format",value:function(t,n){t!==v.blotName||n?u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,n):this.replaceWith(h["default"].create(this.statics.scope))}},{key:"remove",value:function(){null==this.prev&&null==this.next?this.parent.remove():u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(t,n){return this.parent.isolate(this.offset(this.parent),this.length()),t===this.parent.statics.blotName?(this.parent.replaceWith(t,n),this):(this.parent.unwrap(),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"replaceWith",this).call(this,t,n))}}],[{key:"formats",value:function(t){return t.tagName===this.tagName?void 0:u(e.__proto__||Object.getPrototypeOf(e),"formats",this).call(this,t)}}]),e}(p["default"]);m.blotName="list-item",m.tagName="LI";var v=function(t){function e(t){r(this,e);var n=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),i=function(e){if(e.target.parentNode===t){var i=n.statics.formats(t),o=h["default"].find(e.target);"checked"===i?o.format("list","unchecked"):"unchecked"===i&&o.format("list","checked")}};return t.addEventListener("touchstart",i),t.addEventListener("mousedown",i),n}return a(e,t),l(e,null,[{key:"create",value:function(t){var n="ordered"===t?"OL":"UL",i=u(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,n);return"checked"!==t&&"unchecked"!==t||i.setAttribute("data-checked","checked"===t),i}},{key:"formats",value:function(t){return"OL"===t.tagName?"ordered":"UL"===t.tagName?t.hasAttribute("data-checked")?"true"===t.getAttribute("data-checked")?"checked":"unchecked":"bullet":void 0}}]),l(e,[{key:"format",value:function(t,e){this.children.length>0&&this.children.tail.format(t,e)}},{key:"formats",value:function(){return o({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(t,n){if(t instanceof m)u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertBefore",this).call(this,t,n);else{var i=null==n?this.length():n.offset(this),o=this.split(i);o.parent.insertBefore(t,o)}}},{key:"optimize",value:function(t){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t);var n=this.next;null!=n&&n.prev===this&&n.statics.blotName===this.statics.blotName&&n.domNode.tagName===this.domNode.tagName&&n.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(n.moveChildren(this),n.remove())}},{key:"replace",value:function(t){if(t.statics.blotName!==this.statics.blotName){var n=h["default"].create(this.statics.defaultChild);t.moveChildren(n),this.appendChild(n)}u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"replace",this).call(this,t)}}]),e}(g["default"]);v.blotName="list",v.scope=h["default"].Scope.BLOCK_BLOT,v.tagName=["OL","UL"],v.defaultChild="list-item",v.allowedChildren=[m],e.ListItem=m,e["default"]=v},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(39),a=function(t){return t&&t.__esModule?t:{"default":t}}(s),l=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return r(e,t),e}(a["default"]);l.blotName="italic",l.tagName=["EM","I"],e["default"]=l},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function h(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:h(o,e,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},l=n(5),u=function(t){return t&&t.__esModule?t:{"default":t}}(l),c=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return r(e,t),s(e,null,[{key:"create",value:function(t){return"super"===t?document.createElement("sup"):"sub"===t?document.createElement("sub"):a(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t)}},{key:"formats",value:function(t){return"SUB"===t.tagName?"sub":"SUP"===t.tagName?"super":void 0}}]),e}(u["default"]);c.blotName="script",c.tagName=["SUB","SUP"],e["default"]=c},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(5),a=function(t){return t&&t.__esModule?t:{"default":t}}(s),l=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return r(e,t),e}(a["default"]);l.blotName="strike",l.tagName="S",e["default"]=l},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(5),a=function(t){return t&&t.__esModule?t:{"default":t}}(s),l=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return r(e,t),e}(a["default"]);l.blotName="underline",l.tagName="U",e["default"]=l},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function p(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:p(o,e,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},l=n(0),u=function(t){return t&&t.__esModule?t:{"default":t}}(l),c=n(15),h=["alt","height","width"],d=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return r(e,t),s(e,[{key:"format",value:function(t,n){h.indexOf(t)>-1?n?this.domNode.setAttribute(t,n):this.domNode.removeAttribute(t):a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,n)}}],[{key:"create",value:function(t){var n=a(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t);return"string"==typeof t&&n.setAttribute("src",this.sanitize(t)),n}},{key:"formats",value:function(t){return h.reduce(function(e,n){return t.hasAttribute(n)&&(e[n]=t.getAttribute(n)),e},{})}},{key:"match",value:function(t){return/\.(jpe?g|gif|png)$/.test(t)||/^data:image\/.+;base64/.test(t)}},{key:"sanitize",value:function(t){return c.sanitize(t,["http","https","data"])?t:"//:0"}},{key:"value",value:function(t){return t.getAttribute("src")}}]),e}(u["default"].Embed);d.blotName="image",d.tagName="IMG",e["default"]=d},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function p(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:p(o,e,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},l=n(3),u=n(15),c=function(t){return t&&t.__esModule?t:{"default":t}}(u),h=["height","width"],d=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return r(e,t),s(e,[{key:"format",value:function(t,n){h.indexOf(t)>-1?n?this.domNode.setAttribute(t,n):this.domNode.removeAttribute(t):a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,n)}}],[{key:"create",value:function(t){var n=a(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t);return n.setAttribute("frameborder","0"),n.setAttribute("allowfullscreen",!0),n.setAttribute("src",this.sanitize(t)),n}},{key:"formats",value:function(t){return h.reduce(function(e,n){return t.hasAttribute(n)&&(e[n]=t.getAttribute(n)),e},{})}},{key:"sanitize",value:function(t){return c["default"].sanitize(t)}},{key:"value",value:function(t){return t.getAttribute("src")}}]),e}(l.BlockEmbed);d.blotName="video",d.className="ql-video",d.tagName="IFRAME",e["default"]=d},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=e.FormulaBlot=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function v(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:v(o,e,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},u=n(24),c=i(u),h=n(6),d=i(h),p=n(7),f=i(p),g=function(t){function e(){return o(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),a(e,null,[{key:"create",value:function(t){var n=l(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t);return"string"==typeof t&&(window.katex.render(t,n,{throwOnError:!1,errorColor:"#f00"}),n.setAttribute("data-value",t)),n}},{key:"value",value:function(t){return t.getAttribute("data-value")}}]),e}(c["default"]);g.blotName="formula",g.className="ql-formula",g.tagName="SPAN";var m=function(t){function e(){o(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(null==window.katex)throw new Error("Formula module requires KaTeX.");return t}return s(e,t),a(e,null,[{key:"register",value:function(){d["default"].register(g,!0)}}]),e}(f["default"]);e.FormulaBlot=g,e["default"]=m},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=e.CodeToken=e.CodeBlock=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function w(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:w(o,e,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},u=n(0),c=i(u),h=n(6),d=i(h),p=n(7),f=i(p),g=n(13),m=i(g),v=function(t){function e(){return o(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),a(e,[{key:"replaceWith",value:function(t){this.domNode.textContent=this.domNode.textContent,this.attach(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"replaceWith",this).call(this,t)}},{key:"highlight",value:function(t){var e=this.domNode.textContent;this.cachedText!==e&&((e.trim().length>0||null==this.cachedText)&&(this.domNode.innerHTML=t(e),this.domNode.normalize(),this.attach()),this.cachedText=e)}}]),e}(m["default"]);v.className="ql-syntax";var y=new c["default"].Attributor.Class("token","hljs",{scope:c["default"].Scope.INLINE}),b=function(t){function e(t,n){o(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));if("function"!=typeof i.options.highlight)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var s=null;return i.quill.on(d["default"].events.SCROLL_OPTIMIZE,function(){clearTimeout(s),s=setTimeout(function(){i.highlight(),s=null},i.options.interval)}),i.highlight(),i}return s(e,t),a(e,null,[{key:"register",value:function(){d["default"].register(y,!0),d["default"].register(v,!0)}}]),a(e,[{key:"highlight",value:function(){var t=this;if(!this.quill.selection.composing){this.quill.update(d["default"].sources.USER);var e=this.quill.getSelection();this.quill.scroll.descendants(v).forEach(function(e){e.highlight(t.options.highlight)}),this.quill.update(d["default"].sources.SILENT),null!=e&&this.quill.setSelection(e,d["default"].sources.SILENT)}}}]),e}(f["default"]);b.DEFAULTS={highlight:function(){return null==window.hljs?null:function(t){return window.hljs.highlightAuto(t).value}}(),interval:1e3},e.CodeBlock=v,e.CodeToken=y,e["default"]=b},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(t,e,n){var i=document.createElement("button");i.setAttribute("type","button"),i.classList.add("ql-"+e),null!=n&&(i.value=n),t.appendChild(i)}function u(t,e){Array.isArray(e[0])||(e=[e]),e.forEach(function(e){var n=document.createElement("span");n.classList.add("ql-formats"),e.forEach(function(t){if("string"==typeof t)l(n,t);else{var e=Object.keys(t)[0],i=t[e];Array.isArray(i)?c(n,e,i):l(n,e,i)}}),t.appendChild(n)})}function c(t,e,n){var i=document.createElement("select");i.classList.add("ql-"+e),n.forEach(function(t){var e=document.createElement("option");!1!==t?e.setAttribute("value",t):e.setAttribute("selected","selected"),i.appendChild(e)}),t.appendChild(i)}Object.defineProperty(e,"__esModule",{value:!0}),e.addControls=e["default"]=void 0;var h=function(){function t(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&a["return"]&&a["return"]()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),p=n(4),f=i(p),g=n(0),m=i(g),v=n(6),y=i(v),b=n(10),w=i(b),_=n(7),x=i(_),k=w["default"]("quill:toolbar"),C=function(t){function e(t,n){r(this,e);var i=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));if(Array.isArray(i.options.container)){var o=document.createElement("div");u(o,i.options.container),t.container.parentNode.insertBefore(o,t.container),i.container=o}else"string"==typeof i.options.container?i.container=document.querySelector(i.options.container):i.container=i.options.container;if(!(i.container instanceof HTMLElement)){var a;return a=k.error("Container required for toolbar",i.options),s(i,a)}return i.container.classList.add("ql-toolbar"),i.controls=[],i.handlers={},Object.keys(i.options.handlers).forEach(function(t){i.addHandler(t,i.options.handlers[t])}),[].forEach.call(i.container.querySelectorAll("button, select"),function(t){i.attach(t)}),i.quill.on(y["default"].events.EDITOR_CHANGE,function(t,e){t===y["default"].events.SELECTION_CHANGE&&i.update(e)}),i.quill.on(y["default"].events.SCROLL_OPTIMIZE,function(){var t=i.quill.selection.getRange(),e=h(t,1),n=e[0];i.update(n)}),i}return a(e,t),d(e,[{key:"addHandler",value:function(t,e){this.handlers[t]=e}},{key:"attach",value:function(t){var e=this,n=[].find.call(t.classList,function(t){return 0===t.indexOf("ql-")});if(n){if(n=n.slice("ql-".length),"BUTTON"===t.tagName&&t.setAttribute("type","button"),null==this.handlers[n]){if(null!=this.quill.scroll.whitelist&&null==this.quill.scroll.whitelist[n])return void k.warn("ignoring attaching to disabled format",n,t);if(null==m["default"].query(n))return void k.warn("ignoring attaching to nonexistent format",n,t)}var i="SELECT"===t.tagName?"change":"click";t.addEventListener(i,function(i){var r=void 0;if("SELECT"===t.tagName){if(t.selectedIndex<0)return;var s=t.options[t.selectedIndex];r=!s.hasAttribute("selected")&&(s.value||!1)}else r=!t.classList.contains("ql-active")&&(t.value||!t.hasAttribute("value")),i.preventDefault();e.quill.focus();var a=e.quill.selection.getRange(),l=h(a,1),u=l[0];if(null!=e.handlers[n])e.handlers[n].call(e,r);else if(m["default"].query(n).prototype instanceof m["default"].Embed){if(!(r=prompt("Enter "+n)))return;e.quill.updateContents((new f["default"]).retain(u.index)["delete"](u.length).insert(o({},n,r)),y["default"].sources.USER)}else e.quill.format(n,r,y["default"].sources.USER);e.update(u)}),this.controls.push([n,t])}}},{key:"update",value:function(t){var e=null==t?{}:this.quill.getFormat(t);this.controls.forEach(function(n){var i=h(n,2),o=i[0],r=i[1];if("SELECT"===r.tagName){var s=void 0;if(null==t)s=null;else if(null==e[o])s=r.querySelector("option[selected]");else if(!Array.isArray(e[o])){var a=e[o];"string"==typeof a&&(a=a.replace(/\"/g,'\\"')),s=r.querySelector('option[value="'+a+'"]')}null==s?(r.value="",r.selectedIndex=-1):s.selected=!0}else if(null==t)r.classList.remove("ql-active");else if(r.hasAttribute("value")){var l=e[o]===r.getAttribute("value")||null!=e[o]&&e[o].toString()===r.getAttribute("value")||null==e[o]&&!r.getAttribute("value");r.classList.toggle("ql-active",l)}else r.classList.toggle("ql-active",null!=e[o])})}}]),e}(x["default"]);C.DEFAULTS={},C.DEFAULTS={container:null,handlers:{clean:function(){var t=this,e=this.quill.getSelection();if(null!=e)if(0==e.length){var n=this.quill.getFormat();Object.keys(n).forEach(function(e){null!=m["default"].query(e,m["default"].Scope.INLINE)&&t.quill.format(e,!1)})}else this.quill.removeFormat(e,y["default"].sources.USER)},direction:function(t){var e=this.quill.getFormat().align;"rtl"===t&&null==e?this.quill.format("align","right",y["default"].sources.USER):t||"right"!==e||this.quill.format("align",!1,y["default"].sources.USER),this.quill.format("direction",t,y["default"].sources.USER)},indent:function(t){var e=this.quill.getSelection(),n=this.quill.getFormat(e),i=parseInt(n.indent||0);if("+1"===t||"-1"===t){var o="+1"===t?1:-1;"rtl"===n.direction&&(o*=-1),this.quill.format("indent",i+o,y["default"].sources.USER)}},link:function(t){!0===t&&(t=prompt("Enter link URL:")),this.quill.format("link",t,y["default"].sources.USER)},list:function(t){var e=this.quill.getSelection(),n=this.quill.getFormat(e);"check"===t?"checked"===n.list||"unchecked"===n.list?this.quill.format("list",!1,y["default"].sources.USER):this.quill.format("list","unchecked",y["default"].sources.USER):this.quill.format("list",t,y["default"].sources.USER)}}},e["default"]=C,e.addControls=u},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>';
},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(t,e){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(t,e){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(t,e){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(t,e){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=e.BubbleTooltip=void 0;var a=function _(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:_(o,e,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(2),c=i(u),h=n(9),d=i(h),p=n(44),f=i(p),g=n(22),m=n(26),v=i(m),y=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],b=function(t){function e(t,n){o(this,e),null!=n.modules.toolbar&&null==n.modules.toolbar.container&&(n.modules.toolbar.container=y);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.quill.container.classList.add("ql-bubble"),i}return s(e,t),l(e,[{key:"extendToolbar",value:function(t){this.tooltip=new w(this.quill,this.options.bounds),this.tooltip.root.appendChild(t.container),this.buildButtons([].slice.call(t.container.querySelectorAll("button")),v["default"]),this.buildPickers([].slice.call(t.container.querySelectorAll("select")),v["default"])}}]),e}(f["default"]);b.DEFAULTS=c["default"](!0,{},f["default"].DEFAULTS,{modules:{toolbar:{handlers:{link:function(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var w=function(t){function e(t,n){o(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.quill.on(d["default"].events.EDITOR_CHANGE,function(t,e,n,o){if(t===d["default"].events.SELECTION_CHANGE)if(null!=e&&e.length>0&&o===d["default"].sources.USER){i.show(),i.root.style.left="0px",i.root.style.width="",i.root.style.width=i.root.offsetWidth+"px";var r=i.quill.getLines(e.index,e.length);if(1===r.length)i.position(i.quill.getBounds(e));else{var s=r[r.length-1],a=i.quill.getIndex(s),l=Math.min(s.length()-1,e.index+e.length-a),u=i.quill.getBounds(new g.Range(a,l));i.position(u)}}else document.activeElement!==i.textbox&&i.quill.hasFocus()&&i.hide()}),i}return s(e,t),l(e,[{key:"listen",value:function(){var t=this;a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){t.root.classList.remove("ql-editing")}),this.quill.on(d["default"].events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!t.root.classList.contains("ql-hidden")){var e=t.quill.getSelection();null!=e&&t.position(t.quill.getBounds(e))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(t){var n=a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"position",this).call(this,t),i=this.root.querySelector(".ql-tooltip-arrow");return i.style.marginLeft="",0===n?n:void(i.style.marginLeft=-1*n-i.offsetWidth/2+"px")}}]),e}(p.BaseTooltip);w.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="url" data-formula="e=mc^2" data-link="Type a URL" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),e.BubbleTooltip=w,e["default"]=b},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&a["return"]&&a["return"]()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function C(t,e,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,e);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:C(o,e,n)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(n):void 0},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c=n(2),h=i(c),d=n(9),p=i(d),f=n(44),g=i(f),m=n(15),v=i(m),y=n(22),b=n(26),w=i(b),_=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],x=function(t){function e(t,n){o(this,e),null!=n.modules.toolbar&&null==n.modules.toolbar.container&&(n.modules.toolbar.container=_);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.quill.container.classList.add("ql-snow"),i}return s(e,t),u(e,[{key:"extendToolbar",value:function(t){t.container.classList.add("ql-snow"),this.buildButtons([].slice.call(t.container.querySelectorAll("button")),w["default"]),this.buildPickers([].slice.call(t.container.querySelectorAll("select")),w["default"]),this.tooltip=new k(this.quill,this.options.bounds),t.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(e,n){t.handlers.link.call(t,!n.format.link)})}}]),e}(g["default"]);x.DEFAULTS=h["default"](!0,{},g["default"].DEFAULTS,{modules:{toolbar:{handlers:{link:function(t){if(t){var e=this.quill.getSelection();if(null==e||0==e.length)return;var n=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(n)&&0!==n.indexOf("mailto:")&&(n="mailto:"+n),this.quill.theme.tooltip.edit("link",n)}else this.quill.format("link",!1)}}}}});var k=function(t){function e(t,n){o(this,e);var i=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.preview=i.root.querySelector("a.ql-preview"),i}return s(e,t),u(e,[{key:"listen",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(e){t.root.classList.contains("ql-editing")?t.save():t.edit("link",t.preview.textContent),e.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(e){if(null!=t.linkRange){var n=t.linkRange;t.restoreFocus(),t.quill.formatText(n,"link",!1,p["default"].sources.USER),delete t.linkRange}e.preventDefault(),t.hide()}),this.quill.on(p["default"].events.SELECTION_CHANGE,function(e,n,i){if(null!=e){if(0===e.length&&i===p["default"].sources.USER){var o=t.quill.scroll.descendant(v["default"],e.index),r=a(o,2),s=r[0],l=r[1];if(null!=s){t.linkRange=new y.Range(e.index-l,s.length());var u=v["default"].formats(s.domNode);return t.preview.textContent=u,t.preview.setAttribute("href",u),t.show(),void t.position(t.quill.getBounds(t.linkRange))}}else delete t.linkRange;t.hide()}})}},{key:"show",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),e}(f.BaseTooltip);k.TEMPLATE=['<a class="ql-preview" target="_blank" href="about:blank"></a>','<input type="url" data-formula="e=mc^2" data-link="Type a URL" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),e["default"]=x}])["default"]}),function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function n(t){var e=t.length,n=rt.type(t);return"function"===n||rt.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t}function i(t,e,n){if(rt.isFunction(e))return rt.grep(t,function(t,i){return!!e.call(t,i,t)!==n});if(e.nodeType)return rt.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(pt.test(e))return rt.filter(e,t,n);e=rt.filter(e,t)}return rt.grep(t,function(t){return rt.inArray(t,e)>=0!==n})}function o(t,e){do t=t[e];while(t&&1!==t.nodeType);return t}function r(t){var e=_t[t]={};return rt.each(t.match(wt)||[],function(t,n){e[n]=!0}),e}function s(){gt.addEventListener?(gt.removeEventListener("DOMContentLoaded",a,!1),t.removeEventListener("load",a,!1)):(gt.detachEvent("onreadystatechange",a),t.detachEvent("onload",a))}function a(){(gt.addEventListener||"load"===event.type||"complete"===gt.readyState)&&(s(),rt.ready())}function l(t,e,n){if(void 0===n&&1===t.nodeType){var i="data-"+e.replace(St,"-$1").toLowerCase();if(n=t.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:Et.test(n)?rt.parseJSON(n):n}catch(o){}rt.data(t,e,n)}else n=void 0}return n}function u(t){var e;for(e in t)if(("data"!==e||!rt.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function c(t,e,n,i){if(rt.acceptData(t)){var o,r,s=rt.expando,a=t.nodeType,l=a?rt.cache:t,u=a?t[s]:t[s]&&s;if(u&&l[u]&&(i||l[u].data)||void 0!==n||"string"!=typeof e)return u||(u=a?t[s]=G.pop()||rt.guid++:s),l[u]||(l[u]=a?{}:{toJSON:rt.noop}),("object"==typeof e||"function"==typeof e)&&(i?l[u]=rt.extend(l[u],e):l[u].data=rt.extend(l[u].data,e)),r=l[u],i||(r.data||(r.data={}),r=r.data),void 0!==n&&(r[rt.camelCase(e)]=n),"string"==typeof e?(o=r[e],null==o&&(o=r[rt.camelCase(e)])):o=r,o}}function h(t,e,n){if(rt.acceptData(t)){var i,o,r=t.nodeType,s=r?rt.cache:t,a=r?t[rt.expando]:rt.expando;if(s[a]){if(e&&(i=n?s[a]:s[a].data)){rt.isArray(e)?e=e.concat(rt.map(e,rt.camelCase)):e in i?e=[e]:(e=rt.camelCase(e),e=e in i?[e]:e.split(" ")),o=e.length;for(;o--;)delete i[e[o]];if(n?!u(i):!rt.isEmptyObject(i))return}(n||(delete s[a].data,u(s[a])))&&(r?rt.cleanData([t],!0):it.deleteExpando||s!=s.window?delete s[a]:s[a]=null)}}}function d(){return!0}function p(){return!1}function f(){try{return gt.activeElement}catch(t){}}function g(t){var e=It.split("|"),n=t.createDocumentFragment();if(n.createElement)for(;e.length;)n.createElement(e.pop());return n}function m(t,e){var n,i,o=0,r=typeof t.getElementsByTagName!==Ct?t.getElementsByTagName(e||"*"):typeof t.querySelectorAll!==Ct?t.querySelectorAll(e||"*"):void 0;if(!r)for(r=[],n=t.childNodes||t;null!=(i=n[o]);o++)!e||rt.nodeName(i,e)?r.push(i):rt.merge(r,m(i,e));return void 0===e||e&&rt.nodeName(t,e)?rt.merge([t],r):r}function v(t){Pt.test(t.type)&&(t.defaultChecked=t.checked)}function y(t,e){return rt.nodeName(t,"table")&&rt.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function b(t){return t.type=(null!==rt.find.attr(t,"type"))+"/"+t.type,t}function w(t){var e=Gt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function _(t,e){for(var n,i=0;null!=(n=t[i]);i++)rt._data(n,"globalEval",!e||rt._data(e[i],"globalEval"))}function x(t,e){if(1===e.nodeType&&rt.hasData(t)){var n,i,o,r=rt._data(t),s=rt._data(e,r),a=r.events;if(a){delete s.handle,s.events={};for(n in a)for(i=0,o=a[n].length;o>i;i++)rt.event.add(e,n,a[n][i])}s.data&&(s.data=rt.extend({},s.data))}}function k(t,e){var n,i,o;if(1===e.nodeType){if(n=e.nodeName.toLowerCase(),!it.noCloneEvent&&e[rt.expando]){o=rt._data(e);for(i in o.events)rt.removeEvent(e,i,o.handle);e.removeAttribute(rt.expando)}"script"===n&&e.text!==t.text?(b(e).text=t.text,w(e)):"object"===n?(e.parentNode&&(e.outerHTML=t.outerHTML),it.html5Clone&&t.innerHTML&&!rt.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===n&&Pt.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===n?e.defaultSelected=e.selected=t.defaultSelected:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}}function C(e,n){var i=rt(n.createElement(e)).appendTo(n.body),o=t.getDefaultComputedStyle?t.getDefaultComputedStyle(i[0]).display:rt.css(i[0],"display");return i.detach(),o}function E(t){var e=gt,n=te[t];return n||(n=C(t,e),"none"!==n&&n||(Jt=(Jt||rt("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=(Jt[0].contentWindow||Jt[0].contentDocument).document,e.write(),e.close(),n=C(t,e),Jt.detach()),te[t]=n),n}function S(t,e){return{get:function(){var n=t();if(null!=n)return n?void delete this.get:(this.get=e).apply(this,arguments)}}}function $(t,e){if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),i=e,o=pe.length;o--;)if(e=pe[o]+n,e in t)return e;return i}function T(t,e){for(var n,i,o,r=[],s=0,a=t.length;a>s;s++)i=t[s],i.style&&(r[s]=rt._data(i,"olddisplay"),n=i.style.display,e?(r[s]||"none"!==n||(i.style.display=""),""===i.style.display&&Ot(i)&&(r[s]=rt._data(i,"olddisplay",E(i.nodeName)))):r[s]||(o=Ot(i),(n&&"none"!==n||!o)&&rt._data(i,"olddisplay",o?n:rt.css(i,"display"))));for(s=0;a>s;s++)i=t[s],i.style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?r[s]||"":"none"));return t}function O(t,e,n){var i=ue.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function A(t,e,n,i,o){for(var r=n===(i?"border":"content")?4:"width"===e?1:0,s=0;4>r;r+=2)"margin"===n&&(s+=rt.css(t,n+Tt[r],!0,o)),i?("content"===n&&(s-=rt.css(t,"padding"+Tt[r],!0,o)),"margin"!==n&&(s-=rt.css(t,"border"+Tt[r]+"Width",!0,o))):(s+=rt.css(t,"padding"+Tt[r],!0,o),"padding"!==n&&(s+=rt.css(t,"border"+Tt[r]+"Width",!0,o)));return s}function P(t,e,n){var i=!0,o="width"===e?t.offsetWidth:t.offsetHeight,r=ee(t),s=it.boxSizing()&&"border-box"===rt.css(t,"boxSizing",!1,r);if(0>=o||null==o){if(o=ne(t,e,r),(0>o||null==o)&&(o=t.style[e]),oe.test(o))return o;i=s&&(it.boxSizingReliable()||o===t.style[e]),o=parseFloat(o)||0}return o+A(t,e,n||(s?"border":"content"),i,r)+"px"}function L(t,e,n,i,o){return new L.prototype.init(t,e,n,i,o)}function N(){return setTimeout(function(){fe=void 0}),fe=rt.now()}function M(t,e){var n,i={height:t},o=0;for(e=e?1:0;4>o;o+=2-e)n=Tt[o],i["margin"+n]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function j(t,e,n){for(var i,o=(we[e]||[]).concat(we["*"]),r=0,s=o.length;s>r;r++)if(i=o[r].call(n,e,t))return i}function D(t,e,n){var i,o,r,s,a,l,u,c,h=this,d={},p=t.style,f=t.nodeType&&Ot(t),g=rt._data(t,"fxshow");n.queue||(a=rt._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,rt.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],u=rt.css(t,"display"),c=E(t.nodeName),"none"===u&&(u=c),"inline"===u&&"none"===rt.css(t,"float")&&(it.inlineBlockNeedsLayout&&"inline"!==c?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",it.shrinkWrapBlocks()||h.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in e)if(o=e[i],me.exec(o)){if(delete e[i],r=r||"toggle"===o,o===(f?"hide":"show")){if("show"!==o||!g||void 0===g[i])continue;f=!0}d[i]=g&&g[i]||rt.style(t,i)}if(!rt.isEmptyObject(d)){g?"hidden"in g&&(f=g.hidden):g=rt._data(t,"fxshow",{}),r&&(g.hidden=!f),f?rt(t).show():h.done(function(){rt(t).hide()}),h.done(function(){var e;rt._removeData(t,"fxshow");for(e in d)rt.style(t,e,d[e])});for(i in d)s=j(f?g[i]:0,i,h),i in g||(g[i]=s.start,f&&(s.end=s.start,s.start="width"===i||"height"===i?1:0))}}function I(t,e){var n,i,o,r,s;for(n in t)if(i=rt.camelCase(n),o=e[i],r=t[n],rt.isArray(r)&&(o=r[1],r=t[n]=r[0]),n!==i&&(t[i]=r,delete t[n]),s=rt.cssHooks[i],s&&"expand"in s){r=s.expand(r),delete t[i];for(n in r)n in t||(t[n]=r[n],e[n]=o)}else e[i]=o}function q(t,e,n){var i,o,r=0,s=be.length,a=rt.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var e=fe||N(),n=Math.max(0,u.startTime+u.duration-e),i=n/u.duration||0,r=1-i,s=0,l=u.tweens.length;l>s;s++)u.tweens[s].run(r);return a.notifyWith(t,[u,r,n]),1>r&&l?n:(a.resolveWith(t,[u]),!1)},u=a.promise({elem:t,props:rt.extend({},e),opts:rt.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:fe||N(),duration:n.duration,tweens:[],createTween:function(e,n){var i=rt.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(i),i},stop:function(e){var n=0,i=e?u.tweens.length:0;if(o)return this;for(o=!0;i>n;n++)u.tweens[n].run(1);return e?a.resolveWith(t,[u,e]):a.rejectWith(t,[u,e]),this}}),c=u.props;for(I(c,u.opts.specialEasing);s>r;r++)if(i=be[r].call(u,t,c,u.opts))return i;return rt.map(c,j,u),rt.isFunction(u.opts.start)&&u.opts.start.call(t,u),rt.fx.timer(rt.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function R(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,o=0,r=e.toLowerCase().match(wt)||[];if(rt.isFunction(n))for(;i=r[o++];)"+"===i.charAt(0)?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function F(t,e,n,i){function o(a){var l;return r[a]=!0,rt.each(t[a]||[],function(t,a){var u=a(e,n,i);return"string"!=typeof u||s||r[u]?s?!(l=u):void 0:(e.dataTypes.unshift(u),o(u),!1)}),l}var r={},s=t===We;return o(e.dataTypes[0])||!r["*"]&&o("*")}function B(t,e){var n,i,o=rt.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((o[i]?t:n||(n={}))[i]=e[i]);return n&&rt.extend(!0,t,n),t}function H(t,e,n){for(var i,o,r,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===o&&(o=t.mimeType||e.getResponseHeader("Content-Type"));if(o)for(s in a)if(a[s]&&a[s].test(o)){l.unshift(s);break}if(l[0]in n)r=l[0];else{for(s in n){if(!l[0]||t.converters[s+" "+l[0]]){r=s;break}i||(i=s)}r=r||i}return r?(r!==l[0]&&l.unshift(r),n[r]):void 0}function z(t,e,n,i){var o,r,s,a,l,u={},c=t.dataTypes.slice();if(c[1])for(s in t.converters)u[s.toLowerCase()]=t.converters[s];for(r=c.shift();r;)if(t.responseFields[r]&&(n[t.responseFields[r]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=c.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(s=u[l+" "+r]||u["* "+r],!s)for(o in u)if(a=o.split(" "),a[1]===r&&(s=u[l+" "+a[0]]||u["* "+a[0]])){s===!0?s=u[o]:u[o]!==!0&&(r=a[0],c.unshift(a[1]));break}if(s!==!0)if(s&&t["throws"])e=s(e);else try{e=s(e)}catch(h){return{state:"parsererror",error:s?h:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}function W(t,e,n,i){var o;if(rt.isArray(e))rt.each(e,function(e,o){n||Ge.test(t)?i(t,o):W(t+"["+("object"==typeof o?e:"")+"]",o,n,i)});else if(n||"object"!==rt.type(e))i(t,e);else for(o in e)W(t+"["+o+"]",e[o],n,i)}function U(){try{return new t.XMLHttpRequest}catch(e){}}function Y(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function V(t){return rt.isWindow(t)?t:9===t.nodeType?t.defaultView||t.parentWindow:!1}var G=[],X=G.slice,K=G.concat,Z=G.push,Q=G.indexOf,J={},tt=J.toString,et=J.hasOwnProperty,nt="".trim,it={},ot="1.11.0",rt=function(t,e){return new rt.fn.init(t,e)},st=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,at=/^-ms-/,lt=/-([\da-z])/gi,ut=function(t,e){return e.toUpperCase()};rt.fn=rt.prototype={jquery:ot,constructor:rt,selector:"",length:0,toArray:function(){return X.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:X.call(this)},pushStack:function(t){var e=rt.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return rt.each(this,t,e)},map:function(t){return this.pushStack(rt.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(X.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Z,sort:G.sort,splice:G.splice},rt.extend=rt.fn.extend=function(){var t,e,n,i,o,r,s=arguments[0]||{},a=1,l=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[a]||{},a++),"object"==typeof s||rt.isFunction(s)||(s={}),a===l&&(s=this,a--);l>a;a++)if(null!=(o=arguments[a]))for(i in o)t=s[i],n=o[i],s!==n&&(u&&n&&(rt.isPlainObject(n)||(e=rt.isArray(n)))?(e?(e=!1,r=t&&rt.isArray(t)?t:[]):r=t&&rt.isPlainObject(t)?t:{},s[i]=rt.extend(u,r,n)):void 0!==n&&(s[i]=n));
return s},rt.extend({expando:"jQuery"+(ot+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===rt.type(t)},isArray:Array.isArray||function(t){return"array"===rt.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return t-parseFloat(t)>=0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==rt.type(t)||t.nodeType||rt.isWindow(t))return!1;try{if(t.constructor&&!et.call(t,"constructor")&&!et.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(it.ownLast)for(e in t)return et.call(t,e);for(e in t);return void 0===e||et.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?J[tt.call(t)]||"object":typeof t},globalEval:function(e){e&&rt.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(at,"ms-").replace(lt,ut)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,i){var o,r=0,s=t.length,a=n(t);if(i){if(a)for(;s>r&&(o=e.apply(t[r],i),o!==!1);r++);else for(r in t)if(o=e.apply(t[r],i),o===!1)break}else if(a)for(;s>r&&(o=e.call(t[r],r,t[r]),o!==!1);r++);else for(r in t)if(o=e.call(t[r],r,t[r]),o===!1)break;return t},trim:nt&&!nt.call("\ufeff\xa0")?function(t){return null==t?"":nt.call(t)}:function(t){return null==t?"":(t+"").replace(st,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(n(Object(t))?rt.merge(i,"string"==typeof t?[t]:t):Z.call(i,t)),i},inArray:function(t,e,n){var i;if(e){if(Q)return Q.call(e,t,n);for(i=e.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in e&&e[n]===t)return n}return-1},merge:function(t,e){for(var n=+e.length,i=0,o=t.length;n>i;)t[o++]=e[i++];if(n!==n)for(;void 0!==e[i];)t[o++]=e[i++];return t.length=o,t},grep:function(t,e,n){for(var i,o=[],r=0,s=t.length,a=!n;s>r;r++)i=!e(t[r],r),i!==a&&o.push(t[r]);return o},map:function(t,e,i){var o,r=0,s=t.length,a=n(t),l=[];if(a)for(;s>r;r++)o=e(t[r],r,i),null!=o&&l.push(o);else for(r in t)o=e(t[r],r,i),null!=o&&l.push(o);return K.apply([],l)},guid:1,proxy:function(t,e){var n,i,o;return"string"==typeof e&&(o=t[e],e=t,t=o),rt.isFunction(t)?(n=X.call(arguments,2),i=function(){return t.apply(e||this,n.concat(X.call(arguments)))},i.guid=t.guid=t.guid||rt.guid++,i):void 0},now:function(){return+new Date},support:it}),rt.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){J["[object "+e+"]"]=e.toLowerCase()});var ct=function(t){function e(t,e,n,i){var o,r,s,a,l,u,h,f,g,m;if((e?e.ownerDocument||e:F)!==L&&P(e),e=e||L,n=n||[],!t||"string"!=typeof t)return n;if(1!==(a=e.nodeType)&&9!==a)return[];if(M&&!i){if(o=yt.exec(t))if(s=o[1]){if(9===a){if(r=e.getElementById(s),!r||!r.parentNode)return n;if(r.id===s)return n.push(r),n}else if(e.ownerDocument&&(r=e.ownerDocument.getElementById(s))&&q(e,r)&&r.id===s)return n.push(r),n}else{if(o[2])return J.apply(n,e.getElementsByTagName(t)),n;if((s=o[3])&&k.getElementsByClassName&&e.getElementsByClassName)return J.apply(n,e.getElementsByClassName(s)),n}if(k.qsa&&(!j||!j.test(t))){if(f=h=R,g=e,m=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(u=d(t),(h=e.getAttribute("id"))?f=h.replace(wt,"\\$&"):e.setAttribute("id",f),f="[id='"+f+"'] ",l=u.length;l--;)u[l]=f+p(u[l]);g=bt.test(t)&&c(e.parentNode)||e,m=u.join(",")}if(m)try{return J.apply(n,g.querySelectorAll(m)),n}catch(v){}finally{h||e.removeAttribute("id")}}}return _(t.replace(lt,"$1"),e,n,i)}function n(){function t(n,i){return e.push(n+" ")>C.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function i(t){return t[R]=!0,t}function o(t){var e=L.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function r(t,e){for(var n=t.split("|"),i=t.length;i--;)C.attrHandle[n[i]]=e}function s(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||G)-(~t.sourceIndex||G);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function a(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function l(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function u(t){return i(function(e){return e=+e,i(function(n,i){for(var o,r=t([],n.length,e),s=r.length;s--;)n[o=r[s]]&&(n[o]=!(i[o]=n[o]))})})}function c(t){return t&&typeof t.getElementsByTagName!==V&&t}function h(){}function d(t,n){var i,o,r,s,a,l,u,c=W[t+" "];if(c)return n?0:c.slice(0);for(a=t,l=[],u=C.preFilter;a;){(!i||(o=ut.exec(a)))&&(o&&(a=a.slice(o[0].length)||a),l.push(r=[])),i=!1,(o=ct.exec(a))&&(i=o.shift(),r.push({value:i,type:o[0].replace(lt," ")}),a=a.slice(i.length));for(s in C.filter)!(o=ft[s].exec(a))||u[s]&&!(o=u[s](o))||(i=o.shift(),r.push({value:i,type:s,matches:o}),a=a.slice(i.length));if(!i)break}return n?a.length:a?e.error(t):W(t,l).slice(0)}function p(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e].value;return i}function f(t,e,n){var i=e.dir,o=n&&"parentNode"===i,r=H++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||o)return t(e,n,r)}:function(e,n,s){var a,l,u=[B,r];if(s){for(;e=e[i];)if((1===e.nodeType||o)&&t(e,n,s))return!0}else for(;e=e[i];)if(1===e.nodeType||o){if(l=e[R]||(e[R]={}),(a=l[i])&&a[0]===B&&a[1]===r)return u[2]=a[2];if(l[i]=u,u[2]=t(e,n,s))return!0}}}function g(t){return t.length>1?function(e,n,i){for(var o=t.length;o--;)if(!t[o](e,n,i))return!1;return!0}:t[0]}function m(t,e,n,i,o){for(var r,s=[],a=0,l=t.length,u=null!=e;l>a;a++)(r=t[a])&&(!n||n(r,i,o))&&(s.push(r),u&&e.push(a));return s}function v(t,e,n,o,r,s){return o&&!o[R]&&(o=v(o)),r&&!r[R]&&(r=v(r,s)),i(function(i,s,a,l){var u,c,h,d=[],p=[],f=s.length,g=i||w(e||"*",a.nodeType?[a]:a,[]),v=!t||!i&&e?g:m(g,d,t,a,l),y=n?r||(i?t:f||o)?[]:s:v;if(n&&n(v,y,a,l),o)for(u=m(y,p),o(u,[],a,l),c=u.length;c--;)(h=u[c])&&(y[p[c]]=!(v[p[c]]=h));if(i){if(r||t){if(r){for(u=[],c=y.length;c--;)(h=y[c])&&u.push(v[c]=h);r(null,y=[],u,l)}for(c=y.length;c--;)(h=y[c])&&(u=r?et.call(i,h):d[c])>-1&&(i[u]=!(s[u]=h))}}else y=m(y===s?y.splice(f,y.length):y),r?r(null,s,y,l):J.apply(s,y)})}function y(t){for(var e,n,i,o=t.length,r=C.relative[t[0].type],s=r||C.relative[" "],a=r?1:0,l=f(function(t){return t===e},s,!0),u=f(function(t){return et.call(e,t)>-1},s,!0),c=[function(t,n,i){return!r&&(i||n!==T)||((e=n).nodeType?l(t,n,i):u(t,n,i))}];o>a;a++)if(n=C.relative[t[a].type])c=[f(g(c),n)];else{if(n=C.filter[t[a].type].apply(null,t[a].matches),n[R]){for(i=++a;o>i&&!C.relative[t[i].type];i++);return v(a>1&&g(c),a>1&&p(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(lt,"$1"),n,i>a&&y(t.slice(a,i)),o>i&&y(t=t.slice(i)),o>i&&p(t))}c.push(n)}return g(c)}function b(t,n){var o=n.length>0,r=t.length>0,s=function(i,s,a,l,u){var c,h,d,p=0,f="0",g=i&&[],v=[],y=T,b=i||r&&C.find.TAG("*",u),w=B+=null==y?1:Math.random()||.1,_=b.length;for(u&&(T=s!==L&&s);f!==_&&null!=(c=b[f]);f++){if(r&&c){for(h=0;d=t[h++];)if(d(c,s,a)){l.push(c);break}u&&(B=w)}o&&((c=!d&&c)&&p--,i&&g.push(c))}if(p+=f,o&&f!==p){for(h=0;d=n[h++];)d(g,v,s,a);if(i){if(p>0)for(;f--;)g[f]||v[f]||(v[f]=Z.call(l));v=m(v)}J.apply(l,v),u&&!i&&v.length>0&&p+n.length>1&&e.uniqueSort(l)}return u&&(B=w,T=y),g};return o?i(s):s}function w(t,n,i){for(var o=0,r=n.length;r>o;o++)e(t,n[o],i);return i}function _(t,e,n,i){var o,r,s,a,l,u=d(t);if(!i&&1===u.length){if(r=u[0]=u[0].slice(0),r.length>2&&"ID"===(s=r[0]).type&&k.getById&&9===e.nodeType&&M&&C.relative[r[1].type]){if(e=(C.find.ID(s.matches[0].replace(_t,xt),e)||[])[0],!e)return n;t=t.slice(r.shift().value.length)}for(o=ft.needsContext.test(t)?0:r.length;o--&&(s=r[o],!C.relative[a=s.type]);)if((l=C.find[a])&&(i=l(s.matches[0].replace(_t,xt),bt.test(r[0].type)&&c(e.parentNode)||e))){if(r.splice(o,1),t=i.length&&p(r),!t)return J.apply(n,i),n;break}}return $(t,u)(i,e,!M,n,bt.test(t)&&c(e.parentNode)||e),n}var x,k,C,E,S,$,T,O,A,P,L,N,M,j,D,I,q,R="sizzle"+-new Date,F=t.document,B=0,H=0,z=n(),W=n(),U=n(),Y=function(t,e){return t===e&&(A=!0),0},V="undefined",G=1<<31,X={}.hasOwnProperty,K=[],Z=K.pop,Q=K.push,J=K.push,tt=K.slice,et=K.indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},nt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",it="[\\x20\\t\\r\\n\\f]",ot="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",rt=ot.replace("w","w#"),st="\\["+it+"*("+ot+")"+it+"*(?:([*^$|!~]?=)"+it+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+rt+")|)|)"+it+"*\\]",at=":("+ot+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+st.replace(3,8)+")*)|.*)\\)|)",lt=new RegExp("^"+it+"+|((?:^|[^\\\\])(?:\\\\.)*)"+it+"+$","g"),ut=new RegExp("^"+it+"*,"+it+"*"),ct=new RegExp("^"+it+"*([>+~]|"+it+")"+it+"*"),ht=new RegExp("="+it+"*([^\\]'\"]*?)"+it+"*\\]","g"),dt=new RegExp(at),pt=new RegExp("^"+rt+"$"),ft={ID:new RegExp("^#("+ot+")"),CLASS:new RegExp("^\\.("+ot+")"),TAG:new RegExp("^("+ot.replace("w","w*")+")"),ATTR:new RegExp("^"+st),PSEUDO:new RegExp("^"+at),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+it+"*(even|odd|(([+-]|)(\\d*)n|)"+it+"*(?:([+-]|)"+it+"*(\\d+)|))"+it+"*\\)|)","i"),bool:new RegExp("^(?:"+nt+")$","i"),needsContext:new RegExp("^"+it+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+it+"*((?:-\\d)?\\d*)"+it+"*\\)|)(?=[^-]|$)","i")},gt=/^(?:input|select|textarea|button)$/i,mt=/^h\d$/i,vt=/^[^{]+\{\s*\[native \w/,yt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,bt=/[+~]/,wt=/'|\\/g,_t=new RegExp("\\\\([\\da-f]{1,6}"+it+"?|("+it+")|.)","ig"),xt=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{J.apply(K=tt.call(F.childNodes),F.childNodes),K[F.childNodes.length].nodeType}catch(kt){J={apply:K.length?function(t,e){Q.apply(t,tt.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}k=e.support={},S=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},P=e.setDocument=function(t){var e,n=t?t.ownerDocument||t:F,i=n.defaultView;return n!==L&&9===n.nodeType&&n.documentElement?(L=n,N=n.documentElement,M=!S(n),i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",function(){P()},!1):i.attachEvent&&i.attachEvent("onunload",function(){P()})),k.attributes=o(function(t){return t.className="i",!t.getAttribute("className")}),k.getElementsByTagName=o(function(t){return t.appendChild(n.createComment("")),!t.getElementsByTagName("*").length}),k.getElementsByClassName=vt.test(n.getElementsByClassName)&&o(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),k.getById=o(function(t){return N.appendChild(t).id=R,!n.getElementsByName||!n.getElementsByName(R).length}),k.getById?(C.find.ID=function(t,e){if(typeof e.getElementById!==V&&M){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},C.filter.ID=function(t){var e=t.replace(_t,xt);return function(t){return t.getAttribute("id")===e}}):(delete C.find.ID,C.filter.ID=function(t){var e=t.replace(_t,xt);return function(t){var n=typeof t.getAttributeNode!==V&&t.getAttributeNode("id");return n&&n.value===e}}),C.find.TAG=k.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==V?e.getElementsByTagName(t):void 0}:function(t,e){var n,i=[],o=0,r=e.getElementsByTagName(t);if("*"===t){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},C.find.CLASS=k.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==V&&M?e.getElementsByClassName(t):void 0},D=[],j=[],(k.qsa=vt.test(n.querySelectorAll))&&(o(function(t){t.innerHTML="<select t=''><option selected=''></option></select>",t.querySelectorAll("[t^='']").length&&j.push("[*^$]="+it+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||j.push("\\["+it+"*(?:value|"+nt+")"),t.querySelectorAll(":checked").length||j.push(":checked")}),o(function(t){var e=n.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&j.push("name"+it+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||j.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),j.push(",.*:")})),(k.matchesSelector=vt.test(I=N.webkitMatchesSelector||N.mozMatchesSelector||N.oMatchesSelector||N.msMatchesSelector))&&o(function(t){k.disconnectedMatch=I.call(t,"div"),I.call(t,"[s!='']:x"),D.push("!=",at)}),j=j.length&&new RegExp(j.join("|")),D=D.length&&new RegExp(D.join("|")),e=vt.test(N.compareDocumentPosition),q=e||vt.test(N.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},Y=e?function(t,e){if(t===e)return A=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i?i:(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&i||!k.sortDetached&&e.compareDocumentPosition(t)===i?t===n||t.ownerDocument===F&&q(F,t)?-1:e===n||e.ownerDocument===F&&q(F,e)?1:O?et.call(O,t)-et.call(O,e):0:4&i?-1:1)}:function(t,e){if(t===e)return A=!0,0;var i,o=0,r=t.parentNode,a=e.parentNode,l=[t],u=[e];if(!r||!a)return t===n?-1:e===n?1:r?-1:a?1:O?et.call(O,t)-et.call(O,e):0;if(r===a)return s(t,e);for(i=t;i=i.parentNode;)l.unshift(i);for(i=e;i=i.parentNode;)u.unshift(i);for(;l[o]===u[o];)o++;return o?s(l[o],u[o]):l[o]===F?-1:u[o]===F?1:0},n):L},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==L&&P(t),n=n.replace(ht,"='$1']"),k.matchesSelector&&M&&(!D||!D.test(n))&&(!j||!j.test(n)))try{var i=I.call(t,n);if(i||k.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(o){}return e(n,L,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==L&&P(t),q(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==L&&P(t);var n=C.attrHandle[e.toLowerCase()],i=n&&X.call(C.attrHandle,e.toLowerCase())?n(t,e,!M):void 0;return void 0!==i?i:k.attributes||!M?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],i=0,o=0;if(A=!k.detectDuplicates,O=!k.sortStable&&t.slice(0),t.sort(Y),A){for(;e=t[o++];)e===t[o]&&(i=n.push(o));for(;i--;)t.splice(n[i],1)}return O=null,t},E=e.getText=function(t){var e,n="",i=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=E(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[i++];)n+=E(e);return n},C=e.selectors={cacheLength:50,createPseudo:i,match:ft,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(_t,xt),t[3]=(t[4]||t[5]||"").replace(_t,xt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[5]&&t[2];return ft.CHILD.test(t[0])?null:(t[3]&&void 0!==t[4]?t[2]=t[4]:n&&dt.test(n)&&(e=d(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(_t,xt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=z[t+" "];return e||(e=new RegExp("(^|"+it+")"+t+"("+it+"|$)"))&&z(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==V&&t.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(o){var r=e.attr(o,t);return null==r?"!="===n:n?(r+="","="===n?r===i:"!="===n?r!==i:"^="===n?i&&0===r.indexOf(i):"*="===n?i&&r.indexOf(i)>-1:"$="===n?i&&r.slice(-i.length)===i:"~="===n?(" "+r+" ").indexOf(i)>-1:"|="===n?r===i||r.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(t,e,n,i,o){var r="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===o?function(t){return!!t.parentNode}:function(e,n,l){var u,c,h,d,p,f,g=r!==s?"nextSibling":"previousSibling",m=e.parentNode,v=a&&e.nodeName.toLowerCase(),y=!l&&!a;if(m){if(r){for(;g;){for(h=e;h=h[g];)if(a?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=g="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?m.firstChild:m.lastChild],s&&y){for(c=m[R]||(m[R]={}),u=c[t]||[],p=u[0]===B&&u[1],d=u[0]===B&&u[2],h=p&&m.childNodes[p];h=++p&&h&&h[g]||(d=p=0)||f.pop();)if(1===h.nodeType&&++d&&h===e){c[t]=[B,p,d];break}}else if(y&&(u=(e[R]||(e[R]={}))[t])&&u[0]===B)d=u[1];else for(;(h=++p&&h&&h[g]||(d=p=0)||f.pop())&&((a?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++d||(y&&((h[R]||(h[R]={}))[t]=[B,d]),h!==e)););return d-=o,d===i||d%i===0&&d/i>=0}}},PSEUDO:function(t,n){var o,r=C.pseudos[t]||C.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return r[R]?r(n):r.length>1?(o=[t,t,"",n],C.setFilters.hasOwnProperty(t.toLowerCase())?i(function(t,e){for(var i,o=r(t,n),s=o.length;s--;)i=et.call(t,o[s]),t[i]=!(e[i]=o[s])}):function(t){return r(t,0,o)}):r}},pseudos:{not:i(function(t){var e=[],n=[],o=$(t.replace(lt,"$1"));return o[R]?i(function(t,e,n,i){for(var r,s=o(t,null,i,[]),a=t.length;a--;)(r=s[a])&&(t[a]=!(e[a]=r))}):function(t,i,r){return e[0]=t,o(e,null,r,n),!n.pop()}}),has:i(function(t){return function(n){return e(t,n).length>0}}),contains:i(function(t){return function(e){return(e.textContent||e.innerText||E(e)).indexOf(t)>-1}}),lang:i(function(t){return pt.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(_t,xt).toLowerCase(),function(e){var n;do if(n=M?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===N},focus:function(t){return t===L.activeElement&&(!L.hasFocus||L.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!C.pseudos.empty(t)},header:function(t){return mt.test(t.nodeName)},input:function(t){return gt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:u(function(){return[0]}),last:u(function(t,e){return[e-1]}),eq:u(function(t,e,n){return[0>n?n+e:n]}),even:u(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:u(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:u(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:u(function(t,e,n){for(var i=0>n?n+e:n;++i<e;)t.push(i);return t})}},C.pseudos.nth=C.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[x]=a(x);for(x in{submit:!0,reset:!0})C.pseudos[x]=l(x);return h.prototype=C.filters=C.pseudos,C.setFilters=new h,$=e.compile=function(t,e){var n,i=[],o=[],r=U[t+" "];if(!r){for(e||(e=d(t)),n=e.length;n--;)r=y(e[n]),r[R]?i.push(r):o.push(r);r=U(t,b(o,i))}return r},k.sortStable=R.split("").sort(Y).join("")===R,k.detectDuplicates=!!A,P(),k.sortDetached=o(function(t){return 1&t.compareDocumentPosition(L.createElement("div"))}),o(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||r("type|href|height|width",function(t,e,n){return n?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),k.attributes&&o(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||r("value",function(t,e,n){return n||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),o(function(t){return null==t.getAttribute("disabled")})||r(nt,function(t,e,n){var i;return n?void 0:t[e]===!0?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),e}(t);rt.find=ct,rt.expr=ct.selectors,rt.expr[":"]=rt.expr.pseudos,rt.unique=ct.uniqueSort,rt.text=ct.getText,rt.isXMLDoc=ct.isXML,rt.contains=ct.contains;var ht=rt.expr.match.needsContext,dt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,pt=/^.[^:#\[\.,]*$/;rt.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?rt.find.matchesSelector(i,t)?[i]:[]:rt.find.matches(t,rt.grep(e,function(t){return 1===t.nodeType}))},rt.fn.extend({find:function(t){var e,n=[],i=this,o=i.length;if("string"!=typeof t)return this.pushStack(rt(t).filter(function(){for(e=0;o>e;e++)if(rt.contains(i[e],this))return!0}));for(e=0;o>e;e++)rt.find(t,i[e],n);return n=this.pushStack(o>1?rt.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(i(this,t||[],!1))},not:function(t){return this.pushStack(i(this,t||[],!0))},is:function(t){return!!i(this,"string"==typeof t&&ht.test(t)?rt(t):t||[],!1).length}});var ft,gt=t.document,mt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,vt=rt.fn.init=function(t,e){var n,i;if(!t)return this;if("string"==typeof t){if(n="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:mt.exec(t),!n||!n[1]&&e)return!e||e.jquery?(e||ft).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof rt?e[0]:e,rt.merge(this,rt.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:gt,!0)),dt.test(n[1])&&rt.isPlainObject(e))for(n in e)rt.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}if(i=gt.getElementById(n[2]),i&&i.parentNode){if(i.id!==n[2])return ft.find(t);this.length=1,this[0]=i}return this.context=gt,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):rt.isFunction(t)?"undefined"!=typeof ft.ready?ft.ready(t):t(rt):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),rt.makeArray(t,this))};vt.prototype=rt.fn,ft=rt(gt);var yt=/^(?:parents|prev(?:Until|All))/,bt={children:!0,contents:!0,next:!0,prev:!0};rt.extend({dir:function(t,e,n){for(var i=[],o=t[e];o&&9!==o.nodeType&&(void 0===n||1!==o.nodeType||!rt(o).is(n));)1===o.nodeType&&i.push(o),o=o[e];return i},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}}),rt.fn.extend({has:function(t){var e,n=rt(t,this),i=n.length;return this.filter(function(){for(e=0;i>e;e++)if(rt.contains(this,n[e]))return!0})},closest:function(t,e){for(var n,i=0,o=this.length,r=[],s=ht.test(t)||"string"!=typeof t?rt(t,e||this.context):0;o>i;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&rt.find.matchesSelector(n,t))){r.push(n);break}return this.pushStack(r.length>1?rt.unique(r):r)},index:function(t){return t?"string"==typeof t?rt.inArray(this[0],rt(t)):rt.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(rt.unique(rt.merge(this.get(),rt(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),rt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return rt.dir(t,"parentNode")},parentsUntil:function(t,e,n){return rt.dir(t,"parentNode",n)},next:function(t){return o(t,"nextSibling")},prev:function(t){return o(t,"previousSibling")},nextAll:function(t){return rt.dir(t,"nextSibling")},prevAll:function(t){return rt.dir(t,"previousSibling")},nextUntil:function(t,e,n){return rt.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return rt.dir(t,"previousSibling",n)},siblings:function(t){return rt.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return rt.sibling(t.firstChild)},contents:function(t){return rt.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:rt.merge([],t.childNodes)}},function(t,e){rt.fn[t]=function(n,i){var o=rt.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=rt.filter(i,o)),this.length>1&&(bt[t]||(o=rt.unique(o)),yt.test(t)&&(o=o.reverse())),this.pushStack(o)}});var wt=/\S+/g,_t={};rt.Callbacks=function(t){t="string"==typeof t?_t[t]||r(t):rt.extend({},t);var e,n,i,o,s,a,l=[],u=!t.once&&[],c=function(r){for(n=t.memory&&r,i=!0,s=a||0,a=0,o=l.length,e=!0;l&&o>s;s++)if(l[s].apply(r[0],r[1])===!1&&t.stopOnFalse){n=!1;break}e=!1,l&&(u?u.length&&c(u.shift()):n?l=[]:h.disable())},h={add:function(){if(l){var i=l.length;!function r(e){rt.each(e,function(e,n){var i=rt.type(n);"function"===i?t.unique&&h.has(n)||l.push(n):n&&n.length&&"string"!==i&&r(n)})}(arguments),e?o=l.length:n&&(a=i,c(n))}return this},remove:function(){return l&&rt.each(arguments,function(t,n){for(var i;(i=rt.inArray(n,l,i))>-1;)l.splice(i,1),e&&(o>=i&&o--,s>=i&&s--)}),this},has:function(t){return t?rt.inArray(t,l)>-1:!(!l||!l.length)},empty:function(){return l=[],o=0,this},disable:function(){return l=u=n=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,n||h.disable(),this},locked:function(){return!u},fireWith:function(t,n){return!l||i&&!u||(n=n||[],n=[t,n.slice?n.slice():n],e?u.push(n):c(n)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!i}};return h},rt.extend({Deferred:function(t){var e=[["resolve","done",rt.Callbacks("once memory"),"resolved"],["reject","fail",rt.Callbacks("once memory"),"rejected"],["notify","progress",rt.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return rt.Deferred(function(n){rt.each(e,function(e,r){var s=rt.isFunction(t[e])&&t[e];o[r[1]](function(){var t=s&&s.apply(this,arguments);t&&rt.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[r[0]+"With"](this===i?n.promise():this,s?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?rt.extend(t,i):i}},o={};return i.pipe=i.then,rt.each(e,function(t,r){var s=r[2],a=r[3];i[r[1]]=s.add,a&&s.add(function(){n=a},e[1^t][2].disable,e[2][2].lock),o[r[0]]=function(){return o[r[0]+"With"](this===o?i:this,arguments),this},o[r[0]+"With"]=s.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(t){var e,n,i,o=0,r=X.call(arguments),s=r.length,a=1!==s||t&&rt.isFunction(t.promise)?s:0,l=1===a?t:rt.Deferred(),u=function(t,n,i){return function(o){n[t]=this,i[t]=arguments.length>1?X.call(arguments):o,i===e?l.notifyWith(n,i):--a||l.resolveWith(n,i)}};if(s>1)for(e=new Array(s),n=new Array(s),i=new Array(s);s>o;o++)r[o]&&rt.isFunction(r[o].promise)?r[o].promise().done(u(o,i,r)).fail(l.reject).progress(u(o,n,e)):--a;return a||l.resolveWith(i,r),l.promise()}});var xt;rt.fn.ready=function(t){return rt.ready.promise().done(t),this},rt.extend({isReady:!1,readyWait:1,holdReady:function(t){t?rt.readyWait++:rt.ready(!0)},ready:function(t){if(t===!0?!--rt.readyWait:!rt.isReady){if(!gt.body)return setTimeout(rt.ready);rt.isReady=!0,t!==!0&&--rt.readyWait>0||(xt.resolveWith(gt,[rt]),rt.fn.trigger&&rt(gt).trigger("ready").off("ready"))}}}),rt.ready.promise=function(e){if(!xt)if(xt=rt.Deferred(),"complete"===gt.readyState)setTimeout(rt.ready);else if(gt.addEventListener)gt.addEventListener("DOMContentLoaded",a,!1),t.addEventListener("load",a,!1);else{gt.attachEvent("onreadystatechange",a),t.attachEvent("onload",a);var n=!1;try{n=null==t.frameElement&&gt.documentElement}catch(i){}n&&n.doScroll&&!function o(){if(!rt.isReady){try{n.doScroll("left")}catch(t){return setTimeout(o,50)}s(),rt.ready()}}()}return xt.promise(e)};var kt,Ct="undefined";for(kt in rt(it))break;it.ownLast="0"!==kt,it.inlineBlockNeedsLayout=!1,rt(function(){var t,e,n=gt.getElementsByTagName("body")[0];n&&(t=gt.createElement("div"),t.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",e=gt.createElement("div"),n.appendChild(t).appendChild(e),typeof e.style.zoom!==Ct&&(e.style.cssText="border:0;margin:0;width:1px;padding:1px;display:inline;zoom:1",(it.inlineBlockNeedsLayout=3===e.offsetWidth)&&(n.style.zoom=1)),n.removeChild(t),t=e=null)}),function(){var t=gt.createElement("div");if(null==it.deleteExpando){it.deleteExpando=!0;try{delete t.test}catch(e){it.deleteExpando=!1}}t=null}(),rt.acceptData=function(t){var e=rt.noData[(t.nodeName+" ").toLowerCase()],n=+t.nodeType||1;return 1!==n&&9!==n?!1:!e||e!==!0&&t.getAttribute("classid")===e};var Et=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,St=/([A-Z])/g;rt.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return t=t.nodeType?rt.cache[t[rt.expando]]:t[rt.expando],!!t&&!u(t)},data:function(t,e,n){return c(t,e,n)},removeData:function(t,e){return h(t,e)},_data:function(t,e,n){return c(t,e,n,!0)},_removeData:function(t,e){return h(t,e,!0)}}),rt.fn.extend({data:function(t,e){var n,i,o,r=this[0],s=r&&r.attributes;if(void 0===t){if(this.length&&(o=rt.data(r),1===r.nodeType&&!rt._data(r,"parsedAttrs"))){for(n=s.length;n--;)i=s[n].name,0===i.indexOf("data-")&&(i=rt.camelCase(i.slice(5)),l(r,i,o[i]));rt._data(r,"parsedAttrs",!0)}return o}return"object"==typeof t?this.each(function(){rt.data(this,t)}):arguments.length>1?this.each(function(){rt.data(this,t,e)}):r?l(r,t,rt.data(r,t)):void 0},removeData:function(t){return this.each(function(){rt.removeData(this,t)})}}),rt.extend({queue:function(t,e,n){var i;return t?(e=(e||"fx")+"queue",i=rt._data(t,e),n&&(!i||rt.isArray(n)?i=rt._data(t,e,rt.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=rt.queue(t,e),i=n.length,o=n.shift(),r=rt._queueHooks(t,e),s=function(){rt.dequeue(t,e)};"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===e&&n.unshift("inprogress"),delete r.stop,o.call(t,s,r)),!i&&r&&r.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return rt._data(t,n)||rt._data(t,n,{empty:rt.Callbacks("once memory").add(function(){rt._removeData(t,e+"queue"),rt._removeData(t,n)})})}}),rt.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?rt.queue(this[0],t):void 0===e?this:this.each(function(){var n=rt.queue(this,t,e);rt._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&rt.dequeue(this,t)})},dequeue:function(t){return this.each(function(){rt.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,o=rt.Deferred(),r=this,s=this.length,a=function(){--i||o.resolveWith(r,[r])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)n=rt._data(r[s],t+"queueHooks"),n&&n.empty&&(i++,n.empty.add(a));return a(),o.promise(e)}});var $t=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Tt=["Top","Right","Bottom","Left"],Ot=function(t,e){return t=e||t,"none"===rt.css(t,"display")||!rt.contains(t.ownerDocument,t)},At=rt.access=function(t,e,n,i,o,r,s){var a=0,l=t.length,u=null==n;if("object"===rt.type(n)){o=!0;for(a in n)rt.access(t,e,a,n[a],!0,r,s)}else if(void 0!==i&&(o=!0,rt.isFunction(i)||(s=!0),u&&(s?(e.call(t,i),e=null):(u=e,e=function(t,e,n){return u.call(rt(t),n)})),e))for(;l>a;a++)e(t[a],n,s?i:i.call(t[a],a,e(t[a],n)));return o?t:u?e.call(t):l?e(t[0],n):r},Pt=/^(?:checkbox|radio)$/i;!function(){var t=gt.createDocumentFragment(),e=gt.createElement("div"),n=gt.createElement("input");if(e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a>",it.leadingWhitespace=3===e.firstChild.nodeType,it.tbody=!e.getElementsByTagName("tbody").length,it.htmlSerialize=!!e.getElementsByTagName("link").length,it.html5Clone="<:nav></:nav>"!==gt.createElement("nav").cloneNode(!0).outerHTML,n.type="checkbox",n.checked=!0,t.appendChild(n),it.appendChecked=n.checked,e.innerHTML="<textarea>x</textarea>",it.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,t.appendChild(e),e.innerHTML="<input type='radio' checked='checked' name='t'/>",it.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,it.noCloneEvent=!0,e.attachEvent&&(e.attachEvent("onclick",function(){it.noCloneEvent=!1}),e.cloneNode(!0).click()),null==it.deleteExpando){it.deleteExpando=!0;try{delete e.test}catch(i){it.deleteExpando=!1}}t=e=n=null}(),function(){var e,n,i=gt.createElement("div");for(e in{submit:!0,change:!0,focusin:!0
})n="on"+e,(it[e+"Bubbles"]=n in t)||(i.setAttribute(n,"t"),it[e+"Bubbles"]=i.attributes[n].expando===!1);i=null}();var Lt=/^(?:input|select|textarea)$/i,Nt=/^key/,Mt=/^(?:mouse|contextmenu)|click/,jt=/^(?:focusinfocus|focusoutblur)$/,Dt=/^([^.]*)(?:\.(.+)|)$/;rt.event={global:{},add:function(t,e,n,i,o){var r,s,a,l,u,c,h,d,p,f,g,m=rt._data(t);if(m){for(n.handler&&(l=n,n=l.handler,o=l.selector),n.guid||(n.guid=rt.guid++),(s=m.events)||(s=m.events={}),(c=m.handle)||(c=m.handle=function(t){return typeof rt===Ct||t&&rt.event.triggered===t.type?void 0:rt.event.dispatch.apply(c.elem,arguments)},c.elem=t),e=(e||"").match(wt)||[""],a=e.length;a--;)r=Dt.exec(e[a])||[],p=g=r[1],f=(r[2]||"").split(".").sort(),p&&(u=rt.event.special[p]||{},p=(o?u.delegateType:u.bindType)||p,u=rt.event.special[p]||{},h=rt.extend({type:p,origType:g,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&rt.expr.match.needsContext.test(o),namespace:f.join(".")},l),(d=s[p])||(d=s[p]=[],d.delegateCount=0,u.setup&&u.setup.call(t,i,f,c)!==!1||(t.addEventListener?t.addEventListener(p,c,!1):t.attachEvent&&t.attachEvent("on"+p,c))),u.add&&(u.add.call(t,h),h.handler.guid||(h.handler.guid=n.guid)),o?d.splice(d.delegateCount++,0,h):d.push(h),rt.event.global[p]=!0);t=null}},remove:function(t,e,n,i,o){var r,s,a,l,u,c,h,d,p,f,g,m=rt.hasData(t)&&rt._data(t);if(m&&(c=m.events)){for(e=(e||"").match(wt)||[""],u=e.length;u--;)if(a=Dt.exec(e[u])||[],p=g=a[1],f=(a[2]||"").split(".").sort(),p){for(h=rt.event.special[p]||{},p=(i?h.delegateType:h.bindType)||p,d=c[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=r=d.length;r--;)s=d[r],!o&&g!==s.origType||n&&n.guid!==s.guid||a&&!a.test(s.namespace)||i&&i!==s.selector&&("**"!==i||!s.selector)||(d.splice(r,1),s.selector&&d.delegateCount--,h.remove&&h.remove.call(t,s));l&&!d.length&&(h.teardown&&h.teardown.call(t,f,m.handle)!==!1||rt.removeEvent(t,p,m.handle),delete c[p])}else for(p in c)rt.event.remove(t,p+e[u],n,i,!0);rt.isEmptyObject(c)&&(delete m.handle,rt._removeData(t,"events"))}},trigger:function(e,n,i,o){var r,s,a,l,u,c,h,d=[i||gt],p=et.call(e,"type")?e.type:e,f=et.call(e,"namespace")?e.namespace.split("."):[];if(a=c=i=i||gt,3!==i.nodeType&&8!==i.nodeType&&!jt.test(p+rt.event.triggered)&&(p.indexOf(".")>=0&&(f=p.split("."),p=f.shift(),f.sort()),s=p.indexOf(":")<0&&"on"+p,e=e[rt.expando]?e:new rt.Event(p,"object"==typeof e&&e),e.isTrigger=o?2:3,e.namespace=f.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),n=null==n?[e]:rt.makeArray(n,[e]),u=rt.event.special[p]||{},o||!u.trigger||u.trigger.apply(i,n)!==!1)){if(!o&&!u.noBubble&&!rt.isWindow(i)){for(l=u.delegateType||p,jt.test(l+p)||(a=a.parentNode);a;a=a.parentNode)d.push(a),c=a;c===(i.ownerDocument||gt)&&d.push(c.defaultView||c.parentWindow||t)}for(h=0;(a=d[h++])&&!e.isPropagationStopped();)e.type=h>1?l:u.bindType||p,r=(rt._data(a,"events")||{})[e.type]&&rt._data(a,"handle"),r&&r.apply(a,n),r=s&&a[s],r&&r.apply&&rt.acceptData(a)&&(e.result=r.apply(a,n),e.result===!1&&e.preventDefault());if(e.type=p,!o&&!e.isDefaultPrevented()&&(!u._default||u._default.apply(d.pop(),n)===!1)&&rt.acceptData(i)&&s&&i[p]&&!rt.isWindow(i)){c=i[s],c&&(i[s]=null),rt.event.triggered=p;try{i[p]()}catch(g){}rt.event.triggered=void 0,c&&(i[s]=c)}return e.result}},dispatch:function(t){t=rt.event.fix(t);var e,n,i,o,r,s=[],a=X.call(arguments),l=(rt._data(this,"events")||{})[t.type]||[],u=rt.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,t)!==!1){for(s=rt.event.handlers.call(this,t,l),e=0;(o=s[e++])&&!t.isPropagationStopped();)for(t.currentTarget=o.elem,r=0;(i=o.handlers[r++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(i.namespace))&&(t.handleObj=i,t.data=i.data,n=((rt.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,a),void 0!==n&&(t.result=n)===!1&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,i,o,r,s=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==t.type)){for(o=[],r=0;a>r;r++)i=e[r],n=i.selector+" ",void 0===o[n]&&(o[n]=i.needsContext?rt(n,this).index(l)>=0:rt.find(n,this,null,[l]).length),o[n]&&o.push(i);o.length&&s.push({elem:l,handlers:o})}return a<e.length&&s.push({elem:this,handlers:e.slice(a)}),s},fix:function(t){if(t[rt.expando])return t;var e,n,i,o=t.type,r=t,s=this.fixHooks[o];for(s||(this.fixHooks[o]=s=Mt.test(o)?this.mouseHooks:Nt.test(o)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,t=new rt.Event(r),e=i.length;e--;)n=i[e],t[n]=r[n];return t.target||(t.target=r.srcElement||gt),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,s.filter?s.filter(t,r):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,i,o,r=e.button,s=e.fromElement;return null==t.pageX&&null!=e.clientX&&(i=t.target.ownerDocument||gt,o=i.documentElement,n=i.body,t.pageX=e.clientX+(o&&o.scrollLeft||n&&n.scrollLeft||0)-(o&&o.clientLeft||n&&n.clientLeft||0),t.pageY=e.clientY+(o&&o.scrollTop||n&&n.scrollTop||0)-(o&&o.clientTop||n&&n.clientTop||0)),!t.relatedTarget&&s&&(t.relatedTarget=s===t.target?e.toElement:s),t.which||void 0===r||(t.which=1&r?1:2&r?3:4&r?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==f()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){return this===f()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return rt.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(t){return rt.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){var o=rt.extend(new rt.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?rt.event.trigger(o,null,e):rt.event.dispatch.call(e,o),o.isDefaultPrevented()&&n.preventDefault()}},rt.removeEvent=gt.removeEventListener?function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)}:function(t,e,n){var i="on"+e;t.detachEvent&&(typeof t[i]===Ct&&(t[i]=null),t.detachEvent(i,n))},rt.Event=function(t,e){return this instanceof rt.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&(t.returnValue===!1||t.getPreventDefault&&t.getPreventDefault())?d:p):this.type=t,e&&rt.extend(this,e),this.timeStamp=t&&t.timeStamp||rt.now(),void(this[rt.expando]=!0)):new rt.Event(t,e)},rt.Event.prototype={isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=d,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=d,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=d,this.stopPropagation()}},rt.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){rt.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,o=t.relatedTarget,r=t.handleObj;return(!o||o!==i&&!rt.contains(i,o))&&(t.type=r.origType,n=r.handler.apply(this,arguments),t.type=e),n}}}),it.submitBubbles||(rt.event.special.submit={setup:function(){return rt.nodeName(this,"form")?!1:void rt.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,n=rt.nodeName(e,"input")||rt.nodeName(e,"button")?e.form:void 0;n&&!rt._data(n,"submitBubbles")&&(rt.event.add(n,"submit._submit",function(t){t._submit_bubble=!0}),rt._data(n,"submitBubbles",!0))})},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&rt.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return rt.nodeName(this,"form")?!1:void rt.event.remove(this,"._submit")}}),it.changeBubbles||(rt.event.special.change={setup:function(){return Lt.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(rt.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),rt.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),rt.event.simulate("change",this,t,!0)})),!1):void rt.event.add(this,"beforeactivate._change",function(t){var e=t.target;Lt.test(e.nodeName)&&!rt._data(e,"changeBubbles")&&(rt.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||rt.event.simulate("change",this.parentNode,t,!0)}),rt._data(e,"changeBubbles",!0))})},handle:function(t){var e=t.target;return this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type?t.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return rt.event.remove(this,"._change"),!Lt.test(this.nodeName)}}),it.focusinBubbles||rt.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){rt.event.simulate(e,t.target,rt.event.fix(t),!0)};rt.event.special[e]={setup:function(){var i=this.ownerDocument||this,o=rt._data(i,e);o||i.addEventListener(t,n,!0),rt._data(i,e,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this,o=rt._data(i,e)-1;o?rt._data(i,e,o):(i.removeEventListener(t,n,!0),rt._removeData(i,e))}}}),rt.fn.extend({on:function(t,e,n,i,o){var r,s;if("object"==typeof t){"string"!=typeof e&&(n=n||e,e=void 0);for(r in t)this.on(r,e,n,t[r],o);return this}if(null==n&&null==i?(i=e,n=e=void 0):null==i&&("string"==typeof e?(i=n,n=void 0):(i=n,n=e,e=void 0)),i===!1)i=p;else if(!i)return this;return 1===o&&(s=i,i=function(t){return rt().off(t),s.apply(this,arguments)},i.guid=s.guid||(s.guid=rt.guid++)),this.each(function(){rt.event.add(this,t,i,n,e)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,e,n){var i,o;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,rt(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(o in t)this.off(o,e,t[o]);return this}return(e===!1||"function"==typeof e)&&(n=e,e=void 0),n===!1&&(n=p),this.each(function(){rt.event.remove(this,t,n,e)})},trigger:function(t,e){return this.each(function(){rt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?rt.event.trigger(t,e,n,!0):void 0}});var It="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",qt=/ jQuery\d+="(?:null|\d+)"/g,Rt=new RegExp("<(?:"+It+")[\\s/>]","i"),Ft=/^\s+/,Bt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ht=/<([\w:]+)/,zt=/<tbody/i,Wt=/<|&#?\w+;/,Ut=/<(?:script|style|link)/i,Yt=/checked\s*(?:[^=]|=\s*.checked.)/i,Vt=/^$|\/(?:java|ecma)script/i,Gt=/^true\/(.*)/,Xt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Kt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:it.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Zt=g(gt),Qt=Zt.appendChild(gt.createElement("div"));Kt.optgroup=Kt.option,Kt.tbody=Kt.tfoot=Kt.colgroup=Kt.caption=Kt.thead,Kt.th=Kt.td,rt.extend({clone:function(t,e,n){var i,o,r,s,a,l=rt.contains(t.ownerDocument,t);if(it.html5Clone||rt.isXMLDoc(t)||!Rt.test("<"+t.nodeName+">")?r=t.cloneNode(!0):(Qt.innerHTML=t.outerHTML,Qt.removeChild(r=Qt.firstChild)),!(it.noCloneEvent&&it.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||rt.isXMLDoc(t)))for(i=m(r),a=m(t),s=0;null!=(o=a[s]);++s)i[s]&&k(o,i[s]);if(e)if(n)for(a=a||m(t),i=i||m(r),s=0;null!=(o=a[s]);s++)x(o,i[s]);else x(t,r);return i=m(r,"script"),i.length>0&&_(i,!l&&m(t,"script")),i=a=o=null,r},buildFragment:function(t,e,n,i){for(var o,r,s,a,l,u,c,h=t.length,d=g(e),p=[],f=0;h>f;f++)if(r=t[f],r||0===r)if("object"===rt.type(r))rt.merge(p,r.nodeType?[r]:r);else if(Wt.test(r)){for(a=a||d.appendChild(e.createElement("div")),l=(Ht.exec(r)||["",""])[1].toLowerCase(),c=Kt[l]||Kt._default,a.innerHTML=c[1]+r.replace(Bt,"<$1></$2>")+c[2],o=c[0];o--;)a=a.lastChild;if(!it.leadingWhitespace&&Ft.test(r)&&p.push(e.createTextNode(Ft.exec(r)[0])),!it.tbody)for(r="table"!==l||zt.test(r)?"<table>"!==c[1]||zt.test(r)?0:a:a.firstChild,o=r&&r.childNodes.length;o--;)rt.nodeName(u=r.childNodes[o],"tbody")&&!u.childNodes.length&&r.removeChild(u);for(rt.merge(p,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=d.lastChild}else p.push(e.createTextNode(r));for(a&&d.removeChild(a),it.appendChecked||rt.grep(m(p,"input"),v),f=0;r=p[f++];)if((!i||-1===rt.inArray(r,i))&&(s=rt.contains(r.ownerDocument,r),a=m(d.appendChild(r),"script"),s&&_(a),n))for(o=0;r=a[o++];)Vt.test(r.type||"")&&n.push(r);return a=null,d},cleanData:function(t,e){for(var n,i,o,r,s=0,a=rt.expando,l=rt.cache,u=it.deleteExpando,c=rt.event.special;null!=(n=t[s]);s++)if((e||rt.acceptData(n))&&(o=n[a],r=o&&l[o])){if(r.events)for(i in r.events)c[i]?rt.event.remove(n,i):rt.removeEvent(n,i,r.handle);l[o]&&(delete l[o],u?delete n[a]:typeof n.removeAttribute!==Ct?n.removeAttribute(a):n[a]=null,G.push(o))}}}),rt.fn.extend({text:function(t){return At(this,function(t){return void 0===t?rt.text(this):this.empty().append((this[0]&&this[0].ownerDocument||gt).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=y(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=y(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=t?rt.filter(t,this):this,o=0;null!=(n=i[o]);o++)e||1!==n.nodeType||rt.cleanData(m(n)),n.parentNode&&(e&&rt.contains(n.ownerDocument,n)&&_(m(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&rt.cleanData(m(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&rt.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return rt.clone(this,t,e)})},html:function(t){return At(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t)return 1===e.nodeType?e.innerHTML.replace(qt,""):void 0;if("string"==typeof t&&!Ut.test(t)&&(it.htmlSerialize||!Rt.test(t))&&(it.leadingWhitespace||!Ft.test(t))&&!Kt[(Ht.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Bt,"<$1></$2>");try{for(;i>n;n++)e=this[n]||{},1===e.nodeType&&(rt.cleanData(m(e,!1)),e.innerHTML=t);e=0}catch(o){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,rt.cleanData(m(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=K.apply([],t);var n,i,o,r,s,a,l=0,u=this.length,c=this,h=u-1,d=t[0],p=rt.isFunction(d);if(p||u>1&&"string"==typeof d&&!it.checkClone&&Yt.test(d))return this.each(function(n){var i=c.eq(n);p&&(t[0]=d.call(this,n,i.html())),i.domManip(t,e)});if(u&&(a=rt.buildFragment(t,this[0].ownerDocument,!1,this),n=a.firstChild,1===a.childNodes.length&&(a=n),n)){for(r=rt.map(m(a,"script"),b),o=r.length;u>l;l++)i=a,l!==h&&(i=rt.clone(i,!0,!0),o&&rt.merge(r,m(i,"script"))),e.call(this[l],i,l);if(o)for(s=r[r.length-1].ownerDocument,rt.map(r,w),l=0;o>l;l++)i=r[l],Vt.test(i.type||"")&&!rt._data(i,"globalEval")&&rt.contains(s,i)&&(i.src?rt._evalUrl&&rt._evalUrl(i.src):rt.globalEval((i.text||i.textContent||i.innerHTML||"").replace(Xt,"")));a=n=null}return this}}),rt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){rt.fn[t]=function(t){for(var n,i=0,o=[],r=rt(t),s=r.length-1;s>=i;i++)n=i===s?this:this.clone(!0),rt(r[i])[e](n),Z.apply(o,n.get());return this.pushStack(o)}});var Jt,te={};!function(){var t,e,n=gt.createElement("div"),i="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",t=n.getElementsByTagName("a")[0],t.style.cssText="float:left;opacity:.5",it.opacity=/^0.5/.test(t.style.opacity),it.cssFloat=!!t.style.cssFloat,n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",it.clearCloneStyle="content-box"===n.style.backgroundClip,t=n=null,it.shrinkWrapBlocks=function(){var t,n,o,r;if(null==e){if(t=gt.getElementsByTagName("body")[0],!t)return;r="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",n=gt.createElement("div"),o=gt.createElement("div"),t.appendChild(n).appendChild(o),e=!1,typeof o.style.zoom!==Ct&&(o.style.cssText=i+";width:1px;padding:1px;zoom:1",o.innerHTML="<div></div>",o.firstChild.style.width="5px",e=3!==o.offsetWidth),t.removeChild(n),t=n=o=null}return e}}();var ee,ne,ie=/^margin/,oe=new RegExp("^("+$t+")(?!px)[a-z%]+$","i"),re=/^(top|right|bottom|left)$/;t.getComputedStyle?(ee=function(t){return t.ownerDocument.defaultView.getComputedStyle(t,null)},ne=function(t,e,n){var i,o,r,s,a=t.style;return n=n||ee(t),s=n?n.getPropertyValue(e)||n[e]:void 0,n&&(""!==s||rt.contains(t.ownerDocument,t)||(s=rt.style(t,e)),oe.test(s)&&ie.test(e)&&(i=a.width,o=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=i,a.minWidth=o,a.maxWidth=r)),void 0===s?s:s+""}):gt.documentElement.currentStyle&&(ee=function(t){return t.currentStyle},ne=function(t,e,n){var i,o,r,s,a=t.style;return n=n||ee(t),s=n?n[e]:void 0,null==s&&a&&a[e]&&(s=a[e]),oe.test(s)&&!re.test(e)&&(i=a.left,o=t.runtimeStyle,r=o&&o.left,r&&(o.left=t.currentStyle.left),a.left="fontSize"===e?"1em":s,s=a.pixelLeft+"px",a.left=i,r&&(o.left=r)),void 0===s?s:s+""||"auto"}),function(){function e(){var e,n,i=gt.getElementsByTagName("body")[0];i&&(e=gt.createElement("div"),n=gt.createElement("div"),e.style.cssText=u,i.appendChild(e).appendChild(n),n.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;display:block;padding:1px;border:1px;width:4px;margin-top:1%;top:1%",rt.swap(i,null!=i.style.zoom?{zoom:1}:{},function(){o=4===n.offsetWidth}),r=!0,s=!1,a=!0,t.getComputedStyle&&(s="1%"!==(t.getComputedStyle(n,null)||{}).top,r="4px"===(t.getComputedStyle(n,null)||{width:"4px"}).width),i.removeChild(e),n=i=null)}var n,i,o,r,s,a,l=gt.createElement("div"),u="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",c="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";l.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=l.getElementsByTagName("a")[0],n.style.cssText="float:left;opacity:.5",it.opacity=/^0.5/.test(n.style.opacity),it.cssFloat=!!n.style.cssFloat,l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",it.clearCloneStyle="content-box"===l.style.backgroundClip,n=l=null,rt.extend(it,{reliableHiddenOffsets:function(){if(null!=i)return i;var t,e,n,o=gt.createElement("div"),r=gt.getElementsByTagName("body")[0];if(r)return o.setAttribute("className","t"),o.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",t=gt.createElement("div"),t.style.cssText=u,r.appendChild(t).appendChild(o),o.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=o.getElementsByTagName("td"),e[0].style.cssText="padding:0;margin:0;border:0;display:none",n=0===e[0].offsetHeight,e[0].style.display="",e[1].style.display="none",i=n&&0===e[0].offsetHeight,r.removeChild(t),o=r=null,i},boxSizing:function(){return null==o&&e(),o},boxSizingReliable:function(){return null==r&&e(),r},pixelPosition:function(){return null==s&&e(),s},reliableMarginRight:function(){var e,n,i,o;if(null==a&&t.getComputedStyle){if(e=gt.getElementsByTagName("body")[0],!e)return;n=gt.createElement("div"),i=gt.createElement("div"),n.style.cssText=u,e.appendChild(n).appendChild(i),o=i.appendChild(gt.createElement("div")),o.style.cssText=i.style.cssText=c,o.style.marginRight=o.style.width="0",i.style.width="1px",a=!parseFloat((t.getComputedStyle(o,null)||{}).marginRight),e.removeChild(n)}return a}})}(),rt.swap=function(t,e,n,i){var o,r,s={};for(r in e)s[r]=t.style[r],t.style[r]=e[r];o=n.apply(t,i||[]);for(r in e)t.style[r]=s[r];return o};var se=/alpha\([^)]*\)/i,ae=/opacity\s*=\s*([^)]*)/,le=/^(none|table(?!-c[ea]).+)/,ue=new RegExp("^("+$t+")(.*)$","i"),ce=new RegExp("^([+-])=("+$t+")","i"),he={position:"absolute",visibility:"hidden",display:"block"},de={letterSpacing:0,fontWeight:400},pe=["Webkit","O","Moz","ms"];rt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=ne(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":it.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,r,s,a=rt.camelCase(e),l=t.style;if(e=rt.cssProps[a]||(rt.cssProps[a]=$(l,a)),s=rt.cssHooks[e]||rt.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(o=s.get(t,!1,i))?o:l[e];if(r=typeof n,"string"===r&&(o=ce.exec(n))&&(n=(o[1]+1)*o[2]+parseFloat(rt.css(t,e)),r="number"),null!=n&&n===n&&("number"!==r||rt.cssNumber[a]||(n+="px"),it.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),!(s&&"set"in s&&void 0===(n=s.set(t,n,i)))))try{l[e]="",l[e]=n}catch(u){}}},css:function(t,e,n,i){var o,r,s,a=rt.camelCase(e);return e=rt.cssProps[a]||(rt.cssProps[a]=$(t.style,a)),s=rt.cssHooks[e]||rt.cssHooks[a],s&&"get"in s&&(r=s.get(t,!0,n)),void 0===r&&(r=ne(t,e,i)),"normal"===r&&e in de&&(r=de[e]),""===n||n?(o=parseFloat(r),n===!0||rt.isNumeric(o)?o||0:r):r}}),rt.each(["height","width"],function(t,e){rt.cssHooks[e]={get:function(t,n,i){return n?0===t.offsetWidth&&le.test(rt.css(t,"display"))?rt.swap(t,he,function(){return P(t,e,i)}):P(t,e,i):void 0},set:function(t,n,i){var o=i&&ee(t);return O(t,n,i?A(t,e,i,it.boxSizing()&&"border-box"===rt.css(t,"boxSizing",!1,o),o):0)}}}),it.opacity||(rt.cssHooks.opacity={get:function(t,e){return ae.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var n=t.style,i=t.currentStyle,o=rt.isNumeric(e)?"alpha(opacity="+100*e+")":"",r=i&&i.filter||n.filter||"";n.zoom=1,(e>=1||""===e)&&""===rt.trim(r.replace(se,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===e||i&&!i.filter)||(n.filter=se.test(r)?r.replace(se,o):r+" "+o)}}),rt.cssHooks.marginRight=S(it.reliableMarginRight,function(t,e){return e?rt.swap(t,{display:"inline-block"},ne,[t,"marginRight"]):void 0}),rt.each({margin:"",padding:"",border:"Width"},function(t,e){rt.cssHooks[t+e]={expand:function(n){for(var i=0,o={},r="string"==typeof n?n.split(" "):[n];4>i;i++)o[t+Tt[i]+e]=r[i]||r[i-2]||r[0];return o}},ie.test(t)||(rt.cssHooks[t+e].set=O)}),rt.fn.extend({css:function(t,e){return At(this,function(t,e,n){var i,o,r={},s=0;if(rt.isArray(e)){for(i=ee(t),o=e.length;o>s;s++)r[e[s]]=rt.css(t,e[s],!1,i);return r}return void 0!==n?rt.style(t,e,n):rt.css(t,e)},t,e,arguments.length>1)},show:function(){return T(this,!0)},hide:function(){return T(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Ot(this)?rt(this).show():rt(this).hide()})}}),rt.Tween=L,L.prototype={constructor:L,init:function(t,e,n,i,o,r){this.elem=t,this.prop=n,this.easing=o||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=r||(rt.cssNumber[n]?"":"px")},cur:function(){var t=L.propHooks[this.prop];return t&&t.get?t.get(this):L.propHooks._default.get(this)},run:function(t){var e,n=L.propHooks[this.prop];return this.options.duration?this.pos=e=rt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):L.propHooks._default.set(this),this}},L.prototype.init.prototype=L.prototype,L.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=rt.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){rt.fx.step[t.prop]?rt.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[rt.cssProps[t.prop]]||rt.cssHooks[t.prop])?rt.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},L.propHooks.scrollTop=L.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},rt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},rt.fx=L.prototype.init,rt.fx.step={};var fe,ge,me=/^(?:toggle|show|hide)$/,ve=new RegExp("^(?:([+-])=|)("+$t+")([a-z%]*)$","i"),ye=/queueHooks$/,be=[D],we={"*":[function(t,e){var n=this.createTween(t,e),i=n.cur(),o=ve.exec(e),r=o&&o[3]||(rt.cssNumber[t]?"":"px"),s=(rt.cssNumber[t]||"px"!==r&&+i)&&ve.exec(rt.css(n.elem,t)),a=1,l=20;if(s&&s[3]!==r){r=r||s[3],o=o||[],s=+i||1;do a=a||".5",s/=a,rt.style(n.elem,t,s+r);while(a!==(a=n.cur()/i)&&1!==a&&--l)}return o&&(s=n.start=+s||+i||0,n.unit=r,n.end=o[1]?s+(o[1]+1)*o[2]:+o[2]),n}]};rt.Animation=rt.extend(q,{tweener:function(t,e){rt.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,i=0,o=t.length;o>i;i++)n=t[i],we[n]=we[n]||[],we[n].unshift(e)},prefilter:function(t,e){e?be.unshift(t):be.push(t)}}),rt.speed=function(t,e,n){var i=t&&"object"==typeof t?rt.extend({},t):{complete:n||!n&&e||rt.isFunction(t)&&t,duration:t,easing:n&&e||e&&!rt.isFunction(e)&&e};return i.duration=rt.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in rt.fx.speeds?rt.fx.speeds[i.duration]:rt.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){rt.isFunction(i.old)&&i.old.call(this),i.queue&&rt.dequeue(this,i.queue)},i},rt.fn.extend({fadeTo:function(t,e,n,i){return this.filter(Ot).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var o=rt.isEmptyObject(t),r=rt.speed(e,n,i),s=function(){var e=q(this,rt.extend({},t),r);(o||rt._data(this,"finish"))&&e.stop(!0)};return s.finish=s,o||r.queue===!1?this.each(s):this.queue(r.queue,s)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,o=null!=t&&t+"queueHooks",r=rt.timers,s=rt._data(this);if(o)s[o]&&s[o].stop&&i(s[o]);else for(o in s)s[o]&&s[o].stop&&ye.test(o)&&i(s[o]);for(o=r.length;o--;)r[o].elem!==this||null!=t&&r[o].queue!==t||(r[o].anim.stop(n),e=!1,r.splice(o,1));(e||!n)&&rt.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=rt._data(this),i=n[t+"queue"],o=n[t+"queueHooks"],r=rt.timers,s=i?i.length:0;for(n.finish=!0,rt.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;s>e;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),rt.each(["toggle","show","hide"],function(t,e){var n=rt.fn[e];rt.fn[e]=function(t,i,o){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(M(e,!0),t,i,o)}}),rt.each({slideDown:M("show"),slideUp:M("hide"),slideToggle:M("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){rt.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),rt.timers=[],rt.fx.tick=function(){var t,e=rt.timers,n=0;for(fe=rt.now();n<e.length;n++)t=e[n],t()||e[n]!==t||e.splice(n--,1);e.length||rt.fx.stop(),fe=void 0},rt.fx.timer=function(t){rt.timers.push(t),t()?rt.fx.start():rt.timers.pop()},rt.fx.interval=13,rt.fx.start=function(){ge||(ge=setInterval(rt.fx.tick,rt.fx.interval))},rt.fx.stop=function(){clearInterval(ge),ge=null},rt.fx.speeds={slow:600,fast:200,_default:400},rt.fn.delay=function(t,e){return t=rt.fx?rt.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var i=setTimeout(e,t);n.stop=function(){clearTimeout(i)}})},function(){var t,e,n,i,o=gt.createElement("div");o.setAttribute("className","t"),o.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",t=o.getElementsByTagName("a")[0],n=gt.createElement("select"),i=n.appendChild(gt.createElement("option")),e=o.getElementsByTagName("input")[0],t.style.cssText="top:1px",it.getSetAttribute="t"!==o.className,it.style=/top/.test(t.getAttribute("style")),it.hrefNormalized="/a"===t.getAttribute("href"),it.checkOn=!!e.value,it.optSelected=i.selected,it.enctype=!!gt.createElement("form").enctype,n.disabled=!0,it.optDisabled=!i.disabled,e=gt.createElement("input"),e.setAttribute("value",""),it.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),it.radioValue="t"===e.value,t=e=n=i=o=null}();var _e=/\r/g;rt.fn.extend({val:function(t){var e,n,i,o=this[0];{if(arguments.length)return i=rt.isFunction(t),this.each(function(n){var o;1===this.nodeType&&(o=i?t.call(this,n,rt(this).val()):t,null==o?o="":"number"==typeof o?o+="":rt.isArray(o)&&(o=rt.map(o,function(t){return null==t?"":t+""})),e=rt.valHooks[this.type]||rt.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,o,"value")||(this.value=o))});if(o)return e=rt.valHooks[o.type]||rt.valHooks[o.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(n=e.get(o,"value"))?n:(n=o.value,"string"==typeof n?n.replace(_e,""):null==n?"":n)}}}),rt.extend({valHooks:{option:{get:function(t){var e=rt.find.attr(t,"value");return null!=e?e:rt.text(t)}},select:{get:function(t){for(var e,n,i=t.options,o=t.selectedIndex,r="select-one"===t.type||0>o,s=r?null:[],a=r?o+1:i.length,l=0>o?a:r?o:0;a>l;l++)if(n=i[l],(n.selected||l===o)&&(it.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!rt.nodeName(n.parentNode,"optgroup"))){if(e=rt(n).val(),r)return e;s.push(e)}return s},set:function(t,e){for(var n,i,o=t.options,r=rt.makeArray(e),s=o.length;s--;)if(i=o[s],rt.inArray(rt.valHooks.option.get(i),r)>=0)try{i.selected=n=!0}catch(a){i.scrollHeight}else i.selected=!1;return n||(t.selectedIndex=-1),o}}}}),rt.each(["radio","checkbox"],function(){rt.valHooks[this]={set:function(t,e){return rt.isArray(e)?t.checked=rt.inArray(rt(t).val(),e)>=0:void 0}},it.checkOn||(rt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var xe,ke,Ce=rt.expr.attrHandle,Ee=/^(?:checked|selected)$/i,Se=it.getSetAttribute,$e=it.input;rt.fn.extend({attr:function(t,e){return At(this,rt.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){rt.removeAttr(this,t)})}}),rt.extend({attr:function(t,e,n){var i,o,r=t.nodeType;if(t&&3!==r&&8!==r&&2!==r)return typeof t.getAttribute===Ct?rt.prop(t,e,n):(1===r&&rt.isXMLDoc(t)||(e=e.toLowerCase(),i=rt.attrHooks[e]||(rt.expr.match.bool.test(e)?ke:xe)),void 0===n?i&&"get"in i&&null!==(o=i.get(t,e))?o:(o=rt.find.attr(t,e),null==o?void 0:o):null!==n?i&&"set"in i&&void 0!==(o=i.set(t,n,e))?o:(t.setAttribute(e,n+""),n):void rt.removeAttr(t,e))},removeAttr:function(t,e){var n,i,o=0,r=e&&e.match(wt);if(r&&1===t.nodeType)for(;n=r[o++];)i=rt.propFix[n]||n,rt.expr.match.bool.test(n)?$e&&Se||!Ee.test(n)?t[i]=!1:t[rt.camelCase("default-"+n)]=t[i]=!1:rt.attr(t,n,""),t.removeAttribute(Se?n:i)},attrHooks:{type:{set:function(t,e){if(!it.radioValue&&"radio"===e&&rt.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}}}),ke={set:function(t,e,n){return e===!1?rt.removeAttr(t,n):$e&&Se||!Ee.test(n)?t.setAttribute(!Se&&rt.propFix[n]||n,n):t[rt.camelCase("default-"+n)]=t[n]=!0,n}},rt.each(rt.expr.match.bool.source.match(/\w+/g),function(t,e){
var n=Ce[e]||rt.find.attr;Ce[e]=$e&&Se||!Ee.test(e)?function(t,e,i){var o,r;return i||(r=Ce[e],Ce[e]=o,o=null!=n(t,e,i)?e.toLowerCase():null,Ce[e]=r),o}:function(t,e,n){return n?void 0:t[rt.camelCase("default-"+e)]?e.toLowerCase():null}}),$e&&Se||(rt.attrHooks.value={set:function(t,e,n){return rt.nodeName(t,"input")?void(t.defaultValue=e):xe&&xe.set(t,e,n)}}),Se||(xe={set:function(t,e,n){var i=t.getAttributeNode(n);return i||t.setAttributeNode(i=t.ownerDocument.createAttribute(n)),i.value=e+="","value"===n||e===t.getAttribute(n)?e:void 0}},Ce.id=Ce.name=Ce.coords=function(t,e,n){var i;return n?void 0:(i=t.getAttributeNode(e))&&""!==i.value?i.value:null},rt.valHooks.button={get:function(t,e){var n=t.getAttributeNode(e);return n&&n.specified?n.value:void 0},set:xe.set},rt.attrHooks.contenteditable={set:function(t,e,n){xe.set(t,""===e?!1:e,n)}},rt.each(["width","height"],function(t,e){rt.attrHooks[e]={set:function(t,n){return""===n?(t.setAttribute(e,"auto"),n):void 0}}})),it.style||(rt.attrHooks.style={get:function(t){return t.style.cssText||void 0},set:function(t,e){return t.style.cssText=e+""}});var Te=/^(?:input|select|textarea|button|object)$/i,Oe=/^(?:a|area)$/i;rt.fn.extend({prop:function(t,e){return At(this,rt.prop,t,e,arguments.length>1)},removeProp:function(t){return t=rt.propFix[t]||t,this.each(function(){try{this[t]=void 0,delete this[t]}catch(e){}})}}),rt.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,n){var i,o,r,s=t.nodeType;if(t&&3!==s&&8!==s&&2!==s)return r=1!==s||!rt.isXMLDoc(t),r&&(e=rt.propFix[e]||e,o=rt.propHooks[e]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(t,n,e))?i:t[e]=n:o&&"get"in o&&null!==(i=o.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=rt.find.attr(t,"tabindex");return e?parseInt(e,10):Te.test(t.nodeName)||Oe.test(t.nodeName)&&t.href?0:-1}}}}),it.hrefNormalized||rt.each(["href","src"],function(t,e){rt.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),it.optSelected||(rt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),rt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){rt.propFix[this.toLowerCase()]=this}),it.enctype||(rt.propFix.enctype="encoding");var Ae=/[\t\r\n\f]/g;rt.fn.extend({addClass:function(t){var e,n,i,o,r,s,a=0,l=this.length,u="string"==typeof t&&t;if(rt.isFunction(t))return this.each(function(e){rt(this).addClass(t.call(this,e,this.className))});if(u)for(e=(t||"").match(wt)||[];l>a;a++)if(n=this[a],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Ae," "):" ")){for(r=0;o=e[r++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");s=rt.trim(i),n.className!==s&&(n.className=s)}return this},removeClass:function(t){var e,n,i,o,r,s,a=0,l=this.length,u=0===arguments.length||"string"==typeof t&&t;if(rt.isFunction(t))return this.each(function(e){rt(this).removeClass(t.call(this,e,this.className))});if(u)for(e=(t||"").match(wt)||[];l>a;a++)if(n=this[a],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Ae," "):"")){for(r=0;o=e[r++];)for(;i.indexOf(" "+o+" ")>=0;)i=i.replace(" "+o+" "," ");s=t?rt.trim(i):"",n.className!==s&&(n.className=s)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):rt.isFunction(t)?this.each(function(n){rt(this).toggleClass(t.call(this,n,this.className,e),e)}):this.each(function(){if("string"===n)for(var e,i=0,o=rt(this),r=t.match(wt)||[];e=r[i++];)o.hasClass(e)?o.removeClass(e):o.addClass(e);else(n===Ct||"boolean"===n)&&(this.className&&rt._data(this,"__className__",this.className),this.className=this.className||t===!1?"":rt._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Ae," ").indexOf(e)>=0)return!0;return!1}}),rt.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){rt.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),rt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var Pe=rt.now(),Le=/\?/,Ne=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;rt.parseJSON=function(e){if(t.JSON&&t.JSON.parse)return t.JSON.parse(e+"");var n,i=null,o=rt.trim(e+"");return o&&!rt.trim(o.replace(Ne,function(t,e,o,r){return n&&e&&(i=0),0===i?t:(n=o||e,i+=!r-!o,"")}))?Function("return "+o)():rt.error("Invalid JSON: "+e)},rt.parseXML=function(e){var n,i;if(!e||"string"!=typeof e)return null;try{t.DOMParser?(i=new DOMParser,n=i.parseFromString(e,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(e))}catch(o){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||rt.error("Invalid XML: "+e),n};var Me,je,De=/#.*$/,Ie=/([?&])_=[^&]*/,qe=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Re=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Fe=/^(?:GET|HEAD)$/,Be=/^\/\//,He=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,ze={},We={},Ue="*/".concat("*");try{je=location.href}catch(Ye){je=gt.createElement("a"),je.href="",je=je.href}Me=He.exec(je.toLowerCase())||[],rt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:je,type:"GET",isLocal:Re.test(Me[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ue,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":rt.parseJSON,"text xml":rt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?B(B(t,rt.ajaxSettings),e):B(rt.ajaxSettings,t)},ajaxPrefilter:R(ze),ajaxTransport:R(We),ajax:function(t,e){function n(t,e,n,i){var o,c,v,y,w,x=e;2!==b&&(b=2,a&&clearTimeout(a),u=void 0,s=i||"",_.readyState=t>0?4:0,o=t>=200&&300>t||304===t,n&&(y=H(h,_,n)),y=z(h,y,_,o),o?(h.ifModified&&(w=_.getResponseHeader("Last-Modified"),w&&(rt.lastModified[r]=w),w=_.getResponseHeader("etag"),w&&(rt.etag[r]=w)),204===t||"HEAD"===h.type?x="nocontent":304===t?x="notmodified":(x=y.state,c=y.data,v=y.error,o=!v)):(v=x,(t||!x)&&(x="error",0>t&&(t=0))),_.status=t,_.statusText=(e||x)+"",o?f.resolveWith(d,[c,x,_]):f.rejectWith(d,[_,x,v]),_.statusCode(m),m=void 0,l&&p.trigger(o?"ajaxSuccess":"ajaxError",[_,h,o?c:v]),g.fireWith(d,[_,x]),l&&(p.trigger("ajaxComplete",[_,h]),--rt.active||rt.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var i,o,r,s,a,l,u,c,h=rt.ajaxSetup({},e),d=h.context||h,p=h.context&&(d.nodeType||d.jquery)?rt(d):rt.event,f=rt.Deferred(),g=rt.Callbacks("once memory"),m=h.statusCode||{},v={},y={},b=0,w="canceled",_={readyState:0,getResponseHeader:function(t){var e;if(2===b){if(!c)for(c={};e=qe.exec(s);)c[e[1].toLowerCase()]=e[2];e=c[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===b?s:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return b||(t=y[n]=y[n]||t,v[t]=e),this},overrideMimeType:function(t){return b||(h.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>b)for(e in t)m[e]=[m[e],t[e]];else _.always(t[_.status]);return this},abort:function(t){var e=t||w;return u&&u.abort(e),n(0,e),this}};if(f.promise(_).complete=g.add,_.success=_.done,_.error=_.fail,h.url=((t||h.url||je)+"").replace(De,"").replace(Be,Me[1]+"//"),h.type=e.method||e.type||h.method||h.type,h.dataTypes=rt.trim(h.dataType||"*").toLowerCase().match(wt)||[""],null==h.crossDomain&&(i=He.exec(h.url.toLowerCase()),h.crossDomain=!(!i||i[1]===Me[1]&&i[2]===Me[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(Me[3]||("http:"===Me[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=rt.param(h.data,h.traditional)),F(ze,h,e,_),2===b)return _;l=h.global,l&&0===rt.active++&&rt.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Fe.test(h.type),r=h.url,h.hasContent||(h.data&&(r=h.url+=(Le.test(r)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=Ie.test(r)?r.replace(Ie,"$1_="+Pe++):r+(Le.test(r)?"&":"?")+"_="+Pe++)),h.ifModified&&(rt.lastModified[r]&&_.setRequestHeader("If-Modified-Since",rt.lastModified[r]),rt.etag[r]&&_.setRequestHeader("If-None-Match",rt.etag[r])),(h.data&&h.hasContent&&h.contentType!==!1||e.contentType)&&_.setRequestHeader("Content-Type",h.contentType),_.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Ue+"; q=0.01":""):h.accepts["*"]);for(o in h.headers)_.setRequestHeader(o,h.headers[o]);if(h.beforeSend&&(h.beforeSend.call(d,_,h)===!1||2===b))return _.abort();w="abort";for(o in{success:1,error:1,complete:1})_[o](h[o]);if(u=F(We,h,e,_)){_.readyState=1,l&&p.trigger("ajaxSend",[_,h]),h.async&&h.timeout>0&&(a=setTimeout(function(){_.abort("timeout")},h.timeout));try{b=1,u.send(v,n)}catch(x){if(!(2>b))throw x;n(-1,x)}}else n(-1,"No Transport");return _},getJSON:function(t,e,n){return rt.get(t,e,n,"json")},getScript:function(t,e){return rt.get(t,void 0,e,"script")}}),rt.each(["get","post"],function(t,e){rt[e]=function(t,n,i,o){return rt.isFunction(n)&&(o=o||i,i=n,n=void 0),rt.ajax({url:t,type:e,dataType:o,data:n,success:i})}}),rt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){rt.fn[e]=function(t){return this.on(e,t)}}),rt._evalUrl=function(t){return rt.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},rt.fn.extend({wrapAll:function(t){if(rt.isFunction(t))return this.each(function(e){rt(this).wrapAll(t.call(this,e))});if(this[0]){var e=rt(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return rt.isFunction(t)?this.each(function(e){rt(this).wrapInner(t.call(this,e))}):this.each(function(){var e=rt(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=rt.isFunction(t);return this.each(function(n){rt(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){rt.nodeName(this,"body")||rt(this).replaceWith(this.childNodes)}).end()}}),rt.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||!it.reliableHiddenOffsets()&&"none"===(t.style&&t.style.display||rt.css(t,"display"))},rt.expr.filters.visible=function(t){return!rt.expr.filters.hidden(t)};var Ve=/%20/g,Ge=/\[\]$/,Xe=/\r?\n/g,Ke=/^(?:submit|button|image|reset|file)$/i,Ze=/^(?:input|select|textarea|keygen)/i;rt.param=function(t,e){var n,i=[],o=function(t,e){e=rt.isFunction(e)?e():null==e?"":e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=rt.ajaxSettings&&rt.ajaxSettings.traditional),rt.isArray(t)||t.jquery&&!rt.isPlainObject(t))rt.each(t,function(){o(this.name,this.value)});else for(n in t)W(n,t[n],e,o);return i.join("&").replace(Ve,"+")},rt.fn.extend({serialize:function(){return rt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=rt.prop(this,"elements");return t?rt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!rt(this).is(":disabled")&&Ze.test(this.nodeName)&&!Ke.test(t)&&(this.checked||!Pt.test(t))}).map(function(t,e){var n=rt(this).val();return null==n?null:rt.isArray(n)?rt.map(n,function(t){return{name:e.name,value:t.replace(Xe,"\r\n")}}):{name:e.name,value:n.replace(Xe,"\r\n")}}).get()}}),rt.ajaxSettings.xhr=void 0!==t.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&U()||Y()}:U;var Qe=0,Je={},tn=rt.ajaxSettings.xhr();t.ActiveXObject&&rt(t).on("unload",function(){for(var t in Je)Je[t](void 0,!0)}),it.cors=!!tn&&"withCredentials"in tn,tn=it.ajax=!!tn,tn&&rt.ajaxTransport(function(t){if(!t.crossDomain||it.cors){var e;return{send:function(n,i){var o,r=t.xhr(),s=++Qe;if(r.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)r[o]=t.xhrFields[o];t.mimeType&&r.overrideMimeType&&r.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(o in n)void 0!==n[o]&&r.setRequestHeader(o,n[o]+"");r.send(t.hasContent&&t.data||null),e=function(n,o){var a,l,u;if(e&&(o||4===r.readyState))if(delete Je[s],e=void 0,r.onreadystatechange=rt.noop,o)4!==r.readyState&&r.abort();else{u={},a=r.status,"string"==typeof r.responseText&&(u.text=r.responseText);try{l=r.statusText}catch(c){l=""}a||!t.isLocal||t.crossDomain?1223===a&&(a=204):a=u.text?200:404}u&&i(a,l,u,r.getAllResponseHeaders())},t.async?4===r.readyState?setTimeout(e):r.onreadystatechange=Je[s]=e:e()},abort:function(){e&&e(void 0,!0)}}}}),rt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return rt.globalEval(t),t}}}),rt.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),rt.ajaxTransport("script",function(t){if(t.crossDomain){var e,n=gt.head||rt("head")[0]||gt.documentElement;return{send:function(i,o){e=gt.createElement("script"),e.async=!0,t.scriptCharset&&(e.charset=t.scriptCharset),e.src=t.url,e.onload=e.onreadystatechange=function(t,n){(n||!e.readyState||/loaded|complete/.test(e.readyState))&&(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),e=null,n||o(200,"success"))},n.insertBefore(e,n.firstChild)},abort:function(){e&&e.onload(void 0,!0)}}}});var en=[],nn=/(=)\?(?=&|$)|\?\?/;rt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=en.pop()||rt.expando+"_"+Pe++;return this[t]=!0,t}}),rt.ajaxPrefilter("json jsonp",function(e,n,i){var o,r,s,a=e.jsonp!==!1&&(nn.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&nn.test(e.data)&&"data");return a||"jsonp"===e.dataTypes[0]?(o=e.jsonpCallback=rt.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(nn,"$1"+o):e.jsonp!==!1&&(e.url+=(Le.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return s||rt.error(o+" was not called"),s[0]},e.dataTypes[0]="json",r=t[o],t[o]=function(){s=arguments},i.always(function(){t[o]=r,e[o]&&(e.jsonpCallback=n.jsonpCallback,en.push(o)),s&&rt.isFunction(r)&&r(s[0]),s=r=void 0}),"script"):void 0}),rt.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||gt;var i=dt.exec(t),o=!n&&[];return i?[e.createElement(i[1])]:(i=rt.buildFragment([t],e,o),o&&o.length&&rt(o).remove(),rt.merge([],i.childNodes))};var on=rt.fn.load;rt.fn.load=function(t,e,n){if("string"!=typeof t&&on)return on.apply(this,arguments);var i,o,r,s=this,a=t.indexOf(" ");return a>=0&&(i=t.slice(a,t.length),t=t.slice(0,a)),rt.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),s.length>0&&rt.ajax({url:t,type:r,dataType:"html",data:e}).done(function(t){o=arguments,s.html(i?rt("<div>").append(rt.parseHTML(t)).find(i):t)}).complete(n&&function(t,e){s.each(n,o||[t.responseText,e,t])}),this},rt.expr.filters.animated=function(t){return rt.grep(rt.timers,function(e){return t===e.elem}).length};var rn=t.document.documentElement;rt.offset={setOffset:function(t,e,n){var i,o,r,s,a,l,u,c=rt.css(t,"position"),h=rt(t),d={};"static"===c&&(t.style.position="relative"),a=h.offset(),r=rt.css(t,"top"),l=rt.css(t,"left"),u=("absolute"===c||"fixed"===c)&&rt.inArray("auto",[r,l])>-1,u?(i=h.position(),s=i.top,o=i.left):(s=parseFloat(r)||0,o=parseFloat(l)||0),rt.isFunction(e)&&(e=e.call(t,n,a)),null!=e.top&&(d.top=e.top-a.top+s),null!=e.left&&(d.left=e.left-a.left+o),"using"in e?e.using.call(t,d):h.css(d)}},rt.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){rt.offset.setOffset(this,t,e)});var e,n,i={top:0,left:0},o=this[0],r=o&&o.ownerDocument;if(r)return e=r.documentElement,rt.contains(e,o)?(typeof o.getBoundingClientRect!==Ct&&(i=o.getBoundingClientRect()),n=V(r),{top:i.top+(n.pageYOffset||e.scrollTop)-(e.clientTop||0),left:i.left+(n.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):i},position:function(){if(this[0]){var t,e,n={top:0,left:0},i=this[0];return"fixed"===rt.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),rt.nodeName(t[0],"html")||(n=t.offset()),n.top+=rt.css(t[0],"borderTopWidth",!0),n.left+=rt.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-rt.css(i,"marginTop",!0),left:e.left-n.left-rt.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||rn;t&&!rt.nodeName(t,"html")&&"static"===rt.css(t,"position");)t=t.offsetParent;return t||rn})}}),rt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n=/Y/.test(e);rt.fn[t]=function(i){return At(this,function(t,i,o){var r=V(t);return void 0===o?r?e in r?r[e]:r.document.documentElement[i]:t[i]:void(r?r.scrollTo(n?rt(r).scrollLeft():o,n?o:rt(r).scrollTop()):t[i]=o)},t,i,arguments.length,null)}}),rt.each(["top","left"],function(t,e){rt.cssHooks[e]=S(it.pixelPosition,function(t,n){return n?(n=ne(t,e),oe.test(n)?rt(t).position()[e]+"px":n):void 0})}),rt.each({Height:"height",Width:"width"},function(t,e){rt.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){rt.fn[i]=function(i,o){var r=arguments.length&&(n||"boolean"!=typeof i),s=n||(i===!0||o===!0?"margin":"border");return At(this,function(e,n,i){var o;return rt.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===i?rt.css(e,n,s):rt.style(e,n,i,s)},e,r?i:void 0,r,null)}})}),rt.fn.size=function(){return this.length},rt.fn.andSelf=rt.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return rt});var sn=t.jQuery,an=t.$;return rt.noConflict=function(e){return t.$===rt&&(t.$=an),e&&t.jQuery===rt&&(t.jQuery=sn),rt},typeof e===Ct&&(t.jQuery=t.$=rt),rt}),function(t,e){t.rails!==e&&t.error("jquery-ujs has already been loaded!");var n,i=t(document);t.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",buttonClickSelector:"button[data-remote]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(e){var n=t('meta[name="csrf-token"]').attr("content");n&&e.setRequestHeader("X-CSRF-Token",n)},fire:function(e,n,i){var o=t.Event(n);return e.trigger(o,i),o.result!==!1},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t.attr("href")},handleRemote:function(i){var o,r,s,a,l,u,c,h;if(n.fire(i,"ajax:before")){if(a=i.data("cross-domain"),l=a===e?null:a,u=i.data("with-credentials")||null,c=i.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,i.is("form")){o=i.attr("method"),r=i.attr("action"),s=i.serializeArray();var d=i.data("ujs:submit-button");d&&(s.push(d),i.data("ujs:submit-button",null))}else i.is(n.inputChangeSelector)?(o=i.data("method"),r=i.data("url"),s=i.serialize(),i.data("params")&&(s=s+"&"+i.data("params"))):i.is(n.buttonClickSelector)?(o=i.data("method")||"get",r=i.data("url"),s=i.serialize(),i.data("params")&&(s=s+"&"+i.data("params"))):(o=i.data("method"),r=n.href(i),s=i.data("params")||null);h={type:o||"GET",data:s,dataType:c,beforeSend:function(t,o){return o.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+o.accepts.script),n.fire(i,"ajax:beforeSend",[t,o])},success:function(t,e,n){i.trigger("ajax:success",[t,e,n])},complete:function(t,e){i.trigger("ajax:complete",[t,e])},error:function(t,e,n){i.trigger("ajax:error",[t,e,n])},crossDomain:l},u&&(h.xhrFields={withCredentials:u}),r&&(h.url=r);var p=n.ajax(h);return i.trigger("ajax:send",p),p}return!1},handleMethod:function(i){var o=n.href(i),r=i.data("method"),s=i.attr("target"),a=t("meta[name=csrf-token]").attr("content"),l=t("meta[name=csrf-param]").attr("content"),u=t('<form method="post" action="'+o+'"></form>'),c='<input name="_method" value="'+r+'" type="hidden" />';l!==e&&a!==e&&(c+='<input name="'+l+'" value="'+a+'" type="hidden" />'),s&&u.attr("target",s),u.hide().append(c).appendTo("body"),u.submit()},disableFormElements:function(e){e.find(n.disableSelector).each(function(){var e=t(this),n=e.is("button")?"html":"val";e.data("ujs:enable-with",e[n]()),e[n](e.data("disable-with")),e.prop("disabled",!0)})},enableFormElements:function(e){e.find(n.enableSelector).each(function(){var e=t(this),n=e.is("button")?"html":"val";e.data("ujs:enable-with")&&e[n](e.data("ujs:enable-with")),e.prop("disabled",!1)})},allowAction:function(t){var e,i=t.data("confirm"),o=!1;return i?(n.fire(t,"confirm")&&(o=n.confirm(i),e=n.fire(t,"confirm:complete",[o])),o&&e):!0},blankInputs:function(e,n,i){var o,r,s=t(),a=n||"input,textarea",l=e.find(a);return l.each(function(){if(o=t(this),r=o.is("input[type=checkbox],input[type=radio]")?o.is(":checked"):o.val(),!r==!i){if(o.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+o.attr("name")+'"]').length)return!0;s=s.add(o)}}),s.length?s:!1},nonBlankInputs:function(t,e){return n.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(t){t.data("ujs:enable-with",t.html()),t.html(t.data("disable-with")),t.bind("click.railsDisable",function(t){return n.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable")}},n.fire(i,"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,i){t.crossDomain||n.CSRFProtection(i)}),i.delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(t(this))}),i.delegate(n.linkClickSelector,"click.rails",function(i){var o=t(this),r=o.data("method"),s=o.data("params");if(!n.allowAction(o))return n.stopEverything(i);if(o.is(n.linkDisableSelector)&&n.disableElement(o),o.data("remote")!==e){if((i.metaKey||i.ctrlKey)&&(!r||"GET"===r)&&!s)return!0;var a=n.handleRemote(o);return a===!1?n.enableElement(o):a.error(function(){n.enableElement(o)}),!1}return o.data("method")?(n.handleMethod(o),!1):void 0}),i.delegate(n.buttonClickSelector,"click.rails",function(e){var i=t(this);return n.allowAction(i)?(n.handleRemote(i),!1):n.stopEverything(e)}),i.delegate(n.inputChangeSelector,"change.rails",function(e){var i=t(this);return n.allowAction(i)?(n.handleRemote(i),!1):n.stopEverything(e)}),i.delegate(n.formSubmitSelector,"submit.rails",function(i){var o=t(this),r=o.data("remote")!==e,s=n.blankInputs(o,n.requiredInputSelector),a=n.nonBlankInputs(o,n.fileInputSelector);if(!n.allowAction(o))return n.stopEverything(i);if(s&&o.attr("novalidate")==e&&n.fire(o,"ajax:aborted:required",[s]))return n.stopEverything(i);if(r){if(a){setTimeout(function(){n.disableFormElements(o)},13);var l=n.fire(o,"ajax:aborted:file",[a]);return l||setTimeout(function(){n.enableFormElements(o)},13),l}return n.handleRemote(o),!1}setTimeout(function(){n.disableFormElements(o)},13)}),i.delegate(n.formInputClickSelector,"click.rails",function(e){var i=t(this);if(!n.allowAction(i))return n.stopEverything(e);var o=i.attr("name"),r=o?{name:o,value:i.val()}:null;i.closest("form").data("ujs:submit-button",r)}),i.delegate(n.formSubmitSelector,"ajax:beforeSend.rails",function(e){this==e.target&&n.disableFormElements(t(this))}),i.delegate(n.formSubmitSelector,"ajax:complete.rails",function(e){this==e.target&&n.enableFormElements(t(this))}),t(function(){var e=t("meta[name=csrf-token]").attr("content"),n=t("meta[name=csrf-param]").attr("content");t('form input[name="'+n+'"]').val(e)}))}(jQuery),function(t,e){function n(e,n){var o,r,s,a=e.nodeName.toLowerCase();return"area"===a?(o=e.parentNode,r=o.name,e.href&&r&&"map"===o.nodeName.toLowerCase()?(s=t("img[usemap=#"+r+"]")[0],!!s&&i(s)):!1):(/input|select|textarea|button|object/.test(a)?!e.disabled:"a"===a?e.href||n:n)&&i(e)}function i(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var o=0,r=/^ui-id-\d+$/;t.ui=t.ui||{},t.extend(t.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({focus:function(e){return function(n,i){return"number"==typeof n?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),i&&i.call(e)},n)}):e.apply(this,arguments)}}(t.fn.focus),scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(n){if(n!==e)return this.css("zIndex",n);if(this.length)for(var i,o,r=t(this[0]);r.length&&r[0]!==document;){if(i=r.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(o=parseInt(r.css("zIndex"),10),!isNaN(o)&&0!==o))return o;r=r.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++o)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(n){return!!t.data(n,e)}}):function(e,n,i){return!!t.data(e,i[3])},focusable:function(e){return n(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var i=t.attr(e,"tabindex"),o=isNaN(i);return(o||i>=0)&&n(e,!o)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(n,i){function o(e,n,i,o){return t.each(r,function(){n-=parseFloat(t.css(e,"padding"+this))||0,i&&(n-=parseFloat(t.css(e,"border"+this+"Width"))||0),o&&(n-=parseFloat(t.css(e,"margin"+this))||0)}),n}var r="Width"===i?["Left","Right"]:["Top","Bottom"],s=i.toLowerCase(),a={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(n){return n===e?a["inner"+i].call(this):this.each(function(){t(this).css(s,o(this,n)+"px")})},t.fn["outer"+i]=function(e,n){return"number"!=typeof e?a["outer"+i].call(this,e):this.each(function(){t(this).css(s,o(this,e,!0,n)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(n){return arguments.length?e.call(this,t.camelCase(n)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.support.selectstart="onselectstart"in document.createElement("div"),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,n,i){var o,r=t.ui[e].prototype;for(o in i)r.plugins[o]=r.plugins[o]||[],r.plugins[o].push([n,i[o]])},call:function(t,e,n){var i,o=t.plugins[e];if(o&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(i=0;i<o.length;i++)t.options[o[i][0]]&&o[i][1].apply(t.element,n)}},hasScroll:function(e,n){if("hidden"===t(e).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",o=!1;return e[i]>0?!0:(e[i]=1,o=e[i]>0,e[i]=0,o)}})}(jQuery),function(t,e){var n=0,i=Array.prototype.slice,o=t.cleanData;t.cleanData=function(e){for(var n,i=0;null!=(n=e[i]);i++)try{t(n).triggerHandler("remove")}catch(r){}o(e)},t.widget=function(e,n,i){var o,r,s,a,l={},u=e.split(".")[0];e=e.split(".")[1],o=u+"-"+e,i||(i=n,n=t.Widget),t.expr[":"][o.toLowerCase()]=function(e){return!!t.data(e,o)},t[u]=t[u]||{},r=t[u][e],s=t[u][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new s(t,e)},t.extend(s,r,{version:i.version,_proto:t.extend({},i),_childConstructors:[]}),a=new n,a.options=t.widget.extend({},a.options),t.each(i,function(e,i){return t.isFunction(i)?void(l[e]=function(){var t=function(){return n.prototype[e].apply(this,arguments)},o=function(t){return n.prototype[e].apply(this,t)};return function(){var e,n=this._super,r=this._superApply;return this._super=t,this._superApply=o,e=i.apply(this,arguments),this._super=n,this._superApply=r,e}}()):void(l[e]=i)}),s.prototype=t.widget.extend(a,{widgetEventPrefix:r?a.widgetEventPrefix||e:e},l,{constructor:s,namespace:u,widgetName:e,widgetFullName:o}),r?(t.each(r._childConstructors,function(e,n){var i=n.prototype;t.widget(i.namespace+"."+i.widgetName,s,n._proto)}),delete r._childConstructors):n._childConstructors.push(s),t.widget.bridge(e,s)},t.widget.extend=function(n){for(var o,r,s=i.call(arguments,1),a=0,l=s.length;l>a;a++)for(o in s[a])r=s[a][o],s[a].hasOwnProperty(o)&&r!==e&&(t.isPlainObject(r)?n[o]=t.isPlainObject(n[o])?t.widget.extend({},n[o],r):t.widget.extend({},r):n[o]=r);return n},t.widget.bridge=function(n,o){var r=o.prototype.widgetFullName||n;t.fn[n]=function(s){var a="string"==typeof s,l=i.call(arguments,1),u=this;return s=!a&&l.length?t.widget.extend.apply(null,[s].concat(l)):s,a?this.each(function(){var i,o=t.data(this,r);return o?t.isFunction(o[s])&&"_"!==s.charAt(0)?(i=o[s].apply(o,l),i!==o&&i!==e?(u=i&&i.jquery?u.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+s+"' for "+n+" widget instance"):t.error("cannot call methods on "+n+" prior to initialization; attempted to call method '"+s+"'")}):this.each(function(){var e=t.data(this,r);e?e.option(s||{})._init():t.data(this,r,new o(s,this))}),u}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(n,i){var o,r,s,a=n;if(0===arguments.length)return t.widget.extend({},this.options);
if("string"==typeof n)if(a={},o=n.split("."),n=o.shift(),o.length){for(r=a[n]=t.widget.extend({},this.options[n]),s=0;s<o.length-1;s++)r[o[s]]=r[o[s]]||{},r=r[o[s]];if(n=o.pop(),1===arguments.length)return r[n]===e?null:r[n];r[n]=i}else{if(1===arguments.length)return this.options[n]===e?null:this.options[n];a[n]=i}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,n,i){var o,r=this;"boolean"!=typeof e&&(i=n,n=e,e=!1),i?(n=o=t(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,o=this.widget()),t.each(i,function(i,s){function a(){return e||r.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof s?r[s]:s).apply(r,arguments):void 0}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||t.guid++);var l=i.match(/^(\w+)\s*(.*)$/),u=l[1]+r.eventNamespace,c=l[2];c?o.delegate(c,u,a):n.bind(u,a)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function n(){return("string"==typeof t?i[t]:t).apply(i,arguments)}var i=this;return setTimeout(n,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,n,i){var o,r,s=this.options[e];if(i=i||{},n=t.Event(n),n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],r=n.originalEvent)for(o in r)o in n||(n[o]=r[o]);return this.element.trigger(n,i),!(t.isFunction(s)&&s.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(i,o,r){"string"==typeof o&&(o={effect:o});var s,a=o?o===!0||"number"==typeof o?n:o.effect||n:e;o=o||{},"number"==typeof o&&(o={duration:o}),s=!t.isEmptyObject(o),o.complete=r,o.delay&&i.delay(o.delay),s&&t.effects&&t.effects.effect[a]?i[e](o):a!==e&&i[a]?i[a](o.duration,o.easing,r):i.queue(function(n){t(this)[e](),r&&r.call(i[0]),n()})}})}(jQuery),function(t,e){var n=!1;t(document).mouseup(function(){n=!1}),t.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(n){return!0===t.data(n.target,e.widgetName+".preventClickEvent")?(t.removeData(n.target,e.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!n){this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,o=1===e.which,r="string"==typeof this.options.cancel&&e.target.nodeName?t(e.target).closest(this.options.cancel).length:!1;return o&&!r&&this._mouseCapture(e)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(e)!==!1,!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),n=!0,!0)):!0}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(t,e){function n(t,e,n){return t>e&&e+n>t}function i(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))}t.widget("ui.sortable",t.ui.mouse,{version:"1.10.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===t.axis||i(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(e,n){"disabled"===e?(this.options[e]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):t.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(e,n){var i=null,o=!1,r=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(e),t(e.target).parents().each(function(){return t.data(this,r.widgetName+"-item")===r?(i=t(this),!1):void 0}),t.data(e.target,r.widgetName+"-item")===r&&(i=t(e.target)),i&&(!this.options.handle||n||(t(this.options.handle,i).find("*").addBack().each(function(){this===e.target&&(o=!0)}),o))?(this.currentItem=i,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(e,n,i){var o,r,s=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&"auto"!==s.cursor&&(r=this.document.find("body"),this.storedCursor=r.css("cursor"),r.css("cursor",s.cursor),this.storedStylesheet=t("<style>*{ cursor: "+s.cursor+" !important; }</style>").appendTo(r)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var n,i,o,r,s=this.options,a=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<s.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+s.scrollSpeed:e.pageY-this.overflowOffset.top<s.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-s.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<s.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+s.scrollSpeed:e.pageX-this.overflowOffset.left<s.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-s.scrollSpeed)):(e.pageY-t(document).scrollTop()<s.scrollSensitivity?a=t(document).scrollTop(t(document).scrollTop()-s.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<s.scrollSensitivity&&(a=t(document).scrollTop(t(document).scrollTop()+s.scrollSpeed)),e.pageX-t(document).scrollLeft()<s.scrollSensitivity?a=t(document).scrollLeft(t(document).scrollLeft()-s.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<s.scrollSensitivity&&(a=t(document).scrollLeft(t(document).scrollLeft()+s.scrollSpeed))),a!==!1&&t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(i=this.items[n],o=i.item[0],r=this._intersectsWithPointer(i),r&&i.instance===this.currentContainer&&o!==this.currentItem[0]&&this.placeholder[1===r?"next":"prev"]()[0]!==o&&!t.contains(this.placeholder[0],o)&&("semi-dynamic"===this.options.type?!t.contains(this.element[0],o):!0)){if(this.direction=1===r?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(e,i),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,n){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var i=this,o=this.placeholder.offset(),r=this.options.axis,s={};r&&"x"!==r||(s.left=o.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),r&&"y"!==r||(s.top=o.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(s,parseInt(this.options.revert,10)||500,function(){i._clear(e)})}else this._clear(e,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var n=this._getItemsAsjQuery(e&&e.connected),i=[];return e=e||{},t(n).each(function(){var n=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);n&&i.push((e.key||n[1]+"[]")+"="+(e.key&&e.expression?n[1]:n[2]))}),!i.length&&e.key&&i.push(e.key+"="),i.join("&")},toArray:function(e){var n=this._getItemsAsjQuery(e&&e.connected),i=[];return e=e||{},n.each(function(){i.push(t(e.item||this).attr(e.attribute||"id")||"")}),i},_intersectsWith:function(t){var e=this.positionAbs.left,n=e+this.helperProportions.width,i=this.positionAbs.top,o=i+this.helperProportions.height,r=t.left,s=r+t.width,a=t.top,l=a+t.height,u=this.offset.click.top,c=this.offset.click.left,h="x"===this.options.axis||i+u>a&&l>i+u,d="y"===this.options.axis||e+c>r&&s>e+c,p=h&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:r<e+this.helperProportions.width/2&&n-this.helperProportions.width/2<s&&a<i+this.helperProportions.height/2&&o-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var e="x"===this.options.axis||n(this.positionAbs.top+this.offset.click.top,t.top,t.height),i="y"===this.options.axis||n(this.positionAbs.left+this.offset.click.left,t.left,t.width),o=e&&i,r=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return o?this.floating?s&&"right"===s||"down"===r?2:1:r&&("down"===r?2:1):!1},_intersectsWithSides:function(t){var e=n(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=n(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),o=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return this.floating&&r?"right"===r&&i||"left"===r&&!i:o&&("down"===o&&e||"up"===o&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){function n(){a.push(this)}var i,o,r,s,a=[],l=[],u=this._connectWith();if(u&&e)for(i=u.length-1;i>=0;i--)for(r=t(u[i]),o=r.length-1;o>=0;o--)s=t.data(r[o],this.widgetFullName),s&&s!==this&&!s.options.disabled&&l.push([t.isFunction(s.options.items)?s.options.items.call(s.element):t(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s]);for(l.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=l.length-1;i>=0;i--)l[i][0].each(n);return t(a)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var n=0;n<e.length;n++)if(e[n]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var n,i,o,r,s,a,l,u,c=this.items,h=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(n=d.length-1;n>=0;n--)for(o=t(d[n]),i=o.length-1;i>=0;i--)r=t.data(o[i],this.widgetFullName),r&&r!==this&&!r.options.disabled&&(h.push([t.isFunction(r.options.items)?r.options.items.call(r.element[0],e,{item:this.currentItem}):t(r.options.items,r.element),r]),this.containers.push(r));for(n=h.length-1;n>=0;n--)for(s=h[n][1],a=h[n][0],i=0,u=a.length;u>i;i++)l=t(a[i]),l.data(this.widgetName+"-item",s),c.push({item:l,instance:s,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,i,o,r;for(n=this.items.length-1;n>=0;n--)i=this.items[n],i.instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(o=this.options.toleranceElement?t(this.options.toleranceElement,i.item):i.item,e||(i.width=o.outerWidth(),i.height=o.outerHeight()),r=o.offset(),i.left=r.left,i.top=r.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)r=this.containers[n].element.offset(),this.containers[n].containerCache.left=r.left,this.containers[n].containerCache.top=r.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var n,i=e.options;i.placeholder&&i.placeholder.constructor!==String||(n=i.placeholder,i.placeholder={element:function(){var i=e.currentItem[0].nodeName.toLowerCase(),o=t("<"+i+">",e.document[0]).addClass(n||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===i?e.currentItem.children().each(function(){t("<td>&#160;</td>",e.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(o)}):"img"===i&&o.attr("src",e.currentItem.attr("src")),n||o.css("visibility","hidden"),o},update:function(t,o){(!n||i.forcePlaceholderSize)&&(o.height()||o.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),o.width()||o.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(i.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),i.placeholder.update(e,e.placeholder)},_contactContainers:function(e){var o,r,s,a,l,u,c,h,d,p,f=null,g=null;for(o=this.containers.length-1;o>=0;o--)if(!t.contains(this.currentItem[0],this.containers[o].element[0]))if(this._intersectsWith(this.containers[o].containerCache)){if(f&&t.contains(this.containers[o].element[0],f.element[0]))continue;f=this.containers[o],g=o}else this.containers[o].containerCache.over&&(this.containers[o]._trigger("out",e,this._uiHash(this)),this.containers[o].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[g].containerCache.over||(this.containers[g]._trigger("over",e,this._uiHash(this)),this.containers[g].containerCache.over=1);else{for(s=1e4,a=null,p=f.floating||i(this.currentItem),l=p?"left":"top",u=p?"width":"height",c=this.positionAbs[l]+this.offset.click[l],r=this.items.length-1;r>=0;r--)t.contains(this.containers[g].element[0],this.items[r].item[0])&&this.items[r].item[0]!==this.currentItem[0]&&(!p||n(this.positionAbs.top+this.offset.click.top,this.items[r].top,this.items[r].height))&&(h=this.items[r].item.offset()[l],d=!1,Math.abs(h-c)>Math.abs(h+this.items[r][u]-c)&&(d=!0,h+=this.items[r][u]),Math.abs(h-c)<s&&(s=Math.abs(h-c),a=this.items[r],this.direction=d?"up":"down"));if(!a&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[g])return;a?this._rearrange(e,a,null,!0):this._rearrange(e,null,this.containers[g].element,!0),this._trigger("change",e,this._uiHash()),this.containers[g]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[g],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[g]._trigger("over",e,this._uiHash(this)),this.containers[g].containerCache.over=1}},_createHelper:function(e){var n=this.options,i=t.isFunction(n.helper)?t(n.helper.apply(this.element[0],[e,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||t("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!i[0].style.width||n.forceHelperSize)&&i.width(this.currentItem.width()),(!i[0].style.height||n.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,i,o=this.options;"parent"===o.containment&&(o.containment=this.helper[0].parentNode),("document"===o.containment||"window"===o.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,t("document"===o.containment?document:window).width()-this.helperProportions.width-this.margins.left,(t("document"===o.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||(e=t(o.containment)[0],n=t(o.containment).offset(),i="hidden"!==t(e).css("overflow"),this.containment=[n.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,n.left+(i?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(i?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,n){n||(n=this.position);var i="absolute"===e?1:-1,o="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(o[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:o.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:o.scrollLeft())*i}},_generatePosition:function(e){var n,i,o=this.options,r=e.pageX,s=e.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(s=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(s=this.containment[3]+this.offset.click.top)),o.grid&&(n=this.originalPageY+Math.round((s-this.originalPageY)/o.grid[1])*o.grid[1],s=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-o.grid[1]:n+o.grid[1]:n,i=this.originalPageX+Math.round((r-this.originalPageX)/o.grid[0])*o.grid[0],r=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-o.grid[0]:i+o.grid[0]:i)),{top:s-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(t,e,n,i){n?n[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay(function(){o===this.counter&&this.refreshPositions(!i)})},_clear:function(t,e){function n(t,e,n){return function(i){n._trigger(t,i,e._uiHash(e))}}this.reverting=!1;var i,o=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&o.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||o.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(o.push(function(t){this._trigger("remove",t,this._uiHash())}),o.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),o.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)e||o.push(n("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(o.push(n("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!e){for(this._trigger("beforeStop",t,this._uiHash()),i=0;i<o.length;i++)o[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!e){for(i=0;i<o.length;i++)o[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var n=e||this;return{helper:n.helper,placeholder:n.placeholder||t([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:e?e.element:null}}})}(jQuery),!function(t){function e(t,e){if(!(t.originalEvent.touches.length>1)){t.preventDefault();var n=t.originalEvent.changedTouches[0],i=document.createEvent("MouseEvents");i.initMouseEvent(e,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),t.target.dispatchEvent(i)}}if(t.support.touch="ontouchend"in document,t.support.touch){var n,i=t.ui.mouse.prototype,o=i._mouseInit,r=i._mouseDestroy;i._touchStart=function(t){var i=this;!n&&i._mouseCapture(t.originalEvent.changedTouches[0])&&(n=!0,i._touchMoved=!1,e(t,"mouseover"),e(t,"mousemove"),e(t,"mousedown"))},i._touchMove=function(t){n&&(this._touchMoved=!0,e(t,"mousemove"))},i._touchEnd=function(t){n&&(e(t,"mouseup"),e(t,"mouseout"),this._touchMoved||e(t,"click"),n=!1)},i._mouseInit=function(){var e=this;e.element.bind({touchstart:t.proxy(e,"_touchStart"),touchmove:t.proxy(e,"_touchMove"),touchend:t.proxy(e,"_touchEnd")}),o.call(e)},i._mouseDestroy=function(){var e=this;e.element.unbind({touchstart:t.proxy(e,"_touchStart"),touchmove:t.proxy(e,"_touchMove"),touchend:t.proxy(e,"_touchEnd")}),r.call(e)}}}(jQuery),function(){var t=this,e=t._,n={},i=Array.prototype,o=Object.prototype,r=Function.prototype,s=i.push,a=i.slice,l=i.concat,u=o.toString,c=o.hasOwnProperty,h=i.forEach,d=i.map,p=i.reduce,f=i.reduceRight,g=i.filter,m=i.every,v=i.some,y=i.indexOf,b=i.lastIndexOf,w=Array.isArray,_=Object.keys,x=r.bind,k=function(t){return t instanceof k?t:this instanceof k?void(this._wrapped=t):new k(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=k),exports._=k):t._=k,k.VERSION="1.5.2";var C=k.each=k.forEach=function(t,e,i){if(null!=t)if(h&&t.forEach===h)t.forEach(e,i);else if(t.length===+t.length){for(var o=0,r=t.length;r>o;o++)if(e.call(i,t[o],o,t)===n)return}else for(var s=k.keys(t),o=0,r=s.length;r>o;o++)if(e.call(i,t[s[o]],s[o],t)===n)return};k.map=k.collect=function(t,e,n){var i=[];return null==t?i:d&&t.map===d?t.map(e,n):(C(t,function(t,o,r){i.push(e.call(n,t,o,r))}),i)};var E="Reduce of empty array with no initial value";k.reduce=k.foldl=k.inject=function(t,e,n,i){var o=arguments.length>2;if(null==t&&(t=[]),p&&t.reduce===p)return i&&(e=k.bind(e,i)),o?t.reduce(e,n):t.reduce(e);if(C(t,function(t,r,s){o?n=e.call(i,n,t,r,s):(n=t,o=!0)}),!o)throw new TypeError(E);return n},k.reduceRight=k.foldr=function(t,e,n,i){var o=arguments.length>2;if(null==t&&(t=[]),f&&t.reduceRight===f)return i&&(e=k.bind(e,i)),o?t.reduceRight(e,n):t.reduceRight(e);var r=t.length;if(r!==+r){var s=k.keys(t);r=s.length}if(C(t,function(a,l,u){l=s?s[--r]:--r,o?n=e.call(i,n,t[l],l,u):(n=t[l],o=!0)}),!o)throw new TypeError(E);return n},k.find=k.detect=function(t,e,n){var i;return S(t,function(t,o,r){return e.call(n,t,o,r)?(i=t,!0):void 0}),i},k.filter=k.select=function(t,e,n){var i=[];return null==t?i:g&&t.filter===g?t.filter(e,n):(C(t,function(t,o,r){e.call(n,t,o,r)&&i.push(t)}),i)},k.reject=function(t,e,n){return k.filter(t,function(t,i,o){return!e.call(n,t,i,o)},n)},k.every=k.all=function(t,e,i){e||(e=k.identity);var o=!0;return null==t?o:m&&t.every===m?t.every(e,i):(C(t,function(t,r,s){return(o=o&&e.call(i,t,r,s))?void 0:n}),!!o)};var S=k.some=k.any=function(t,e,i){e||(e=k.identity);var o=!1;return null==t?o:v&&t.some===v?t.some(e,i):(C(t,function(t,r,s){return o||(o=e.call(i,t,r,s))?n:void 0}),!!o)};k.contains=k.include=function(t,e){
return null==t?!1:y&&t.indexOf===y?-1!=t.indexOf(e):S(t,function(t){return t===e})},k.invoke=function(t,e){var n=a.call(arguments,2),i=k.isFunction(e);return k.map(t,function(t){return(i?e:t[e]).apply(t,n)})},k.pluck=function(t,e){return k.map(t,function(t){return t[e]})},k.where=function(t,e,n){return k.isEmpty(e)?n?void 0:[]:k[n?"find":"filter"](t,function(t){for(var n in e)if(e[n]!==t[n])return!1;return!0})},k.findWhere=function(t,e){return k.where(t,e,!0)},k.max=function(t,e,n){if(!e&&k.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!e&&k.isEmpty(t))return-(1/0);var i={computed:-(1/0),value:-(1/0)};return C(t,function(t,o,r){var s=e?e.call(n,t,o,r):t;s>i.computed&&(i={value:t,computed:s})}),i.value},k.min=function(t,e,n){if(!e&&k.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!e&&k.isEmpty(t))return 1/0;var i={computed:1/0,value:1/0};return C(t,function(t,o,r){var s=e?e.call(n,t,o,r):t;s<i.computed&&(i={value:t,computed:s})}),i.value},k.shuffle=function(t){var e,n=0,i=[];return C(t,function(t){e=k.random(n++),i[n-1]=i[e],i[e]=t}),i},k.sample=function(t,e,n){return arguments.length<2||n?t[k.random(t.length-1)]:k.shuffle(t).slice(0,Math.max(0,e))};var $=function(t){return k.isFunction(t)?t:function(e){return e[t]}};k.sortBy=function(t,e,n){var i=$(e);return k.pluck(k.map(t,function(t,e,o){return{value:t,index:e,criteria:i.call(n,t,e,o)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index-e.index}),"value")};var T=function(t){return function(e,n,i){var o={},r=null==n?k.identity:$(n);return C(e,function(n,s){var a=r.call(i,n,s,e);t(o,a,n)}),o}};k.groupBy=T(function(t,e,n){(k.has(t,e)?t[e]:t[e]=[]).push(n)}),k.indexBy=T(function(t,e,n){t[e]=n}),k.countBy=T(function(t,e){k.has(t,e)?t[e]++:t[e]=1}),k.sortedIndex=function(t,e,n,i){n=null==n?k.identity:$(n);for(var o=n.call(i,e),r=0,s=t.length;s>r;){var a=r+s>>>1;n.call(i,t[a])<o?r=a+1:s=a}return r},k.toArray=function(t){return t?k.isArray(t)?a.call(t):t.length===+t.length?k.map(t,k.identity):k.values(t):[]},k.size=function(t){return null==t?0:t.length===+t.length?t.length:k.keys(t).length},k.first=k.head=k.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:a.call(t,0,e)},k.initial=function(t,e,n){return a.call(t,0,t.length-(null==e||n?1:e))},k.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:a.call(t,Math.max(t.length-e,0))},k.rest=k.tail=k.drop=function(t,e,n){return a.call(t,null==e||n?1:e)},k.compact=function(t){return k.filter(t,k.identity)};var O=function(t,e,n){return e&&k.every(t,k.isArray)?l.apply(n,t):(C(t,function(t){k.isArray(t)||k.isArguments(t)?e?s.apply(n,t):O(t,e,n):n.push(t)}),n)};k.flatten=function(t,e){return O(t,e,[])},k.without=function(t){return k.difference(t,a.call(arguments,1))},k.uniq=k.unique=function(t,e,n,i){k.isFunction(e)&&(i=n,n=e,e=!1);var o=n?k.map(t,n,i):t,r=[],s=[];return C(o,function(n,i){(e?i&&s[s.length-1]===n:k.contains(s,n))||(s.push(n),r.push(t[i]))}),r},k.union=function(){return k.uniq(k.flatten(arguments,!0))},k.intersection=function(t){var e=a.call(arguments,1);return k.filter(k.uniq(t),function(t){return k.every(e,function(e){return k.indexOf(e,t)>=0})})},k.difference=function(t){var e=l.apply(i,a.call(arguments,1));return k.filter(t,function(t){return!k.contains(e,t)})},k.zip=function(){for(var t=k.max(k.pluck(arguments,"length").concat(0)),e=new Array(t),n=0;t>n;n++)e[n]=k.pluck(arguments,""+n);return e},k.object=function(t,e){if(null==t)return{};for(var n={},i=0,o=t.length;o>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},k.indexOf=function(t,e,n){if(null==t)return-1;var i=0,o=t.length;if(n){if("number"!=typeof n)return i=k.sortedIndex(t,e),t[i]===e?i:-1;i=0>n?Math.max(0,o+n):n}if(y&&t.indexOf===y)return t.indexOf(e,n);for(;o>i;i++)if(t[i]===e)return i;return-1},k.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=null!=n;if(b&&t.lastIndexOf===b)return i?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var o=i?n:t.length;o--;)if(t[o]===e)return o;return-1},k.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((e-t)/n),0),o=0,r=new Array(i);i>o;)r[o++]=t,t+=n;return r};var A=function(){};k.bind=function(t,e){var n,i;if(x&&t.bind===x)return x.apply(t,a.call(arguments,1));if(!k.isFunction(t))throw new TypeError;return n=a.call(arguments,2),i=function(){if(!(this instanceof i))return t.apply(e,n.concat(a.call(arguments)));A.prototype=t.prototype;var o=new A;A.prototype=null;var r=t.apply(o,n.concat(a.call(arguments)));return Object(r)===r?r:o}},k.partial=function(t){var e=a.call(arguments,1);return function(){return t.apply(this,e.concat(a.call(arguments)))}},k.bindAll=function(t){var e=a.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return C(e,function(e){t[e]=k.bind(t[e],t)}),t},k.memoize=function(t,e){var n={};return e||(e=k.identity),function(){var i=e.apply(this,arguments);return k.has(n,i)?n[i]:n[i]=t.apply(this,arguments)}},k.delay=function(t,e){var n=a.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},k.defer=function(t){return k.delay.apply(k,[t,1].concat(a.call(arguments,1)))},k.throttle=function(t,e,n){var i,o,r,s=null,a=0;n||(n={});var l=function(){a=n.leading===!1?0:new Date,s=null,r=t.apply(i,o)};return function(){var u=new Date;a||n.leading!==!1||(a=u);var c=e-(u-a);return i=this,o=arguments,0>=c?(clearTimeout(s),s=null,a=u,r=t.apply(i,o)):s||n.trailing===!1||(s=setTimeout(l,c)),r}},k.debounce=function(t,e,n){var i,o,r,s,a;return function(){r=this,o=arguments,s=new Date;var l=function(){var u=new Date-s;e>u?i=setTimeout(l,e-u):(i=null,n||(a=t.apply(r,o)))},u=n&&!i;return i||(i=setTimeout(l,e)),u&&(a=t.apply(r,o)),a}},k.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},k.wrap=function(t,e){return function(){var n=[t];return s.apply(n,arguments),e.apply(this,n)}},k.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},k.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},k.keys=_||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)k.has(t,n)&&e.push(n);return e},k.values=function(t){for(var e=k.keys(t),n=e.length,i=new Array(n),o=0;n>o;o++)i[o]=t[e[o]];return i},k.pairs=function(t){for(var e=k.keys(t),n=e.length,i=new Array(n),o=0;n>o;o++)i[o]=[e[o],t[e[o]]];return i},k.invert=function(t){for(var e={},n=k.keys(t),i=0,o=n.length;o>i;i++)e[t[n[i]]]=n[i];return e},k.functions=k.methods=function(t){var e=[];for(var n in t)k.isFunction(t[n])&&e.push(n);return e.sort()},k.extend=function(t){return C(a.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},k.pick=function(t){var e={},n=l.apply(i,a.call(arguments,1));return C(n,function(n){n in t&&(e[n]=t[n])}),e},k.omit=function(t){var e={},n=l.apply(i,a.call(arguments,1));for(var o in t)k.contains(n,o)||(e[o]=t[o]);return e},k.defaults=function(t){return C(a.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t},k.clone=function(t){return k.isObject(t)?k.isArray(t)?t.slice():k.extend({},t):t},k.tap=function(t,e){return e(t),t};var P=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof k&&(t=t._wrapped),e instanceof k&&(e=e._wrapped);var o=u.call(t);if(o!=u.call(e))return!1;switch(o){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var r=n.length;r--;)if(n[r]==t)return i[r]==e;var s=t.constructor,a=e.constructor;if(s!==a&&!(k.isFunction(s)&&s instanceof s&&k.isFunction(a)&&a instanceof a))return!1;n.push(t),i.push(e);var l=0,c=!0;if("[object Array]"==o){if(l=t.length,c=l==e.length)for(;l--&&(c=P(t[l],e[l],n,i)););}else{for(var h in t)if(k.has(t,h)&&(l++,!(c=k.has(e,h)&&P(t[h],e[h],n,i))))break;if(c){for(h in e)if(k.has(e,h)&&!l--)break;c=!l}}return n.pop(),i.pop(),c};k.isEqual=function(t,e){return P(t,e,[],[])},k.isEmpty=function(t){if(null==t)return!0;if(k.isArray(t)||k.isString(t))return 0===t.length;for(var e in t)if(k.has(t,e))return!1;return!0},k.isElement=function(t){return!(!t||1!==t.nodeType)},k.isArray=w||function(t){return"[object Array]"==u.call(t)},k.isObject=function(t){return t===Object(t)},C(["Arguments","Function","String","Number","Date","RegExp"],function(t){k["is"+t]=function(e){return u.call(e)=="[object "+t+"]"}}),k.isArguments(arguments)||(k.isArguments=function(t){return!(!t||!k.has(t,"callee"))}),"function"!=typeof/./&&(k.isFunction=function(t){return"function"==typeof t}),k.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},k.isNaN=function(t){return k.isNumber(t)&&t!=+t},k.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==u.call(t)},k.isNull=function(t){return null===t},k.isUndefined=function(t){return void 0===t},k.has=function(t,e){return c.call(t,e)},k.noConflict=function(){return t._=e,this},k.identity=function(t){return t},k.times=function(t,e,n){for(var i=Array(Math.max(0,t)),o=0;t>o;o++)i[o]=e.call(n,o);return i},k.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var L={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};L.unescape=k.invert(L.escape);var N={escape:new RegExp("["+k.keys(L.escape).join("")+"]","g"),unescape:new RegExp("("+k.keys(L.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(t){k[t]=function(e){return null==e?"":(""+e).replace(N[t],function(e){return L[t][e]})}}),k.result=function(t,e){if(null==t)return void 0;var n=t[e];return k.isFunction(n)?n.call(t):n},k.mixin=function(t){C(k.functions(t),function(e){var n=k[e]=t[e];k.prototype[e]=function(){var t=[this._wrapped];return s.apply(t,arguments),q.call(this,n.apply(k,t))}})};var M=0;k.uniqueId=function(t){var e=++M+"";return t?t+e:e},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var j=/(.)^/,D={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},I=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(t,e,n){var i;n=k.defaults({},n,k.templateSettings);var o=new RegExp([(n.escape||j).source,(n.interpolate||j).source,(n.evaluate||j).source].join("|")+"|$","g"),r=0,s="__p+='";t.replace(o,function(e,n,i,o,a){return s+=t.slice(r,a).replace(I,function(t){return"\\"+D[t]}),n&&(s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(s+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),o&&(s+="';\n"+o+"\n__p+='"),r=a+e.length,e}),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{i=new Function(n.variable||"obj","_",s)}catch(a){throw a.source=s,a}if(e)return i(e,k);var l=function(t){return i.call(this,t,k)};return l.source="function("+(n.variable||"obj")+"){\n"+s+"}",l},k.chain=function(t){return k(t).chain()};var q=function(t){return this._chain?k(t).chain():t};k.mixin(k),C(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];k.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],q.call(this,n)}}),C(["concat","join","slice"],function(t){var e=i[t];k.prototype[t]=function(){return q.call(this,e.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(t,e){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(n,i,o){t.Backbone=e(t,o,n,i)});else if("undefined"!=typeof exports){var n=require("underscore");e(t,exports,n)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e,n,i){var o=t.Backbone,r=[],s=(r.push,r.slice);r.splice;e.VERSION="1.1.2",e.$=i,e.noConflict=function(){return t.Backbone=o,this},e.emulateHTTP=!1,e.emulateJSON=!1;var a=e.Events={on:function(t,e,n){if(!u(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,i){if(!u(this,"once",t,[e,i])||!e)return this;var o=this,r=n.once(function(){o.off(t,r),e.apply(this,arguments)});return r._callback=e,this.on(t,r,i)},off:function(t,e,i){var o,r,s,a,l,c,h,d;if(!this._events||!u(this,"off",t,[e,i]))return this;if(!t&&!e&&!i)return this._events=void 0,this;for(a=t?[t]:n.keys(this._events),l=0,c=a.length;c>l;l++)if(t=a[l],s=this._events[t]){if(this._events[t]=o=[],e||i)for(h=0,d=s.length;d>h;h++)r=s[h],(e&&e!==r.callback&&e!==r.callback._callback||i&&i!==r.context)&&o.push(r);o.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=s.call(arguments,1);if(!u(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&c(n,e),i&&c(i,arguments),this},stopListening:function(t,e,i){var o=this._listeningTo;if(!o)return this;var r=!e&&!i;i||"object"!=typeof e||(i=this),t&&((o={})[t._listenId]=t);for(var s in o)t=o[s],t.off(e,i,this),(r||n.isEmpty(t._events))&&delete this._listeningTo[s];return this}},l=/\s+/,u=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var o in n)t[e].apply(t,[o,n[o]].concat(i));return!1}if(l.test(n)){for(var r=n.split(l),s=0,a=r.length;a>s;s++)t[e].apply(t,[r[s]].concat(i));return!1}return!0},c=function(t,e){var n,i=-1,o=t.length,r=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++i<o;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<o;)(n=t[i]).callback.call(n.ctx,r);return;case 2:for(;++i<o;)(n=t[i]).callback.call(n.ctx,r,s);return;case 3:for(;++i<o;)(n=t[i]).callback.call(n.ctx,r,s,a);return;default:for(;++i<o;)(n=t[i]).callback.apply(n.ctx,e);return}},h={listenTo:"on",listenToOnce:"once"};n.each(h,function(t,e){a[e]=function(e,i,o){var r=this._listeningTo||(this._listeningTo={}),s=e._listenId||(e._listenId=n.uniqueId("l"));return r[s]=e,o||"object"!=typeof i||(o=this),e[t](i,o,this),this}}),a.bind=a.on,a.unbind=a.off,n.extend(e,a);var d=e.Model=function(t,e){var i=t||{};e||(e={}),this.cid=n.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(i=this.parse(i,e)||{}),i=n.defaults({},i,n.result(this,"defaults")),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(d.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,i){var o,r,s,a,l,u,c,h;if(null==t)return this;if("object"==typeof t?(r=t,i=e):(r={})[t]=e,i||(i={}),!this._validate(r,i))return!1;s=i.unset,l=i.silent,a=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=n.clone(this.attributes),this.changed={}),h=this.attributes,c=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]);for(o in r)e=r[o],n.isEqual(h[o],e)||a.push(o),n.isEqual(c[o],e)?delete this.changed[o]:this.changed[o]=e,s?delete h[o]:h[o]=e;if(!l){a.length&&(this._pending=i);for(var d=0,p=a.length;p>d;d++)this.trigger("change:"+a[d],this,h[a[d]],i)}if(u)return this;if(!l)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?n.clone(this.changed):!1;var e,i=!1,o=this._changing?this._previousAttributes:this.attributes;for(var r in t)n.isEqual(o[r],e=t[r])||((i||(i={}))[r]=e);return i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){t=t?n.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,i=t.success;return t.success=function(n){return e.set(e.parse(n,t),t)?(i&&i(e,n,t),void e.trigger("sync",e,n,t)):!1},I(this,t),this.sync("read",this,t)},save:function(t,e,i){var o,r,s,a=this.attributes;if(null==t||"object"==typeof t?(o=t,i=e):(o={})[t]=e,i=n.extend({validate:!0},i),o&&!i.wait){if(!this.set(o,i))return!1}else if(!this._validate(o,i))return!1;o&&i.wait&&(this.attributes=n.extend({},a,o)),void 0===i.parse&&(i.parse=!0);var l=this,u=i.success;return i.success=function(t){l.attributes=a;var e=l.parse(t,i);return i.wait&&(e=n.extend(o||{},e)),n.isObject(e)&&!l.set(e,i)?!1:(u&&u(l,t,i),void l.trigger("sync",l,t,i))},I(this,i),r=this.isNew()?"create":i.patch?"patch":"update","patch"===r&&(i.attrs=o),s=this.sync(r,this,i),o&&i.wait&&(this.attributes=a),s},destroy:function(t){t=t?n.clone(t):{};var e=this,i=t.success,o=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(n){(t.wait||e.isNew())&&o(),i&&i(e,n,t),e.isNew()||e.trigger("sync",e,n,t)},this.isNew())return t.success(),!1;I(this,t);var r=this.sync("delete",this,t);return t.wait||o(),r},url:function(){var t=n.result(this,"urlRoot")||n.result(this.collection,"url")||D();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return i?(this.trigger("invalid",this,i,n.extend(e,{validationError:i})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];n.each(p,function(t){d.prototype[t]=function(){var e=s.call(arguments);return e.unshift(this.attributes),n[t].apply(n,e)}});var f=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},g={add:!0,remove:!0,merge:!0},m={add:!0,remove:!1};n.extend(f.prototype,a,{model:d,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,m))},remove:function(t,e){var i=!n.isArray(t);t=i?[t]:n.clone(t),e||(e={});var o,r,s,a;for(o=0,r=t.length;r>o;o++)a=t[o]=this.get(t[o]),a&&(delete this._byId[a.id],delete this._byId[a.cid],s=this.indexOf(a),this.models.splice(s,1),this.length--,e.silent||(e.index=s,a.trigger("remove",a,this,e)),this._removeReference(a,e));return i?t[0]:t},set:function(t,e){e=n.defaults({},e,g),e.parse&&(t=this.parse(t,e));var i=!n.isArray(t);t=i?t?[t]:[]:n.clone(t);var o,r,s,a,l,u,c,h=e.at,p=this.model,f=this.comparator&&null==h&&e.sort!==!1,m=n.isString(this.comparator)?this.comparator:null,v=[],y=[],b={},w=e.add,_=e.merge,x=e.remove,k=!f&&w&&x?[]:!1;for(o=0,r=t.length;r>o;o++){if(l=t[o]||{},s=l instanceof d?a=l:l[p.prototype.idAttribute||"id"],u=this.get(s))x&&(b[u.cid]=!0),_&&(l=l===a?a.attributes:l,e.parse&&(l=u.parse(l,e)),u.set(l,e),f&&!c&&u.hasChanged(m)&&(c=!0)),t[o]=u;else if(w){if(a=t[o]=this._prepareModel(l,e),!a)continue;v.push(a),this._addReference(a,e)}a=u||a,!k||!a.isNew()&&b[a.id]||k.push(a),b[a.id]=!0}if(x){for(o=0,r=this.length;r>o;++o)b[(a=this.models[o]).cid]||y.push(a);y.length&&this.remove(y,e)}if(v.length||k&&k.length)if(f&&(c=!0),this.length+=v.length,null!=h)for(o=0,r=v.length;r>o;o++)this.models.splice(h+o,0,v[o]);else{k&&(this.models.length=0);var C=k||v;for(o=0,r=C.length;r>o;o++)this.models.push(C[o])}if(c&&this.sort({silent:!0}),!e.silent){for(o=0,r=v.length;r>o;o++)(a=v[o]).trigger("add",a,this,e);(c||k&&k.length)&&this.trigger("sort",this,e)}return i?t[0]:t},reset:function(t,e){e||(e={});for(var i=0,o=this.models.length;o>i;i++)this._removeReference(this.models[i],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return s.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return n.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return n.invoke(this.models,"get",t)},fetch:function(t){t=t?n.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,i=this;return t.success=function(n){var o=t.reset?"reset":"set";i[o](n,t),e&&e(i,n,t),i.trigger("sync",i,n,t)},I(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?n.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var i=this,o=e.success;return e.success=function(t,n){e.wait&&i.add(t,e),o&&o(t,n,e)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof d)return t;e=e?n.clone(e):{},e.collection=this;var i=new this.model(t,e);return i.validationError?(this.trigger("invalid",this,i.validationError,e),!1):i},_addReference:function(t,e){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,i),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var v=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(v,function(t){f.prototype[t]=function(){var e=s.call(arguments);return e.unshift(this.models),n[t].apply(n,e)}});var y=["groupBy","countBy","sortBy","indexBy"];n.each(y,function(t){f.prototype[t]=function(e,i){var o=n.isFunction(e)?e:function(t){return t.get(e)};return n[t](this.models,o,i)}});var b=e.View=function(t){this.cid=n.uniqueId("view"),t||(t={}),n.extend(this,n.pick(t,_)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,_=["model","collection","el","id","attributes","className","tagName","events"];n.extend(b.prototype,a,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,n){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=n.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var i=t[e];if(n.isFunction(i)||(i=this[t[e]]),i){var o=e.match(w),r=o[1],s=o[2];i=n.bind(i,this),r+=".delegateEvents"+this.cid,""===s?this.$el.on(r,i):this.$el.on(r,s,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var t=n.extend({},n.result(this,"attributes"));this.id&&(t.id=n.result(this,"id")),this.className&&(t["class"]=n.result(this,"className"));var i=e.$("<"+n.result(this,"tagName")+">").attr(t);this.setElement(i,!1)}}}),e.sync=function(t,i,o){var r=k[t];n.defaults(o||(o={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var s={type:r,dataType:"json"};if(o.url||(s.url=n.result(i,"url")||D()),null!=o.data||!i||"create"!==t&&"update"!==t&&"patch"!==t||(s.contentType="application/json",s.data=JSON.stringify(o.attrs||i.toJSON(o))),o.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),o.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){s.type="POST",o.emulateJSON&&(s.data._method=r);var a=o.beforeSend;o.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",r),a?a.apply(this,arguments):void 0}}"GET"===s.type||o.emulateJSON||(s.processData=!1),"PATCH"===s.type&&x&&(s.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=o.xhr=e.ajax(n.extend(s,o));return i.trigger("request",i,l,o),l};var x=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),k={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var C=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},E=/\((.*?)\)/g,S=/(\(\?)?:\w+/g,$=/\*\w+/g,T=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(C.prototype,a,{initialize:function(){},route:function(t,i,o){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(i)&&(o=i,i=""),o||(o=this[i]);var r=this;return e.history.route(t,function(n){var s=r._extractParameters(t,n);r.execute(o,s),r.trigger.apply(r,["route:"+i].concat(s)),r.trigger("route",i,s),e.history.trigger("route",r,i,s)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(T,"\\$&").replace(E,"(?:$1)?").replace(S,function(t,e){return e?t:"([^/?]+)"}).replace($,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return n.map(i,function(t,e){return e===i.length-1?t||null:t?decodeURIComponent(t):null})}});var O=e.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},A=/^[#\/]|\s+$/g,P=/^\/+|\/+$/g,L=/msie [\w.]+/,N=/\/$/,M=/#.*$/;O.started=!1,n.extend(O.prototype,a,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(N,"");t.indexOf(n)||(t=t.slice(n.length))}else t=this.getHash();return t.replace(A,"")},start:function(t){if(O.started)throw new Error("Backbone.history has already been started");O.started=!0,this.options=n.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),o=document.documentMode,r=L.exec(navigator.userAgent.toLowerCase())&&(!o||7>=o);if(this.root=("/"+this.root+"/").replace(P,"/"),r&&this._wantsHashChange){var s=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=s.hide().appendTo("body")[0].contentWindow,this.navigate(i)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;var a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&a.hash&&(this.fragment=this.getHash().replace(A,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),O.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(t){return t=this.fragment=this.getFragment(t),n.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(t,e){if(!O.started)return!1;e&&e!==!0||(e={trigger:!!e});var n=this.root+(t=this.getFragment(t||""));if(t=t.replace(M,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),e.history=new O;var j=function(t,e){var i,o=this;i=t&&n.has(t,"constructor")?t.constructor:function(){return o.apply(this,arguments)},n.extend(i,o,e);var r=function(){this.constructor=i};return r.prototype=o.prototype,i.prototype=new r,t&&n.extend(i.prototype,t),i.__super__=o.prototype,i};d.extend=f.extend=C.extend=b.extend=O.extend=j;var D=function(){throw new Error('A "url" property or function must be specified')},I=function(t,e){var n=e.error;e.error=function(i){n&&n(t,i,e),t.trigger("error",t,i,e)}};return e}),!function(t,e,n){"undefined"!=typeof module&&module.exports?module.exports=n():"function"==typeof define&&define.amd?define(e,n):t[e]=n()}(this,"bowser",function(){function t(t){function e(e){var n=t.match(e);return n&&n.length>1&&n[1]||""}function n(e){var n=t.match(e);return n&&n.length>1&&n[2]||""}function i(t){switch(t){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return void 0}}var o,r=e(/(ipod|iphone|ipad)/i).toLowerCase(),a=/like android/i.test(t),l=!a&&/android/i.test(t),u=/nexus\s*[0-6]\s*/i.test(t),c=!u&&/nexus\s*[0-9]+/i.test(t),h=/CrOS/.test(t),d=/silk/i.test(t),p=/sailfish/i.test(t),f=/tizen/i.test(t),g=/(web|hpw)os/i.test(t),m=/windows phone/i.test(t),v=(/SamsungBrowser/i.test(t),!m&&/windows/i.test(t)),y=!r&&!d&&/macintosh/i.test(t),b=!l&&!p&&!f&&!g&&/linux/i.test(t),w=e(/edge\/(\d+(\.\d+)?)/i),_=e(/version\/(\d+(\.\d+)?)/i),x=/tablet/i.test(t)&&!/tablet pc/i.test(t),k=!x&&/[^-]mobi/i.test(t),C=/xbox/i.test(t);/opera/i.test(t)?o={name:"Opera",opera:s,version:_||e(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(t)?o={name:"Opera",opera:s,version:e(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||_}:/SamsungBrowser/i.test(t)?o={name:"Samsung Internet for Android",samsungBrowser:s,version:_||e(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(t)?o={name:"Opera Coast",coast:s,version:_||e(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(t)?o={name:"Yandex Browser",yandexbrowser:s,version:_||e(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(t)?o={
name:"UC Browser",ucbrowser:s,version:e(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(t)?o={name:"Maxthon",maxthon:s,version:e(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(t)?o={name:"Epiphany",epiphany:s,version:e(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(t)?o={name:"Puffin",puffin:s,version:e(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(t)?o={name:"Sleipnir",sleipnir:s,version:e(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(t)?o={name:"K-Meleon",kMeleon:s,version:e(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:m?(o={name:"Windows Phone",windowsphone:s},w?(o.msedge=s,o.version=w):(o.msie=s,o.version=e(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(t)?o={name:"Internet Explorer",msie:s,version:e(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:h?o={name:"Chrome",chromeos:s,chromeBook:s,chrome:s,version:e(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(t)?o={name:"Microsoft Edge",msedge:s,version:w}:/vivaldi/i.test(t)?o={name:"Vivaldi",vivaldi:s,version:e(/vivaldi\/(\d+(\.\d+)?)/i)||_}:p?o={name:"Sailfish",sailfish:s,version:e(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(t)?o={name:"SeaMonkey",seamonkey:s,version:e(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(t)?(o={name:"Firefox",firefox:s,version:e(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(t)&&(o.firefoxos=s)):d?o={name:"Amazon Silk",silk:s,version:e(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(t)?o={name:"PhantomJS",phantom:s,version:e(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(t)?o={name:"SlimerJS",slimer:s,version:e(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(t)||/rim\stablet/i.test(t)?o={name:"BlackBerry",blackberry:s,version:_||e(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:g?(o={name:"WebOS",webos:s,version:_||e(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(t)&&(o.touchpad=s)):/bada/i.test(t)?o={name:"Bada",bada:s,version:e(/dolfin\/(\d+(\.\d+)?)/i)}:f?o={name:"Tizen",tizen:s,version:e(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||_}:/qupzilla/i.test(t)?o={name:"QupZilla",qupzilla:s,version:e(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||_}:/chromium/i.test(t)?o={name:"Chromium",chromium:s,version:e(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||_}:/chrome|crios|crmo/i.test(t)?o={name:"Chrome",chrome:s,version:e(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:l?o={name:"Android",version:_}:/safari|applewebkit/i.test(t)?(o={name:"Safari",safari:s},_&&(o.version=_)):r?(o={name:"iphone"==r?"iPhone":"ipad"==r?"iPad":"iPod"},_&&(o.version=_)):o=/googlebot/i.test(t)?{name:"Googlebot",googlebot:s,version:e(/googlebot\/(\d+(\.\d+))/i)||_}:{name:e(/^(.*)\/(.*) /),version:n(/^(.*)\/(.*) /)},!o.msedge&&/(apple)?webkit/i.test(t)?(/(apple)?webkit\/537\.36/i.test(t)?(o.name=o.name||"Blink",o.blink=s):(o.name=o.name||"Webkit",o.webkit=s),!o.version&&_&&(o.version=_)):!o.opera&&/gecko\//i.test(t)&&(o.name=o.name||"Gecko",o.gecko=s,o.version=o.version||e(/gecko\/(\d+(\.\d+)?)/i)),o.windowsphone||o.msedge||!l&&!o.silk?o.windowsphone||o.msedge||!r?y?o.mac=s:C?o.xbox=s:v?o.windows=s:b&&(o.linux=s):(o[r]=s,o.ios=s):o.android=s;var E="";o.windows?E=i(e(/Windows ((NT|XP)( \d\d?.\d)?)/i)):o.windowsphone?E=e(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):o.mac?(E=e(/Mac OS X (\d+([_\.\s]\d+)*)/i),E=E.replace(/[_\s]/g,".")):r?(E=e(/os (\d+([_\s]\d+)*) like mac os x/i),E=E.replace(/[_\s]/g,".")):l?E=e(/android[ \/-](\d+(\.\d+)*)/i):o.webos?E=e(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):o.blackberry?E=e(/rim\stablet\sos\s(\d+(\.\d+)*)/i):o.bada?E=e(/bada\/(\d+(\.\d+)*)/i):o.tizen&&(E=e(/tizen[\/\s](\d+(\.\d+)*)/i)),E&&(o.osversion=E);var S=!o.windows&&E.split(".")[0];return x||c||"ipad"==r||l&&(3==S||S>=4&&!k)||o.silk?o.tablet=s:(k||"iphone"==r||"ipod"==r||l||u||o.blackberry||o.webos||o.bada)&&(o.mobile=s),o.msedge||o.msie&&o.version>=10||o.yandexbrowser&&o.version>=15||o.vivaldi&&o.version>=1||o.chrome&&o.version>=20||o.samsungBrowser&&o.version>=4||o.firefox&&o.version>=20||o.safari&&o.version>=6||o.opera&&o.version>=10||o.ios&&o.osversion&&o.osversion.split(".")[0]>=6||o.blackberry&&o.version>=10.1||o.chromium&&o.version>=20?o.a=s:o.msie&&o.version<10||o.chrome&&o.version<20||o.firefox&&o.version<20||o.safari&&o.version<6||o.opera&&o.version<10||o.ios&&o.osversion&&o.osversion.split(".")[0]<6||o.chromium&&o.version<20?o.c=s:o.x=s,o}function e(t){return t.split(".").length}function n(t,e){var n,i=[];if(Array.prototype.map)return Array.prototype.map.call(t,e);for(n=0;n<t.length;n++)i.push(e(t[n]));return i}function i(t){for(var i=Math.max(e(t[0]),e(t[1])),o=n(t,function(t){var o=i-e(t);return t+=new Array(o+1).join(".0"),n(t.split("."),function(t){return new Array(20-t.length).join("0")+t}).reverse()});--i>=0;){if(o[0][i]>o[1][i])return 1;if(o[0][i]!==o[1][i])return-1;if(0===i)return 0}}function o(e,n,o){var r=a;"string"==typeof n&&(o=n,n=void 0),void 0===n&&(n=!1),o&&(r=t(o));var s=""+r.version;for(var l in e)if(e.hasOwnProperty(l)&&r[l]){if("string"!=typeof e[l])throw new Error("Browser version in the minVersion map should be a string: "+l+": "+String(e));return i([s,e[l]])<0}return n}function r(t,e,n){return!o(t,e,n)}var s=!0,a=t("undefined"!=typeof navigator?navigator.userAgent||"":"");return a.test=function(t){for(var e=0;e<t.length;++e){var n=t[e];if("string"==typeof n&&n in a)return!0}return!1},a.isUnsupportedBrowser=o,a.compareVersions=i,a.check=r,a._detect=t,a}),function(t){function e(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function n(t,e){return function(n){return c(t.call(this,n),e)}}function i(t,e){return function(n){return this.lang().ordinal(t.call(this,n),e)}}function o(){}function r(t){x(t),a(this,t)}function s(t){var e=m(t),n=e.year||0,i=e.month||0,o=e.week||0,r=e.day||0,s=e.hour||0,a=e.minute||0,l=e.second||0,u=e.millisecond||0;this._milliseconds=+u+1e3*l+6e4*a+36e5*s,this._days=+r+7*o,this._months=+i+12*n,this._data={},this._bubble()}function a(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return e.hasOwnProperty("toString")&&(t.toString=e.toString),e.hasOwnProperty("valueOf")&&(t.valueOf=e.valueOf),t}function l(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&mt.hasOwnProperty(e)&&(n[e]=t[e]);return n}function u(t){return 0>t?Math.ceil(t):Math.floor(t)}function c(t,e,n){for(var i=""+Math.abs(t),o=t>=0;i.length<e;)i="0"+i;return(o?n?"+":"":"-")+i}function h(t,e,n,i){var o,r,s=e._milliseconds,a=e._days,l=e._months;s&&t._d.setTime(+t._d+s*n),(a||l)&&(o=t.minute(),r=t.hour()),a&&t.date(t.date()+a*n),l&&t.month(t.month()+l*n),s&&!i&&it.updateOffset(t),(a||l)&&(t.minute(o),t.hour(r))}function d(t){return"[object Array]"===Object.prototype.toString.call(t)}function p(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function f(t,e,n){var i,o=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),s=0;for(i=0;o>i;i++)(n&&t[i]!==e[i]||!n&&y(t[i])!==y(e[i]))&&s++;return s+r}function g(t){if(t){var e=t.toLowerCase().replace(/(.)s$/,"$1");t=Ut[t]||Yt[e]||e}return t}function m(t){var e,n,i={};for(n in t)t.hasOwnProperty(n)&&(e=g(n),e&&(i[e]=t[n]));return i}function v(e){var n,i;if(0===e.indexOf("week"))n=7,i="day";else{if(0!==e.indexOf("month"))return;n=12,i="month"}it[e]=function(o,r){var s,a,l=it.fn._lang[e],u=[];if("number"==typeof o&&(r=o,o=t),a=function(t){var e=it().utc().set(i,t);return l.call(it.fn._lang,e,o||"")},null!=r)return a(r);for(s=0;n>s;s++)u.push(a(s));return u}}function y(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=e>=0?Math.floor(e):Math.ceil(e)),n}function b(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function w(t){return _(t)?366:365}function _(t){return t%4===0&&t%100!==0||t%400===0}function x(t){var e;t._a&&-2===t._pf.overflow&&(e=t._a[ut]<0||t._a[ut]>11?ut:t._a[ct]<1||t._a[ct]>b(t._a[lt],t._a[ut])?ct:t._a[ht]<0||t._a[ht]>23?ht:t._a[dt]<0||t._a[dt]>59?dt:t._a[pt]<0||t._a[pt]>59?pt:t._a[ft]<0||t._a[ft]>999?ft:-1,t._pf._overflowDayOfYear&&(lt>e||e>ct)&&(e=ct),t._pf.overflow=e)}function k(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length)),t._isValid}function C(t){return t?t.toLowerCase().replace("_","-"):t}function E(t,e){return e._isUTC?it(t).zone(e._offset||0):it(t).local()}function S(t,e){return e.abbr=t,gt[t]||(gt[t]=new o),gt[t].set(e),gt[t]}function $(t){delete gt[t]}function T(t){var e,n,i,o,r=0,s=function(t){if(!gt[t]&&vt)try{require("./lang/"+t)}catch(e){}return gt[t]};if(!t)return it.fn._lang;if(!d(t)){if(n=s(t))return n;t=[t]}for(;r<t.length;){for(o=C(t[r]).split("-"),e=o.length,i=C(t[r+1]),i=i?i.split("-"):null;e>0;){if(n=s(o.slice(0,e).join("-")))return n;if(i&&i.length>=e&&f(o,i,!0)>=e-1)break;e--}r++}return it.fn._lang}function O(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function A(t){var e,n,i=t.match(_t);for(e=0,n=i.length;n>e;e++)Kt[i[e]]?i[e]=Kt[i[e]]:i[e]=O(i[e]);return function(o){var r="";for(e=0;n>e;e++)r+=i[e]instanceof Function?i[e].call(o,t):i[e];return r}}function P(t,e){return t.isValid()?(e=L(e,t.lang()),Vt[e]||(Vt[e]=A(e)),Vt[e](t)):t.lang().invalidDate()}function L(t,e){function n(t){return e.longDateFormat(t)||t}var i=5;for(xt.lastIndex=0;i>=0&&xt.test(t);)t=t.replace(xt,n),xt.lastIndex=0,i-=1;return t}function N(t,e){var n,i=e._strict;switch(t){case"DDDD":return Mt;case"YYYY":case"GGGG":case"gggg":return i?jt:Et;case"Y":case"G":case"g":return It;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return i?Dt:St;case"S":if(i)return Lt;case"SS":if(i)return Nt;case"SSS":if(i)return Mt;case"DDD":return Ct;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Tt;case"a":case"A":return T(e._l)._meridiemParse;case"X":return Pt;case"Z":case"ZZ":return Ot;case"T":return At;case"SSSS":return $t;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return i?Nt:kt;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return kt;default:return n=new RegExp(B(F(t.replace("\\","")),"i"))}}function M(t){t=t||"";var e=t.match(Ot)||[],n=e[e.length-1]||[],i=(n+"").match(Ht)||["-",0,0],o=+(60*i[1])+y(i[2]);return"+"===i[0]?-o:o}function j(t,e,n){var i,o=n._a;switch(t){case"M":case"MM":null!=e&&(o[ut]=y(e)-1);break;case"MMM":case"MMMM":i=T(n._l).monthsParse(e),null!=i?o[ut]=i:n._pf.invalidMonth=e;break;case"D":case"DD":null!=e&&(o[ct]=y(e));break;case"DDD":case"DDDD":null!=e&&(n._dayOfYear=y(e));break;case"YY":o[lt]=y(e)+(y(e)>68?1900:2e3);break;case"YYYY":case"YYYYY":case"YYYYYY":o[lt]=y(e);break;case"a":case"A":n._isPm=T(n._l).isPM(e);break;case"H":case"HH":case"h":case"hh":o[ht]=y(e);break;case"m":case"mm":o[dt]=y(e);break;case"s":case"ss":o[pt]=y(e);break;case"S":case"SS":case"SSS":case"SSSS":o[ft]=y(1e3*("0."+e));break;case"X":n._d=new Date(1e3*parseFloat(e));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=M(e);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":t=t.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":t=t.substr(0,2),e&&(n._w=n._w||{},n._w[t]=e)}}function D(t){var e,n,i,o,r,s,a,l,u,c,h=[];if(!t._d){for(i=q(t),t._w&&null==t._a[ct]&&null==t._a[ut]&&(r=function(e){var n=parseInt(e,10);return e?e.length<3?n>68?1900+n:2e3+n:n:null==t._a[lt]?it().weekYear():t._a[lt]},s=t._w,null!=s.GG||null!=s.W||null!=s.E?a=Z(r(s.GG),s.W||1,s.E,4,1):(l=T(t._l),u=null!=s.d?V(s.d,l):null!=s.e?parseInt(s.e,10)+l._week.dow:0,c=parseInt(s.w,10)||1,null!=s.d&&u<l._week.dow&&c++,a=Z(r(s.gg),c,u,l._week.doy,l._week.dow)),t._a[lt]=a.year,t._dayOfYear=a.dayOfYear),t._dayOfYear&&(o=null==t._a[lt]?i[lt]:t._a[lt],t._dayOfYear>w(o)&&(t._pf._overflowDayOfYear=!0),n=Y(o,0,t._dayOfYear),t._a[ut]=n.getUTCMonth(),t._a[ct]=n.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=h[e]=i[e];for(;7>e;e++)t._a[e]=h[e]=null==t._a[e]?2===e?1:0:t._a[e];h[ht]+=y((t._tzm||0)/60),h[dt]+=y((t._tzm||0)%60),t._d=(t._useUTC?Y:U).apply(null,h)}}function I(t){var e;t._d||(e=m(t._i),t._a=[e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond],D(t))}function q(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function R(t){t._a=[],t._pf.empty=!0;var e,n,i,o,r,s=T(t._l),a=""+t._i,l=a.length,u=0;for(i=L(t._f,s).match(_t)||[],e=0;e<i.length;e++)o=i[e],n=(a.match(N(o,t))||[])[0],n&&(r=a.substr(0,a.indexOf(n)),r.length>0&&t._pf.unusedInput.push(r),a=a.slice(a.indexOf(n)+n.length),u+=n.length),Kt[o]?(n?t._pf.empty=!1:t._pf.unusedTokens.push(o),j(o,n,t)):t._strict&&!n&&t._pf.unusedTokens.push(o);t._pf.charsLeftOver=l-u,a.length>0&&t._pf.unusedInput.push(a),t._isPm&&t._a[ht]<12&&(t._a[ht]+=12),t._isPm===!1&&12===t._a[ht]&&(t._a[ht]=0),D(t),x(t)}function F(t){return t.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,i,o){return e||n||i||o})}function B(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function H(t){var n,i,o,r,s;if(0===t._f.length)return t._pf.invalidFormat=!0,void(t._d=new Date(NaN));for(r=0;r<t._f.length;r++)s=0,n=a({},t),n._pf=e(),n._f=t._f[r],R(n),k(n)&&(s+=n._pf.charsLeftOver,s+=10*n._pf.unusedTokens.length,n._pf.score=s,(null==o||o>s)&&(o=s,i=n));a(t,i||n)}function z(t){var e,n,i=t._i,o=qt.exec(i);if(o){for(t._pf.iso=!0,e=0,n=Ft.length;n>e;e++)if(Ft[e][1].exec(i)){t._f=Ft[e][0]+(o[6]||" ");break}for(e=0,n=Bt.length;n>e;e++)if(Bt[e][1].exec(i)){t._f+=Bt[e][0];break}i.match(Ot)&&(t._f+="Z"),R(t)}else t._d=new Date(i)}function W(e){var n=e._i,i=yt.exec(n);n===t?e._d=new Date:i?e._d=new Date(+i[1]):"string"==typeof n?z(e):d(n)?(e._a=n.slice(0),D(e)):p(n)?e._d=new Date(+n):"object"==typeof n?I(e):e._d=new Date(n)}function U(t,e,n,i,o,r,s){var a=new Date(t,e,n,i,o,r,s);return 1970>t&&a.setFullYear(t),a}function Y(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function V(t,e){if("string"==typeof t)if(isNaN(t)){if(t=e.weekdaysParse(t),"number"!=typeof t)return null}else t=parseInt(t,10);return t}function G(t,e,n,i,o){return o.relativeTime(e||1,!!n,t,i)}function X(t,e,n){var i=at(Math.abs(t)/1e3),o=at(i/60),r=at(o/60),s=at(r/24),a=at(s/365),l=45>i&&["s",i]||1===o&&["m"]||45>o&&["mm",o]||1===r&&["h"]||22>r&&["hh",r]||1===s&&["d"]||25>=s&&["dd",s]||45>=s&&["M"]||345>s&&["MM",at(s/30)]||1===a&&["y"]||["yy",a];return l[2]=e,l[3]=t>0,l[4]=n,G.apply({},l)}function K(t,e,n){var i,o=n-e,r=n-t.day();return r>o&&(r-=7),o-7>r&&(r+=7),i=it(t).add("d",r),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function Z(t,e,n,i,o){var r,s,a=Y(t,0,1).getUTCDay();return n=null!=n?n:o,r=o-a+(a>i?7:0)-(o>a?7:0),s=7*(e-1)+(n-o)+r+1,{year:s>0?t:t-1,dayOfYear:s>0?s:w(t-1)+s}}function Q(t){var e=t._i,n=t._f;return null===e?it.invalid({nullInput:!0}):("string"==typeof e&&(t._i=e=T().preparse(e)),it.isMoment(e)?(t=l(e),t._d=new Date(+e._d)):n?d(n)?H(t):R(t):W(t),new r(t))}function J(t,e){it.fn[t]=it.fn[t+"s"]=function(t){var n=this._isUTC?"UTC":"";return null!=t?(this._d["set"+n+e](t),it.updateOffset(this),this):this._d["get"+n+e]()}}function tt(t){it.duration.fn[t]=function(){return this._data[t]}}function et(t,e){it.duration.fn["as"+t]=function(){return+this/e}}function nt(t){var e=!1,n=it;"undefined"==typeof ender&&(t?(st.moment=function(){return!e&&console&&console.warn&&(e=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")),n.apply(null,arguments)},a(st.moment,n)):st.moment=it)}for(var it,ot,rt="2.5.1",st=this,at=Math.round,lt=0,ut=1,ct=2,ht=3,dt=4,pt=5,ft=6,gt={},mt={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},vt="undefined"!=typeof module&&module.exports&&"undefined"!=typeof require,yt=/^\/?Date\((\-?\d+)/i,bt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,wt=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,_t=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,xt=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,kt=/\d\d?/,Ct=/\d{1,3}/,Et=/\d{1,4}/,St=/[+\-]?\d{1,6}/,$t=/\d+/,Tt=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Ot=/Z|[\+\-]\d\d:?\d\d/gi,At=/T/i,Pt=/[\+\-]?\d+(\.\d{1,3})?/,Lt=/\d/,Nt=/\d\d/,Mt=/\d{3}/,jt=/\d{4}/,Dt=/[+-]?\d{6}/,It=/[+-]?\d+/,qt=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Rt="YYYY-MM-DDTHH:mm:ssZ",Ft=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],Bt=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Ht=/([\+\-]|\d\d)/gi,zt="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),Wt={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},Ut={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Yt={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},Vt={},Gt="DDD w W M D d".split(" "),Xt="M D H h m s w W".split(" "),Kt={M:function(){return this.month()+1},MMM:function(t){return this.lang().monthsShort(this,t)},MMMM:function(t){return this.lang().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.lang().weekdaysMin(this,t)},ddd:function(t){return this.lang().weekdaysShort(this,t)},dddd:function(t){return this.lang().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return c(this.year()%100,2)},YYYY:function(){return c(this.year(),4)},YYYYY:function(){return c(this.year(),5)},YYYYYY:function(){var t=this.year(),e=t>=0?"+":"-";return e+c(Math.abs(t),6)},gg:function(){return c(this.weekYear()%100,2)},gggg:function(){return c(this.weekYear(),4)},ggggg:function(){return c(this.weekYear(),5)},GG:function(){return c(this.isoWeekYear()%100,2)},GGGG:function(){return c(this.isoWeekYear(),4)},GGGGG:function(){return c(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return y(this.milliseconds()/100)},SS:function(){return c(y(this.milliseconds()/10),2)},SSS:function(){return c(this.milliseconds(),3)},SSSS:function(){return c(this.milliseconds(),3)},Z:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+c(y(t/60),2)+":"+c(y(t)%60,2)},ZZ:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+c(y(t/60),2)+c(y(t)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},Zt=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];Gt.length;)ot=Gt.pop(),Kt[ot+"o"]=i(Kt[ot],ot);for(;Xt.length;)ot=Xt.pop(),Kt[ot+ot]=n(Kt[ot],2);for(Kt.DDDD=n(Kt.DDD,3),a(o.prototype,{set:function(t){var e,n;for(n in t)e=t[n],"function"==typeof e?this[n]=e:this["_"+n]=e},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t){var e,n,i;for(this._monthsParse||(this._monthsParse=[]),e=0;12>e;e++)if(this._monthsParse[e]||(n=it.utc([2e3,e]),i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[e]=new RegExp(i.replace(".",""),"i")),this._monthsParse[e].test(t))return e},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},weekdaysParse:function(t){var e,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(n=it([2e3,1]).day(e),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[e]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e},isPM:function(t){return"p"===(t+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(t,e){var n=this._calendar[t];return"function"==typeof n?n.apply(e):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,e,n,i){var o=this._relativeTime[n];return"function"==typeof o?o(t,e,n,i):o.replace(/%d/i,t)},pastFuture:function(t,e){var n=this._relativeTime[t>0?"future":"past"];return"function"==typeof n?n(e):n.replace(/%s/i,e)},ordinal:function(t){return this._ordinal.replace("%d",t)},_ordinal:"%d",preparse:function(t){return t},postformat:function(t){return t},week:function(t){return K(t,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),it=function(n,i,o,r){var s;return"boolean"==typeof o&&(r=o,o=t),s={},s._isAMomentObject=!0,s._i=n,s._f=i,s._l=o,s._strict=r,s._isUTC=!1,s._pf=e(),Q(s)},it.utc=function(n,i,o,r){var s;return"boolean"==typeof o&&(r=o,o=t),s={},s._isAMomentObject=!0,s._useUTC=!0,s._isUTC=!0,s._l=o,s._i=n,s._f=i,s._strict=r,s._pf=e(),Q(s).utc()},it.unix=function(t){return it(1e3*t)},it.duration=function(t,e){var n,i,o,r=t,a=null;return it.isDuration(t)?r={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(r={},e?r[e]=t:r.milliseconds=t):(a=bt.exec(t))?(n="-"===a[1]?-1:1,r={y:0,d:y(a[ct])*n,h:y(a[ht])*n,m:y(a[dt])*n,s:y(a[pt])*n,ms:y(a[ft])*n}):(a=wt.exec(t))&&(n="-"===a[1]?-1:1,o=function(t){var e=t&&parseFloat(t.replace(",","."));return(isNaN(e)?0:e)*n},r={y:o(a[2]),M:o(a[3]),d:o(a[4]),h:o(a[5]),m:o(a[6]),s:o(a[7]),w:o(a[8])}),i=new s(r),it.isDuration(t)&&t.hasOwnProperty("_lang")&&(i._lang=t._lang),i},it.version=rt,it.defaultFormat=Rt,it.updateOffset=function(){},it.lang=function(t,e){var n;return t?(e?S(C(t),e):null===e?($(t),t="en"):gt[t]||T(t),n=it.duration.fn._lang=it.fn._lang=T(t),n._abbr):it.fn._lang._abbr},it.langData=function(t){return t&&t._lang&&t._lang._abbr&&(t=t._lang._abbr),T(t)},it.isMoment=function(t){return t instanceof r||null!=t&&t.hasOwnProperty("_isAMomentObject")},it.isDuration=function(t){return t instanceof s},ot=Zt.length-1;ot>=0;--ot)v(Zt[ot]);for(it.normalizeUnits=function(t){return g(t)},it.invalid=function(t){var e=it.utc(NaN);return null!=t?a(e._pf,t):e._pf.userInvalidated=!0,e},it.parseZone=function(t){return it(t).parseZone()},a(it.fn=r.prototype,{clone:function(){return it(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var t=it(this).utc();return 0<t.year()&&t.year()<=9999?P(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):P(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return k(this)},isDSTShifted:function(){return this._a?this.isValid()&&f(this._a,(this._isUTC?it.utc(this._a):it(this._a)).toArray())>0:!1},parsingFlags:function(){return a({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(t){var e=P(this,t||it.defaultFormat);return this.lang().postformat(e)},add:function(t,e){var n;return n="string"==typeof t?it.duration(+e,t):it.duration(t,e),h(this,n,1),this},subtract:function(t,e){var n;return n="string"==typeof t?it.duration(+e,t):it.duration(t,e),h(this,n,-1),this},diff:function(t,e,n){var i,o,r=E(t,this),s=6e4*(this.zone()-r.zone());return e=g(e),"year"===e||"month"===e?(i=432e5*(this.daysInMonth()+r.daysInMonth()),o=12*(this.year()-r.year())+(this.month()-r.month()),o+=(this-it(this).startOf("month")-(r-it(r).startOf("month")))/i,o-=6e4*(this.zone()-it(this).startOf("month").zone()-(r.zone()-it(r).startOf("month").zone()))/i,"year"===e&&(o/=12)):(i=this-r,o="second"===e?i/1e3:"minute"===e?i/6e4:"hour"===e?i/36e5:"day"===e?(i-s)/864e5:"week"===e?(i-s)/6048e5:i),n?o:u(o)},from:function(t,e){return it.duration(this.diff(t)).lang(this.lang()._abbr).humanize(!e)},fromNow:function(t){return this.from(it(),t)},calendar:function(){var t=E(it(),this).startOf("day"),e=this.diff(t,"days",!0),n=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(this.lang().calendar(n,this))},isLeapYear:function(){return _(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=V(t,this.lang()),this.add({d:t-e})):e},month:function(t){var e,n=this._isUTC?"UTC":"";return null!=t?"string"==typeof t&&(t=this.lang().monthsParse(t),"number"!=typeof t)?this:(e=this.date(),this.date(1),this._d["set"+n+"Month"](t),this.date(Math.min(e,this.daysInMonth())),it.updateOffset(this),this):this._d["get"+n+"Month"]()},startOf:function(t){switch(t=g(t)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t?this.weekday(0):"isoWeek"===t&&this.isoWeekday(1),this},endOf:function(t){return t=g(t),this.startOf(t).add("isoWeek"===t?"week":t,1).subtract("ms",1)},isAfter:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)>+it(t).startOf(e)},isBefore:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)<+it(t).startOf(e)},isSame:function(t,e){return e=e||"ms",+this.clone().startOf(e)===+E(t,this).startOf(e)},min:function(t){return t=it.apply(null,arguments),this>t?this:t},max:function(t){return t=it.apply(null,arguments),t>this?this:t},zone:function(t){var e=this._offset||0;return null==t?this._isUTC?e:this._d.getTimezoneOffset():("string"==typeof t&&(t=M(t)),Math.abs(t)<16&&(t=60*t),this._offset=t,this._isUTC=!0,e!==t&&h(this,it.duration(e-t,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(t){return t=t?it(t).zone():0,(this.zone()-t)%60===0},daysInMonth:function(){return b(this.year(),this.month())},dayOfYear:function(t){var e=at((it(this).startOf("day")-it(this).startOf("year"))/864e5)+1;return null==t?e:this.add("d",t-e)},quarter:function(){return Math.ceil((this.month()+1)/3)},weekYear:function(t){var e=K(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==t?e:this.add("y",t-e)},isoWeekYear:function(t){var e=K(this,1,4).year;return null==t?e:this.add("y",t-e)},week:function(t){var e=this.lang().week(this);return null==t?e:this.add("d",7*(t-e))},isoWeek:function(t){var e=K(this,1,4).week;return null==t?e:this.add("d",7*(t-e))},weekday:function(t){var e=(this.day()+7-this.lang()._week.dow)%7;return null==t?e:this.add("d",t-e)},isoWeekday:function(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)},get:function(t){return t=g(t),this[t]()},set:function(t,e){return t=g(t),"function"==typeof this[t]&&this[t](e),this},lang:function(e){return e===t?this._lang:(this._lang=T(e),this)}}),ot=0;ot<zt.length;ot++)J(zt[ot].toLowerCase().replace(/s$/,""),zt[ot]);J("year","FullYear"),it.fn.days=it.fn.day,it.fn.months=it.fn.month,it.fn.weeks=it.fn.week,it.fn.isoWeeks=it.fn.isoWeek,it.fn.toJSON=it.fn.toISOString,a(it.duration.fn=s.prototype,{_bubble:function(){var t,e,n,i,o=this._milliseconds,r=this._days,s=this._months,a=this._data;a.milliseconds=o%1e3,t=u(o/1e3),a.seconds=t%60,e=u(t/60),a.minutes=e%60,n=u(e/60),a.hours=n%24,r+=u(n/24),a.days=r%30,s+=u(r/30),a.months=s%12,i=u(s/12),a.years=i},weeks:function(){return u(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*y(this._months/12)},humanize:function(t){var e=+this,n=X(e,!t,this.lang());return t&&(n=this.lang().pastFuture(e,n)),this.lang().postformat(n)},add:function(t,e){var n=it.duration(t,e);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(t,e){var n=it.duration(t,e);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(t){return t=g(t),this[t.toLowerCase()+"s"]()},as:function(t){return t=g(t),this["as"+t.charAt(0).toUpperCase()+t.slice(1)+"s"]()},lang:it.fn.lang,toIsoString:function(){var t=Math.abs(this.years()),e=Math.abs(this.months()),n=Math.abs(this.days()),i=Math.abs(this.hours()),o=Math.abs(this.minutes()),r=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(n?n+"D":"")+(i||o||r?"T":"")+(i?i+"H":"")+(o?o+"M":"")+(r?r+"S":""):"P0D"}});for(ot in Wt)Wt.hasOwnProperty(ot)&&(et(ot,Wt[ot]),tt(ot.toLowerCase()));et("Weeks",6048e5),it.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},it.lang("en",{ordinal:function(t){var e=t%10,n=1===y(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+n}}),vt?(module.exports=it,nt(!0)):"function"==typeof define&&define.amd?define("moment",function(e,n,i){return i.config&&i.config()&&i.config().noGlobal!==!0&&nt(i.config().noGlobal===t),it}):nt()}.call(this),function(){for(var t=0,e=["ms","moz","webkit","o"],n=0;n<e.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[e[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[n]+"CancelAnimationFrame"]||window[e[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,n){var i=(new Date).getTime(),o=Math.max(0,16-(i-t)),r=window.setTimeout(function(){e(i+o)},o);return t=i+o,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}(),function(t,e,n){var i="onprogress"in t.ajaxSettings.xhr();if(i){var o=t.ajaxSettings.xhr;t.ajaxSettings.xhr=function(){var t=o();return t instanceof e.XMLHttpRequest&&t.addEventListener("progress",this.progress,!1),t.upload&&t.upload.addEventListener("progress",this.progress,!1),t}}}(jQuery,window),function(t){function e(t){if(t in h.style)return t;var e=["Moz","Webkit","O","ms"],n=t.charAt(0).toUpperCase()+t.substr(1);if(t in h.style)return t;for(var i=0;i<e.length;++i){var o=e[i]+n;if(o in h.style)return o}}function n(){return h.style[d.transform]="",h.style[d.transform]="rotateY(90deg)",""!==h.style[d.transform]}function i(t){return"string"==typeof t&&this.parse(t),this}function o(t,e,n){e===!0?t.queue(n):e?t.queue(e,n):n()}function r(e){var n=[];return t.each(e,function(e){e=t.camelCase(e),e=t.transit.propertyMap[e]||t.cssProps[e]||e,e=l(e),d[e]&&(e=l(d[e])),-1===t.inArray(e,n)&&n.push(e);
}),n}function s(e,n,i,o){var s=r(e);t.cssEase[i]&&(i=t.cssEase[i]);var a=""+c(n)+" "+i;parseInt(o,10)>0&&(a+=" "+c(o));var l=[];return t.each(s,function(t,e){l.push(e+" "+a)}),l.join(", ")}function a(e,n){n||(t.cssNumber[e]=!0),t.transit.propertyMap[e]=d.transform,t.cssHooks[e]={get:function(n){var i=t(n).css("transit:transform");return i.get(e)},set:function(n,i){var o=t(n).css("transit:transform");o.setFromString(e,i),t(n).css({"transit:transform":o})}}}function l(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}function u(t,e){return"string"!=typeof t||t.match(/^[\-0-9\.]+$/)?""+t+e:t}function c(e){var n=e;return"string"!=typeof n||n.match(/^[\-0-9\.]+/)||(n=t.fx.speeds[n]||t.fx.speeds._default),u(n,"ms")}t.transit={version:"0.9.9",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:!0,useTransitionEnd:!1};var h=document.createElement("div"),d={},p=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;d.transition=e("transition"),d.transitionDelay=e("transitionDelay"),d.transform=e("transform"),d.transformOrigin=e("transformOrigin"),d.filter=e("Filter"),d.transform3d=n();var f={transition:"transitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"},g=d.transitionEnd=f[d.transition]||null;for(var m in d)d.hasOwnProperty(m)&&"undefined"==typeof t.support[m]&&(t.support[m]=d[m]);h=null,t.cssEase={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},t.cssHooks["transit:transform"]={get:function(e){return t(e).data("transform")||new i},set:function(e,n){var o=n;o instanceof i||(o=new i(o)),"WebkitTransform"!==d.transform||p?e.style[d.transform]=o.toString():e.style[d.transform]=o.toString(!0),t(e).data("transform",o)}},t.cssHooks.transform={set:t.cssHooks["transit:transform"].set},t.cssHooks.filter={get:function(t){return t.style[d.filter]},set:function(t,e){t.style[d.filter]=e}},t.fn.jquery<"1.8"&&(t.cssHooks.transformOrigin={get:function(t){return t.style[d.transformOrigin]},set:function(t,e){t.style[d.transformOrigin]=e}},t.cssHooks.transition={get:function(t){return t.style[d.transition]},set:function(t,e){t.style[d.transition]=e}}),a("scale"),a("translate"),a("rotate"),a("rotateX"),a("rotateY"),a("rotate3d"),a("perspective"),a("skewX"),a("skewY"),a("x",!0),a("y",!0),i.prototype={setFromString:function(t,e){var n="string"==typeof e?e.split(","):e.constructor===Array?e:[e];n.unshift(t),i.prototype.set.apply(this,n)},set:function(t){var e=Array.prototype.slice.apply(arguments,[1]);this.setter[t]?this.setter[t].apply(this,e):this[t]=e.join(",")},get:function(t){return this.getter[t]?this.getter[t].apply(this):this[t]||0},setter:{rotate:function(t){this.rotate=u(t,"deg")},rotateX:function(t){this.rotateX=u(t,"deg")},rotateY:function(t){this.rotateY=u(t,"deg")},scale:function(t,e){void 0===e&&(e=t),this.scale=t+","+e},skewX:function(t){this.skewX=u(t,"deg")},skewY:function(t){this.skewY=u(t,"deg")},perspective:function(t){this.perspective=u(t,"px")},x:function(t){this.set("translate",t,null)},y:function(t){this.set("translate",null,t)},translate:function(t,e){void 0===this._translateX&&(this._translateX=0),void 0===this._translateY&&(this._translateY=0),null!==t&&void 0!==t&&(this._translateX=u(t,"px")),null!==e&&void 0!==e&&(this._translateY=u(e,"px")),this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var t=(this.scale||"1,1").split(",");return t[0]&&(t[0]=parseFloat(t[0])),t[1]&&(t[1]=parseFloat(t[1])),t[0]===t[1]?t[0]:t},rotate3d:function(){for(var t=(this.rotate3d||"0,0,0,0deg").split(","),e=0;3>=e;++e)t[e]&&(t[e]=parseFloat(t[e]));return t[3]&&(t[3]=u(t[3],"deg")),t}},parse:function(t){var e=this;t.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(t,n,i){e.setFromString(n,i)})},toString:function(t){var e=[];for(var n in this)if(this.hasOwnProperty(n)){if(!d.transform3d&&("rotateX"===n||"rotateY"===n||"perspective"===n||"transformOrigin"===n))continue;"_"!==n[0]&&(t&&"scale"===n?e.push(n+"3d("+this[n]+",1)"):t&&"translate"===n?e.push(n+"3d("+this[n]+",0)"):e.push(n+"("+this[n]+")"))}return e.join(" ")}},t.fn.transition=t.fn.transit=function(e,n,i,r){var a=this,l=0,u=!0,h=jQuery.extend(!0,{},e);"function"==typeof n&&(r=n,n=void 0),"object"==typeof n&&(i=n.easing,l=n.delay||0,u=n.queue||!0,r=n.complete,n=n.duration),"function"==typeof i&&(r=i,i=void 0),"undefined"!=typeof h.easing&&(i=h.easing,delete h.easing),"undefined"!=typeof h.duration&&(n=h.duration,delete h.duration),"undefined"!=typeof h.complete&&(r=h.complete,delete h.complete),"undefined"!=typeof h.queue&&(u=h.queue,delete h.queue),"undefined"!=typeof h.delay&&(l=h.delay,delete h.delay),"undefined"==typeof n&&(n=t.fx.speeds._default),"undefined"==typeof i&&(i=t.cssEase._default),n=c(n);var p=s(h,n,i,l),f=t.transit.enabled&&d.transition,m=f?parseInt(n,10)+parseInt(l,10):0;if(0===m){var v=function(t){a.css(h),r&&r.apply(a),t&&t()};return o(a,u,v),a}var y={},b=function(n){var i=!1,o=function(){i&&a.unbind(g,o),m>0&&a.each(function(){this.style[d.transition]=y[this]||null}),"function"==typeof r&&r.apply(a),"function"==typeof n&&n()};m>0&&g&&t.transit.useTransitionEnd?(i=!0,a.bind(g,o)):window.setTimeout(o,m),a.each(function(){m>0&&(this.style[d.transition]=p),t(this).css(e)})},w=function(t){this.offsetWidth,b(t)};return o(a,u,w),this},t.transit.getTransitionValue=s}(jQuery),function(t){t.fn.maxlength=function(e){var n=t(this);return n.each(function(){e=t.extend({},{counterContainer:!1,text:"%left characters left"},e);var n=t(this),i={options:e,field:n,counter:t('<div class="maxlength"></div>'),maxLength:parseInt(n.attr("maxlength"),10),lastLength:null,updateCounter:function(){var e=this.field.val().length,n=this.options.text.replace(/\B%(length|maxlength|left)\b/g,t.proxy(function(t,n){return"length"==n?e:"maxlength"==n?this.maxLength:this.maxLength-e},this));this.counter.html(n),e!=this.lastLength&&this.updateLength(e)},updateLength:function(t){this.field.trigger("update.maxlength",[this.field,this.lastLength,t,this.maxLength,this.maxLength-t]),this.lastLength=t}};i.maxLength&&(i.field.data("maxlength",i).bind({"keyup change":function(e){t(this).data("maxlength").updateCounter()},"cut paste drop":function(e){setTimeout(t.proxy(function(){t(this).data("maxlength").updateCounter()},this),1)}}),e.counterContainer?e.counterContainer.append(i.counter):i.field.after(i.counter),i.updateCounter())}),n}}(jQuery),function(t){function e(e){return t(e.target).addClass("dragOver"),e.stopPropagation(),e.preventDefault(),!1}function n(t){return t.originalEvent.dataTransfer.dropEffect="copy",t.stopPropagation(),t.preventDefault(),!1}function i(e){return t(e.target).removeClass("dragOver"),e.stopPropagation(),e.preventDefault(),!1}t.fn.dropArea=function(){return this.bind("dragenter",e).bind("dragover",n).bind("dragleave",i),this}}(jQuery),function(t){function e(){}function n(t){s=[t]}function i(t,e,n){return t&&t.apply(e.context||e,n)}function o(t){return/\?/.test(t)?"&":"?"}function r(r){function p(t){X++||(K(),W&&(S[Y]={s:[t]}),F&&(t=F.apply(r,[t])),i(I,r,[t,_,r]),i(R,r,[r,_]))}function P(t){X++||(K(),W&&t!=x&&(S[Y]=t),i(q,r,[r,t]),i(R,r,[r,t]))}r=t.extend({},T,r);var L,N,M,j,D,I=r.success,q=r.error,R=r.complete,F=r.dataFilter,B=r.callbackParameter,H=r.callback,z=r.cache,W=r.pageCache,U=r.charset,Y=r.url,V=r.data,G=r.timeout,X=0,K=e;return C&&C(function(t){t.done(I).fail(q),I=t.resolve,q=t.reject}).promise(r),r.abort=function(){!X++&&K()},i(r.beforeSend,r,[r])===!1||X?r:(Y=Y||u,V=V?"string"==typeof V?V:t.param(V,r.traditional):u,Y+=V?o(Y)+V:u,B&&(Y+=o(Y)+encodeURIComponent(B)+"=?"),!z&&!W&&(Y+=o(Y)+"_"+(new Date).getTime()+"="),Y=Y.replace(/=\?(&|$)/,"="+H+"$1"),W&&(L=S[Y])?L.s?p(L.s[0]):P(L):(k[H]=n,M=t(w)[0],M.id=d+$++,U&&(M[l]=U),O&&O.version()<11.6?(j=t(w)[0]).text="document.getElementById('"+M.id+"')."+g+"()":M[a]=a,A&&(M.htmlFor=M.id,M.event=f),M[m]=M[g]=M[v]=function(t){if(!M[y]||!/i/.test(M[y])){try{M[f]&&M[f]()}catch(e){}t=s,s=0,t?p(t[0]):P(c)}},M.src=Y,K=function(t){D&&clearTimeout(D),M[v]=M[m]=M[g]=null,E[b](M),j&&E[b](j)},E[h](M,N=E.firstChild),j&&E[h](j,N),D=G>0&&setTimeout(function(){P(x)},G)),r)}var s,a="async",l="charset",u="",c="error",h="insertBefore",d="_jqjsp",p="on",f=p+"click",g=p+c,m=p+"load",v=p+"readystatechange",y="readyState",b="removeChild",w="<script>",_="success",x="timeout",k=window,C=t.Deferred,E=t("head")[0]||document.documentElement,S={},$=0,T={callback:d,url:location.href},O=k.opera,A=!!t("<div>").html("<!--[if IE]><i><![endif]-->").find("i").length;r.setup=function(e){t.extend(T,e)},t.jsonp=r}(jQuery),function(t,e){t.fn.prettyEmbed=function(e){e=t.extend({},t.fn.prettyEmbed.options,e);var n=t(this);n.html('<img src="http://img.youtube.com/vi/'+e.videoID+'/maxresdefault.jpg" alt="YouTube Video Thumbnail" />');t("<style />",{id:"pretty-embed-style",html:n.selector+" {position: relative;background-color: #000;cursor: pointer;}"+n.selector+".play:after { display: none; }"+n.selector+':hover:after { background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGwAAABMCAYAAACIylL7AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAABwhJREFUeF7t3GlsVFUYBuCDIi4xGreA1O6dmXbaYQ2oCAriGjUuRDSiETVRISGCu2BcAH8gagKKpnWJ5UcBFVQIGhMDFGwVGcqU0m2WtkPpIqNSbEHaQj/fM5yh9HLAAlP6TTlv8iSdc+899/a8PenMnxHRSp3LIQ2ASyAO0mEUjIe7YTJMhWnwAsyBebAQFkM2fAl58A18Dz/Az7ABNsFm2AIeKIZypRIC/8MLkfO3g5zDDXLOXyAf5L1+hNWwEpZBLuTAh/AezIfX4UWYDk/AQ3APTIDR4IR4uBTOh35qmc5sdmU5BsC4XS7HLPgE1sAWqIK/4QB0ABlhci3kmuyBaiiCHyAHXsZaToSL1PJGL5jUBZ9BE5ARVfsgD64DteKnmNos++W1WY4v4CCQ0aM6YBXEqeU/uaCskRAETGacQSGYqGroXnZm2m+Cf4CMXtEKk1QdJw5OdECTutDoPQdgjKpFn2Cm/RwoBDJY8MEFqp5jE3TaJ1suMHrfLFVP19Q47f3ADWSwUgvnqZo6g8FRR51k8HKfqqkz1U77B0AGS8tVTYdTnWGT/EAGS3thgKpLiKoMWyqQwdqNqq5wYY9bDhr8zFF1CRHIsC0BMlj7VtWFwtJt64EM1ryqLiH86bYAkMFaC/SXZfVXL3QnGbxcJXyOtCuAjJgwRBbmtAwafN0qvI608UDc+ZwO8g8fqj12FnlUFvagZZAl/8hh1PZHI9W99Sb5XJnac84CM0WlPW0aEHe+EcOIDh0imWa/n2qen0VeZ7r23D5svixsjmWQpaMLk2lva6PQVjdVTXuWKtPt2mv6oI9FhT3tPSDuvJbCItm3dy/V5+dT4ImpVOGwaa/tQ5aJCltaDhB33uH6wmTkbvuroYHqfvqJ/A8/pL2+j1grym2py4G4q8Q7xOMVFkkLdtsfwSDtWv09+e6/VztPjNskC1tjGWSpO4XJRHZbY3U11X61grx33qGdL0YVibK01HVA3FV0s7BIIrtNFrdzaS5VTpygnTfGVMrCCi2DLFUMO7nCZI7stpoaagwEKJidTRVjb9DOHyOCojQt1Q3E3akUFsmR3SaL8/moZtEiKr92tPY+zDXIwjyWQZbKT6MwmS67DRoqKqh6wQIqGzFcez+mQmJHaqoHiLuyoadXWCQtTU2du00WV1pKVW+/TaUul/a+zMjCUlBYCl7wVjZ0SFQKk7HuNqne46HAq69SqTNDe38mQqIEhQFxF83CIunyvy1SnNtN/pkzaUe6Q/scvQyFpaCwFLxgrrQHCpPR7TaprrCQvE8/rX2WXhQS21EYEHelQ3qmsEi67LaqKgrm5lLZhAnaZ+lFsVPYjh4uTKa9tZV2ff01ld1+u/YZGAiJYhQGxF1PF9ZcUEC+SZO092YEhSWjsGS8YG6Hq2cK2+feSoEpU7T3ZCgkPCgMiLuSKBe2v6SEqp58ijz4y9XdjylZWDIKS8YL3krwwTYahf3r9VLN9OnkwQdR3X2YC4ltSckeIO62Z51eYQfw7i8463kUlaadP0aEC3NbBlk61cLa6utp5+zZ5LHZtfPGmAZRlJRcCMRd8UkW1rZ7N9XOnUvbHOna+WJUjSxsnWWQpe4W1r5nD9UteJc8zkztPDGuUmxNTF4DxJ0n88SFHWxupvpFi8njGqq9vo8okoUtswyydLzCDu3fT43ZOVQ8fKT2uj5mo3AnJuUAcbfNUlhHayvtzl1KxaOv1Z7fR60V7oSkhUDcbcvMChfW0d5OoRVf0fYxY7Xn9XF5YktC0mwg7orwJuLPb7+jkvE3a4+fJZbIwqZZBg2+5onf45MeBDJiwkxZ2HjLoMHXFLE5PikDyIgJt8rCLoeOowYNvlzit2sSz4UWIIO9K8NfrIIf/JYDBj9yU/UPF/brNYnrgAzWKsNlyfwal/ghkMHaKlWXEIVxiY8BGay9puoKF5ZsOWjwM1bVFS5MFMQleoEMlpqg6zdrFwxOXAhksJSnaurML4MTRgAZLN2tauoMBqXNR51k8FADhz9/WbNpcMIDm65OIIORwQkzVD3HBif0g/wuFxi9qRw6v69el41XJ6TCX0BGr9oPo1QtJw5OvA7+VhcaZ96/cJeqo3vJH5TghDIg44xqgHGqhpMLLrwwf1D8W7AXMJnRgw5BHtZ8oFr+U8+GQfGXwQzYCG1ARtQ0wRcwDNSKRzGY9GIYB89sGBi/AFbAFqiFZjgIZITJtWiBRiiHAlgJi0FugBvgxO8CezLrB8afAxfBVZACQ+B6uAXugckwFZ6F5+AVeAPegYWwGD6Bz2EpLIeVsBrWws+wHjbCb/A7eKAYypXAcUSOl4C8ZitshgKQ88m5f4Q1sArkvXPhU/gI3gf5nPJ5X4IZ8BQ8AvfBbTAG5O8sf3e5BnItzlXLE4UI8R86m8y4ltOs9gAAAABJRU5ErkJggg=="); }'+n.selector+":after {display: block;content: '';position: absolute;top: 50%;margin-top: -19px;left: 50%;margin-left: -27px;width: 54px;height: 38px;background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGwAAABMCAYAAACIylL7AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAABmxJREFUeF7t3W9MVlUcB3BNs3Kt1h/XC9eL6kWCAg6E8h/YMLKFm4v+GNZCfYHQnDoNVzjLYbZG8SLCVqSrHGgWtnDWbK1CK/sHi5oF8n+9IMcqiIqA6PT9Xs6Nx+tPAkSec+9zfu7zgnvuOffhfr3Avc997pk0XjUrahZNgytgJsyCRFgC6XAfZEEObIZ8KIBCeB5eglehHN6Cd+Bd+AA+huPwBXwF30At/KDVQ9P/OAXu+t8Cx/gaOOYnUAXc1ntQCRWwH16Dl6EYnoWdsA22QC6shvthOdwGSRAN18OVcAlM1rtpYgsbZiCLYRO8CIeBO7AZfoG/4B9QloP7gvvkV2iBGuB/Qv4HyINUmK537/gVBo2BV6ATpBdmjd0fwJ8qt4Le42MsDHA17IW/QdqYNX54NB6CmXr3j67QMQHaQBrcunA6IFXHMLJChxT4TQ9gTbxeyNBxDF9Y8Wawv6vCj3+sLNCxyIUVLoLPdAcr/BrgUh3P2YVGnitJHa3w2aTjObPQMBl4Iil1ssLnR7hYxzRUWMirElIHK/xW6JiGCguLPCtZ5jigYxosLKDGkBUss3TBNB2XE9hNIY2WmZJ1XE5gD3saLfPk67icwEo8jZZ53tZxOYF95Gm0zHNKx+UExjf4pJUsc/wOUxnWVP2FtJJllhkM7BrPQstcsQyM9x9IjZZ5bmdgvElGajTK7DmzVXxCvNgWQR5kYPd6FhppXuI8dfr0abVjxw4VFxcnrhMBNjIw3nYmNRqFgQ0MDChWU1OT2rxls5oTM0dcN8B2MjDeHyg1GiU0MFZfX5+qrq5WuY/kqujZ0WKfANrNwHhzpNRoFG9gbnV1damqqiq1Zu0aFRUdJfYNkP0MjDc1So1GOVdgLB5t7e3t6uj7R1Xmqkyxf0AcYWAHPAuNNFxgbvFoa2trU5WHK1XGPRniOD53nIHxdmup0SgjCYzlHm0tLS3q4JsHVfrydHE8n6phYB96FhpppIG55R5tDG7fvn0qLS1NHNdn6hmYL25rG21gLPdoa21tdU4FSktLVcqSFHF8n2hjYL64U2osgbnlHm0MrqGhQRUXF6uFixaK2zFcOwPj56SkRqOcT2Cs0KON6urqVGFhoUq6JUncnqE6IiYwtzo7O/872ujkyZOqYGeBX65TRl5gLO/RRrW1tSp/W76Km2v0dcrIDMyt0N9tLl7u4nXKmNgY8XWEWWQHxpKONjpx4oTKyc0RX0sY2cDcCj3ampubB8/d7jDu3M0GFlq9vb2qoqLC5KsjNjC3+CNw5QMrxW0bxAZWU1OjslZnids0UOQGxvOv7HXZKirKV++hRV5gjY2NasPGDX59lzpyAuNfgHlb85y7r6TxfcIJLNAXf3mOtf2J7aaeCI+Wc/E3kG+vdHR0qF1P7zL9UtNotTKwQL2ByYu7RUVFQb3p1HkDMxC3CHR3d6uS3SUqMSlR7B8Qzi0CfCag1GiUcwXW09Oj9uzdo+YvmC/2C5hjDMyXt7nxMlJZWZlKTkkW1w8o5zY3PhFUajSKG1h/f79zvS91aaq4XsCVM7DHPQuNlDAvwbnfcNmdy8T2CFHCwHzxYQjLUcDAfPFxI8vhfNzIFx/osxyrGBj/SY2WeZyPzPJBzPbR5f4Qw8CmgH3sgz9c6z5YxT7JzXyDD1bRgfniAnCEq3fCYuELzisirWSZ45COywnsIU+jZZ7HdFxOYDd4Gi3zLNJxOYERp2uSVrTCjxM/nPlkbSzwxVX7CFWuYxoqLIz3rGSZI13HNFRYSJytTupghU8rDJ5/eQsNd4esaJlhvY7n7EIjp/PgXJBSR2vicb7OoefVS4UV+Az7n3UHK3z+hEQdy/CFFTkfIychlQayLrweuEvHMbJCBz5a9ns9gDVx2mGxjmF0hY6XwZPAuT+kwa3xMwCcbfa6wb1/HoVBroL1cAz6QNqgNTa8isGZfOeC3uPjWBj0cuDk29nwDLwBnHybE5N1g51CeAj3Bd/H+gn4F9+nwBnYOTM8D4CFMPxfgReysHHOoTkdZsCNEAvzYSlw6nd3evt1sAG2wnZ4Ctwp7jkD+x54HfgsR36DnGr+CHDqeU47wiP9c/gS+Pm20GnuvVPau9z274B9qoEXCrgTOZ47rT0/a8D5lLltTmtfCi/Ac8DXydf7KHCHr4VMWAFpsAD4PfN75z7gvpiid8841KRJ/wIcsey9MCgPGwAAAABJRU5ErkJggg==\");background-size: cover;}"+n.selector+" img {width: 100%;}"+n.selector+" iframe {border: medium none transparent;}"}).appendTo("head");e.useFitVids&&(t.isFunction(t.fn.fitVids)||console.error("PrettyEmbed.js Error:  options.useFitVids is set to true; FitVids not found!")),n.on("click",function(){var n=t(this).outerWidth(!0),i=t(this).outerHeight(!0),o="";e.playerInfo===!1&&(o+="&showinfo=0"),e.playerControls===!1&&(o+="&controls=0"),e.playerLoop===!0&&(o+="&loop=1"),"light"==e.playerUI&&(o+="&theme=light"),o+=e.relatedVideos===!1?"&rel=0":"&rel=1",t(this).html('<iframe width="'+n+'" height="'+i+'" src="http://www.youtube.com/embed/'+e.videoID+"?autoplay=1"+o+'"></iframe>').addClass("play"),e.useFitVids&&t.isFunction(t.fn.fitVids)&&t(this).parent().fitVids()}),t.fn.prettyEmbed.options={videoID:"",useFitVids:!1,playerInfo:!0,playerControls:!0,playerLoop:!1,playerUI:"dark",relatedVideos:!1}}}(jQuery),function(t){var e=function(){var e='<div class="colpick"><div class="colpick_color"><div class="colpick_color_overlay1"><div class="colpick_color_overlay2"><div class="colpick_selector_outer"><div class="colpick_selector_inner"></div></div></div></div></div><div class="colpick_hue"><div class="colpick_hue_arrs"><div class="colpick_hue_larr"></div><div class="colpick_hue_rarr"></div></div></div><div class="colpick_new_color"></div><div class="colpick_current_color"></div><div class="colpick_hex_field"><div class="colpick_field_letter">#</div><input type="text" maxlength="6" size="6" /></div><div class="colpick_rgb_r colpick_field"><div class="colpick_field_letter">R</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_rgb_g colpick_field"><div class="colpick_field_letter">G</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_rgb_b colpick_field"><div class="colpick_field_letter">B</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsb_h colpick_field"><div class="colpick_field_letter">H</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsb_s colpick_field"><div class="colpick_field_letter">S</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsb_b colpick_field"><div class="colpick_field_letter">B</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_submit"></div></div>',n={showEvent:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},colorScheme:"light",color:"3289c7",livePreview:!0,flat:!1,layout:"full",submit:1,submitText:"OK",height:156},s=function(e,n){var i=r(e);t(n).data("colpick").fields.eq(1).val(i.r).end().eq(2).val(i.g).end().eq(3).val(i.b).end()},l=function(e,n){t(n).data("colpick").fields.eq(4).val(Math.round(e.h)).end().eq(5).val(Math.round(e.s)).end().eq(6).val(Math.round(e.b)).end()},u=function(e,n){t(n).data("colpick").fields.eq(0).val(a(e))},c=function(e,n){t(n).data("colpick").selector.css("backgroundColor","#"+a({h:e.h,s:100,b:100})),t(n).data("colpick").selectorIndic.css({left:parseInt(t(n).data("colpick").height*e.s/100,10),top:parseInt(t(n).data("colpick").height*(100-e.b)/100,10)})},h=function(e,n){t(n).data("colpick").hue.css("top",parseInt(t(n).data("colpick").height-t(n).data("colpick").height*e.h/360,10))},d=function(e,n){t(n).data("colpick").currentColor.css("backgroundColor","#"+a(e))},p=function(e,n){t(n).data("colpick").newColor.css("backgroundColor","#"+a(e))},f=function(e){var n,d=t(this).parent().parent();this.parentNode.className.indexOf("_hex")>0?(d.data("colpick").color=n=i(L(this.value)),s(n,d.get(0)),l(n,d.get(0))):this.parentNode.className.indexOf("_hsb")>0?(d.data("colpick").color=n=A({h:parseInt(d.data("colpick").fields.eq(4).val(),10),s:parseInt(d.data("colpick").fields.eq(5).val(),10),b:parseInt(d.data("colpick").fields.eq(6).val(),10)}),s(n,d.get(0)),u(n,d.get(0))):(d.data("colpick").color=n=o(P({r:parseInt(d.data("colpick").fields.eq(1).val(),10),g:parseInt(d.data("colpick").fields.eq(2).val(),10),b:parseInt(d.data("colpick").fields.eq(3).val(),10)})),u(n,d.get(0)),l(n,d.get(0))),c(n,d.get(0)),h(n,d.get(0)),p(n,d.get(0)),d.data("colpick").onChange.apply(d.parent(),[n,a(n),r(n),d.data("colpick").el,0])},g=function(e){t(this).parent().removeClass("colpick_focus")},m=function(){t(this).parent().parent().data("colpick").fields.parent().removeClass("colpick_focus"),t(this).parent().addClass("colpick_focus")},v=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1;var n=t(this).parent().find("input").focus(),i={el:t(this).parent().addClass("colpick_slider"),max:this.parentNode.className.indexOf("_hsb_h")>0?360:this.parentNode.className.indexOf("_hsb")>0?100:255,y:e.pageY,field:n,val:parseInt(n.val(),10),preview:t(this).parent().parent().data("colpick").livePreview};t(document).mouseup(i,b),t(document).mousemove(i,y)},y=function(t){return t.data.field.val(Math.max(0,Math.min(t.data.max,parseInt(t.data.val-t.pageY+t.data.y,10)))),t.data.preview&&f.apply(t.data.field.get(0),[!0]),!1},b=function(e){return f.apply(e.data.field.get(0),[!0]),e.data.el.removeClass("colpick_slider").find("input").focus(),t(document).off("mouseup",b),t(document).off("mousemove",y),!1},w=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1;var n={cal:t(this).parent(),y:t(this).offset().top};t(document).on("mouseup touchend",n,x),t(document).on("mousemove touchmove",n,_);var i="touchstart"==e.type?e.originalEvent.changedTouches[0].pageY:e.pageY;return f.apply(n.cal.data("colpick").fields.eq(4).val(parseInt(360*(n.cal.data("colpick").height-(i-n.y))/n.cal.data("colpick").height,10)).get(0),[n.cal.data("colpick").livePreview]),!1},_=function(t){var e="touchmove"==t.type?t.originalEvent.changedTouches[0].pageY:t.pageY;return f.apply(t.data.cal.data("colpick").fields.eq(4).val(parseInt(360*(t.data.cal.data("colpick").height-Math.max(0,Math.min(t.data.cal.data("colpick").height,e-t.data.y)))/t.data.cal.data("colpick").height,10)).get(0),[t.data.preview]),!1},x=function(e){return s(e.data.cal.data("colpick").color,e.data.cal.get(0)),u(e.data.cal.data("colpick").color,e.data.cal.get(0)),t(document).off("mouseup touchend",x),t(document).off("mousemove touchmove",_),!1},k=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1;var n={cal:t(this).parent(),pos:t(this).offset()};n.preview=n.cal.data("colpick").livePreview,t(document).on("mouseup touchend",n,E),t(document).on("mousemove touchmove",n,C);var i;return"touchstart"==e.type?(pageX=e.originalEvent.changedTouches[0].pageX,i=e.originalEvent.changedTouches[0].pageY):(pageX=e.pageX,i=e.pageY),f.apply(n.cal.data("colpick").fields.eq(6).val(parseInt(100*(n.cal.data("colpick").height-(i-n.pos.top))/n.cal.data("colpick").height,10)).end().eq(5).val(parseInt(100*(pageX-n.pos.left)/n.cal.data("colpick").height,10)).get(0),[n.preview]),!1},C=function(t){var e;return"touchmove"==t.type?(pageX=t.originalEvent.changedTouches[0].pageX,e=t.originalEvent.changedTouches[0].pageY):(pageX=t.pageX,e=t.pageY),f.apply(t.data.cal.data("colpick").fields.eq(6).val(parseInt(100*(t.data.cal.data("colpick").height-Math.max(0,Math.min(t.data.cal.data("colpick").height,e-t.data.pos.top)))/t.data.cal.data("colpick").height,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(t.data.cal.data("colpick").height,pageX-t.data.pos.left))/t.data.cal.data("colpick").height,10)).get(0),[t.data.preview]),!1},E=function(e){return s(e.data.cal.data("colpick").color,e.data.cal.get(0)),u(e.data.cal.data("colpick").color,e.data.cal.get(0)),t(document).off("mouseup touchend",E),t(document).off("mousemove touchmove",C),!1},S=function(e){var n=t(this).parent(),i=n.data("colpick").color;n.data("colpick").origColor=i,d(i,n.get(0)),n.data("colpick").onSubmit(i,a(i),r(i),n.data("colpick").el)},$=function(e){e.stopPropagation();var n=t("#"+t(this).data("colpickId"));n.data("colpick").onBeforeShow.apply(this,[n.get(0)]);var i=t(this).offset(),o=i.top+this.offsetHeight,r=i.left,s=O(),a=n.width();r+a>s.l+s.w&&(r-=a),n.css({left:r+"px",top:o+"px"}),0!=n.data("colpick").onShow.apply(this,[n.get(0)])&&n.show(),t("html").mousedown({cal:n},T),n.mousedown(function(t){t.stopPropagation()})},T=function(e){0!=e.data.cal.data("colpick").onHide.apply(this,[e.data.cal.get(0)])&&e.data.cal.hide(),t("html").off("mousedown",T)},O=function(){var t="CSS1Compat"==document.compatMode;return{l:window.pageXOffset||(t?document.documentElement.scrollLeft:document.body.scrollLeft),w:window.innerWidth||(t?document.documentElement.clientWidth:document.body.clientWidth)}},A=function(t){return{h:Math.min(360,Math.max(0,t.h)),s:Math.min(100,Math.max(0,t.s)),b:Math.min(100,Math.max(0,t.b))}},P=function(t){return{r:Math.min(255,Math.max(0,t.r)),g:Math.min(255,Math.max(0,t.g)),b:Math.min(255,Math.max(0,t.b))}},L=function(t){var e=6-t.length;if(e>0){for(var n=[],i=0;e>i;i++)n.push("0");n.push(t),t=n.join("")}return t},N=function(){var e=t(this).parent(),n=e.data("colpick").origColor;e.data("colpick").color=n,s(n,e.get(0)),u(n,e.get(0)),l(n,e.get(0)),c(n,e.get(0)),h(n,e.get(0)),p(n,e.get(0))};return{init:function(r){if(r=t.extend({},n,r||{}),"string"==typeof r.color)r.color=i(r.color);else if(void 0!=r.color.r&&void 0!=r.color.g&&void 0!=r.color.b)r.color=o(r.color);else{if(void 0==r.color.h||void 0==r.color.s||void 0==r.color.b)return this;r.color=A(r.color)}return this.each(function(){if(!t(this).data("colpickId")){var n=t.extend({},r);n.origColor=r.color;var i="collorpicker_"+parseInt(1e3*Math.random());t(this).data("colpickId",i);var o=t(e).attr("id",i);o.addClass("colpick_"+n.layout+(n.submit?"":" colpick_"+n.layout+"_ns")),"light"!=n.colorScheme&&o.addClass("colpick_"+n.colorScheme),o.find("div.colpick_submit").html(n.submitText).click(S),n.fields=o.find("input").change(f).blur(g).focus(m),o.find("div.colpick_field_arrs").mousedown(v).end().find("div.colpick_current_color").click(N),n.selector=o.find("div.colpick_color").on("mousedown touchstart",k),n.selectorIndic=n.selector.find("div.colpick_selector_outer"),n.el=this,n.hue=o.find("div.colpick_hue_arrs"),huebar=n.hue.parent();var a=navigator.userAgent.toLowerCase(),y="Microsoft Internet Explorer"===navigator.appName,b=y?parseFloat(a.match(/msie ([0-9]{1,}[\.0-9]{0,})/)[1]):0,_=y&&10>b,x=["#ff0000","#ff0080","#ff00ff","#8000ff","#0000ff","#0080ff","#00ffff","#00ff80","#00ff00","#80ff00","#ffff00","#ff8000","#ff0000"];if(_){var C,E;for(C=0;11>=C;C++)E=t("<div></div>").attr("style","height:8.333333%; filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr="+x[C]+", endColorstr="+x[C+1]+'); -ms-filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='+x[C]+", endColorstr="+x[C+1]+')";'),huebar.append(E)}else stopList=x.join(","),huebar.attr("style","background:-webkit-linear-gradient(top,"+stopList+"); background: -o-linear-gradient(top,"+stopList+"); background: -ms-linear-gradient(top,"+stopList+"); background:-moz-linear-gradient(top,"+stopList+"); -webkit-linear-gradient(top,"+stopList+"); background:linear-gradient(to bottom,"+stopList+"); ");o.find("div.colpick_hue").on("mousedown touchstart",w),n.newColor=o.find("div.colpick_new_color"),n.currentColor=o.find("div.colpick_current_color"),o.data("colpick",n),s(n.color,o.get(0)),l(n.color,o.get(0)),u(n.color,o.get(0)),h(n.color,o.get(0)),c(n.color,o.get(0)),d(n.color,o.get(0)),p(n.color,o.get(0)),n.flat?(o.appendTo(this).show(),o.css({position:"relative",display:"block"})):(o.appendTo(document.body),t(this).on(n.showEvent,$),o.css({position:"absolute"}))}})},showPicker:function(){return this.each(function(){t(this).data("colpickId")&&$.apply(this)})},hidePicker:function(){return this.each(function(){t(this).data("colpickId")&&t("#"+t(this).data("colpickId")).hide()})},setColor:function(e,n){if(n="undefined"==typeof n?1:n,"string"==typeof e)e=i(e);else if(void 0!=e.r&&void 0!=e.g&&void 0!=e.b)e=o(e);else{if(void 0==e.h||void 0==e.s||void 0==e.b)return this;e=A(e)}return this.each(function(){if(t(this).data("colpickId")){var i=t("#"+t(this).data("colpickId"));i.data("colpick").color=e,i.data("colpick").origColor=e,s(e,i.get(0)),l(e,i.get(0)),u(e,i.get(0)),h(e,i.get(0)),c(e,i.get(0)),p(e,i.get(0)),i.data("colpick").onChange.apply(i.parent(),[e,a(e),r(e),i.data("colpick").el,1]),n&&d(e,i.get(0))}})}}}(),n=function(t){var t=parseInt(t.indexOf("#")>-1?t.substring(1):t,16);return{r:t>>16,g:(65280&t)>>8,b:255&t}},i=function(t){return o(n(t))},o=function(t){var e={h:0,s:0,b:0},n=Math.min(t.r,t.g,t.b),i=Math.max(t.r,t.g,t.b),o=i-n;return e.b=i,e.s=0!=i?255*o/i:0,0!=e.s?t.r==i?e.h=(t.g-t.b)/o:t.g==i?e.h=2+(t.b-t.r)/o:e.h=4+(t.r-t.g)/o:e.h=-1,e.h*=60,e.h<0&&(e.h+=360),e.s*=100/255,e.b*=100/255,e},r=function(t){var e={},n=t.h,i=255*t.s/100,o=255*t.b/100;if(0==i)e.r=e.g=e.b=o;else{var r=o,s=(255-i)*o/255,a=(r-s)*(n%60)/60;360==n&&(n=0),60>n?(e.r=r,e.b=s,e.g=s+a):120>n?(e.g=r,e.b=s,e.r=r-a):180>n?(e.g=r,e.r=s,e.b=s+a):240>n?(e.b=r,e.r=s,e.g=r-a):300>n?(e.b=r,e.g=s,e.r=s+a):360>n?(e.r=r,e.g=s,e.b=r-a):(e.r=0,e.g=0,e.b=0)}return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}},s=function(e){var n=[e.r.toString(16),e.g.toString(16),e.b.toString(16)];return t.each(n,function(t,e){1==e.length&&(n[t]="0"+e)}),n.join("")},a=function(t){return s(r(t))};t.fn.extend({colpick:e.init,colpickHide:e.hidePicker,colpickShow:e.showPicker,colpickSetColor:e.setColor}),t.extend({colpick:{rgbToHex:s,rgbToHsb:o,hsbToHex:a,hsbToRgb:r,hexToHsb:i,hexToRgb:n}})}(jQuery),function(t,e,n){function i(t,e){return"function"==typeof t?t.call(e):t}function o(t){for(;t=t.parentNode;)if(t==document)return!0;return!1}function r(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&1===t.nodeType&&"string"==typeof t.nodeName}function s(){return"tipsyuid"+l++}function a(e,n){this.$element=t(e),this.options=n,this.enabled=!0,this.fixTitle()}var l=0;a.prototype={show:function(){if(o(this.$element[0])&&(!r(this.$element)||this.$element.is(":visible"))){var e;if(this.enabled&&(e=this.getTitle())){var n=this.tip();n.find(".tipsy-inner"+this.options.theme)[this.options.html?"html":"text"](e),n[0].className="tipsy"+this.options.theme,this.options.className&&n.addClass(i(this.options.className,this.$element[0])),n.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body);var a=t.extend({},this.$element.offset());a=this.$element.parents("svg").size()>0?t.extend(a,this.$element[0].getBBox()):t.extend(a,{width:this.$element[0].offsetWidth||0,height:this.$element[0].offsetHeight||0});var l,u=n[0].offsetWidth,c=n[0].offsetHeight,h=i(this.options.gravity,this.$element[0]);switch(h.charAt(0)){case"n":l={top:a.top+a.height+this.options.offset,left:a.left+a.width/2-u/2};break;case"s":l={top:a.top-c-this.options.offset,left:a.left+a.width/2-u/2};break;case"e":l={top:a.top+a.height/2-c/2,left:a.left-u-this.options.offset};break;case"w":l={top:a.top+a.height/2-c/2,left:a.left+a.width+this.options.offset}}if(2==h.length&&("w"==h.charAt(1)?l.left=a.left+a.width/2-15:l.left=a.left+a.width/2-u+15),n.css(l).addClass("tipsy-"+h+this.options.theme),n.find(".tipsy-arrow"+this.options.theme)[0].className="tipsy-arrow"+this.options.theme+" tipsy-arrow-"+h.charAt(0)+this.options.theme,n.css({width:u-10+"px"}),this.options.fade?(this.options.shadow&&t(".tipsy-inner").css({"box-shadow":"0px 0px "+this.options.shadowBlur+"px "+this.options.shadowSpread+"px rgba(0, 0, 0, "+this.options.shadowOpacity+")","-webkit-box-shadow":"0px 0px "+this.options.shadowBlur+"px "+this.options.shadowSpread+"px rgba(0, 0, 0, "+this.options.shadowOpacity+")"}),n.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity},this.options.fadeInTime)):n.css({visibility:"visible",opacity:this.options.opacity}),this.options.aria){var d=s();n.attr("id",d),this.$element.attr("aria-describedby",d)}}}},hide:function(){this.options.fade?this.tip().stop().fadeOut(this.options.fadeOutTime,function(){t(this).remove()}):this.tip().remove(),this.options.aria&&this.$element.removeAttr("aria-describedby")},fixTitle:function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("original-title"))&&t.attr("original-title",t.attr("title")||"").removeAttr("title")},getTitle:function(){var t,e=this.$element,n=this.options;return this.fixTitle(),"string"==typeof n.title?t=e.attr("title"==n.title?"original-title":n.title):"function"==typeof n.title&&(t=n.title.call(e[0])),t=(""+t).replace(/(^\s*|\s*$)/,""),t||n.fallback},tip:function(){return this.$tip||(this.$tip=t('<div class="tipsy'+this.options.theme+'"></div>').html('<div class="tipsy-arrow'+this.options.theme+'"></div><div class="tipsy-inner'+this.options.theme+'"></div>').attr("role","tooltip"),
this.$tip.data("tipsy-pointee",this.$element[0])),this.$tip},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}},t.fn.tipsy=function(e){function n(n){var i=t.data(n,"tipsy");return i||(i=new a(n,t.fn.tipsy.elementOptions(n,e)),t.data(n,"tipsy",i)),i}function i(){if(t.fn.tipsy.enabled===!0){var i=n(this);i.hoverState="in",0===e.delayIn?i.show():(i.fixTitle(),setTimeout(function(){"in"==i.hoverState&&o(i.$element)&&i.show()},e.delayIn))}}function r(){var t=n(this);t.hoverState="out",0===e.delayOut?t.hide():setTimeout(function(){"out"!=t.hoverState&&t.$element&&t.$element.is(":visible")||t.hide()},e.delayOut)}if(t.fn.tipsy.enable(),e===!0)return this.data("tipsy");if("string"==typeof e){var s=this.data("tipsy");return s&&s[e](),this}if(e=t.extend({},t.fn.tipsy.defaults,e),e.theme=e.theme&&""!==e.theme?"-"+e.theme:"",e.live||this.each(function(){n(this)}),"manual"!=e.trigger){var l="hover"==e.trigger?"mouseenter mouseover":"focus",u="hover"==e.trigger?"mouseleave mouseout":"blur";if(e.live&&e.live!==!0)t(this).on(l,e.live,i),t(this).on(u,e.live,r);else{if(e.live&&!t.live)throw"Since jQuery 1.9, pass selector as live argument. eg. $(document).tipsy({live: 'a.live'});";var c=e.live?"live":"bind";this[c](l,i)[c](u,r)}}return this},t.fn.tipsy.defaults={aria:!1,className:null,delayIn:0,delayOut:0,fade:!1,fadeInTime:400,fadeOutTime:400,shadow:!1,shadowBlur:8,shadowOpacity:1,shadowSpread:0,fallback:"",gravity:"n",html:!1,live:!1,offset:0,opacity:.8,title:"title",trigger:"hover",theme:""},t.fn.tipsy.revalidate=function(){t(".tipsy").each(function(){var e=t.data(this,"tipsy-pointee");e&&o(e)||t(this).remove()})},t.fn.tipsy.enable=function(){t.fn.tipsy.enabled=!0},t.fn.tipsy.disable=function(){t.fn.tipsy.enabled=!1},t.fn.tipsy.elementOptions=function(e,n){return t.metadata?t.extend({},n,t(e).metadata()):n},t.fn.tipsy.autoNS=function(){return t(this).offset().top>t(document).scrollTop()+t(e).height()/2?"s":"n"},t.fn.tipsy.autoWE=function(){return t(this).offset().left>t(document).scrollLeft()+t(e).width()/2?"e":"w"},t.fn.tipsy.autoNWNE=function(){return t(this).offset().left>t(document).scrollLeft()+t(e).width()/2?"ne":"nw"},t.fn.tipsy.autoSWSE=function(){return t(this).offset().left>t(document).scrollLeft()+t(e).width()/2?"se":"sw"},t.fn.tipsy.autoBounds=function(n,i,o){return function(){var r={ns:o[0],ew:o.length>1?o[1]:!1},s=t(document).scrollTop()+n,a=t(document).scrollLeft()+i,l=t(this);return l.offset().top<s&&(r.ns="n"),l.offset().left<a&&(r.ew="w"),t(e).width()+t(document).scrollLeft()-l.offset().left<i&&(r.ew="e"),t(e).height()+t(document).scrollTop()-l.offset().top<n&&(r.ns="s"),r.ns+(r.ew?r.ew:"")}},t.fn.tipsy.autoBounds2=function(n,i){return function(){var o={},r=t(document).scrollTop()+n,s=t(document).scrollLeft()+n,a=t(this);return i.length>1?(o.ns=i[0],o.ew=i[1]):"e"==i[0]||"w"==i[0]?o.ew=i[0]:o.ns=i[0],a.offset().top<r&&(o.ns="n"),a.offset().left<s&&(o.ew="w"),t(e).width()+t(document).scrollLeft()-(a.offset().left+a.width())<n&&(o.ew="e"),t(e).height()+t(document).scrollTop()-(a.offset().top+a.height())<n&&(o.ns="s"),o.ns?o.ns+(o.ew?o.ew:""):o.ew}}}(jQuery,window),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){function e(e){return t.isFunction(e)||"object"==typeof e?e:{top:e,left:e}}var n=t.scrollTo=function(e,n,i){return t(window).scrollTo(e,n,i)};return n.defaults={axis:"xy",duration:parseFloat(t.fn.jquery)>=1.3?0:1,limit:!0},n.window=function(e){return t(window)._scrollable()},t.fn._scrollable=function(){return this.map(function(){var e=this,n=!e.nodeName||-1!=t.inArray(e.nodeName.toLowerCase(),["iframe","#document","html","body"]);if(!n)return e;var i=(e.contentWindow||e).document||e.ownerDocument||e;return/webkit/i.test(navigator.userAgent)||"BackCompat"==i.compatMode?i.body:i.documentElement})},t.fn.scrollTo=function(i,o,r){return"object"==typeof o&&(r=o,o=0),"function"==typeof r&&(r={onAfter:r}),"max"==i&&(i=9e9),r=t.extend({},n.defaults,r),o=o||r.duration,r.queue=r.queue&&r.axis.length>1,r.queue&&(o/=2),r.offset=e(r.offset),r.over=e(r.over),this._scrollable().each(function(){function s(t){u.animate(h,o,r.easing,t&&function(){t.call(this,c,r)})}if(null!=i){var a,l=this,u=t(l),c=i,h={},d=u.is("html,body");switch(typeof c){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(c)){c=e(c);break}if(c=t(c,this),!c.length)return;case"object":(c.is||c.style)&&(a=(c=t(c)).offset())}var p=t.isFunction(r.offset)&&r.offset(l,c)||r.offset;t.each(r.axis.split(""),function(t,e){var i="x"==e?"Left":"Top",o=i.toLowerCase(),f="scroll"+i,g=l[f],m=n.max(l,e);if(a)h[f]=a[o]+(d?0:g-u.offset()[o]),r.margin&&(h[f]-=parseInt(c.css("margin"+i))||0,h[f]-=parseInt(c.css("border"+i+"Width"))||0),h[f]+=p[o]||0,r.over[o]&&(h[f]+=c["x"==e?"width":"height"]()*r.over[o]);else{var v=c[o];h[f]=v.slice&&"%"==v.slice(-1)?parseFloat(v)/100*m:v}r.limit&&/^\d+$/.test(h[f])&&(h[f]=h[f]<=0?0:Math.min(h[f],m)),!t&&r.queue&&(g!=h[f]&&s(r.onAfterFirst),delete h[f])}),s(r.onAfter)}}).end()},n.max=function(e,n){var i="x"==n?"Width":"Height",o="scroll"+i;if(!t(e).is("html,body"))return e[o]-t(e)[i.toLowerCase()]();var r="client"+i,s=e.ownerDocument.documentElement,a=e.ownerDocument.body;return Math.max(s[o],a[o])-Math.min(s[r],a[r])},n});var Plugins;!function(t){var e=function(){function t(t,e){var n=this;this._input=$(t),this._options=e,this._mirror=$('<span style="position:absolute; top:-999px; left:0; white-space:pre;"/>'),$.each(["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],function(t,e){n._mirror[0].style[e]=n._input.css(e)}),$("body").append(this._mirror),this._input.on("keydown keyup input propertychange change",function(t){n.update()}),function(){n.update()}()}return Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),Object.defineProperty(t,"instanceKey",{get:function(){return"autosizeInputInstance"},enumerable:!0,configurable:!0}),t.prototype.update=function(){var t=this._input.val();if(t||(t=this._input.attr("placeholder")||""),t!==this._mirror.text()){this._mirror.text(t);var e=this._mirror.width()+this._options.space;this._input.width(e)}},t}();t.AutosizeInput=e;var n=function(){function t(t){"undefined"==typeof t&&(t=30),this._space=t}return Object.defineProperty(t.prototype,"space",{get:function(){return this._space},set:function(t){this._space=t},enumerable:!0,configurable:!0}),t}();t.AutosizeInputOptions=n,function(e){var i="autosize-input",o=["text","password","search","url","tel","email"];e.fn.autosizeInput=function(r){return this.each(function(){if("INPUT"==this.tagName&&e.inArray(this.type,o)>-1){var r=e(this);if(!r.data(t.AutosizeInput.instanceKey)){if(void 0==s){var s=r.data(i);s&&"object"==typeof s||(s=new n)}r.data(t.AutosizeInput.instanceKey,new t.AutosizeInput(this,s))}}})},e(function(){e("input[data-"+i+"]").autosizeInput()})}(jQuery)}(Plugins||(Plugins={})),function(t){var e={selector:"> *",visible:{opacity:1,transform:"scale(1)"},hidden:{opacity:0,transform:"scale(0.001)"}},n=t.expando+"mm",i=function(e){var n=[];return this.parent().css({position:"relative"}),this.each(function(){n.push(t(this).position())}),this.each(function(e){t(this).css(t.extend({position:"absolute"},n[e]))}),this},o=function(){return this.css({position:"",top:"",left:""})},r=function(e,n){var i={easing:"linear",duration:400};n=t.extend({},i,n);var o=["all",n.duration+"ms",n.easing].join(" ");e=t.extend({transition:o},e);var r=function(){t(this).css("transition",""),t(this).dequeue()};return this.queue(function(){setTimeout(t.proxy(r,this),n.duration),t(this).css(e)})},s=function(){return this.each(function(){this.offsetTop})},a=function(t,e){return t.filter(function(){var t=this;return!e.filter(function(){return this[n]==t[n]})[0]})},l=function(t,e){return t.filter(function(){var t=this;return e.filter(function(){return this[n]==t[n]})[0]})},u=function(u,c){"function"==typeof u&&(c=u,u={}),u=t.extend({},e,u);var h=[],d=t(this),p=d.find(u.selector),f=d.clone(!0,!0),g=f.find(u.selector);p.each(function(t){this[n]=g[t][n]=t}),f.css({position:"absolute",left:"-1000px",top:"-1000px"}).appendTo("body"),c.call(f,f,u),$tNodes=f.find(u.selector);var m=a($tNodes,p),v=a(p,$tNodes),y=l($tNodes,p);i.call(p),y.each(function(){var e=t(p[this[n]]),i=t(this),o=i.position();i.is(":visible")&&e.is(":hidden")?t.extend(o,u.visible):i.is(":hidden")&&e.is(":visible")&&(t.extend(o,u.hidden),e.promise().done(function(){e.hide()})),r.call(e,o,u),h.push(e.promise())}),m.each(function(){var e=t(this),n=p.eq(e.index()),o=i.call(e).clone();o.css(u.hidden),o.insertBefore(n),s.call(o),r.call(o,u.visible,u),h.push(o.promise())}),v.each(function(){var e=t(p[this[n]]);r.call(e,u.hidden,u),e.promise().done(function(){e.remove()}),h.push(e.promise())}),f.remove();var b=t.when.apply(t,h);return b.done(function(){o.call(d.find(u.selector))})};t.fn.magicMove=function(t,e){var n=this;return n.queue(function(){var i=u.call(n,t,e);i.done(function(){n.dequeue()})})}}(jQuery);var BinaryFile=function(t,e,n){var i=t,o=e||0,r=0;this.getRawData=function(){return i},"string"==typeof t?(r=n||i.length,this.getByteAt=function(t){return 255&i.charCodeAt(t+o)},this.getBytesAt=function(t,e){for(var n=[],r=0;e>r;r++)n[r]=255&i.charCodeAt(t+r+o);return n}):"unknown"==typeof t&&(r=n||IEBinary_getLength(i),this.getByteAt=function(t){return IEBinary_getByteAt(i,t+o)},this.getBytesAt=function(t,e){return new VBArray(IEBinary_getBytesAt(i,t+o,e)).toArray()}),this.getLength=function(){return r},this.getSByteAt=function(t){var e=this.getByteAt(t);return e>127?e-256:e},this.getShortAt=function(t,e){var n=e?(this.getByteAt(t)<<8)+this.getByteAt(t+1):(this.getByteAt(t+1)<<8)+this.getByteAt(t);return 0>n&&(n+=65536),n},this.getSShortAt=function(t,e){var n=this.getShortAt(t,e);return n>32767?n-65536:n},this.getLongAt=function(t,e){var n=this.getByteAt(t),i=this.getByteAt(t+1),o=this.getByteAt(t+2),r=this.getByteAt(t+3),s=e?(((n<<8)+i<<8)+o<<8)+r:(((r<<8)+o<<8)+i<<8)+n;return 0>s&&(s+=4294967296),s},this.getSLongAt=function(t,e){var n=this.getLongAt(t,e);return n>2147483647?n-4294967296:n},this.getStringAt=function(t,e){for(var n=[],i=this.getBytesAt(t,e),o=0;e>o;o++)n[o]=String.fromCharCode(i[o]);return n.join("")},this.getCharAt=function(t){return String.fromCharCode(this.getByteAt(t))},this.toBase64=function(){return window.btoa(i)},this.fromBase64=function(t){i=window.atob(t)}},BinaryAjax=function(){function t(){var t=null;return window.ActiveXObject?t=new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest&&(t=new XMLHttpRequest),t}function e(e,n,i){var o=t();o?(n&&("undefined"!=typeof o.onload?o.onload=function(){"200"==o.status?n(this):i&&i(),o=null}:o.onreadystatechange=function(){4==o.readyState&&("200"==o.status?n(this):i&&i(),o=null)}),o.open("HEAD",e,!0),o.send(null)):i&&i()}function n(e,n,i,o,r,s){var a=t();if(a){var l=0;o&&!r&&(l=o[0]);var u=0;o&&(u=o[1]-o[0]+1),n&&("undefined"!=typeof a.onload?a.onload=function(){"200"==a.status||"206"==a.status||"0"==a.status?(a.binaryResponse=new BinaryFile(a.responseText,l,u),a.fileSize=s||a.getResponseHeader("Content-Length"),n(a)):i&&i(),a=null}:a.onreadystatechange=function(){if(4==a.readyState){if("200"==a.status||"206"==a.status||"0"==a.status){var t={status:a.status,binaryResponse:new BinaryFile("unknown"==typeof a.responseBody?a.responseBody:a.responseText,l,u),fileSize:s||a.getResponseHeader("Content-Length")};n(t)}else i&&i();a=null}}),a.open("GET",e,!0),a.overrideMimeType&&a.overrideMimeType("text/plain; charset=x-user-defined"),o&&r&&a.setRequestHeader("Range","bytes="+o[0]+"-"+o[1]),a.setRequestHeader("If-Modified-Since","Sat, 1 Jan 1970 00:00:00 GMT"),a.send(null)}else i&&i()}return function(t,i,o,r){r?e(t,function(e){var s,a,l=parseInt(e.getResponseHeader("Content-Length"),10),u=e.getResponseHeader("Accept-Ranges");s=r[0],r[0]<0&&(s+=l),a=s+r[1]-1,n(t,i,o,[s,a],"bytes"==u,l)}):n(t,i,o)}}();document.write("<script type='text/vbscript'>\r\nFunction IEBinary_getByteAt(strBinary, iOffset)\r\n	IEBinary_getByteAt = AscB(MidB(strBinary, iOffset + 1, 1))\r\nEnd Function\r\nFunction IEBinary_getBytesAt(strBinary, iOffset, iLength)\r\n  Dim aBytes()\r\n  ReDim aBytes(iLength - 1)\r\n  For i = 0 To iLength - 1\r\n   aBytes(i) = IEBinary_getByteAt(strBinary, iOffset + i)\r\n  Next\r\n  IEBinary_getBytesAt = aBytes\r\nEnd Function\r\nFunction IEBinary_getLength(strBinary)\r\n	IEBinary_getLength = LenB(strBinary)\r\nEnd Function\r\n</script>\r\n");var EXIF=function(){function t(t){return!!t.exifdata}function e(t,e){function i(i){var o=n(i);t.exifdata=o||{},e&&e.call(t)}if(t instanceof Image)BinaryAjax(t.src,function(t){i(t.binaryResponse)});else if(window.FileReader&&t instanceof window.File){var o=new FileReader;o.onload=function(t){i(new BinaryFile(t.target.result))},o.readAsBinaryString(t)}}function n(t){if(255!=t.getByteAt(0)||216!=t.getByteAt(1))return!1;for(var e,n=2,i=t.getLength();i>n;){if(255!=t.getByteAt(n))return h&&console.log("Not a valid marker at offset "+n+", found: "+t.getByteAt(n)),!1;if(e=t.getByteAt(n+1),22400==e)return h&&console.log("Found 0xFFE1 marker"),r(t,n+4,t.getShortAt(n+2,!0)-2);if(225==e)return h&&console.log("Found 0xFFE1 marker"),r(t,n+4,t.getShortAt(n+2,!0)-2);n+=2+t.getShortAt(n+2,!0)}}function i(t,e,n,i,r){var s,a,l,u=t.getShortAt(n,r),c={};for(l=0;u>l;l++)s=n+12*l+2,a=i[t.getShortAt(s,r)],!a&&h&&console.log("Unknown tag: "+t.getShortAt(s,r)),c[a]=o(t,s,e,n,r);return c}function o(t,e,n,i,o){var r,s,a,l,u,c,h=t.getShortAt(e+2,o),d=t.getLongAt(e+4,o),p=t.getLongAt(e+8,o)+n;switch(h){case 1:case 7:if(1==d)return t.getByteAt(e+8,o);for(r=d>4?p:e+8,s=[],l=0;d>l;l++)s[l]=t.getByteAt(r+l);return s;case 2:return r=d>4?p:e+8,t.getStringAt(r,d-1);case 3:if(1==d)return t.getShortAt(e+8,o);for(r=d>2?p:e+8,s=[],l=0;d>l;l++)s[l]=t.getShortAt(r+2*l,o);return s;case 4:if(1==d)return t.getLongAt(e+8,o);s=[];for(var l=0;d>l;l++)s[l]=t.getLongAt(p+4*l,o);return s;case 5:if(1==d)return u=t.getLongAt(p,o),c=t.getLongAt(p+4,o),a=new Number(u/c),a.numerator=u,a.denominator=c,a;for(s=[],l=0;d>l;l++)u=t.getLongAt(p+8*l,o),c=t.getLongAt(p+4+8*l,o),s[l]=new Number(u/c),s[l].numerator=u,s[l].denominator=c;return s;case 9:if(1==d)return t.getSLongAt(e+8,o);for(s=[],l=0;d>l;l++)s[l]=t.getSLongAt(p+4*l,o);return s;case 10:if(1==d)return t.getSLongAt(p,o)/t.getSLongAt(p+4,o);for(s=[],l=0;d>l;l++)s[l]=t.getSLongAt(p+8*l,o)/t.getSLongAt(p+4+8*l,o);return s}}function r(t,e){if("Exif"!=t.getStringAt(e,4))return h&&console.log("Not valid EXIF data! "+t.getStringAt(e,4)),!1;var n,o,r,s,a,l=e+6;if(18761==t.getShortAt(l))n=!1;else{if(19789!=t.getShortAt(l))return h&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;n=!0}if(42!=t.getShortAt(l+2,n))return h&&console.log("Not valid TIFF data! (no 0x002A)"),!1;if(8!=t.getLongAt(l+4,n))return h&&console.log("Not valid TIFF data! (First offset not 8)",t.getShortAt(l+4,n)),!1;if(o=i(t,l,l+8,p,n),o.ExifIFDPointer){s=i(t,l,l+o.ExifIFDPointer,d,n);for(r in s){switch(r){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":s[r]=g[r][s[r]];break;case"ExifVersion":case"FlashpixVersion":s[r]=String.fromCharCode(s[r][0],s[r][1],s[r][2],s[r][3]);break;case"ComponentsConfiguration":s[r]=g.Components[s[r][0]]+g.Components[s[r][1]]+g.Components[s[r][2]]+g.Components[s[r][3]]}o[r]=s[r]}}if(o.GPSInfoIFDPointer){a=i(t,l,l+o.GPSInfoIFDPointer,f,n);for(r in a){switch(r){case"GPSVersionID":a[r]=a[r][0]+"."+a[r][1]+"."+a[r][2]+"."+a[r][3]}o[r]=a[r]}}return o}function s(n,i){return n instanceof Image&&!n.complete?!1:(t(n)?i&&i.call(n):e(n,i),!0)}function a(e,n){return t(e)?e.exifdata[n]:void 0}function l(e){if(!t(e))return{};var n,i=e.exifdata,o={};for(n in i)i.hasOwnProperty(n)&&(o[n]=i[n]);return o}function u(e){if(!t(e))return"";var n,i=e.exifdata,o="";for(n in i)i.hasOwnProperty(n)&&(o+="object"==typeof i[n]?i[n]instanceof Number?n+" : "+i[n]+" ["+i[n].numerator+"/"+i[n].denominator+"]\r\n":n+" : ["+i[n].length+" values]\r\n":n+" : "+i[n]+"\r\n");return o}function c(t){return n(t)}var h=!1,d={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},p={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},f={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},g={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};return{readFromBinaryFile:c,pretty:u,getTag:a,getAllTags:l,getData:s,Tags:d,TiffTags:p,GPSTags:f,StringValues:g}}();!function(t){function e(t,e){this.file=t,this.options=i.extend({},o,e),this._defaults=o,this._name=n,this.init()}var n="canvasResize",i={newsize:function(t,e,n,i,o){var r=o?"h":"";if(n&&t>n||i&&e>i){var s=t/e;(s>=1||0===i)&&n&&!o?(t=n,e=n/s>>0):o&&n/i>=s?(t=n,e=n/s>>0,r="w"):(t=i*s>>0,e=i)}return{width:t,height:e,cropped:r}},dataURLtoBlob:function(t){for(var e=t.split(",")[0].split(":")[1].split(";")[0],n=atob(t.split(",")[1]),i=new ArrayBuffer(n.length),o=new Uint8Array(i),r=0;r<n.length;r++)o[r]=n.charCodeAt(r);var s=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder;return s?(s=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder),s.append(i),s.getBlob(e)):s=new Blob([i],{type:e})},detectSubsampling:function(t){var e=t.width,n=t.height;if(e*n>1048576){var i=document.createElement("canvas");i.width=i.height=1;var o=i.getContext("2d");return o.drawImage(t,-e+1,0),0===o.getImageData(0,0,1,1).data[3]}return!1},rotate:function(t,e){var n={1:{90:6,180:3,270:8},2:{90:7,180:4,270:5},3:{90:8,180:1,270:6},4:{90:5,180:2,270:7},5:{90:2,180:7,270:4},6:{90:3,180:8,270:1},7:{90:4,180:5,270:2},8:{90:1,180:6,270:3}};return n[t][e]?n[t][e]:t},transformCoordinate:function(t,e,n,i){switch(i){case 5:case 6:case 7:case 8:t.width=n,t.height=e;break;default:t.width=e,t.height=n}var o=t.getContext("2d");switch(i){case 1:break;case 2:o.translate(e,0),o.scale(-1,1);break;case 3:o.translate(e,n),o.rotate(Math.PI);break;case 4:o.translate(0,n),o.scale(1,-1);break;case 5:o.rotate(.5*Math.PI),o.scale(1,-1);break;case 6:o.rotate(.5*Math.PI),o.translate(0,-n);break;case 7:o.rotate(.5*Math.PI),o.translate(e,-n),o.scale(-1,1);break;case 8:o.rotate(-.5*Math.PI),o.translate(-e,0)}},detectVerticalSquash:function(t,e,n){var i=document.createElement("canvas");i.width=1,i.height=n;var o=i.getContext("2d");o.drawImage(t,0,0);for(var r=o.getImageData(0,0,1,n).data,s=0,a=n,l=n;l>s;){var u=r[4*(l-1)+3];0===u?a=l:s=l,l=a+s>>1}var c=l/n;return 0===c?1:c},callback:function(t){return t},extend:function(){var t=arguments[0]||{},e=1,n=arguments.length,o=!1;t.constructor===Boolean&&(o=t,t=arguments[1]||{}),1===n&&(t=this,e=0);for(var r;n>e;e++)if(null!==(r=arguments[e]))for(var s in r)t!==r[s]&&(o&&"object"==typeof r[s]&&t[s]?i.extend(t[s],r[s]):void 0!==r[s]&&(t[s]=r[s]));return t}},o={width:300,height:0,crop:!1,quality:80,rotate:0,callback:i.callback};e.prototype={init:function(){var t=this,e=this.file,n=new FileReader;n.onloadend=function(n){var o=n.target.result,r=atob(o.split(",")[1]),s=new BinaryFile(r,0,r.length),a=EXIF.readFromBinaryFile(s),l=new Image;l.onload=function(n){var o=a.Orientation||1;o=i.rotate(o,t.options.rotate);var r=o>=5&&8>=o?i.newsize(l.height,l.width,t.options.width,t.options.height,t.options.crop):i.newsize(l.width,l.height,t.options.width,t.options.height,t.options.crop),s=l.width,u=l.height,c=r.width,h=r.height,d=document.createElement("canvas"),p=d.getContext("2d");p.save(),i.transformCoordinate(d,c,h,o),i.detectSubsampling(l)&&(s/=2,u/=2);var f=1024,g=document.createElement("canvas");g.width=g.height=f;for(var m=g.getContext("2d"),v=i.detectVerticalSquash(l,s,u),y=0;u>y;){for(var b=y+f>u?u-y:f,w=0;s>w;){var _=w+f>s?s-w:f;m.clearRect(0,0,f,f),m.drawImage(l,-w,-y);var x=Math.floor(w*c/s),k=Math.ceil(_*c/s),C=Math.floor(y*h/u/v),E=Math.ceil(b*h/u/v);p.drawImage(g,0,0,_,b,x,C,k,E),w+=f}y+=f}p.restore(),g=m=null;var S=document.createElement("canvas");S.width="h"===r.cropped?h:c,S.height="w"===r.cropped?c:h;var $="h"===r.cropped?.5*(h-c):0,T="w"===r.cropped?.5*(c-h):0;if(newctx=S.getContext("2d"),newctx.drawImage(d,$,T,c,h),"image/png"===e.type)var O=S.toDataURL(e.type);else var O=S.toDataURL("image/jpeg",.01*t.options.quality);t.options.callback(O,S.width,S.height)},l.src=o},n.readAsDataURL(e)}},t[n]=function(t,n){return"string"==typeof t?i[t](n):void new e(t,n)}}(window),function(t){var e=function(n,i){var o=!1;try{if("object"!=typeof n||1!==n.nodeType)throw new Error("First argument should be a DOM element");var r,s,a,l=n.getAttribute("data-withinviewport-settings")&&window.JSON?JSON.parse(n.getAttribute("data-withinviewport-settings")):{},i="string"==typeof i?{sides:i}:i||{},u={sides:i.sides||l.sides||e.defaults.sides||"all",top:i.top||l.top||e.defaults.top||0,right:i.right||l.right||e.defaults.right||0,bottom:i.bottom||l.bottom||e.defaults.bottom||0,left:i.left||l.left||e.defaults.left||0},c={top:function(){return d[1]>=h[1]+u.top},right:function(){return d[0]+n.offsetWidth<=window.innerWidth+h[0]-u.right},bottom:function(){return d[1]+n.offsetHeight<=h[1]+window.innerHeight-u.bottom},left:function(){return d[0]>=h[0]+u.left},all:function(){return c.top()&&c.right()&&c.bottom()&&c.left()}},h=function(){var e=t.body.scrollLeft,n=t.body.scrollTop;return 0==n&&(n=window.pageYOffset?window.pageYOffset:t.body.parentElement?t.body.parentElement.scrollTop:0),0==e&&(e=window.pageXOffset?window.pageXOffset:t.body.parentElement?t.body.parentElement.scrollLeft:0),[e,n]}(),d=function(){var t=n,e=0,i=0;if(t.offsetParent)for(e=t.offsetLeft,i=t.offsetTop;t=t.offsetParent;)e+=t.offsetLeft,i+=t.offsetTop;return[e,i]}();for(r=u.sides.split(" "),s=r.length;s--;)if(a=r[s].toLowerCase(),/top|right|bottom|left|all/.test(a)){if(!c[a]())return!1;o=!0}return o}catch(p){}finally{return o}};for(e.prototype.defaults={sides:"all",top:0,right:0,bottom:0,left:0},e.defaults=e.prototype.defaults,window.withinViewport=e,arr="top,right,bottom,left".split(","),i=arr.length;i--;)side=arr[i],e.prototype[side]=function(t){return e(t,side)},e[side]=e.prototype[side]}(document);var Handlebars=function(){var t=function(){"use strict";function t(t){this.string=t}var e;return t.prototype.toString=function(){return""+this.string},e=t}(),e=function(t){"use strict";function e(t){return a[t]||"&amp;"}function n(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function i(t){return t instanceof s?t.toString():t||0===t?(t=""+t,u.test(t)?t.replace(l,e):t):""}function o(t){return t||0===t?d(t)&&0===t.length?!0:!1:!0}var r={},s=t,a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},l=/[&<>"'`]/g,u=/[&<>"'`]/;r.extend=n;var c=Object.prototype.toString;r.toString=c;var h=function(t){return"function"==typeof t};h(/x/)&&(h=function(t){return"function"==typeof t&&"[object Function]"===c.call(t)});var h;r.isFunction=h;var d=Array.isArray||function(t){return t&&"object"==typeof t?"[object Array]"===c.call(t):!1};return r.isArray=d,r.escapeExpression=i,r.isEmpty=o,r}(t),n=function(){"use strict";function t(){for(var t=Error.prototype.constructor.apply(this,arguments),e=0;e<n.length;e++)this[n[e]]=t[n[e]]}var e,n=["description","fileName","lineNumber","message","name","number","stack"];return t.prototype=new Error,e=t}(),i=function(t,e){"use strict";function n(t,e){this.helpers=t||{},this.partials=e||{},i(this)}function i(t){t.registerHelper("helperMissing",function(t){if(2===arguments.length)return void 0;throw new Error("Missing helper: '"+t+"'")}),t.registerHelper("blockHelperMissing",function(e,n){var i=n.inverse||function(){},o=n.fn;return d(e)&&(e=e.call(this)),e===!0?o(this):e===!1||null==e?i(this):h(e)?e.length>0?t.helpers.each(e,n):i(this):o(e)}),t.registerHelper("each",function(t,e){var n,i=e.fn,o=e.inverse,r=0,s="";if(d(t)&&(t=t.call(this)),e.data&&(n=m(e.data)),t&&"object"==typeof t)if(h(t))for(var a=t.length;a>r;r++)n&&(n.index=r,n.first=0===r,n.last=r===t.length-1),s+=i(t[r],{data:n});else for(var l in t)t.hasOwnProperty(l)&&(n&&(n.key=l),s+=i(t[l],{data:n}),r++);return 0===r&&(s=o(this)),s}),t.registerHelper("if",function(t,e){return d(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||s.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,n){return t.helpers["if"].call(this,e,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),t.registerHelper("with",function(t,e){return d(t)&&(t=t.call(this)),s.isEmpty(t)?void 0:e.fn(t)}),t.registerHelper("log",function(e,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;t.log(i,e)})}function o(t,e){g.log(t,e)}var r={},s=t,a=e,l="1.1.2";r.VERSION=l;var u=4;r.COMPILER_REVISION=u;var c={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};r.REVISION_CHANGES=c;var h=s.isArray,d=s.isFunction,p=s.toString,f="[object Object]";r.HandlebarsEnvironment=n,n.prototype={constructor:n,logger:g,log:o,registerHelper:function(t,e,n){if(p.call(t)===f){if(n||e)throw new a("Arg not supported with multiple helpers");s.extend(this.helpers,t)}else n&&(e.not=n),this.helpers[t]=e},registerPartial:function(t,e){p.call(t)===f?s.extend(this.partials,t):this.partials[t]=e}};var g={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(t,e){if(g.level<=t){var n=g.methodMap[t];"undefined"!=typeof console&&console[n]&&console[n].call(console,e)}}};r.logger=g,r.log=o;var m=function(t){var e={};return s.extend(e,t),e};return r.createFrame=m,r}(e,n),o=function(t,e,n){"use strict";function i(t){var e=t&&t[0]||1,n=d;if(e!==n){if(n>e){var i=p[n],o=p[e];throw new Error("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+o+").")}throw new Error("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function o(t,e){if(!e)throw new Error("No environment passed to template");var n;n=e.compile?function(t,n,i,o,r,s){var l=a.apply(this,arguments);if(l)return l;var u={helpers:o,partials:r,data:s};return r[n]=e.compile(t,{data:void 0!==s},e),r[n](i,u)}:function(t,e){var n=a.apply(this,arguments);if(n)return n;throw new h("The partial "+e+" could not be compiled when running in runtime-only mode")};var o={escapeExpression:c.escapeExpression,invokePartial:n,programs:[],program:function(t,e,n){var i=this.programs[t];return n?i=s(t,e,n):i||(i=this.programs[t]=s(t,e)),i},merge:function(t,e){var n=t||e;return t&&e&&t!==e&&(n={},c.extend(n,e),c.extend(n,t)),n},programWithDepth:r,noop:l,compilerInfo:null};return function(n,r){r=r||{};var s,a,l=r.partial?r:e;r.partial||(s=r.helpers,a=r.partials);var u=t.call(o,l,n,s,a,r.data);return r.partial||i(o.compilerInfo),u}}function r(t,e,n){var i=Array.prototype.slice.call(arguments,3),o=function(t,o){return o=o||{},e.apply(this,[t,o.data||n].concat(i))};return o.program=t,o.depth=i.length,o}function s(t,e,n){var i=function(t,i){return i=i||{},e(t,i.data||n)};return i.program=t,i.depth=0,i}function a(t,e,n,i,o,r){var s={partial:!0,helpers:i,partials:o,data:r};if(void 0===t)throw new h("The partial "+e+" could not be found");return t instanceof Function?t(n,s):void 0}function l(){return""}var u={},c=t,h=e,d=n.COMPILER_REVISION,p=n.REVISION_CHANGES;
return u.template=o,u.programWithDepth=r,u.program=s,u.invokePartial=a,u.noop=l,u}(e,n,i),r=function(t,e,n,i,o){"use strict";var r,s=t,a=e,l=n,u=i,c=o,h=function(){var t=new s.HandlebarsEnvironment;return u.extend(t,s),t.SafeString=a,t.Exception=l,t.Utils=u,t.VM=c,t.template=function(e){return c.template(e,t)},t},d=h();return d.create=h,r=d}(i,t,n,e,o),s=function(t){"use strict";function e(t,n,i){this.type="program",this.statements=t,this.strip={},i?(this.inverse=new e(i,n),this.strip.right=n.left):n&&(this.strip.left=n.right)}function n(t,e,n,i){this.type="mustache",this.hash=e,this.strip=i;var o=n[3]||n[2];this.escaped="{"!==o&&"&"!==o;var r=this.id=t[0],s=this.params=t.slice(1),a=this.eligibleHelper=r.isSimple;this.isHelper=a&&(s.length||e)}function i(t,e,n){this.type="partial",this.partialName=t,this.context=e,this.strip=n}function o(t,e,n,i){if(t.id.original!==i.path.original)throw new g(t.id.original+" doesn't match "+i.path.original);this.type="block",this.mustache=t,this.program=e,this.inverse=n,this.strip={left:t.strip.left,right:i.strip.right},(e||n).strip.left=t.strip.right,(n||e).strip.right=i.strip.left,n&&!e&&(this.isInverse=!0)}function r(t){this.type="content",this.string=t}function s(t){this.type="hash",this.pairs=t}function a(t){this.type="ID";for(var e="",n=[],i=0,o=0,r=t.length;r>o;o++){var s=t[o].part;if(e+=(t[o].separator||"")+s,".."===s||"."===s||"this"===s){if(n.length>0)throw new g("Invalid path: "+e);".."===s?i++:this.isScoped=!0}else n.push(s)}this.original=e,this.parts=n,this.string=n.join("."),this.depth=i,this.isSimple=1===t.length&&!this.isScoped&&0===i,this.stringModeValue=this.string}function l(t){this.type="PARTIAL_NAME",this.name=t.original}function u(t){this.type="DATA",this.id=t}function c(t){this.type="STRING",this.original=this.string=this.stringModeValue=t}function h(t){this.type="INTEGER",this.original=this.integer=t,this.stringModeValue=Number(t)}function d(t){this.type="BOOLEAN",this.bool=t,this.stringModeValue="true"===t}function p(t){this.type="comment",this.comment=t}var f={},g=t;return f.ProgramNode=e,f.MustacheNode=n,f.PartialNode=i,f.BlockNode=o,f.ContentNode=r,f.HashNode=s,f.IdNode=a,f.PartialNameNode=l,f.DataNode=u,f.StringNode=c,f.IntegerNode=h,f.BooleanNode=d,f.CommentNode=p,f}(n),a=function(){"use strict";var t,e=function(){function t(t,e){return{left:"~"===t[2],right:"~"===e[0]||"~"===e[1]}}function e(){this.yy={}}var n={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,inMustache_repetition0:28,inMustache_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,hash:35,hash_repetition_plus0:36,hashSegment:37,ID:38,EQUALS:39,DATA:40,pathSegments:41,SEP:42,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",38:"ID",39:"EQUALS",40:"DATA",42:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[35,1],[37,3],[26,1],[26,1],[26,1],[30,2],[21,1],[41,3],[41,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[36,1],[36,2]],performAction:function(e,n,i,o,r,s,a){var l=s.length-1;switch(r){case 1:return new o.ProgramNode(s[l-1]);case 2:return new o.ProgramNode([]);case 3:this.$=new o.ProgramNode([],s[l-1],s[l]);break;case 4:this.$=new o.ProgramNode(s[l-2],s[l-1],s[l]);break;case 5:this.$=new o.ProgramNode(s[l-1],s[l],[]);break;case 6:this.$=new o.ProgramNode(s[l]);break;case 7:this.$=new o.ProgramNode([]);break;case 8:this.$=new o.ProgramNode([]);break;case 9:this.$=[s[l]];break;case 10:s[l-1].push(s[l]),this.$=s[l-1];break;case 11:this.$=new o.BlockNode(s[l-2],s[l-1].inverse,s[l-1],s[l]);break;case 12:this.$=new o.BlockNode(s[l-2],s[l-1],s[l-1].inverse,s[l]);break;case 13:this.$=s[l];break;case 14:this.$=s[l];break;case 15:this.$=new o.ContentNode(s[l]);break;case 16:this.$=new o.CommentNode(s[l]);break;case 17:this.$=new o.MustacheNode(s[l-1][0],s[l-1][1],s[l-2],t(s[l-2],s[l]));break;case 18:this.$=new o.MustacheNode(s[l-1][0],s[l-1][1],s[l-2],t(s[l-2],s[l]));break;case 19:this.$={path:s[l-1],strip:t(s[l-2],s[l])};break;case 20:this.$=new o.MustacheNode(s[l-1][0],s[l-1][1],s[l-2],t(s[l-2],s[l]));break;case 21:this.$=new o.MustacheNode(s[l-1][0],s[l-1][1],s[l-2],t(s[l-2],s[l]));break;case 22:this.$=new o.PartialNode(s[l-2],s[l-1],t(s[l-3],s[l]));break;case 23:this.$=t(s[l-1],s[l]);break;case 24:this.$=[[s[l-2]].concat(s[l-1]),s[l]];break;case 25:this.$=[[s[l]],null];break;case 26:this.$=s[l];break;case 27:this.$=new o.StringNode(s[l]);break;case 28:this.$=new o.IntegerNode(s[l]);break;case 29:this.$=new o.BooleanNode(s[l]);break;case 30:this.$=s[l];break;case 31:this.$=new o.HashNode(s[l]);break;case 32:this.$=[s[l-2],s[l]];break;case 33:this.$=new o.PartialNameNode(s[l]);break;case 34:this.$=new o.PartialNameNode(new o.StringNode(s[l]));break;case 35:this.$=new o.PartialNameNode(new o.IntegerNode(s[l]));break;case 36:this.$=new o.DataNode(s[l]);break;case 37:this.$=new o.IdNode(s[l]);break;case 38:s[l-2].push({part:s[l],separator:s[l-1]}),this.$=s[l-2];break;case 39:this.$=[{part:s[l]}];break;case 42:this.$=[];break;case 43:s[l-1].push(s[l]);break;case 46:this.$=[s[l]];break;case 47:s[l-1].push(s[l])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,38:[1,28],40:[1,27],41:26},{17:29,21:24,30:25,38:[1,28],40:[1,27],41:26},{17:30,21:24,30:25,38:[1,28],40:[1,27],41:26},{17:31,21:24,30:25,38:[1,28],40:[1,27],41:26},{21:33,26:32,32:[1,34],33:[1,35],38:[1,28],41:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,38:[1,28],40:[1,27],41:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,42],24:[2,42],28:43,32:[2,42],33:[2,42],34:[2,42],38:[2,42],40:[2,42]},{18:[2,25],24:[2,25]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],38:[2,37],40:[2,37],42:[1,44]},{21:45,38:[1,28],41:26},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],38:[2,39],40:[2,39],42:[2,39]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,40],21:50,27:49,38:[1,28],41:26},{18:[2,33],38:[2,33]},{18:[2,34],38:[2,34]},{18:[2,35],38:[2,35]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,38:[1,28],41:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,44],21:56,24:[2,44],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:55,36:61,37:62,38:[1,63],40:[1,27],41:26},{38:[1,64]},{18:[2,36],24:[2,36],32:[2,36],33:[2,36],34:[2,36],38:[2,36],40:[2,36]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,65]},{18:[2,41]},{18:[1,66]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24]},{18:[2,43],24:[2,43],32:[2,43],33:[2,43],34:[2,43],38:[2,43],40:[2,43]},{18:[2,45],24:[2,45]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],38:[2,26],40:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],38:[2,27],40:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],38:[2,28],40:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],38:[2,29],40:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],38:[2,30],40:[2,30]},{18:[2,31],24:[2,31],37:67,38:[1,68]},{18:[2,46],24:[2,46],38:[2,46]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],38:[2,39],39:[1,69],40:[2,39],42:[2,39]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],38:[2,38],40:[2,38],42:[2,38]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{18:[2,47],24:[2,47],38:[2,47]},{39:[1,69]},{21:56,30:60,31:70,32:[1,57],33:[1,58],34:[1,59],38:[1,28],40:[1,27],41:26},{18:[2,32],24:[2,32],38:[2,32]}],defaultActions:{3:[2,2],16:[2,1],50:[2,41]},parseError:function(t,e){throw new Error(t)},parse:function(t){function e(){var t;return t=n.lexer.lex()||1,"number"!=typeof t&&(t=n.symbols_[t]||t),t}var n=this,i=[0],o=[null],r=[],s=this.table,a="",l=0,u=0,c=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var h=this.lexer.yylloc;r.push(h);var d=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,f,g,m,v,y,b,w,_,x={};;){if(g=i[i.length-1],this.defaultActions[g]?m=this.defaultActions[g]:((null===p||"undefined"==typeof p)&&(p=e()),m=s[g]&&s[g][p]),"undefined"==typeof m||!m.length||!m[0]){var k="";if(!c){_=[];for(y in s[g])this.terminals_[y]&&y>2&&_.push("'"+this.terminals_[y]+"'");k=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+_.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(k,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:h,expected:_})}}if(m[0]instanceof Array&&m.length>1)throw new Error("Parse Error: multiple actions possible at state: "+g+", token: "+p);switch(m[0]){case 1:i.push(p),o.push(this.lexer.yytext),r.push(this.lexer.yylloc),i.push(m[1]),p=null,f?(p=f,f=null):(u=this.lexer.yyleng,a=this.lexer.yytext,l=this.lexer.yylineno,h=this.lexer.yylloc,c>0&&c--);break;case 2:if(b=this.productions_[m[1]][1],x.$=o[o.length-b],x._$={first_line:r[r.length-(b||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(b||1)].first_column,last_column:r[r.length-1].last_column},d&&(x._$.range=[r[r.length-(b||1)].range[0],r[r.length-1].range[1]]),v=this.performAction.call(x,a,u,l,this.yy,m[1],o,r),"undefined"!=typeof v)return v;b&&(i=i.slice(0,-1*b*2),o=o.slice(0,-1*b),r=r.slice(0,-1*b)),i.push(this.productions_[m[1]][0]),o.push(x.$),r.push(x._$),w=s[i[i.length-2]][i[i.length-1]],i.push(w);break;case 3:return!0}}return!0}},i=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=t.match(/(?:\r\n?|\n).*/g);return e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var o=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,n,i,o;this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),s=0;s<r.length&&(n=this._input.match(this.rules[r[s]]),!n||e&&!(n[0].length>e[0].length)||(e=n,i=s,this.options.flex));s++);return e?(o=e[0].match(/(?:\r\n?|\n).*/g),o&&(this.yylineno+=o.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:o?o[o.length-1].length-o[o.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,r[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t?t:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return"undefined"!=typeof t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return t.options={},t.performAction=function(t,e,n,i){function o(t,n){return e.yytext=e.yytext.substr(t,e.yyleng-n)}switch(n){case 0:if("\\\\"===e.yytext.slice(-2)?(o(0,1),this.begin("mu")):"\\"===e.yytext.slice(-1)?(o(0,1),this.begin("emu")):this.begin("mu"),e.yytext)return 14;break;case 1:return 14;case 2:return"\\"!==e.yytext.slice(-1)&&this.popState(),"\\"===e.yytext.slice(-1)&&o(0,1),14;case 3:return o(0,4),this.popState(),15;case 4:return 25;case 5:return 16;case 6:return 20;case 7:return 19;case 8:return 19;case 9:return 23;case 10:return 22;case 11:this.popState(),this.begin("com");break;case 12:return o(3,5),this.popState(),15;case 13:return 22;case 14:return 39;case 15:return 38;case 16:return 38;case 17:return 42;case 18:break;case 19:return this.popState(),24;case 20:return this.popState(),18;case 21:return e.yytext=o(1,2).replace(/\\"/g,'"'),32;case 22:return e.yytext=o(1,2).replace(/\\'/g,"'"),32;case 23:return 40;case 24:return 34;case 25:return 34;case 26:return 33;case 27:return 38;case 28:return e.yytext=o(1,2),38;case 29:return"INVALID";case 30:return 5}},t.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s])))/,/^(?:false(?=([~}\s])))/,/^(?:-?[0-9]+(?=([~}\s])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],t.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,30],inclusive:!0}},t}();return n.lexer=i,e.prototype=n,n.Parser=e,new e}();return t=e}(),l=function(t,e){"use strict";function n(t){return t.constructor===r.ProgramNode?t:(o.yy=r,o.parse(t))}var i={},o=t,r=e;return i.parser=o,i.parse=n,i}(a,s),u=function(t){"use strict";function e(t){this.value=t}function n(){}var i,o=t.COMPILER_REVISION,r=t.REVISION_CHANGES,s=t.log;n.prototype={nameLookup:function(t,e){var i,o;return 0===t.indexOf("depth")&&(i=!0),o=/^[0-9]+$/.test(e)?t+"["+e+"]":n.isValidJavaScriptVariableName(e)?t+"."+e:t+"['"+e+"']",i?"("+t+" && "+o+")":o},appendToBuffer:function(t){return this.environment.isSimple?"return "+t+";":{appendToBuffer:!0,content:t,toString:function(){return"buffer += "+t+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(t,e,n,i){this.environment=t,this.options=e||{},s("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.compileStack=[],this.inlineStack=[],this.compileChildren(t,e);var o,r=t.opcodes;this.i=0;for(var a=r.length;this.i<a;this.i++)o=r[this.i],"DECLARE"===o.opcode?this[o.name]=o.value:this[o.opcode].apply(this,o.args),o.opcode!==this.stripNext&&(this.stripNext=!1);return this.pushSource(""),this.createFunctionContext(i)},preamble:function(){var t=[];if(this.isChild)t.push("");else{var e=this.namespace,n="helpers = this.merge(helpers, "+e+".helpers);";this.environment.usePartial&&(n=n+" partials = this.merge(partials, "+e+".partials);"),this.options.data&&(n+=" data = data || {};"),t.push(n)}this.environment.isSimple?t.push(""):t.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=t},createFunctionContext:function(t){var e=this.stackVars.concat(this.registers.list);if(e.length>0&&(this.source[1]=this.source[1]+", "+e.join(", ")),!this.isChild)for(var n in this.context.aliases)this.context.aliases.hasOwnProperty(n)&&(this.source[1]=this.source[1]+", "+n+"="+this.context.aliases[n]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var i=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],a=0,l=this.environment.depths.list.length;l>a;a++)i.push("depth"+this.environment.depths.list[a]);var u=this.mergeSource();if(!this.isChild){var c=o,h=r[c];u="this.compilerInfo = ["+c+",'"+h+"'];\n"+u}if(t)return i.push(u),Function.apply(this,i);var d="function "+(this.name||"")+"("+i.join(",")+") {\n  "+u+"}";return s("debug",d+"\n\n"),d},mergeSource:function(){for(var t,e="",n=0,i=this.source.length;i>n;n++){var o=this.source[n];o.appendToBuffer?t=t?t+"\n    + "+o.content:o.content:(t&&(e+="buffer += "+t+";\n  ",t=void 0),e+=o+"\n  ")}return e},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t),this.replaceStack(function(e){return t.splice(1,0,e),"blockHelperMissing.call("+t.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=["depth0"];this.setupParams(0,t);var e=this.topStack();t.splice(1,0,e),t[t.length-1]="options",this.pushSource("if (!"+this.lastHelper+") { "+e+" = blockHelperMissing.call("+t.join(", ")+"); }")},appendContent:function(t){this.pendingContent&&(t=this.pendingContent+t),this.stripNext&&(t=t.replace(/^\s+/,"")),this.pendingContent=t},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline();var t=this.popStack();this.pushSource("if("+t+" || "+t+" === 0) { "+this.appendToBuffer(t)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(t){this.lastContext!==t&&(this.lastContext=t)},lookupOnContext:function(t){this.push(this.nameLookup("depth"+this.lastContext,t,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(t){return"typeof "+t+" === functionType ? "+t+".apply(depth0) : "+t})},lookup:function(t){this.replaceStack(function(e){return e+" == null || "+e+" === false ? "+e+" : "+this.nameLookup(e,t,"context")})},lookupData:function(){this.push("data")},pushStringParam:function(t,e){this.pushStackLiteral("depth"+this.lastContext),this.pushString(e),"string"==typeof t?this.pushString(t):this.pushStackLiteral(t)},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.register("hashTypes","{}"),this.register("hashContexts","{}"))},pushHash:function(){this.hash={values:[],types:[],contexts:[]}},popHash:function(){var t=this.hash;this.hash=void 0,this.options.stringParams&&(this.register("hashContexts","{"+t.contexts.join(",")+"}"),this.register("hashTypes","{"+t.types.join(",")+"}")),this.push("{\n    "+t.values.join(",\n    ")+"\n  }")},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},push:function(t){return this.inlineStack.push(t),t},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){null!=t?this.pushStackLiteral(this.programExpression(t)):this.pushStackLiteral(null)},invokeHelper:function(t,e){this.context.aliases.helperMissing="helpers.helperMissing";var n=this.lastHelper=this.setupHelper(t,e,!0),i=this.nameLookup("depth"+this.lastContext,e,"context");this.push(n.name+" || "+i),this.replaceStack(function(t){return t+" ? "+t+".call("+n.callParams+") : helperMissing.call("+n.helperMissingParams+")"})},invokeKnownHelper:function(t,e){var n=this.setupHelper(t,e);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(t,e){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");var n=this.setupHelper(0,t,e),i=this.lastHelper=this.nameLookup("helpers",t,"helper"),o=this.nameLookup("depth"+this.lastContext,t,"context"),r=this.nextStack();this.pushSource("if ("+r+" = "+i+") { "+r+" = "+r+".call("+n.callParams+"); }"),this.pushSource("else { "+r+" = "+o+"; "+r+" = typeof "+r+" === functionType ? "+r+".call("+n.callParams+") : "+r+"; }")},invokePartial:function(t){var e=[this.nameLookup("partials",t,"partial"),"'"+t+"'",this.popStack(),"helpers","partials"];this.options.data&&e.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+e.join(", ")+")")},assignToHash:function(t){var e,n,i=this.popStack();this.options.stringParams&&(n=this.popStack(),e=this.popStack());var o=this.hash;e&&o.contexts.push("'"+t+"': "+e),n&&o.types.push("'"+t+"': "+n),o.values.push("'"+t+"': ("+i+")")},compiler:n,compileChildren:function(t,e){for(var n,i,o=t.children,r=0,s=o.length;s>r;r++){n=o[r],i=new this.compiler;var a=this.matchExistingProgram(n);null==a?(this.context.programs.push(""),a=this.context.programs.length,n.index=a,n.name="program"+a,this.context.programs[a]=i.compile(n,e,this.context),this.context.environments[a]=n):(n.index=a,n.name="program"+a)}},matchExistingProgram:function(t){for(var e=0,n=this.context.environments.length;n>e;e++){var i=this.context.environments[e];if(i&&i.equals(t))return e}},programExpression:function(t){if(this.context.aliases.self="this",null==t)return"self.noop";for(var e,n=this.environment.children[t],i=n.depths.list,o=[n.index,n.name,"data"],r=0,s=i.length;s>r;r++)e=i[r],1===e?o.push("depth0"):o.push("depth"+(e-1));return(0===i.length?"self.program(":"self.programWithDepth(")+o.join(", ")+")"},register:function(t,e){this.useRegister(t),this.pushSource(t+" = "+e+";")},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},pushStackLiteral:function(t){return this.push(new e(t))},pushSource:function(t){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),t&&this.source.push(t)},pushStack:function(t){this.flushInline();var e=this.incrStack();return t&&this.pushSource(e+" = "+t+";"),this.compileStack.push(e),e},replaceStack:function(t){var n,i="",o=this.isInline();if(o){var r=this.popStack(!0);if(r instanceof e)n=r.value;else{var s=this.stackSlot?this.topStackName():this.incrStack();i="("+this.push(s)+" = "+r+"),",n=this.topStack()}}else n=this.topStack();var a=t.call(this,n);return o?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+i+a+")")):(/^stack/.test(n)||(n=this.nextStack()),this.pushSource(n+" = ("+i+a+");")),n},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;if(t.length){this.inlineStack=[];for(var n=0,i=t.length;i>n;n++){var o=t[n];o instanceof e?this.compileStack.push(o):this.pushStack(o)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var n=this.isInline(),i=(n?this.inlineStack:this.compileStack).pop();return!t&&i instanceof e?i.value:(n||this.stackSlot--,i)},topStack:function(t){var n=this.isInline()?this.inlineStack:this.compileStack,i=n[n.length-1];return!t&&i instanceof e?i.value:i},quotedString:function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(t,e,n){var i=[];this.setupParams(t,i,n);var o=this.nameLookup("helpers",e,"helper");return{params:i,name:o,callParams:["depth0"].concat(i).join(", "),helperMissingParams:n&&["depth0",this.quotedString(e)].concat(i).join(", ")}},setupParams:function(t,e,n){var i,o,r,s=[],a=[],l=[];s.push("hash:"+this.popStack()),o=this.popStack(),r=this.popStack(),(r||o)&&(r||(this.context.aliases.self="this",r="self.noop"),o||(this.context.aliases.self="this",o="self.noop"),s.push("inverse:"+o),s.push("fn:"+r));for(var u=0;t>u;u++)i=this.popStack(),e.push(i),this.options.stringParams&&(l.push(this.popStack()),a.push(this.popStack()));return this.options.stringParams&&(s.push("contexts:["+a.join(",")+"]"),s.push("types:["+l.join(",")+"]"),s.push("hashContexts:hashContexts"),s.push("hashTypes:hashTypes")),this.options.data&&s.push("data:data"),s="{"+s.join(",")+"}",n?(this.register("options",s),e.push("options")):e.push(s),e.join(", ")}};for(var a="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),l=n.RESERVED_WORDS={},u=0,c=a.length;c>u;u++)l[a[u]]=!0;return n.isValidJavaScriptVariableName=function(t){return!n.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(t)?!0:!1},i=n}(i),c=function(t,e,n,i){"use strict";function o(){}function r(t,e){if(null==t||"string"!=typeof t&&t.constructor!==h.ProgramNode)throw new l("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);e=e||{},"data"in e||(e.data=!0);var n=u(t),i=(new o).compile(n,e);return(new c).compile(i,e)}function s(t,e,n){function i(){var i=u(t),r=(new o).compile(i,e),s=(new c).compile(r,e,void 0,!0);return n.template(s)}if(null==t||"string"!=typeof t&&t.constructor!==h.ProgramNode)throw new l("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);e=e||{},"data"in e||(e.data=!0);var r;return function(t,e){return r||(r=i()),r.call(this,t,e)}}var a={},l=t,u=e.parse,c=n,h=i;return a.Compiler=o,o.prototype={compiler:o,disassemble:function(){for(var t,e,n,i=this.opcodes,o=[],r=0,s=i.length;s>r;r++)if(t=i[r],"DECLARE"===t.opcode)o.push("DECLARE "+t.name+"="+t.value);else{e=[];for(var a=0;a<t.args.length;a++)n=t.args[a],"string"==typeof n&&(n='"'+n.replace("\n","\\n")+'"'),e.push(n);o.push(t.opcode+" "+e.join(" "))}return o.join("\n")},equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var n=0;e>n;n++){var i=this.opcodes[n],o=t.opcodes[n];if(i.opcode!==o.opcode||i.args.length!==o.args.length)return!1;for(var r=0;r<i.args.length;r++)if(i.args[r]!==o.args[r])return!1}if(e=this.children.length,t.children.length!==e)return!1;for(n=0;e>n;n++)if(!this.children[n].equals(t.children[n]))return!1;return!0},guid:0,compile:function(t,e){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=e;var n=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},n)for(var i in n)this.options.knownHelpers[i]=n[i];return this.accept(t)},accept:function(t){var e,n=t.strip||{};return n.left&&this.opcode("strip"),e=this[t.type](t),n.right&&this.opcode("strip"),e},program:function(t){for(var e=t.statements,n=0,i=e.length;i>n;n++)this.accept(e[n]);return this.isSimple=1===i,this.depths.list=this.depths.list.sort(function(t,e){return t-e}),this},compileProgram:function(t){var e,n=(new this.compiler).compile(t,this.options),i=this.guid++;this.usePartial=this.usePartial||n.usePartial,this.children[i]=n;for(var o=0,r=n.depths.list.length;r>o;o++)e=n.depths.list[o],2>e||this.addDepth(e-1);return i},block:function(t){var e=t.mustache,n=t.program,i=t.inverse;n&&(n=this.compileProgram(n)),i&&(i=this.compileProgram(i));var o=this.classifyMustache(e);"helper"===o?this.helperMustache(e,n,i):"simple"===o?(this.simpleMustache(e),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(e,n,i),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(t){var e,n,i=t.pairs;this.opcode("pushHash");for(var o=0,r=i.length;r>o;o++)e=i[o],n=e[1],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.stringModeValue,n.type)):this.accept(n),this.opcode("assignToHash",e[0]);this.opcode("popHash")},partial:function(t){var e=t.partialName;this.usePartial=!0,t.context?this.ID(t.context):this.opcode("push","depth0"),this.opcode("invokePartial",e.name),this.opcode("append")},content:function(t){this.opcode("appendContent",t.string)},mustache:function(t){var e=this.options,n=this.classifyMustache(t);"simple"===n?this.simpleMustache(t):"helper"===n?this.helperMustache(t):this.ambiguousMustache(t),t.escaped&&!e.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(t,e,n){var i=t.id,o=i.parts[0],r=null!=e||null!=n;this.opcode("getContext",i.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",o,r)},simpleMustache:function(t){var e=t.id;
"DATA"===e.type?this.DATA(e):e.parts.length?this.ID(e):(this.addDepth(e.depth),this.opcode("getContext",e.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperMustache:function(t,e,n){var i=this.setupFullMustacheParams(t,e,n),o=t.id.parts[0];if(this.options.knownHelpers[o])this.opcode("invokeKnownHelper",i.length,o);else{if(this.options.knownHelpersOnly)throw new Error("You specified knownHelpersOnly, but used the unknown helper "+o);this.opcode("invokeHelper",i.length,o)}},ID:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0];e?this.opcode("lookupOnContext",t.parts[0]):this.opcode("pushContext");for(var n=1,i=t.parts.length;i>n;n++)this.opcode("lookup",t.parts[n])},DATA:function(t){if(this.options.data=!0,t.id.isScoped||t.id.depth)throw new l("Scoped data references are not supported: "+t.original);this.opcode("lookupData");for(var e=t.id.parts,n=0,i=e.length;i>n;n++)this.opcode("lookup",e[n])},STRING:function(t){this.opcode("pushString",t.string)},INTEGER:function(t){this.opcode("pushLiteral",t.integer)},BOOLEAN:function(t){this.opcode("pushLiteral",t.bool)},comment:function(){},opcode:function(t){this.opcodes.push({opcode:t,args:[].slice.call(arguments,1)})},declare:function(t,e){this.opcodes.push({opcode:"DECLARE",name:t,value:e})},addDepth:function(t){if(isNaN(t))throw new Error("EWOT");0!==t&&(this.depths[t]||(this.depths[t]=!0,this.depths.list.push(t)))},classifyMustache:function(t){var e=t.isHelper,n=t.eligibleHelper,i=this.options;if(n&&!e){var o=t.id.parts[0];i.knownHelpers[o]?e=!0:i.knownHelpersOnly&&(n=!1)}return e?"helper":n?"ambiguous":"simple"},pushParams:function(t){for(var e,n=t.length;n--;)e=t[n],this.options.stringParams?(e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",e.stringModeValue,e.type)):this[e.type](e)},setupMustacheParams:function(t){var e=t.params;return this.pushParams(e),t.hash?this.hash(t.hash):this.opcode("emptyHash"),e},setupFullMustacheParams:function(t,e,n){var i=t.params;return this.pushParams(i),this.opcode("pushProgram",e),this.opcode("pushProgram",n),t.hash?this.hash(t.hash):this.opcode("emptyHash"),i}},a.precompile=r,a.compile=s,a}(n,l,u,s),h=function(t,e,n,i,o){"use strict";var r,s=t,a=e,l=n.parser,u=n.parse,c=i.Compiler,h=i.compile,d=i.precompile,p=o,f=s.create,g=function(){var t=f();return t.compile=function(e,n){return h(e,n,t)},t.precompile=d,t.AST=a,t.Compiler=c,t.JavaScriptCompiler=p,t.Parser=l,t.parse=u,t};return s=g(),s.create=g,r=s}(r,s,l,c,u);return h}();(function(){var t,e,n,i,o,r,s,a,l,u,c,h,d,p,f,g,m,v,y,b,w,_,x,k,C,E,S,$,T,O,A,P,L,N,M,j,D,I,q,R,F,B,H,z,W,U,Y,V,G,X,K,Z,Q=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},J={}.hasOwnProperty;z=[],Y=[],V=null,L=[],e=[],R=!1,D="ctrl",q=["meta","alt","option","ctrl","shift","cmd"],X=[],u={keys:[],count:0},g=function(t,e){var n;return t.filter?t.filter(e):function(){var i,o,r;for(r=[],i=0,o=t.length;o>i;i++)n=t[i],e(n)&&r.push(n);return r}()},M=function(){return console.log.apply(console,arguments)},c=function(t,e){var n,i,o;if(t.length!==e.length)return!1;for(i=0,o=t.length;o>i;i++)if(n=t[i],!(Q.call(e,n)>=0))return!1;return!0},h=function(t,e){var n,i,o;if(t.length!==e.length)return!1;for(n=i=0,o=t.length;o>=0?o>i:i>o;n=o>=0?++i:--i)if(t[n]!==e[n])return!1;return!0},E=function(t,e){var n,i,o;for(i=0,o=t.length;o>i;i++)if(n=t[i],Q.call(e,n)<0)return!1;return!0},S=function(t,e){var n,i,o,r,s;for(s=0,o=0,r=t.length;r>o;o++){if(i=t[o],n=e.indexOf(i),!(n>=s))return!1;s=n}return!0},F=function(t,e){return(e||keypress.suppress_event_defaults)&&!keypress.force_event_defaults&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation)?t.stopPropagation():void 0},o=function(t){return t.prevent_repeat?!1:"function"==typeof t.on_keydown?!0:void 0},N=function(t){var e,n,i,o,r;for(r=t.keys,i=0,o=r.length;o>i;i++)if(e=r[i],Q.call(L,e)>=0){n=!0;break}return n},m=function(t,e,n){return"function"==typeof e["on_"+t]&&F(n,e["on_"+t].call(e["this"],n,e.count)===!1),"release"===t&&(e.count=0),"keyup"===t?e.keyup_fired=!0:void 0},j=function(t,e){var n,i,o;for(n=0,i=z.length;i>n;n++)o=z[n],(o.is_ordered&&h(t,o.keys)||!o.is_ordered&&c(t,o.keys))&&e(o)},v=function(t,e){var n,i,o;for(n=0,i=z.length;i>n;n++)o=z[n],(o.is_ordered&&S(o.keys,t)||!o.is_ordered&&E(o.keys,t))&&e(o)},l=function(t){return Q.call(L,"cmd")>=0&&Q.call(t,"cmd")<0?!1:!0},y=function(t){var e,n;return e=[],n=g(L,function(e){return e!==t}),n.push(t),j(n,function(t){return l(t.keys)?e.push(t):void 0}),v(n,function(t){return Q.call(e,t)>=0?void 0:!t.is_solitary&&l(t.keys)?e.push(t):void 0}),e},w=function(t){var e,n,i,o;for(o=[],n=0,i=z.length;i>n;n++)e=z[n],e.is_sequence||Q.call(e.keys,t)>=0&&l(e.keys)&&o.push(e);return o},i=function(t){var n,i,o,r,s,a,l,u,c,h,d,p,f,g,m;if(m=!1,g=!0,r=!1,Q.call(e,t)>=0)return!0;if(e.length)for(a=l=0,p=e.length;p>=0?p>l:l>p;a=p>=0?++l:--l)if(n=e[a],n&&n.is_exclusive&&t.is_exclusive){if(o=n.keys,!m)for(h=0,u=o.length;u>h;h++)if(i=o[h],m=!0,Q.call(t.keys,i)<0){m=!1;break}if(g&&!m)for(f=t.keys,d=0,c=f.length;c>d;d++)if(s=f[d],g=!1,Q.call(o,s)<0){g=!0;break}m&&(r?U(e.splice(a,1)):(U(e.splice(a,1,t)),r=!0),g=!1)}return g&&e.unshift(t),m||g},W=function(t){var n,i,o,r;for(i=o=0,r=e.length;r>=0?r>o:o>r;i=r>=0?++o:--o)if(n=e[i],n===t){U(e.splice(i,1));break}},U=function(t){return t?(t.count=null,t.keyup_fired=null):void 0},n=function(t,e){var n,i,o,r;if(Y.push(t),r=b(),r.length){for(i=0,o=r.length;o>i;i++)n=r[i],F(e,n.prevent_default);V&&clearTimeout(V),keypress.sequence_delay>-1&&(V=setTimeout(function(){return Y=[]},keypress.sequence_delay))}else Y=[]},b=function(){var t,e,n,i,o,r,s,a,l,u,c,h;for(a=[],i=0,o=z.length;o>i;i++)for(t=z[i],n=r=1,u=Y.length;u>=1?u>=r:r>=u;n=u>=1?++r:--r)if(h=Y.slice(-n),t.is_sequence&&(!(Q.call(t.keys,"shift")<0)||(h=g(h,function(t){return"shift"!==t}),h.length))){for(e=l=0,c=h.length;c>=0?c>l:l>c;e=c>=0?++l:--l){if(t.keys[e]!==h[e]){s=!1;break}s=!0}s&&a.push(t)}return a},_=function(t){var e,n,i,o,r,s,a,l,u,c,h,d;for(o=0,r=z.length;r>o;o++)if(e=z[o],e.is_sequence){for(i=s=1,u=Y.length;u>=1?u>=s:s>=u;i=u>=1?++s:--s)if(d=g(Y,function(t){return Q.call(e.keys,"shift")>=0?!0:"shift"!==t}).slice(-i),e.keys.length===d.length)for(n=l=0,c=d.length;c>=0?c>l:l>c;n=c>=0?++l:--l)if(h=d[n],!(Q.call(e.keys,"shift")<0&&"shift"===h||"shift"===t&&Q.call(e.keys,"shift")<0)){if(e.keys[n]!==h){a=!1;break}a=!0}if(a)return e}return!1},p=function(t,e){var n;return e.shiftKey?(n=P[t],null!=n?n:!1):!1},x=function(t,e,n){var r;return Q.call(t.keys,e)<0?!1:(F(n,t&&t.prevent_default),Q.call(L,e)>=0&&!o(t)?!1:(r=i(t,e),t.keyup_fired=!1,t.is_counting&&"function"==typeof t.on_keydown&&(t.count+=1),r?m("keydown",t,n):void 0))},$=function(t,e){var i,o,r,s,a,l,u,c,h,d,f,g,v,b,k;k=p(t,e),k&&(t=k),n(t,e),b=_(t),b&&m("keydown",b,e);for(h in I)r=I[h],e[r]&&(h===t||Q.call(L,h)>=0||L.push(h));for(h in I)if(r=I[h],h!==t&&Q.call(L,h)>=0&&!e[r])for(s=a=0,v=L.length;v>=0?v>a:a>v;s=v>=0?++a:--a)L[s]===h&&L.splice(s,1);for(o=y(t),c=0,l=o.length;l>c;c++)i=o[c],x(i,t,e);if(g=w(t),g.length)for(d=0,u=g.length;u>d;d++)f=g[d],F(e,f.prevent_default);Q.call(L,t)<0&&L.push(t)},k=function(t,e,n){var i,o;o=N(t),t.keyup_fired||(i=L.slice(),i.push(n),(!t.is_solitary||c(i,t.keys))&&(m("keyup",t,e),t.is_counting&&"function"==typeof t.on_keyup&&"function"!=typeof t.on_keydown&&(t.count+=1))),o||(m("release",t,e),W(t))},T=function(t,n){var i,o,r,s,a,l,u,c,h,d,f,g,v,y,b,w,x;if(x=t,w=p(t,n),w&&(t=w),w=P[x],n.shiftKey?w&&Q.call(L,w)>=0||(t=x):x&&Q.call(L,x)>=0||(t=w),b=_(t),b&&m("keyup",b,n),Q.call(L,t)<0)return!1;for(a=l=0,v=L.length;v>=0?v>l:l>v;a=v>=0?++l:--l)if((y=L[a])===t||y===w||y===x){L.splice(a,1);break}for(o=e.length,s=[],d=0,u=e.length;u>d;d++)i=e[d],Q.call(i.keys,t)>=0&&s.push(i);for(f=0,c=s.length;c>f;f++)r=s[f],k(r,n,t);if(o>1)for(g=0,h=e.length;h>g;g++)i=e[g],void 0===i||Q.call(s,i)>=0||N(i)||W(i)},H=function(t,e){var n;if(R)return void(L.length&&(L=[]));if((e||L.length)&&(n=d(t.keyCode)))return e?$(n,t):T(n,t)},G=function(t){var e,n,i,o;for(o=[],e=n=0,i=z.length;i>=0?i>n:n>i;e=i>=0?++n:--n){if(t===z[e]){z.splice(e,1);break}o.push(void 0)}return o},K=function(t){var e,n,i,o,r,s,a,l,u,c,h,d;for(t.keys.length||M("You're trying to bind a combo with no keys."),n=o=0,h=t.keys.length;h>=0?h>o:o>h;n=h>=0?++o:--o)i=t.keys[n],e=O[i],e&&(i=t.keys[n]=e),"meta"===i&&t.keys.splice(n,1,D),"cmd"===i&&M('Warning: use the "meta" key rather than "cmd" for Windows compatibility');for(d=t.keys,a=0,r=d.length;r>a;a++)if(i=d[a],Q.call(X,i)<0)return M('Do not recognize the key "'+i+'"'),!1;if(Q.call(t.keys,"meta")>=0||Q.call(t.keys,"cmd")>=0){for(c=t.keys.slice(),u=0,s=q.length;s>u;u++)l=q[u],(n=c.indexOf(l))>-1&&c.splice(n,1);if(c.length>1)return M("META and CMD key combos cannot have more than 1 non-modifier keys",t,c),!0}return!0},f=function(){-1!==navigator.userAgent.indexOf("Mac OS X")&&(D="cmd")},s=function(t){var e;return Q.call(L,"cmd")>=0&&"cmd"!==(e=d(t.keyCode))&&"shift"!==e&&"alt"!==e&&"caps"!==e&&"tab"!==e?H(t,!1):void 0},a=function(){-1!==navigator.userAgent.indexOf("Opera")&&(A[17]="cmd")},r=function(){var t;return t=function(t,e,n){return t.addEventListener?t.addEventListener(e,n):t.attachEvent?t.attachEvent("on"+e,n):void 0},t(document.body,"keydown",function(t){return t=t||window.event,H(t,!0),s(t)}),t(document.body,"keyup",function(t){return t=t||window.event,H(t,!1)}),t(window,"blur",function(){var t,e,n,i;for(n=0,i=L.length;i>n;n++)e=L[n],T(e,{});return L=[],t=[]})},C=function(){return f(),a()},window.keypress={},keypress.force_event_defaults=!1,keypress.suppress_event_defaults=!1,keypress.sequence_delay=800,keypress.get_registered_combos=function(){return z},keypress.reset=function(){z=[]},keypress.combo=function(t,e,n){return null==n&&(n=!1),keypress.register_combo({keys:t,on_keydown:e,prevent_default:n})},keypress.counting_combo=function(t,e,n){return null==n&&(n=!1),keypress.register_combo({keys:t,is_counting:!0,is_ordered:!0,on_keydown:e,prevent_default:n})},keypress.sequence_combo=function(t,e,n){return null==n&&(n=!1),keypress.register_combo({keys:t,on_keydown:e,is_sequence:!0,prevent_default:n})},keypress.register_combo=function(t){var e,n;"string"==typeof t.keys&&(t.keys=t.keys.split(" "));for(e in u)J.call(u,e)&&(n=u[e],null==t[e]&&(t[e]=n));return K(t)?(z.push(t),!0):void 0},keypress.register_many=function(t){var e,n,i,o;for(o=[],n=0,i=t.length;i>n;n++)e=t[n],o.push(keypress.register_combo(e));return o},keypress.unregister_combo=function(t){var e,n,i,o;if(!t)return!1;if(t.keys)return G(t);for(o=[],n=0,i=z.length;i>n;n++)e=z[n],e&&("string"==typeof t&&(t=t.split(" ")),!e.is_ordered&&c(t,e.keys)||e.is_ordered&&h(t,e.keys)?o.push(G(e)):o.push(void 0));return o},keypress.unregister_many=function(t){var e,n,i,o;for(o=[],n=0,i=t.length;i>n;n++)e=t[n],o.push(keypress.unregister_combo(e));return o},keypress.listen=function(){return R=!1},keypress.stop_listening=function(){return R=!0},d=function(t){return A[t]},I={cmd:"metaKey",ctrl:"ctrlKey",shift:"shiftKey",alt:"altKey"},O={escape:"esc",control:"ctrl",command:"cmd","break":"pause",windows:"cmd",option:"alt",caps_lock:"caps",apostrophe:"'",semicolon:";",tilde:"~",accent:"`",scroll_lock:"scroll",num_lock:"num"},P={"/":"?",".":">",",":"<","'":'"',";":":","[":"{","]":"}","\\":"|","`":"~","=":"+","-":"_",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")"},A={0:"\\",8:"backspace",9:"tab",12:"num",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"caps",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",44:"print",45:"insert",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",91:"cmd",92:"cmd",93:"cmd",96:"num_0",97:"num_1",98:"num_2",99:"num_3",100:"num_4",101:"num_5",102:"num_6",103:"num_7",104:"num_8",105:"num_9",106:"num_multiply",107:"num_add",108:"num_enter",109:"num_subtract",110:"num_decimal",111:"num_divide",124:"print",144:"num",145:"scroll",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"`",224:"cmd",225:"alt",57392:"ctrl",63289:"num"};for(t in A)Z=A[t],X.push(Z);for(t in P)Z=P[t],X.push(Z);C(),(B=function(t){return(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?t():setTimeout(function(){return B(t)},9)})(r)}).call(this),function(t){"use strict";var e=function(t,n,i){return 1===arguments.length?e.get(t):e.set(t,n,i)};e._document=document,e._navigator=navigator,e.defaults={path:"/"},e.get=function(t){return e._cachedDocumentCookie!==e._document.cookie&&e._renewCache(),e._cache[t]},e.set=function(n,i,o){return o=e._getExtendedOptions(o),o.expires=e._getExpiresDate(i===t?-1:o.expires),e._document.cookie=e._generateCookieString(n,i,o),e},e.expire=function(n,i){return e.set(n,t,i)},e._getExtendedOptions=function(n){return{path:n&&n.path||e.defaults.path,domain:n&&n.domain||e.defaults.domain,expires:n&&n.expires||e.defaults.expires,secure:n&&n.secure!==t?n.secure:e.defaults.secure}},e._isValidDate=function(t){return"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(t.getTime())},e._getExpiresDate=function(t,n){switch(n=n||new Date,typeof t){case"number":t=new Date(n.getTime()+1e3*t);break;case"string":t=new Date(t)}if(t&&!e._isValidDate(t))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return t},e._generateCookieString=function(t,e,n){t=encodeURIComponent(t),e=(e+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent),n=n||{};var i=t+"="+e;return i+=n.path?";path="+n.path:"",i+=n.domain?";domain="+n.domain:"",i+=n.expires?";expires="+n.expires.toGMTString():"",i+=n.secure?";secure":""},e._getCookieObjectFromString=function(n){for(var i={},o=n?n.split("; "):[],r=0;r<o.length;r++){var s=e._getKeyValuePairFromCookieString(o[r]);i[s.key]===t&&(i[s.key]=s.value)}return i},e._getKeyValuePairFromCookieString=function(t){var e=t.indexOf("=");return e=0>e?t.length:e,{key:decodeURIComponent(t.substr(0,e)),value:decodeURIComponent(t.substr(e+1))}},e._renewCache=function(){e._cache=e._getCookieObjectFromString(e._document.cookie),e._cachedDocumentCookie=e._document.cookie},e._areEnabled=function(){return e._navigator.cookieEnabled||"1"===e.set("cookies.js",1).get("cookies.js")},e.enabled=e._areEnabled(),"function"==typeof define&&define.amd?define(function(){return e}):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports.Cookies=e):window.Cookies=e}(),function(t,e){"use strict";var n,i,o=t,r=o.document,s=o.navigator,a=o.setTimeout,l=o.encodeURIComponent,u=o.ActiveXObject,c=o.Error,h=o.Number.parseInt||o.parseInt,d=o.Number.parseFloat||o.parseFloat,p=o.Number.isNaN||o.isNaN,f=o.Math.round,g=o.Date.now,m=o.Object.keys,v=o.Object.defineProperty,y=o.Object.prototype.hasOwnProperty,b=o.Array.prototype.slice,w=function(){var t=function(t){return t};if("function"==typeof o.wrap&&"function"==typeof o.unwrap)try{var e=r.createElement("div"),n=o.unwrap(e);1===e.nodeType&&n&&1===n.nodeType&&(t=o.unwrap)}catch(i){}return t}(),_=function(t){return b.call(t,0)},x=function(){var t,n,i,o,r,s,a=_(arguments),l=a[0]||{};for(t=1,n=a.length;n>t;t++)if(null!=(i=a[t]))for(o in i)y.call(i,o)&&(r=l[o],s=i[o],l!==s&&s!==e&&(l[o]=s));return l},k=function(t){var e,n,i,o;if("object"!=typeof t||null==t)e=t;else if("number"==typeof t.length)for(e=[],n=0,i=t.length;i>n;n++)y.call(t,n)&&(e[n]=k(t[n]));else{e={};for(o in t)y.call(t,o)&&(e[o]=k(t[o]))}return e},C=function(t,e){for(var n={},i=0,o=e.length;o>i;i++)e[i]in t&&(n[e[i]]=t[e[i]]);return n},E=function(t,e){var n={};for(var i in t)-1===e.indexOf(i)&&(n[i]=t[i]);return n},S=function(t){if(t)for(var e in t)y.call(t,e)&&delete t[e];return t},$=function(t,e){if(t&&1===t.nodeType&&t.ownerDocument&&e&&(1===e.nodeType&&e.ownerDocument&&e.ownerDocument===t.ownerDocument||9===e.nodeType&&!e.ownerDocument&&e===t.ownerDocument))do{if(t===e)return!0;t=t.parentNode}while(t);return!1},T=function(t){var e;return"string"==typeof t&&t&&(e=t.split("#")[0].split("?")[0],e=t.slice(0,t.lastIndexOf("/")+1)),e},O=function(t){var e,n;return"string"==typeof t&&t&&(n=t.match(/^(?:|[^:@]*@|.+\)@(?=http[s]?|file)|.+?\s+(?: at |@)(?:[^:\(]+ )*[\(]?)((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),n&&n[1]?e=n[1]:(n=t.match(/\)@((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),n&&n[1]&&(e=n[1]))),e},A=function(){var t,e;try{throw new c}catch(n){e=n}return e&&(t=e.sourceURL||e.fileName||O(e.stack)),t},P=function(){var t,n,i;if(r.currentScript&&(t=r.currentScript.src))return t;if(n=r.getElementsByTagName("script"),1===n.length)return n[0].src||e;if("readyState"in n[0])for(i=n.length;i--;)if("interactive"===n[i].readyState&&(t=n[i].src))return t;return"loading"===r.readyState&&(t=n[n.length-1].src)?t:(t=A())?t:e},L=function(){var t,n,i,o=r.getElementsByTagName("script");for(t=o.length;t--;){if(!(i=o[t].src)){n=null;break}if(i=T(i),null==n)n=i;else if(n!==i){n=null;break}}return n||e},N=function(){var t=T(P())||L()||"";return t+"ZeroClipboard.swf"},M={bridge:null,version:"0.0.0",pluginType:"unknown",disabled:null,outdated:null,unavailable:null,deactivated:null,overdue:null,ready:null},j="11.0.0",D={},I={},q=null,R={ready:"Flash communication is established",error:{"flash-disabled":"Flash is disabled or not installed","flash-outdated":"Flash is too outdated to support ZeroClipboard","flash-unavailable":"Flash is unable to communicate bidirectionally with JavaScript","flash-deactivated":"Flash is too outdated for your browser and/or is configured as click-to-activate","flash-overdue":"Flash communication was established but NOT within the acceptable time limit"}},F={swfPath:N(),trustedDomains:t.location.host?[t.location.host]:[],cacheBust:!0,forceEnhancedClipboard:!1,flashLoadTimeout:3e4,autoActivate:!0,bubbleEvents:!0,containerId:"global-zeroclipboard-html-bridge",containerClass:"global-zeroclipboard-container",swfObjectId:"global-zeroclipboard-flash-bridge",hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",forceHandCursor:!1,title:null,zIndex:999999999},B=function(t){if("object"==typeof t&&null!==t)for(var e in t)if(y.call(t,e))if(/^(?:forceHandCursor|title|zIndex|bubbleEvents)$/.test(e))F[e]=t[e];else if(null==M.bridge)if("containerId"===e||"swfObjectId"===e){if(!nt(t[e]))throw new Error("The specified `"+e+"` value is not valid as an HTML4 Element ID");F[e]=t[e]}else F[e]=t[e];{if("string"!=typeof t||!t)return k(F);if(y.call(F,t))return F[t]}},H=function(){return{browser:C(s,["userAgent","platform","appName"]),flash:E(M,["bridge"]),zeroclipboard:{version:Pt.version,config:Pt.config()}}},z=function(){return!!(M.disabled||M.outdated||M.unavailable||M.deactivated)},W=function(t,e){var n,i,o,r={};if("string"==typeof t&&t)o=t.toLowerCase().split(/\s+/);else if("object"==typeof t&&t&&"undefined"==typeof e)for(n in t)y.call(t,n)&&"string"==typeof n&&n&&"function"==typeof t[n]&&Pt.on(n,t[n]);if(o&&o.length){for(n=0,i=o.length;i>n;n++)t=o[n].replace(/^on/,""),r[t]=!0,D[t]||(D[t]=[]),D[t].push(e);if(r.ready&&M.ready&&Pt.emit({type:"ready"}),r.error){var s=["disabled","outdated","unavailable","deactivated","overdue"];for(n=0,i=s.length;i>n;n++)if(M[s[n]]===!0){Pt.emit({type:"error",name:"flash-"+s[n]});break}}}return Pt},U=function(t,e){var n,i,o,r,s;if(0===arguments.length)r=m(D);else if("string"==typeof t&&t)r=t.split(/\s+/);else if("object"==typeof t&&t&&"undefined"==typeof e)for(n in t)y.call(t,n)&&"string"==typeof n&&n&&"function"==typeof t[n]&&Pt.off(n,t[n]);if(r&&r.length)for(n=0,i=r.length;i>n;n++)if(t=r[n].toLowerCase().replace(/^on/,""),s=D[t],s&&s.length)if(e)for(o=s.indexOf(e);-1!==o;)s.splice(o,1),o=s.indexOf(e,o);else s.length=0;return Pt},Y=function(t){var e;return e="string"==typeof t&&t?k(D[t])||null:k(D)},V=function(t){var e,n,i;return t=it(t),t&&!ut(t)?"ready"===t.type&&M.overdue===!0?Pt.emit({type:"error",name:"flash-overdue"}):(e=x({},t),lt.call(this,e),"copy"===t.type&&(i=gt(I),n=i.data,q=i.formatMap),n):void 0},G=function(){if("boolean"!=typeof M.ready&&(M.ready=!1),!Pt.isFlashUnusable()&&null===M.bridge){var t=F.flashLoadTimeout;"number"==typeof t&&t>=0&&a(function(){"boolean"!=typeof M.deactivated&&(M.deactivated=!0),M.deactivated===!0&&Pt.emit({type:"error",name:"flash-deactivated"})},t),M.overdue=!1,pt()}},X=function(){Pt.clearData(),Pt.blur(),Pt.emit("destroy"),ft(),Pt.off()},K=function(t,e){var n;if("object"==typeof t&&t&&"undefined"==typeof e)n=t,Pt.clearData();else{if("string"!=typeof t||!t)return;n={},n[t]=e}for(var i in n)"string"==typeof i&&i&&y.call(n,i)&&"string"==typeof n[i]&&n[i]&&(I[i]=n[i])},Z=function(t){"undefined"==typeof t?(S(I),q=null):"string"==typeof t&&y.call(I,t)&&delete I[t]},Q=function(t){return"undefined"==typeof t?k(I):"string"==typeof t&&y.call(I,t)?I[t]:void 0},J=function(t){if(t&&1===t.nodeType){n&&(kt(n,F.activeClass),n!==t&&kt(n,F.hoverClass)),n=t,xt(t,F.hoverClass);var e=t.getAttribute("title")||F.title;if("string"==typeof e&&e){var i=dt(M.bridge);i&&i.setAttribute("title",e)}var o=F.forceHandCursor===!0||"pointer"===Ct(t,"cursor");Tt(o),$t()}},tt=function(){var t=dt(M.bridge);t&&(t.removeAttribute("title"),t.style.left="0px",t.style.top="-9999px",t.style.width="1px",t.style.top="1px"),n&&(kt(n,F.hoverClass),kt(n,F.activeClass),n=null)},et=function(){return n||null},nt=function(t){return"string"==typeof t&&t&&/^[A-Za-z][A-Za-z0-9_:\-\.]*$/.test(t)},it=function(t){var e;if("string"==typeof t&&t?(e=t,t={}):"object"==typeof t&&t&&"string"==typeof t.type&&t.type&&(e=t.type),e){!t.target&&/^(copy|aftercopy|_click)$/.test(e.toLowerCase())&&(t.target=i),x(t,{type:e.toLowerCase(),target:t.target||n||null,relatedTarget:t.relatedTarget||null,currentTarget:M&&M.bridge||null,timeStamp:t.timeStamp||g()||null});var o=R[t.type];return"error"===t.type&&t.name&&o&&(o=o[t.name]),o&&(t.message=o),"ready"===t.type&&x(t,{target:null,version:M.version}),"error"===t.type&&(/^flash-(disabled|outdated|unavailable|deactivated|overdue)$/.test(t.name)&&x(t,{target:null,minimumVersion:j}),/^flash-(outdated|unavailable|deactivated|overdue)$/.test(t.name)&&x(t,{version:M.version})),"copy"===t.type&&(t.clipboardData={setData:Pt.setData,clearData:Pt.clearData}),"aftercopy"===t.type&&(t=mt(t,q)),t.target&&!t.relatedTarget&&(t.relatedTarget=ot(t.target)),t=rt(t)}},ot=function(t){var e=t&&t.getAttribute&&t.getAttribute("data-clipboard-target");return e?r.getElementById(e):null},rt=function(t){if(t&&/^_(?:click|mouse(?:over|out|down|up|move))$/.test(t.type)){var n=t.target,i="_mouseover"===t.type&&t.relatedTarget?t.relatedTarget:e,s="_mouseout"===t.type&&t.relatedTarget?t.relatedTarget:e,a=St(n),l=o.screenLeft||o.screenX||0,u=o.screenTop||o.screenY||0,c=r.body.scrollLeft+r.documentElement.scrollLeft,h=r.body.scrollTop+r.documentElement.scrollTop,d=a.left+("number"==typeof t._stageX?t._stageX:0),p=a.top+("number"==typeof t._stageY?t._stageY:0),f=d-c,g=p-h,m=l+f,v=u+g,y="number"==typeof t.movementX?t.movementX:0,b="number"==typeof t.movementY?t.movementY:0;delete t._stageX,delete t._stageY,x(t,{srcElement:n,fromElement:i,toElement:s,screenX:m,screenY:v,pageX:d,pageY:p,clientX:f,clientY:g,x:f,y:g,movementX:y,movementY:b,offsetX:0,offsetY:0,layerX:0,layerY:0})}return t},st=function(t){var e=t&&"string"==typeof t.type&&t.type||"";return!/^(?:(?:before)?copy|destroy)$/.test(e)},at=function(t,e,n,i){i?a(function(){t.apply(e,n)},0):t.apply(e,n)},lt=function(t){if("object"==typeof t&&t&&t.type){var e=st(t),n=D["*"]||[],i=D[t.type]||[],r=n.concat(i);if(r&&r.length){var s,a,l,u,c,h=this;for(s=0,a=r.length;a>s;s++)l=r[s],u=h,"string"==typeof l&&"function"==typeof o[l]&&(l=o[l]),"object"==typeof l&&l&&"function"==typeof l.handleEvent&&(u=l,l=l.handleEvent),"function"==typeof l&&(c=x({},t),at(l,u,[c],e))}return this}},ut=function(t){var e=t.target||n||null,o="swf"===t._source;delete t._source;var r=["flash-disabled","flash-outdated","flash-unavailable","flash-deactivated","flash-overdue"];switch(t.type){case"error":-1!==r.indexOf(t.name)&&x(M,{disabled:"flash-disabled"===t.name,outdated:"flash-outdated"===t.name,unavailable:"flash-unavailable"===t.name,deactivated:"flash-deactivated"===t.name,overdue:"flash-overdue"===t.name,ready:!1});break;case"ready":var s=M.deactivated===!0;x(M,{disabled:!1,outdated:!1,unavailable:!1,deactivated:!1,overdue:s,ready:!s});break;case"beforecopy":i=e;break;case"copy":var a,l,u=t.relatedTarget;!I["text/html"]&&!I["text/plain"]&&u&&(l=u.value||u.outerHTML||u.innerHTML)&&(a=u.value||u.textContent||u.innerText)?(t.clipboardData.clearData(),t.clipboardData.setData("text/plain",a),l!==a&&t.clipboardData.setData("text/html",l)):!I["text/plain"]&&t.target&&(a=t.target.getAttribute("data-clipboard-text"))&&(t.clipboardData.clearData(),t.clipboardData.setData("text/plain",a));break;case"aftercopy":Pt.clearData(),e&&e!==_t()&&e.focus&&e.focus();break;case"_mouseover":Pt.focus(e),F.bubbleEvents===!0&&o&&(e&&e!==t.relatedTarget&&!$(t.relatedTarget,e)&&ct(x({},t,{type:"mouseenter",bubbles:!1,cancelable:!1})),ct(x({},t,{type:"mouseover"})));break;case"_mouseout":Pt.blur(),F.bubbleEvents===!0&&o&&(e&&e!==t.relatedTarget&&!$(t.relatedTarget,e)&&ct(x({},t,{type:"mouseleave",bubbles:!1,cancelable:!1})),ct(x({},t,{type:"mouseout"})));break;case"_mousedown":xt(e,F.activeClass),F.bubbleEvents===!0&&o&&ct(x({},t,{type:t.type.slice(1)}));break;case"_mouseup":kt(e,F.activeClass),F.bubbleEvents===!0&&o&&ct(x({},t,{type:t.type.slice(1)}));break;case"_click":i=null,F.bubbleEvents===!0&&o&&ct(x({},t,{type:t.type.slice(1)}));break;case"_mousemove":F.bubbleEvents===!0&&o&&ct(x({},t,{type:t.type.slice(1)}))}return/^_(?:click|mouse(?:over|out|down|up|move))$/.test(t.type)?!0:void 0},ct=function(t){if(t&&"string"==typeof t.type&&t){var e,n=t.target||null,i=n&&n.ownerDocument||r,s={view:i.defaultView||o,canBubble:!0,cancelable:!0,detail:"click"===t.type?1:0,button:"number"==typeof t.which?t.which-1:"number"==typeof t.button?t.button:i.createEvent?0:1},a=x(s,t);n&&i.createEvent&&n.dispatchEvent&&(a=[a.type,a.canBubble,a.cancelable,a.view,a.detail,a.screenX,a.screenY,a.clientX,a.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.button,a.relatedTarget],e=i.createEvent("MouseEvents"),e.initMouseEvent&&(e.initMouseEvent.apply(e,a),e._source="js",n.dispatchEvent(e)))}},ht=function(){var t=r.createElement("div");return t.id=F.containerId,t.className=F.containerClass,t.style.position="absolute",t.style.left="0px",t.style.top="-9999px",t.style.width="1px",t.style.height="1px",t.style.zIndex=""+Ot(F.zIndex),t},dt=function(t){for(var e=t&&t.parentNode;e&&"OBJECT"===e.nodeName&&e.parentNode;)e=e.parentNode;return e||null},pt=function(){var t,e=M.bridge,n=dt(e);if(!e){var i=wt(o.location.host,F),s="never"===i?"none":"all",a=yt(F),l=F.swfPath+vt(F.swfPath,F);n=ht();var u=r.createElement("div");n.appendChild(u),r.body.appendChild(n);var c=r.createElement("div"),h="activex"===M.pluginType;c.innerHTML='<object id="'+F.swfObjectId+'" name="'+F.swfObjectId+'" width="100%" height="100%" '+(h?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+l+'"')+">"+(h?'<param name="movie" value="'+l+'"/>':"")+'<param name="allowScriptAccess" value="'+i+'"/><param name="allowNetworking" value="'+s+'"/><param name="menu" value="false"/><param name="wmode" value="transparent"/><param name="flashvars" value="'+a+'"/></object>',e=c.firstChild,c=null,w(e).ZeroClipboard=Pt,n.replaceChild(e,u)}return e||(e=r[F.swfObjectId],e&&(t=e.length)&&(e=e[t-1]),!e&&n&&(e=n.firstChild)),M.bridge=e||null,e},ft=function(){var t=M.bridge;if(t){var e=dt(t);e&&("activex"===M.pluginType&&"readyState"in t?(t.style.display="none",function n(){if(4===t.readyState){for(var i in t)"function"==typeof t[i]&&(t[i]=null);t.parentNode&&t.parentNode.removeChild(t),e.parentNode&&e.parentNode.removeChild(e)}else a(n,10)}()):(t.parentNode&&t.parentNode.removeChild(t),e.parentNode&&e.parentNode.removeChild(e))),M.ready=null,M.bridge=null,M.deactivated=null}},gt=function(t){var e={},n={};if("object"==typeof t&&t){for(var i in t)if(i&&y.call(t,i)&&"string"==typeof t[i]&&t[i])switch(i.toLowerCase()){case"text/plain":case"text":case"air:text":case"flash:text":e.text=t[i],n.text=i;break;case"text/html":case"html":case"air:html":case"flash:html":e.html=t[i],n.html=i;break;case"application/rtf":case"text/rtf":case"rtf":case"richtext":case"air:rtf":case"flash:rtf":e.rtf=t[i],n.rtf=i}return{data:e,formatMap:n}}},mt=function(t,e){if("object"!=typeof t||!t||"object"!=typeof e||!e)return t;var n={};for(var i in t)if(y.call(t,i)){if("success"!==i&&"data"!==i){n[i]=t[i];continue}n[i]={};var o=t[i];for(var r in o)r&&y.call(o,r)&&y.call(e,r)&&(n[i][e[r]]=o[r])}return n},vt=function(t,e){var n=null==e||e&&e.cacheBust===!0;return n?(-1===t.indexOf("?")?"?":"&")+"noCache="+g():""},yt=function(t){var e,n,i,r,s="",a=[];if(t.trustedDomains&&("string"==typeof t.trustedDomains?r=[t.trustedDomains]:"object"==typeof t.trustedDomains&&"length"in t.trustedDomains&&(r=t.trustedDomains)),r&&r.length)for(e=0,n=r.length;n>e;e++)if(y.call(r,e)&&r[e]&&"string"==typeof r[e]){if(i=bt(r[e]),!i)continue;if("*"===i){a.length=0,a.push(i);break}a.push.apply(a,[i,"//"+i,o.location.protocol+"//"+i])}return a.length&&(s+="trustedOrigins="+l(a.join(","))),t.forceEnhancedClipboard===!0&&(s+=(s?"&":"")+"forceEnhancedClipboard=true"),"string"==typeof t.swfObjectId&&t.swfObjectId&&(s+=(s?"&":"")+"swfObjectId="+l(t.swfObjectId)),s},bt=function(t){if(null==t||""===t)return null;if(t=t.replace(/^\s+|\s+$/g,""),""===t)return null;var e=t.indexOf("//");t=-1===e?t:t.slice(e+2);var n=t.indexOf("/");return t=-1===n?t:-1===e||0===n?null:t.slice(0,n),t&&".swf"===t.slice(-4).toLowerCase()?null:t||null},wt=function(){var t=function(t){var e,n,i,o=[];if("string"==typeof t&&(t=[t]),"object"!=typeof t||!t||"number"!=typeof t.length)return o;for(e=0,n=t.length;n>e;e++)if(y.call(t,e)&&(i=bt(t[e]))){if("*"===i){o.length=0,o.push("*");break}-1===o.indexOf(i)&&o.push(i)}return o};return function(e,n){var i=bt(n.swfPath);null===i&&(i=e);var o=t(n.trustedDomains),r=o.length;if(r>0){if(1===r&&"*"===o[0])return"always";if(-1!==o.indexOf(e))return 1===r&&e===i?"sameDomain":"always"}return"never"}}(),_t=function(){try{return r.activeElement}catch(t){return null}},xt=function(t,e){if(!t||1!==t.nodeType)return t;if(t.classList)return t.classList.contains(e)||t.classList.add(e),t;if(e&&"string"==typeof e){var n=(e||"").split(/\s+/);if(1===t.nodeType)if(t.className){for(var i=" "+t.className+" ",o=t.className,r=0,s=n.length;s>r;r++)i.indexOf(" "+n[r]+" ")<0&&(o+=" "+n[r]);t.className=o.replace(/^\s+|\s+$/g,"")}else t.className=e}return t},kt=function(t,e){if(!t||1!==t.nodeType)return t;if(t.classList)return t.classList.contains(e)&&t.classList.remove(e),t;if("string"==typeof e&&e){var n=e.split(/\s+/);if(1===t.nodeType&&t.className){for(var i=(" "+t.className+" ").replace(/[\n\t]/g," "),o=0,r=n.length;r>o;o++)i=i.replace(" "+n[o]+" "," ");t.className=i.replace(/^\s+|\s+$/g,"")}}return t},Ct=function(t,e){var n=o.getComputedStyle(t,null).getPropertyValue(e);return"cursor"!==e||n&&"auto"!==n||"A"!==t.nodeName?n:"pointer"},Et=function(){var t,e,n,i=1;return"function"==typeof r.body.getBoundingClientRect&&(t=r.body.getBoundingClientRect(),e=t.right-t.left,n=r.body.offsetWidth,i=f(e/n*100)/100),i},St=function(t){var e={left:0,top:0,width:0,height:0};if(t.getBoundingClientRect){var n,i,s,a=t.getBoundingClientRect();"pageXOffset"in o&&"pageYOffset"in o?(n=o.pageXOffset,i=o.pageYOffset):(s=Et(),n=f(r.documentElement.scrollLeft/s),i=f(r.documentElement.scrollTop/s));var l=r.documentElement.clientLeft||0,u=r.documentElement.clientTop||0;e.left=a.left+n-l,e.top=a.top+i-u,e.width="width"in a?a.width:a.right-a.left,e.height="height"in a?a.height:a.bottom-a.top}return e},$t=function(){var t;if(n&&(t=dt(M.bridge))){var e=St(n);x(t.style,{width:e.width+"px",height:e.height+"px",top:e.top+"px",left:e.left+"px",zIndex:""+Ot(F.zIndex)})}},Tt=function(t){M.ready===!0&&(M.bridge&&"function"==typeof M.bridge.setHandCursor?M.bridge.setHandCursor(t):M.ready=!1)},Ot=function(t){if(/^(?:auto|inherit)$/.test(t))return t;var e;return"number"!=typeof t||p(t)?"string"==typeof t&&(e=Ot(h(t,10))):e=t,"number"==typeof e?e:"auto"},At=function(t){function e(t){var e=t.match(/[\d]+/g);return e.length=3,e.join(".")}function n(t){return!!t&&(t=t.toLowerCase())&&(/^(pepflashplayer\.dll|libpepflashplayer\.so|pepperflashplayer\.plugin)$/.test(t)||"chrome.plugin"===t.slice(-13))}function i(t){t&&(l=!0,t.version&&(h=e(t.version)),
!h&&t.description&&(h=e(t.description)),t.filename&&(c=n(t.filename)))}var o,r,a,l=!1,u=!1,c=!1,h="";if(s.plugins&&s.plugins.length)o=s.plugins["Shockwave Flash"],i(o),s.plugins["Shockwave Flash 2.0"]&&(l=!0,h="2.0.0.11");else if(s.mimeTypes&&s.mimeTypes.length)a=s.mimeTypes["application/x-shockwave-flash"],o=a&&a.enabledPlugin,i(o);else if("undefined"!=typeof t){u=!0;try{r=new t("ShockwaveFlash.ShockwaveFlash.7"),l=!0,h=e(r.GetVariable("$version"))}catch(p){try{r=new t("ShockwaveFlash.ShockwaveFlash.6"),l=!0,h="6.0.21"}catch(f){try{r=new t("ShockwaveFlash.ShockwaveFlash"),l=!0,h=e(r.GetVariable("$version"))}catch(g){u=!1}}}}M.disabled=l!==!0,M.outdated=h&&d(h)<d(j),M.version=h||"0.0.0",M.pluginType=c?"pepper":u?"activex":l?"netscape":"unknown"};At(u);var Pt=function(){return this instanceof Pt?void("function"==typeof Pt._createClient&&Pt._createClient.apply(this,_(arguments))):new Pt};v(Pt,"version",{value:"2.1.6",writable:!1,configurable:!0,enumerable:!0}),Pt.config=function(){return B.apply(this,_(arguments))},Pt.state=function(){return H.apply(this,_(arguments))},Pt.isFlashUnusable=function(){return z.apply(this,_(arguments))},Pt.on=function(){return W.apply(this,_(arguments))},Pt.off=function(){return U.apply(this,_(arguments))},Pt.handlers=function(){return Y.apply(this,_(arguments))},Pt.emit=function(){return V.apply(this,_(arguments))},Pt.create=function(){return G.apply(this,_(arguments))},Pt.destroy=function(){return X.apply(this,_(arguments))},Pt.setData=function(){return K.apply(this,_(arguments))},Pt.clearData=function(){return Z.apply(this,_(arguments))},Pt.getData=function(){return Q.apply(this,_(arguments))},Pt.focus=Pt.activate=function(){return J.apply(this,_(arguments))},Pt.blur=Pt.deactivate=function(){return tt.apply(this,_(arguments))},Pt.activeElement=function(){return et.apply(this,_(arguments))};var Lt=0,Nt={},Mt=0,jt={},Dt={};x(F,{autoActivate:!0});var It=function(t){var e=this;e.id=""+Lt++,Nt[e.id]={instance:e,elements:[],handlers:{}},t&&e.clip(t),Pt.on("*",function(t){return e.emit(t)}),Pt.on("destroy",function(){e.destroy()}),Pt.create()},qt=function(t,e){var n,i,o,r={},s=Nt[this.id]&&Nt[this.id].handlers;if("string"==typeof t&&t)o=t.toLowerCase().split(/\s+/);else if("object"==typeof t&&t&&"undefined"==typeof e)for(n in t)y.call(t,n)&&"string"==typeof n&&n&&"function"==typeof t[n]&&this.on(n,t[n]);if(o&&o.length){for(n=0,i=o.length;i>n;n++)t=o[n].replace(/^on/,""),r[t]=!0,s[t]||(s[t]=[]),s[t].push(e);if(r.ready&&M.ready&&this.emit({type:"ready",client:this}),r.error){var a=["disabled","outdated","unavailable","deactivated","overdue"];for(n=0,i=a.length;i>n;n++)if(M[a[n]]){this.emit({type:"error",name:"flash-"+a[n],client:this});break}}}return this},Rt=function(t,e){var n,i,o,r,s,a=Nt[this.id]&&Nt[this.id].handlers;if(0===arguments.length)r=m(a);else if("string"==typeof t&&t)r=t.split(/\s+/);else if("object"==typeof t&&t&&"undefined"==typeof e)for(n in t)y.call(t,n)&&"string"==typeof n&&n&&"function"==typeof t[n]&&this.off(n,t[n]);if(r&&r.length)for(n=0,i=r.length;i>n;n++)if(t=r[n].toLowerCase().replace(/^on/,""),s=a[t],s&&s.length)if(e)for(o=s.indexOf(e);-1!==o;)s.splice(o,1),o=s.indexOf(e,o);else s.length=0;return this},Ft=function(t){var e=null,n=Nt[this.id]&&Nt[this.id].handlers;return n&&(e="string"==typeof t&&t?n[t]?n[t].slice(0):[]:k(n)),e},Bt=function(t){if(Yt.call(this,t)){"object"==typeof t&&t&&"string"==typeof t.type&&t.type&&(t=x({},t));var e=x({},it(t),{client:this});Vt.call(this,e)}return this},Ht=function(t){t=Gt(t);for(var e=0;e<t.length;e++)if(y.call(t,e)&&t[e]&&1===t[e].nodeType){t[e].zcClippingId?-1===jt[t[e].zcClippingId].indexOf(this.id)&&jt[t[e].zcClippingId].push(this.id):(t[e].zcClippingId="zcClippingId_"+Mt++,jt[t[e].zcClippingId]=[this.id],F.autoActivate===!0&&Xt(t[e]));var n=Nt[this.id]&&Nt[this.id].elements;-1===n.indexOf(t[e])&&n.push(t[e])}return this},zt=function(t){var e=Nt[this.id];if(!e)return this;var n,i=e.elements;t="undefined"==typeof t?i.slice(0):Gt(t);for(var o=t.length;o--;)if(y.call(t,o)&&t[o]&&1===t[o].nodeType){for(n=0;-1!==(n=i.indexOf(t[o],n));)i.splice(n,1);var r=jt[t[o].zcClippingId];if(r){for(n=0;-1!==(n=r.indexOf(this.id,n));)r.splice(n,1);0===r.length&&(F.autoActivate===!0&&Kt(t[o]),delete t[o].zcClippingId)}}return this},Wt=function(){var t=Nt[this.id];return t&&t.elements?t.elements.slice(0):[]},Ut=function(){this.unclip(),this.off(),delete Nt[this.id]},Yt=function(t){if(!t||!t.type)return!1;if(t.client&&t.client!==this)return!1;var e=Nt[this.id]&&Nt[this.id].elements,n=!!e&&e.length>0,i=!t.target||n&&-1!==e.indexOf(t.target),o=t.relatedTarget&&n&&-1!==e.indexOf(t.relatedTarget),r=t.client&&t.client===this;return i||o||r?!0:!1},Vt=function(t){if("object"==typeof t&&t&&t.type){var e=st(t),n=Nt[this.id]&&Nt[this.id].handlers["*"]||[],i=Nt[this.id]&&Nt[this.id].handlers[t.type]||[],r=n.concat(i);if(r&&r.length){var s,a,l,u,c,h=this;for(s=0,a=r.length;a>s;s++)l=r[s],u=h,"string"==typeof l&&"function"==typeof o[l]&&(l=o[l]),"object"==typeof l&&l&&"function"==typeof l.handleEvent&&(u=l,l=l.handleEvent),"function"==typeof l&&(c=x({},t),at(l,u,[c],e))}return this}},Gt=function(t){return"string"==typeof t&&(t=[]),"number"!=typeof t.length?[t]:t},Xt=function(t){if(t&&1===t.nodeType){var e=function(t){(t||(t=o.event))&&("js"!==t._source&&(t.stopImmediatePropagation(),t.preventDefault()),delete t._source)},n=function(n){(n||(n=o.event))&&(e(n),Pt.focus(t))};t.addEventListener("mouseover",n,!1),t.addEventListener("mouseout",e,!1),t.addEventListener("mouseenter",e,!1),t.addEventListener("mouseleave",e,!1),t.addEventListener("mousemove",e,!1),Dt[t.zcClippingId]={mouseover:n,mouseout:e,mouseenter:e,mouseleave:e,mousemove:e}}},Kt=function(t){if(t&&1===t.nodeType){var e=Dt[t.zcClippingId];if("object"==typeof e&&e){for(var n,i,o=["move","leave","enter","out","over"],r=0,s=o.length;s>r;r++)n="mouse"+o[r],i=e[n],"function"==typeof i&&t.removeEventListener(n,i,!1);delete Dt[t.zcClippingId]}}};Pt._createClient=function(){It.apply(this,_(arguments))},Pt.prototype.on=function(){return qt.apply(this,_(arguments))},Pt.prototype.off=function(){return Rt.apply(this,_(arguments))},Pt.prototype.handlers=function(){return Ft.apply(this,_(arguments))},Pt.prototype.emit=function(){return Bt.apply(this,_(arguments))},Pt.prototype.clip=function(){return Ht.apply(this,_(arguments))},Pt.prototype.unclip=function(){return zt.apply(this,_(arguments))},Pt.prototype.elements=function(){return Wt.apply(this,_(arguments))},Pt.prototype.destroy=function(){return Ut.apply(this,_(arguments))},Pt.prototype.setText=function(t){return Pt.setData("text/plain",t),this},Pt.prototype.setHtml=function(t){return Pt.setData("text/html",t),this},Pt.prototype.setRichText=function(t){return Pt.setData("application/rtf",t),this},Pt.prototype.setData=function(){return Pt.setData.apply(this,_(arguments)),this},Pt.prototype.clearData=function(){return Pt.clearData.apply(this,_(arguments)),this},Pt.prototype.getData=function(){return Pt.getData.apply(this,_(arguments))},"function"==typeof define&&define.amd?define(function(){return Pt}):"object"==typeof module&&module&&"object"==typeof module.exports&&module.exports?module.exports=Pt:t.ZeroClipboard=Pt}(function(){return this||window}()),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.GreenAudioPlayer=t()}}(function(){return function(){function t(e,n,i){function o(s,a){if(!n[s]){if(!e[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return o(n||t)},c,c.exports,t,e,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}return t}()({1:[function(t,e,n){"use strict";e.exports=t("./src/js/main")["default"]},{"./src/js/main":2}],2:[function(t,e,n){"use strict";function i(t,e){return s(t)||r(t,e)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function r(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(l){o=!0,r=l}finally{try{i||null==a["return"]||a["return"]()}finally{if(o)throw r}}return n}}function s(t){return Array.isArray(t)?t:void 0}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=void 0;var c=function(){function t(e,n){a(this,t),this.audioPlayer="string"==typeof e?document.querySelector(e):e;var i=n||{},o=this.audioPlayer.innerHTML;this.audioPlayer.classList.add("green-audio-player"),this.audioPlayer.innerHTML=t.getTemplate()+o,this.isDevice=/ipad|iphone|ipod|android/i.test(window.navigator.userAgent.toLowerCase())&&!window.MSStream,this.playPauseBtn=this.audioPlayer.querySelector(".play-pause-btn"),this.stopPlayers=this.audioPlayer.querySelector(".close-audio"),this.loading=this.audioPlayer.querySelector(".loading"),this.sliders=this.audioPlayer.querySelectorAll(".slider"),this.progress=this.audioPlayer.querySelector(".controls__progress"),this.volumeBtn=this.audioPlayer.querySelector(".volume__button"),this.volumeControls=this.audioPlayer.querySelector(".volume__controls"),this.volumeProgress=this.volumeControls.querySelector(".volume__progress"),this.player=this.audioPlayer.querySelector("audio"),this.currentTime=this.audioPlayer.querySelector(".controls__current-time"),this.totalTime=this.audioPlayer.querySelector(".controls__total-time"),this.speaker=this.audioPlayer.querySelector(".volume__speaker"),this.download=this.audioPlayer.querySelector(".download"),this.downloadLink=this.audioPlayer.querySelector(".download__link"),this.span=this.audioPlayer.querySelectorAll(".message__offscreen"),this.svg=this.audioPlayer.getElementsByTagName("svg"),this.img=this.audioPlayer.getElementsByTagName("img"),this.draggableClasses=["pin"],this.currentlyDragged=null,this.stopOthersOnPlay=i.stopOthersOnPlay||!1,this.enableKeystrokes=i.enableKeystrokes||!1,this.showTooltips=i.showTooltips||!1;var r=this;if(this.labels={volume:{open:"Open Volume Controls",close:"Close Volume Controls"},pause:"Pause",play:"Play",download:"Download"},this.enableKeystrokes){window.addEventListener("keydown",this.pressKb.bind(r),!1),window.addEventListener("keyup",this.unPressKb.bind(r),!1),this.sliders[0].setAttribute("tabindex",0),this.sliders[1].setAttribute("tabindex",0),this.download.setAttribute("tabindex",-1),this.downloadLink.setAttribute("tabindex",-1);for(var s=0;s<this.svg.length;s++)this.svg[s].setAttribute("tabindex",0),this.svg[s].setAttribute("focusable",!0);for(var l=0;l<this.img.length;l++)this.img[l].setAttribute("tabindex",0)}else for(var u=0;u<this.span.length;u++)this.span[u].outerHTML="";if(this.showTooltips&&(this.playPauseBtn.setAttribute("title",this.labels.play),this.volumeBtn.setAttribute("title",this.labels.volume.open),this.downloadLink.setAttribute("title",this.labels.download)),i.outlineControls&&this.audioPlayer.classList.add("player-accessible"),i.showDownloadButton&&this.showDownload(),this.initEvents(),this.directionAware(),this.overcomeIosLimitations(),"autoplay"in this.player.attributes){var c=this.player.play();void 0!==c&&c.then(function(){var t=r.player.parentElement.querySelector(".play-pause-btn__icon");t.attributes.d.value="M0 0h6v24H0zM12 0h6v24h-6z",r.playPauseBtn.setAttribute("aria-label",r.labels.pause),r.hasSetAttribute(r.playPauseBtn,"title",r.labels.pause)})["catch"](function(){console.error("Audio Player Error: Autoplay has been prevented, because it is not allowed by this browser.")})}"preload"in this.player.attributes&&"none"===this.player.attributes.preload.value&&(this.playPauseBtn.style.visibility="visible",this.loading.style.visibility="hidden")}return u(t,[{key:"initEvents",value:function(){var e=this;e.audioPlayer.addEventListener("mousedown",function(t){if(e.isDraggable(t.target)){e.currentlyDragged=t.target;var n=e.currentlyDragged.dataset.method,i=e[n].bind(e);window.addEventListener("mousemove",i,!1),e.currentlyDragged.parentElement.parentElement===e.sliders[0]&&(e.paused=e.player.paused,e.paused===!1&&e.togglePlay()),window.addEventListener("mouseup",function(){e.currentlyDragged!==!1&&e.currentlyDragged.parentElement.parentElement===e.sliders[0]&&e.paused!==e.player.paused&&e.togglePlay(),e.currentlyDragged=!1,window.removeEventListener("mousemove",i,!1)},!1)}}),e.audioPlayer.addEventListener("touchstart",function(t){if(e.isDraggable(t.target)){var n=i(t.targetTouches,1);e.currentlyDragged=n[0];var o=e.currentlyDragged.target.dataset.method,r=e[o].bind(e);window.addEventListener("touchmove",r,!1),e.currentlyDragged.parentElement.parentElement===e.sliders[0]&&(e.paused=e.player.paused,e.paused===!1&&e.togglePlay()),window.addEventListener("touchend",function(){e.currentlyDragged!==!1&&e.currentlyDragged.parentElement.parentElement===e.sliders[0]&&e.paused!==e.player.paused&&e.togglePlay(),e.currentlyDragged=!1,window.removeEventListener("touchmove",r,!1)},!1),t.preventDefault()}}),this.playPauseBtn.addEventListener("click",this.togglePlay.bind(e)),this.player.addEventListener("timeupdate",this.updateProgress.bind(e)),this.player.addEventListener("volumechange",this.updateVolume.bind(e)),this.player.volume=.81,this.player.addEventListener("loadedmetadata",function(){e.totalTime.textContent=t.formatTime(e.player.duration)}),this.player.addEventListener("seeking",this.showLoadingIndicator.bind(e)),this.player.addEventListener("seeked",this.hideLoadingIndicator.bind(e)),this.player.addEventListener("canplay",this.hideLoadingIndicator.bind(e)),this.player.addEventListener("ended",function(){t.pausePlayer(e.player,"ended"),e.audioPlayer.classList.remove("playing"),e.player.currentTime=0,e.playPauseBtn.setAttribute("aria-label",e.labels.play),e.hasSetAttribute(e.playPauseBtn,"title",e.labels.play)}),this.volumeBtn.addEventListener("click",this.showHideVolume.bind(e)),window.addEventListener("resize",e.directionAware.bind(e)),window.addEventListener("scroll",e.directionAware.bind(e));for(var n=0;n<this.sliders.length;n++){var o=this.sliders[n].querySelector(".pin");this.sliders[n].addEventListener("click",e[o.dataset.method].bind(e))}this.downloadLink.addEventListener("click",this.downloadAudio.bind(e))}},{key:"overcomeIosLimitations",value:function(){var t=this;this.isDevice&&(this.player.addEventListener("loadedmetadata",this.hideLoadingIndicator.bind(t)),this.audioPlayer.querySelector(".volume").style.display="none",this.audioPlayer.querySelector(".controls").style.marginRight="0")}},{key:"isDraggable",value:function(t){var e=!1;if("undefined"==typeof t.classList)return!1;for(var n=0;n<this.draggableClasses.length;n++)t.classList.contains(this.draggableClasses[n])&&(e=!0);return e}},{key:"inRange",value:function(t){var e="touches"in t,n=this.getRangeBox(t),i=n.getBoundingClientRect(),o=n.dataset.direction,r=null,s=null;if("horizontal"===o){r=i.x,s=r+i.width;var a=e?t.touches[0].clientX:t.clientX;if(r>a||a>s)return!1}else{r=i.top,s=r+i.height;var l=e?t.touches[0].clientY:t.clientY;if(r>l||l>s)return!1}return!0}},{key:"updateProgress",value:function(){var e=this.player.currentTime,n=e/this.player.duration*100;this.progress.setAttribute("aria-valuenow",n),this.progress.style.width="".concat(n,"%"),this.currentTime.textContent=t.formatTime(e)}},{key:"updateVolume",value:function(){this.volumeProgress.setAttribute("aria-valuenow",100*this.player.volume),this.volumeProgress.style.height="".concat(100*this.player.volume,"%"),this.player.volume>=.5?this.speaker.attributes.d.value="M14.667 0v2.747c3.853 1.146 6.666 4.72 6.666 8.946 0 4.227-2.813 7.787-6.666 8.934v2.76C20 22.173 24 17.4 24 11.693 24 5.987 20 1.213 14.667 0zM18 11.693c0-2.36-1.333-4.386-3.333-5.373v10.707c2-.947 3.333-2.987 3.333-5.334zm-18-4v8h5.333L12 22.36V1.027L5.333 7.693H0z":this.player.volume<.5&&this.player.volume>.05?this.speaker.attributes.d.value="M0 7.667v8h5.333L12 22.333V1L5.333 7.667M17.333 11.373C17.333 9.013 16 6.987 14 6v10.707c2-.947 3.333-2.987 3.333-5.334z":this.player.volume<=.05&&(this.speaker.attributes.d.value="M0 7.667v8h5.333L12 22.333V1L5.333 7.667")}},{key:"getRangeBox",value:function(t){var e=t.target,n=this.currentlyDragged;return"click"===t.type&&this.isDraggable(t.target)&&(e=t.target.parentElement.parentElement),"mousemove"===t.type&&(e=n.parentElement.parentElement),"touchmove"===t.type&&(e=n.target.parentElement.parentElement),e}},{key:"getCoefficient",value:function(t){var e="touches"in t,n=this.getRangeBox(t),i=n.getBoundingClientRect(),o=0;if("horizontal"===n.dataset.direction){var r=e?t.touches[0].clientX:t.clientX,s=r-i.left,a=i.width;o=s/a}else if("vertical"===n.dataset.direction){var l=i.height,u=e?t.touches[0].clientY:t.clientY,c=u-i.top;o=1-c/l}return o}},{key:"rewind",value:function(t){this.player.seekable&&this.player.seekable.length&&this.inRange(t)&&(this.player.currentTime=this.player.duration*this.getCoefficient(t))}},{key:"showVolume",value:function(){this.volumeBtn.getAttribute("aria-attribute")===this.labels.volume.open&&(this.volumeControls.classList.remove("hidden"),this.volumeBtn.classList.add("open"),this.volumeBtn.setAttribute("aria-label",this.labels.volume.close),this.hasSetAttribute(this.volumeBtn,"title",this.labels.volume.close))}},{key:"showHideVolume",value:function(){this.volumeControls.classList.toggle("hidden"),this.volumeBtn.getAttribute("aria-label")===this.labels.volume.open?(this.volumeBtn.setAttribute("aria-label",this.labels.volume.close),this.hasSetAttribute(this.volumeBtn,"title",this.labels.volume.close),this.volumeBtn.classList.add("open")):(this.volumeBtn.setAttribute("aria-label",this.labels.volume.open),this.hasSetAttribute(this.volumeBtn,"title",this.labels.volume.open),this.volumeBtn.classList.remove("open"))}},{key:"changeVolume",value:function(t){this.inRange(t)&&(this.player.volume=Math.round(50*this.getCoefficient(t))/50)}},{key:"preloadNone",value:function(){var t=this;this.player.duration||(t.playPauseBtn.style.visibility="hidden",t.loading.style.visibility="visible")}},{key:"togglePlay",value:function(){this.preloadNone(),this.player.paused?(this.stopOthersOnPlay&&t.stopOtherPlayers(),t.playPlayer(this.player),this.playPauseBtn.setAttribute("aria-label",this.labels.pause),this.hasSetAttribute(this.playPauseBtn,"title",this.labels.pause),this.audioPlayer.classList.add("playing")):(t.pausePlayer(this.player,"toggle"),this.playPauseBtn.setAttribute("aria-label",this.labels.play),this.hasSetAttribute(this.playPauseBtn,"title",this.labels.play))}},{key:"hasSetAttribute",value:function(t,e,n){this.showTooltips&&t.hasAttribute(e)&&t.setAttribute(e,n)}},{key:"setCurrentTime",value:function(t){var e=this.player.currentTime,n=Math.floor(this.player.duration);0>e+t&&0===e?this.player.currentTime=this.player.currentTime:0>e+t?this.player.currentTime=0:e+t>n?this.player.currentTime=n:this.player.currentTime+=t}},{key:"setVolume",value:function(t){if(!this.isDevice){var e=this.player.volume;e+t>=0&&1>e+t?this.player.volume+=t:0>=e+t?this.player.volume=0:this.player.volume=1}}},{key:"unPressKb",value:function(t){var e=t||window.event;!this.seeking||37!==e.keyCode&&39!==e.keyCode||(this.togglePlay(),this.seeking=!1)}},{key:"pressKb",value:function(t){var e=t||window.event;switch(e.keyCode){case 13:case 32:if(document.activeElement.parentNode===this.playPauseBtn)this.togglePlay();else if(document.activeElement.parentNode===this.volumeBtn||document.activeElement===this.sliders[1]){if(document.activeElement===this.sliders[1])try{this.volumeBtn.children[0].focus()}catch(n){this.volumeBtn.focus()}this.showHideVolume()}13===e.keyCode&&this.showDownload&&document.activeElement.parentNode===this.downloadLink&&this.downloadLink.focus();break;case 37:case 39:document.activeElement===this.sliders[0]&&(37===e.keyCode?this.setCurrentTime(-5):this.setCurrentTime(5),!this.player.paused&&this.player.seeking&&(this.togglePlay(),this.seeking=!0));break;case 38:case 40:(document.activeElement.parentNode===this.volumeBtn||document.activeElement===this.sliders[1])&&(38===e.keyCode?this.setVolume(.05):this.setVolume(-.05)),document.activeElement.parentNode===this.volumeBtn&&this.showVolume()}}},{key:"showLoadingIndicator",value:function(){this.playPauseBtn.style.visibility="hidden",this.loading.style.visibility="visible"}},{key:"hideLoadingIndicator",value:function(){this.playPauseBtn.style.visibility="visible",this.loading.style.visibility="hidden"}},{key:"showDownload",value:function(){this.download.style.display="block"}},{key:"downloadAudio",value:function(){var t=this.player.currentSrc,e=t.split("/").reverse()[0];this.downloadLink.setAttribute("href",t),this.downloadLink.setAttribute("download",e)}},{key:"directionAware",value:function(){this.volumeControls.classList.remove("top","middle","bottom"),window.innerHeight<250?this.volumeControls.classList.add("middle"):this.audioPlayer.getBoundingClientRect().top<180?this.volumeControls.classList.add("bottom"):this.volumeControls.classList.add("top")}}],[{key:"init",value:function(e){var n=document.querySelectorAll(e.selector);n.forEach(function(n){new t(n,e)})}},{key:"getTemplate",value:function(){return'\n            <div class="player-inner bg-white relative z2 flex flex-center col-12">\n<div class="holder">\n                <div class="loading">\n                    <div class="loading__spinner"></div>\n                </div>\n\n                <div class="play-pause-btn" aria-label="Play" role="button">\n                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="24" viewBox="0 0 18 24">\n                        <path fill="#242424" fill-rule="evenodd" d="M18 12L0 24V0" class="play-pause-btn__icon"/>\n                    </svg>\n                </div>\n            </div>\n\n            <div class="controls">\n                <span class="controls__current-time" aria-live="off" role="timer">00:00</span>\n                <div class="controls__slider slider" data-direction="horizontal">\n                    <div class="controls__progress gap-progress" aria-label="Time Slider" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" role="slider">\n                        <div class="pin progress__pin" data-method="rewind"></div>\n                    </div>\n                </div>\n                <span class="controls__total-time">00:00</span>\n            </div>\n\n            <div class="volume">\n                <div class="volume__button" aria-label="Open Volume Controls" role="button">\n                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n                        <path class="volume__speaker" fill="#242424" fill-rule="evenodd" d="M14.667 0v2.747c3.853 1.146 6.666 4.72 6.666 8.946 0 4.227-2.813 7.787-6.666 8.934v2.76C20 22.173 24 17.4 24 11.693 24 5.987 20 1.213 14.667 0zM18 11.693c0-2.36-1.333-4.386-3.333-5.373v10.707c2-.947 3.333-2.987 3.333-5.334zm-18-4v8h5.333L12 22.36V1.027L5.333 7.693H0z"/>\n                    </svg>\n                    <span class="message__offscreen">Press Enter or Space to show volume slider.</span>\n                </div>\n                <div class="volume__controls hidden">\n                    <div class="volume__slider slider" data-direction="vertical">\n                        <div class="volume__progress gap-progress" aria-label="Volume Slider" aria-valuemin="0" aria-valuemax="100" aria-valuenow="81" role="slider">\n                            <div class="pin volume__pin" data-method="changeVolume"></div>\n                        </div>\n                        <span class="message__offscreen">Use Up/Down Arrow keys to increase or decrease volume.</span>\n                    </div>\n                </div>\n            </div>\n\n            <div class="download">\n                <a class="download__link" href="" download="" aria-label="Download" role="button">\n                    <svg width="24" height="24" fill="#242424" enable-background="new 0 0 29.978 29.978" version="1.1" viewBox="0 0 29.978 29.978" xml:space="preserve" xmlns="http://www.w3.org/2000/svg">\n                        <path d="m25.462 19.105v6.848h-20.947v-6.848h-4.026v8.861c0 1.111 0.9 2.012 2.016 2.012h24.967c1.115 0 2.016-0.9 2.016-2.012v-8.861h-4.026z"/>\n                        <path d="m14.62 18.426l-5.764-6.965s-0.877-0.828 0.074-0.828 3.248 0 3.248 0 0-0.557 0-1.416v-8.723s-0.129-0.494 0.615-0.494h4.572c0.536 0 0.524 0.416 0.524 0.416v8.742 1.266s1.842 0 2.998 0c1.154 0 0.285 0.867 0.285 0.867s-4.904 6.51-5.588 7.193c-0.492 0.495-0.964-0.058-0.964-0.058z"/>\n                    </svg>\n                </a>\n            </div>\n   </div>\n       '}},{key:"formatTime",value:function(t){var e=Math.floor(t/60),n=Math.floor(t%60);return"".concat(10>e?"0".concat(e):e,":").concat(10>n?"0".concat(n):n)}},{key:"pausePlayer",value:function(t){var e=t.parentElement.querySelector(".play-pause-btn__icon"),n=t.parentElement.querySelector(".play-pause-btn");e.attributes.d.value="M18 12L0 24V0",n.classList.remove("playing-btn"),t.pause()}},{key:"playPlayer",value:function(t){var e=t.parentElement.querySelector(".play-pause-btn__icon"),n=t.parentElement.querySelector(".play-pause-btn");e.attributes.d.value="M0 0h6v24H0zM12 0h6v24h-6z",n.classList.add("playing-btn"),t.play()}},{key:"stopOtherPlayers",value:function(){for(var e=document.querySelectorAll(".green-audio-player audio"),n=document.querySelectorAll('.group[data-playback="playback-default"] .group-native-video'),i=0;i<e.length;i++)t.pausePlayer(e[i]),e[i].parentNode.classList.remove("playing");for(var i=0;i<n.length;i++)n[i].pause()}}]),t}(),h=c;n["default"]=h},{}]},{},[1])(1)}),function(){var t,e;t=_.indexOf,_.mixin({indexOf:function(e,n){var i,o,r,s;if(!_.isFunction(n))return t(e,n);for(i=o=0,r=e.length;r>o;i=++o)if(s=e[i],n(s))return i;return-1}}),e=function(t){return $(t).hasClass("should-fill-row")},window.Partition={},Partition.partition=function(t,e){return t.findWhere({fill_width:!0})?Partition.fillWidths(t,e):Partition.fillRows(t,e)},Partition.fillRows=function(t,e){var n,i,o,r;for(i=0,o=t.length,n=[];o>i;)r=Math.ceil((o-i)/e--),n.push(t.slice(i,i+=r));return n},Partition.takeRow=function(t){var e;return e=0===t.length?0:_.first(t).get("fill_width")?1:_.some(t,function(t){return t.get("fill_width")})?_.indexOf(t,function(t){return t.get("fill_width")}):t.length,_.first(t,e)},Partition.partitionFullWidths=function(t){var e,n,i;for(n=[],e=0;e!==t.length;)i=Partition.takeRow(t.rest(e)),e+=i.length,n.push(i);return n},Partition.fillWidths=function(t,e){var n,i,o,r,s;return n=Partition.partitionFullWidths(t),o=_.filter(n,function(t){return 1===t.length}).length,s=_.indexOf(n,function(t){return t.length>5}),1===n.length?Partition.fillRows(t,e):o===n.length?n:s>=0?Partition.partitionSingleRow(n,s,e-n.length+1):n.length>=e?n:(r=e-n.length,i=_.sortBy(_.reject(_.map(n,function(t,e,n){return t.length>1?e:null}),function(t){return _.isNull(t)}),function(t){return-t}),1===i.length?n=Partition.partitionSingleRow(n,_.first(i),r+1):_.each(i,function(t){return r>0?(n=Partition.partitionSingleRow(n,t),r--):void 0}),n)},Partition.partitionSingleRow=function(t,e,n){var i,o,r;return n=_.isNumber(n)&&n>2?n:2,i=0>=e?[]:_.first(t,e),o=Partition.fillRows(t[e],n),r=_.rest(t,e+1),_.flatten([i,o,r],!0)}}.call(this),jQuery.fn.selectText=function(){var t=this;requestAnimationFrame(function(){var e=$(t)[0],n=document.createRange();n.selectNodeContents(e);var i=window.getSelection();i.removeAllRanges(),i.addRange(n)})};var Utils={htmlEntityMap:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"}};Utils.randomStr=function(t){for(var e="";e.length<t;)e+=Math.random().toString(36).substr(2,t);return e.substr(0,t)},Utils.random=function(t){return t[Math.floor(Math.random()*t.length)]},Utils.decodeHtmlEntities=function(t){return t?(_.each(Utils.htmlEntityMap,function(e,n){var i=new RegExp(e,"g");t=t.replace(i,n)}),t):t},Utils.inViewport=function(t){return withinViewport(t[0],{top:-400,bottom:-400})};var Exposure={isLoading:!1,isMobile:!1,onCustomDomain:!window.location.hostname.match(/(lvh\.me|exposure\.(c|s)o|localhost|exposure-staging\.com)/),features:{staff:"staff"===$("meta[name=user-bucket]").attr("content"),editor:!1}};if((bowser.chrome||bowser.firefox||bowser.safari)&&"undefined"!=typeof FileReader&&(Exposure.features.editor=!0),(bowser.ios||bowser.mobile)&&(Exposure.features.editor=!0),!Exposure.features.editor,Exposure.loading=function(t){if(t!=Exposure.isLoading&&(t||!(Photo.uploadingCount>0))){var e=$(".loading-indicator.bottom");t===!0?(e.show(),$("body").addClass("app-loading")):(e.hide(),$("body").removeClass("app-loading")),Exposure.isLoading=t}},Exposure.showMessage=function(t){var e=$("#app-message");e.removeClass("active").addClass("active").find(".message").html(t),setTimeout(function(){$("#app-message").click()},4e3)},$(window).scroll(function(){var t=$(this).scrollTop();Exposure.isMobile||$(".scroll-hint").css("opacity",+(9>=t)),$(".cover-hotspot").css("opacity",+(t>=10))}),$(".signed-in #post #logo-menu .root-link").bind("click",function(t){return 0==$(window).scrollTop()?!0:(t.preventDefault(),$.scrollTo(0,400),!1)}),$(window).bind("resize",function(){$(".user-details h1.user-fullname, .user-bio, .post-titles h1, .post-titles h2, .group-details h2, .group-description, p, h1, h2, h3, .post-footnotes *").css("z-index",1)}),$("body").on("click","#app-message",function(){$(this).removeClass("active")}),$(document).tipsy({fade:!0,offset:10,live:"[rel=tipsy-w], a[data-tipsy-w]",gravity:"w"}),$(document).tipsy({fade:!0,offset:10,live:"[rel=tipsy-e], a[data-tipsy-e]",gravity:"e"}),$(document).tipsy({fade:!0,offset:15,live:"[rel=tipsy-s], a[data-tipsy-s]",gravity:"s"}),$(document).tipsy({fade:!0,offset:23,live:"[rel=tipsy-n], a[data-tipsy-n]",gravity:"n"}),$(document).tipsy({fade:!0,offset:14,live:"[rel=tipsy], a[data-tipsy]"}),Exposure.isMobile){bowser.android&&$("body").addClass("is-android");var _body=document.body,_scrollTimer;document.addEventListener("touchmove",function(){clearTimeout(_scrollTimer),_body.classList.contains("scrolling")||_body.classList.add("scrolling"),_scrollTimer=setTimeout(function(){_body.classList.remove("scrolling")},200)},!1)}$(function(){$(".pw-notice-bar a.dismiss-notice").on("click",function(t){return t.preventDefault(),Cookies.set("hide-pw-notice","yes",{expires:"01/01/2019"}),$(".pw-notice-bar").fadeOut(200),!1})}),Cookies.get("hide-pw-notice")||$(".pw-notice-bar").fadeIn(),$("#subscribe-to-stories-button").click(function(t){t.preventDefault(),$.scrollTo("#subscribe-to-stories",400,{axis:"y"})}),$("#open-quicknav-hook").click(function(){$("#open-quicknav-hook").toggleClass("active"),$("#root-category-quick-nav").slideToggle("fast").toggleClass("open"),setTimeout(function(){$.scrollTo("#wrapper-quick-nav",400)},400)}),$(document).ready(function(){$("a#nav-drawer-hook").click(function(t){return t.stopPropagation(),$("#nav-drawer").addClass("open"),$("#nav-drawer.right").removeClass("open"),!1}),$("#nav-drawer").on("click",function(t){$(t.target).hasClass("sign-out")||t.stopPropagation()}),$(document).click(function(t){$("#nav-drawer").removeClass("open")}),$("a#close-drawer-hook").click(function(t){return t.preventDefault(),$("#nav-drawer").removeClass("open"),!1})}),$(document).ready(function(){$("a.subjects-info-trigger").click(function(t){return t.stopPropagation(),$("#nav-drawer.subjects").addClass("open"),$("#nav-drawer.news").removeClass("open"),!1}),$(document).click(function(t){$("#nav-drawer.subjects").removeClass("open")}),$("a#close-drawer-hook").click(function(t){return t.preventDefault(),$("#nav-drawer").removeClass("open"),!1})}),$(document).ready(function(){$("a.open-search-hook").click(function(t){return t.stopPropagation(),$(".new-tab #search").fadeIn("fast"),!1}),$("#search .close").click(function(t){return t.stopPropagation(),$(".new-tab #search").fadeOut("fast"),!1})}),$(document).keyup(function(t){27===t.keyCode&&$(".new-tab #search").fadeOut("fast")}),$(document).ready(function(){$("a.add-to-subjects-hook").click(function(t){return $("#nav-drawer.subjects").removeClass("open"),$('a[data-slug="24-hours-in"]').trigger("click"),
!1})}),$(document).ready(function(){$(".notifcation-indicator,.updates-hook").click(function(t){return t.stopPropagation(),$("#nav-drawer.news").addClass("open"),$("#nav-drawer").removeClass("open"),$("#nav-drawer.subjects").removeClass("open"),!1}),$("#nav-drawer.right").on("click",function(t){$(t.target).hasClass("sign-out")||t.stopPropagation()}),$(document).click(function(t){$("#nav-drawer.right").removeClass("open")}),$("#nav-drawer.right a#close-drawer-hook").click(function(t){return t.preventDefault(),$("#nav-drawer.right").removeClass("open"),!1})}),$(document).ready(function(){$("a.show-preivew-hook").click(function(t){t.stopPropagation();var e=$("#profile-preview").find("iframe").attr("src");return $("#profile-preview").find("iframe").attr("src",e+"?"+(new Date).getTime()),$("#profile-preview").fadeIn("fast"),!1}),$("a.close-preview-hook").click(function(t){return t.stopPropagation(),$("#profile-preview").fadeOut("fast"),!1})}),ZeroClipboard.config({swfPath:"/ZeroClipboard.swf"});var zc=new ZeroClipboard($("#copy-embed-code"));zc.on("ready",function(t){zc.on("aftercopy",function(t){Exposure.showMessage("Embed code copied to your clipboard.")})}),$(".suggested-nav li").click(function(t){return $(this).hasClass("active")||($(this).siblings().removeClass("active"),$(this).addClass("active")),!1}),$("[data-action=biz-scroll-section] a, [data-action=biz-scroll-features]").on("click",function(t){return this.href.match(/@/)?void 0:(t.preventDefault(),$.scrollTo($("#"+this.href.split("#")[1]).get(0),300,{offset:-120}),!1)}),$("[data-action=biz-switch-quote] li").on("click",function(t){return t.preventDefault(),$(this).addClass("active").siblings().removeClass("active"),$("div.quotes > div").fadeOut(300),$(".quote-"+$(this).get(0).classList[0]).fadeIn(300),!1}),function(t){t.belowthefold=function(e,n){var i=t(window).height()+t(window).scrollTop();return i<=t(e).offset().top-n.threshold},t.abovethetop=function(e,n){var i=t(window).scrollTop();return i>=t(e).offset().top+t(e).height()-n.threshold},t.rightofscreen=function(e,n){var i=t(window).width()+t(window).scrollLeft();return i<=t(e).offset().left-n.threshold},t.leftofscreen=function(e,n){var i=t(window).scrollLeft();return i>=t(e).offset().left+t(e).width()-n.threshold},t.inviewport=function(e,n){return!(t.rightofscreen(e,n)||t.leftofscreen(e,n)||t.belowthefold(e,n)||t.abovethetop(e,n))},t.extend(t.expr[":"],{"below-the-fold":function(e,n,i){return t.belowthefold(e,{threshold:0})},"above-the-top":function(e,n,i){return t.abovethetop(e,{threshold:0})},"left-of-screen":function(e,n,i){return t.leftofscreen(e,{threshold:0})},"right-of-screen":function(e,n,i){return t.rightofscreen(e,{threshold:0})},"in-viewport":function(e,n,i){return t.inviewport(e,{threshold:0})}}),t.fn.isOnScreen=function(e){var n=this.outerHeight(),i=this.outerWidth();if(!i||!n)return!1;var o=t(window),r={top:o.scrollTop(),left:o.scrollLeft()};r.right=r.left+o.width(),r.bottom=r.top+o.height();var s=this.offset();s.right=s.left+i,s.bottom=s.top+n;var a={top:r.bottom-s.top,left:r.right-s.left,bottom:s.bottom-r.top,right:s.right-r.left};return"function"==typeof e?e(a):a.top>0&&a.left>0&&a.right>0&&a.bottom>0},t.fn.isOnScreen=function(e){var n=this.outerHeight(),i=this.outerWidth();if(!i||!n)return!1;var o=t(window),r={top:o.scrollTop(),left:o.scrollLeft()};r.right=r.left+o.width(),r.bottom=r.top+o.height();var s=this.offset();s.right=s.left+i,s.bottom=s.top+n;var a={top:r.bottom-s.top,left:r.right-s.left,bottom:s.bottom-r.top,right:s.right-r.left};return"function"==typeof e?e(a):a.top>0&&a.left>0&&a.right>0&&a.bottom>0}}(jQuery),$("a[href=#learn-more]").bind("click",function(t){return t.preventDefault(),$.scrollTo("#main-copy",200),!1}),function(t){t.fn.insertAtCaret=function(t){document.execCommand("insertHTML",!1,t)},t.fn.smarten=function(t){return t=t.replace(/(^|[-\u2014\s(\["])'/g,"$1\u2018"),t=t.replace(/'/g,"\u2019"),t=t.replace(/(^|[-\u2014\/\[(\u2018\s])"/g,"$1\u201c"),t=t.replace(/"/g,"\u201d"),t=t.replace(/--/g,"\u2014")},t.fn.makeEditable=function(e){if(0===this.length)return this;if(e===!0||e===!1)return e===!0?this.attr("contenteditable",!0):this.removeAttr("contenteditable"),this;var n="getValue"===e,i={placeholder:"",multiLine:!1,maxLength:0,alwaysShowPlaceholder:!1},o={16:"shift",17:"ctrl",18:"alt",91:"cmd",8:"delete"};if(n&&(e=null),e=e||this.data("editor-options"),e=t.extend(i,e),n){var r=t.trim(this.html()),s=e.placeholder;return e.multiLine===!1&&(r=strip_tags(r)),r=Utils.decodeHtmlEntities(r),r===s?"":r}var a=this;return this.data("editor-options",e),this.attr("contenteditable",!0),e.placeholder&&""===this.makeEditable("getValue")&&this.html(e.placeholder),this.bind("focus",function(n){a.data("enter",t.trim(a.html())),a.data("before",t.trim(a.html())),(t.trim(a.text())===e.placeholder||t.trim(a.html())===e.placeholder)&&a.selectText()}),this.bind("keydown keyup blur",function(n){if(""===t.trim(a.text())&&a.html(e.placeholder).selectText(),"blur"!==n.type&&e.maxLength>0){var i=a.makeEditable("getValue").length;if(i>e.maxLength&&"undefined"==typeof o[n.which])return n.preventDefault(),!1}if("keyup"==n.type&&(222==n.which||189==n.which),"keydown"==n.type&&13===n.which){if(e.multiLine===!1)return n.preventDefault(),!1;for(var r=a.find("p"),s=0,l=r.length;l>s;s++)for(var u=r[s],c=0,h=u.attributes.length;h>c;c++)t(u).removeAttr(u.attributes[c].name)}}),this.bind("paste",function(t){if(t.originalEvent.clipboardData){t.preventDefault(),t=t.originalEvent;var n=t.clipboardData.getData("text/plain").split(/[\r\n]/g);if(n){var i="";if(e.multiLine){for(var o=0,r=n.length;r>o;o++)i+="<p>"+a.smarten(n[o])+"</p>\n";a.insertAtCaret(strip_tags(i,"<p><br><br/><br />"))}else i=strip_tags(n.join(" ")),a.insertAtCaret(a.smarten(i))}return!1}}),this.bind("keyup paste",function(n){var i=t.trim(a.html());a.data("before")!==i&&(a.data("before",i),i==e.placeholder&&(i=""),a.trigger({type:"change",action:"update",changed:i}))}),this.bind("blur",function(n){var i=t.trim(a.html());a.data("enter")!==i&&(a.data("enter",i),i==e.placeholder&&(i=""),a.trigger({type:"change",action:"save",changed:i}))}),this}}(jQuery),function(t,e,n,i){"use strict";function o(t,e,n){return setTimeout(u(t,n),e)}function r(t,e,n){return Array.isArray(t)?(s(t,n[e],n),!0):!1}function s(t,e,n){var o;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==i)for(o=0;o<t.length;)e.call(n,t[o],o,t),o++;else for(o in t)t.hasOwnProperty(o)&&e.call(n,t[o],o,t)}function a(e,n,i){var o="DEPRECATED METHOD: "+n+"\n"+i+" AT \n";return function(){var n=new Error("get-stack-trace"),i=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=t.console&&(t.console.warn||t.console.log);return r&&r.call(t.console,o,i),e.apply(this,arguments)}}function l(t,e,n){var i,o=e.prototype;i=t.prototype=Object.create(o),i.constructor=t,i._super=o,n&&ht(i,n)}function u(t,e){return function(){return t.apply(e,arguments)}}function c(t,e){return typeof t==ft?t.apply(e?e[0]||i:i,e):t}function h(t,e){return t===i?e:t}function d(t,e,n){s(m(e),function(e){t.addEventListener(e,n,!1)})}function p(t,e,n){s(m(e),function(e){t.removeEventListener(e,n,!1)})}function f(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function g(t,e){return t.indexOf(e)>-1}function m(t){return t.trim().split(/\s+/g)}function v(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}function y(t){return Array.prototype.slice.call(t,0)}function b(t,e,n){for(var i=[],o=[],r=0;r<t.length;){var s=e?t[r][e]:t[r];v(o,s)<0&&i.push(t[r]),o[r]=s,r++}return n&&(i=e?i.sort(function(t,n){return t[e]>n[e]}):i.sort()),i}function w(t,e){for(var n,o,r=e[0].toUpperCase()+e.slice(1),s=0;s<dt.length;){if(n=dt[s],o=n?n+r:e,o in t)return o;s++}return i}function _(){return wt++}function x(e){var n=e.ownerDocument||e;return n.defaultView||n.parentWindow||t}function k(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){c(t.options.enable,[t])&&n.handler(e)},this.init()}function C(t){var e,n=t.options.inputClass;return new(e=n?n:kt?q:Ct?B:xt?z:I)(t,E)}function E(t,e,n){var i=n.pointers.length,o=n.changedPointers.length,r=e&At&&i-o===0,s=e&(Lt|Nt)&&i-o===0;n.isFirst=!!r,n.isFinal=!!s,r&&(t.session={}),n.eventType=e,S(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function S(t,e){var n=t.session,i=e.pointers,o=i.length;n.firstInput||(n.firstInput=O(e)),o>1&&!n.firstMultiple?n.firstMultiple=O(e):1===o&&(n.firstMultiple=!1);var r=n.firstInput,s=n.firstMultiple,a=s?s.center:r.center,l=e.center=A(i);e.timeStamp=vt(),e.deltaTime=e.timeStamp-r.timeStamp,e.angle=M(a,l),e.distance=N(a,l),$(n,e),e.offsetDirection=L(e.deltaX,e.deltaY);var u=P(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=u.x,e.overallVelocityY=u.y,e.overallVelocity=mt(u.x)>mt(u.y)?u.x:u.y,e.scale=s?D(s.pointers,i):1,e.rotation=s?j(s.pointers,i):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,T(n,e);var c=t.element;f(e.srcEvent.target,c)&&(c=e.srcEvent.target),e.target=c}function $(t,e){var n=e.center,i=t.offsetDelta||{},o=t.prevDelta||{},r=t.prevInput||{};(e.eventType===At||r.eventType===Lt)&&(o=t.prevDelta={x:r.deltaX||0,y:r.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=o.x+(n.x-i.x),e.deltaY=o.y+(n.y-i.y)}function T(t,e){var n,o,r,s,a=t.lastInterval||e,l=e.timeStamp-a.timeStamp;if(e.eventType!=Nt&&(l>Ot||a.velocity===i)){var u=e.deltaX-a.deltaX,c=e.deltaY-a.deltaY,h=P(l,u,c);o=h.x,r=h.y,n=mt(h.x)>mt(h.y)?h.x:h.y,s=L(u,c),t.lastInterval=e}else n=a.velocity,o=a.velocityX,r=a.velocityY,s=a.direction;e.velocity=n,e.velocityX=o,e.velocityY=r,e.direction=s}function O(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:gt(t.pointers[n].clientX),clientY:gt(t.pointers[n].clientY)},n++;return{timeStamp:vt(),pointers:e,center:A(e),deltaX:t.deltaX,deltaY:t.deltaY}}function A(t){var e=t.length;if(1===e)return{x:gt(t[0].clientX),y:gt(t[0].clientY)};for(var n=0,i=0,o=0;e>o;)n+=t[o].clientX,i+=t[o].clientY,o++;return{x:gt(n/e),y:gt(i/e)}}function P(t,e,n){return{x:e/t||0,y:n/t||0}}function L(t,e){return t===e?Mt:mt(t)>=mt(e)?0>t?jt:Dt:0>e?It:qt}function N(t,e,n){n||(n=Ht);var i=e[n[0]]-t[n[0]],o=e[n[1]]-t[n[1]];return Math.sqrt(i*i+o*o)}function M(t,e,n){n||(n=Ht);var i=e[n[0]]-t[n[0]],o=e[n[1]]-t[n[1]];return 180*Math.atan2(o,i)/Math.PI}function j(t,e){return M(e[1],e[0],zt)+M(t[1],t[0],zt)}function D(t,e){return N(e[0],e[1],zt)/N(t[0],t[1],zt)}function I(){this.evEl=Ut,this.evWin=Yt,this.pressed=!1,k.apply(this,arguments)}function q(){this.evEl=Xt,this.evWin=Kt,k.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function R(){this.evTarget=Qt,this.evWin=Jt,this.started=!1,k.apply(this,arguments)}function F(t,e){var n=y(t.touches),i=y(t.changedTouches);return e&(Lt|Nt)&&(n=b(n.concat(i),"identifier",!0)),[n,i]}function B(){this.evTarget=ee,this.targetIds={},k.apply(this,arguments)}function H(t,e){var n=y(t.touches),i=this.targetIds;if(e&(At|Pt)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var o,r,s=y(t.changedTouches),a=[],l=this.target;if(r=n.filter(function(t){return f(t.target,l)}),e===At)for(o=0;o<r.length;)i[r[o].identifier]=!0,o++;for(o=0;o<s.length;)i[s[o].identifier]&&a.push(s[o]),e&(Lt|Nt)&&delete i[s[o].identifier],o++;return a.length?[b(r.concat(a),"identifier",!0),a]:void 0}function z(){k.apply(this,arguments);var t=u(this.handler,this);this.touch=new B(this.manager,t),this.mouse=new I(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function W(t,e){t&At?(this.primaryTouch=e.changedPointers[0].identifier,U.call(this,e)):t&(Lt|Nt)&&U.call(this,e)}function U(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var i=this.lastTouches,o=function(){var t=i.indexOf(n);t>-1&&i.splice(t,1)};setTimeout(o,ne)}}function Y(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var o=this.lastTouches[i],r=Math.abs(e-o.x),s=Math.abs(n-o.y);if(ie>=r&&ie>=s)return!0}return!1}function V(t,e){this.manager=t,this.set(e)}function G(t){if(g(t,ue))return ue;var e=g(t,ce),n=g(t,he);return e&&n?ue:e||n?e?ce:he:g(t,le)?le:ae}function X(){if(!re)return!1;var e={},n=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(i){e[i]=n?t.CSS.supports("touch-action",i):!0}),e}function K(t){this.options=ht({},this.defaults,t||{}),this.id=_(),this.manager=null,this.options.enable=h(this.options.enable,!0),this.state=pe,this.simultaneous={},this.requireFail=[]}function Z(t){return t&ye?"cancel":t&me?"end":t&ge?"move":t&fe?"start":""}function Q(t){return t==qt?"down":t==It?"up":t==jt?"left":t==Dt?"right":""}function J(t,e){var n=e.manager;return n?n.get(t):t}function tt(){K.apply(this,arguments)}function et(){tt.apply(this,arguments),this.pX=null,this.pY=null}function nt(){tt.apply(this,arguments)}function it(){K.apply(this,arguments),this._timer=null,this._input=null}function ot(){tt.apply(this,arguments)}function rt(){tt.apply(this,arguments)}function st(){K.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function at(t,e){return e=e||{},e.recognizers=h(e.recognizers,at.defaults.preset),new lt(t,e)}function lt(t,e){this.options=ht({},at.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=C(this),this.touchAction=new V(this,this.options.touchAction),ut(this,!0),s(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function ut(t,e){var n=t.element;if(n.style){var i;s(t.options.cssProps,function(o,r){i=w(n.style,r),e?(t.oldCssProps[i]=n.style[i],n.style[i]=o):n.style[i]=t.oldCssProps[i]||""}),e||(t.oldCssProps={})}}function ct(t,n){var i=e.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=n,n.target.dispatchEvent(i)}var ht,dt=["","webkit","Moz","MS","ms","o"],pt=e.createElement("div"),ft="function",gt=Math.round,mt=Math.abs,vt=Date.now;ht="function"!=typeof Object.assign?function(t){if(t===i||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var o=arguments[n];if(o!==i&&null!==o)for(var r in o)o.hasOwnProperty(r)&&(e[r]=o[r])}return e}:Object.assign;var yt=a(function(t,e,n){for(var o=Object.keys(e),r=0;r<o.length;)(!n||n&&t[o[r]]===i)&&(t[o[r]]=e[o[r]]),r++;return t},"extend","Use `assign`."),bt=a(function(t,e){return yt(t,e,!0)},"merge","Use `assign`."),wt=1,_t=/mobile|tablet|ip(ad|hone|od)|android/i,xt="ontouchstart"in t,kt=w(t,"PointerEvent")!==i,Ct=xt&&_t.test(navigator.userAgent),Et="touch",St="pen",$t="mouse",Tt="kinect",Ot=25,At=1,Pt=2,Lt=4,Nt=8,Mt=1,jt=2,Dt=4,It=8,qt=16,Rt=jt|Dt,Ft=It|qt,Bt=Rt|Ft,Ht=["x","y"],zt=["clientX","clientY"];k.prototype={handler:function(){},init:function(){this.evEl&&d(this.element,this.evEl,this.domHandler),this.evTarget&&d(this.target,this.evTarget,this.domHandler),this.evWin&&d(x(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(x(this.element),this.evWin,this.domHandler)}};var Wt={mousedown:At,mousemove:Pt,mouseup:Lt},Ut="mousedown",Yt="mousemove mouseup";l(I,k,{handler:function(t){var e=Wt[t.type];e&At&&0===t.button&&(this.pressed=!0),e&Pt&&1!==t.which&&(e=Lt),this.pressed&&(e&Lt&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:$t,srcEvent:t}))}});var Vt={pointerdown:At,pointermove:Pt,pointerup:Lt,pointercancel:Nt,pointerout:Nt},Gt={2:Et,3:St,4:$t,5:Tt},Xt="pointerdown",Kt="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(Xt="MSPointerDown",Kt="MSPointerMove MSPointerUp MSPointerCancel"),l(q,k,{handler:function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),o=Vt[i],r=Gt[t.pointerType]||t.pointerType,s=r==Et,a=v(e,t.pointerId,"pointerId");o&At&&(0===t.button||s)?0>a&&(e.push(t),a=e.length-1):o&(Lt|Nt)&&(n=!0),0>a||(e[a]=t,this.callback(this.manager,o,{pointers:e,changedPointers:[t],pointerType:r,srcEvent:t}),n&&e.splice(a,1))}});var Zt={touchstart:At,touchmove:Pt,touchend:Lt,touchcancel:Nt},Qt="touchstart",Jt="touchstart touchmove touchend touchcancel";l(R,k,{handler:function(t){var e=Zt[t.type];if(e===At&&(this.started=!0),this.started){var n=F.call(this,t,e);e&(Lt|Nt)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:Et,srcEvent:t})}}});var te={touchstart:At,touchmove:Pt,touchend:Lt,touchcancel:Nt},ee="touchstart touchmove touchend touchcancel";l(B,k,{handler:function(t){var e=te[t.type],n=H.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:Et,srcEvent:t})}});var ne=2500,ie=25;l(z,k,{handler:function(t,e,n){var i=n.pointerType==Et,o=n.pointerType==$t;if(!(o&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)W.call(this,e,n);else if(o&&Y.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var oe=w(pt.style,"touchAction"),re=oe!==i,se="compute",ae="auto",le="manipulation",ue="none",ce="pan-x",he="pan-y",de=X();V.prototype={set:function(t){t==se&&(t=this.compute()),re&&this.manager.element.style&&de[t]&&(this.manager.element.style[oe]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return s(this.manager.recognizers,function(e){c(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),G(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var i=this.actions,o=g(i,ue)&&!de[ue],r=g(i,he)&&!de[he],s=g(i,ce)&&!de[ce];if(o){var a=1===t.pointers.length,l=t.distance<2,u=t.deltaTime<250;if(a&&l&&u)return}return s&&r?void 0:o||r&&n&Rt||s&&n&Ft?this.preventSrc(e):void 0},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var pe=1,fe=2,ge=4,me=8,ve=me,ye=16,be=32;K.prototype={defaults:{},set:function(t){return ht(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(r(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=J(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return r(t,"dropRecognizeWith",this)?this:(t=J(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(r(t,"requireFailure",this))return this;var e=this.requireFail;return t=J(t,this),-1===v(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(r(t,"dropRequireFailure",this))return this;t=J(t,this);var e=v(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){n.manager.emit(e,t)}var n=this,i=this.state;me>i&&e(n.options.event+Z(i)),e(n.options.event),t.additionalEvent&&e(t.additionalEvent),i>=me&&e(n.options.event+Z(i))},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=be)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(be|pe)))return!1;t++}return!0},recognize:function(t){var e=ht({},t);return c(this.options.enable,[this,e])?(this.state&(ve|ye|be)&&(this.state=pe),this.state=this.process(e),void(this.state&(fe|ge|me|ye)&&this.tryEmit(e))):(this.reset(),void(this.state=be))},process:function(t){},getTouchAction:function(){},reset:function(){}},l(tt,K,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,i=e&(fe|ge),o=this.attrTest(t);return i&&(n&Nt||!o)?e|ye:i||o?n&Lt?e|me:e&fe?e|ge:fe:be}}),l(et,tt,{defaults:{event:"pan",threshold:10,pointers:1,direction:Bt},getTouchAction:function(){var t=this.options.direction,e=[];return t&Rt&&e.push(he),t&Ft&&e.push(ce),e},directionTest:function(t){var e=this.options,n=!0,i=t.distance,o=t.direction,r=t.deltaX,s=t.deltaY;return o&e.direction||(e.direction&Rt?(o=0===r?Mt:0>r?jt:Dt,n=r!=this.pX,i=Math.abs(t.deltaX)):(o=0===s?Mt:0>s?It:qt,n=s!=this.pY,i=Math.abs(t.deltaY))),t.direction=o,n&&i>e.threshold&&o&e.direction},attrTest:function(t){return tt.prototype.attrTest.call(this,t)&&(this.state&fe||!(this.state&fe)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Q(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),l(nt,tt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ue]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&fe)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),l(it,K,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ae]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!i||!n||t.eventType&(Lt|Nt)&&!r)this.reset();else if(t.eventType&At)this.reset(),this._timer=o(function(){this.state=ve,this.tryEmit()},e.time,this);else if(t.eventType&Lt)return ve;return be},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===ve&&(t&&t.eventType&Lt?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=vt(),this.manager.emit(this.options.event,this._input)))}}),l(ot,tt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ue]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&fe)}}),l(rt,tt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Rt|Ft,pointers:1},getTouchAction:function(){return et.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(Rt|Ft)?e=t.overallVelocity:n&Rt?e=t.overallVelocityX:n&Ft&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&mt(e)>this.options.velocity&&t.eventType&Lt},emit:function(t){var e=Q(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),l(st,K,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[le]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),t.eventType&At&&0===this.count)return this.failTimeout();if(i&&r&&n){if(t.eventType!=Lt)return this.failTimeout();var s=this.pTime?t.timeStamp-this.pTime<e.interval:!0,a=!this.pCenter||N(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,a&&s?this.count+=1:this.count=1,this._input=t;var l=this.count%e.taps;if(0===l)return this.hasRequireFailures()?(this._timer=o(function(){this.state=ve,this.tryEmit()},e.interval,this),fe):ve}return be},failTimeout:function(){return this._timer=o(function(){this.state=be},this.options.interval,this),be},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ve&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),at.VERSION="2.0.8",at.defaults={domEvents:!1,touchAction:se,enable:!0,inputTarget:null,inputClass:null,preset:[[ot,{enable:!1}],[nt,{enable:!1},["rotate"]],[rt,{direction:Rt}],[et,{direction:Rt},["swipe"]],[st],[st,{event:"doubletap",taps:2},["tap"]],[it]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var we=1,_e=2;lt.prototype={set:function(t){return ht(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?_e:we},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n,i=this.recognizers,o=e.curRecognizer;(!o||o&&o.state&ve)&&(o=e.curRecognizer=null);for(var r=0;r<i.length;)n=i[r],e.stopped===_e||o&&n!=o&&!n.canRecognizeWith(o)?n.reset():n.recognize(t),!o&&n.state&(fe|ge|me)&&(o=e.curRecognizer=n),r++}},get:function(t){if(t instanceof K)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(r(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(r(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=v(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==i&&e!==i){var n=this.handlers;return s(m(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this}},off:function(t,e){if(t!==i){var n=this.handlers;return s(m(t),function(t){e?n[t]&&n[t].splice(v(n[t],e),1):delete n[t]}),this}},emit:function(t,e){this.options.domEvents&&ct(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](e),i++}},destroy:function(){this.element&&ut(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},ht(at,{INPUT_START:At,INPUT_MOVE:Pt,INPUT_END:Lt,INPUT_CANCEL:Nt,STATE_POSSIBLE:pe,STATE_BEGAN:fe,STATE_CHANGED:ge,STATE_ENDED:me,STATE_RECOGNIZED:ve,STATE_CANCELLED:ye,STATE_FAILED:be,DIRECTION_NONE:Mt,DIRECTION_LEFT:jt,DIRECTION_RIGHT:Dt,DIRECTION_UP:It,DIRECTION_DOWN:qt,DIRECTION_HORIZONTAL:Rt,DIRECTION_VERTICAL:Ft,DIRECTION_ALL:Bt,Manager:lt,Input:k,TouchAction:V,TouchInput:B,MouseInput:I,PointerEventInput:q,TouchMouseInput:z,SingleTouchInput:R,Recognizer:K,AttrRecognizer:tt,Tap:st,Pan:et,Swipe:rt,Pinch:nt,Rotate:ot,Press:it,on:d,off:p,each:s,merge:bt,extend:yt,assign:ht,inherit:l,bindFn:u,prefixed:w});var xe="undefined"!=typeof t?t:"undefined"!=typeof self?self:{};xe.Hammer=at,"function"==typeof define&&define.amd?define(function(){return at}):"undefined"!=typeof module&&module.exports?module.exports=at:t[n]=at}(window,document,"Hammer"),Exposure.Lightbox=function(){this.$container=$("#lightbox"),this.$prevers=this.$container.find("[data-action=prev]"),this.$nexters=this.$container.find("[data-action=next]"),this.$closers=this.$container.find("[data-action=close]"),this.$photo=this.$container.find(".photo-lid"),this.isOpen=!1,this.$prevers.hide(),this.$nexters.hide(),this.currentPhoto=null,this.prevPhoto=null,this.nextPhoto=null,this.currentPhotoEl=null,this.prevPhotoEl=null,this.nextPhotoEl=null;var t=this;if(this.$container.find(".toggle-add-link-form").on("click",function(e){return e.preventDefault(),t.$container.find(".add-link-form").fadeToggle(),!1}),this.$container.find(".save-alt-hook").on("click",function(e){e.preventDefault(),t.saveAlt(this,e)}),this.$container.find(".add-link-form .save-ctl-hook").on("click",function(e){e.preventDefault();var n=t.$container.find(".add-link-form input"),i=_.escape(n.val());return i.length?i.length&&!i.match(/^https?:\/\/.+/i)?(Exposure.showMessage("Oops, that's not a valid URL"),n.focus()):(t.$container.find(".toggle-add-link-form .label").html("Edit Click-Through Link"),t.$container.find(".removelink-hook").removeClass("o-0 pointer-events-none"),Exposure.showMessage("Click Through Link Saved"),t.$container.find(".big-damn-link").attr("href",i).fadeIn().find("span").html(i),t.saveLink(this,e)):t.$container.find(".removelink-hook").click(),!1}),this.$container.find(".removelink-hook").on("click",function(e){return e.preventDefault(),t.$container.find(".add-link-form input").val(""),t.$container.find(".toggle-add-link-form .label").html("Add Click-Through Link or Alt Text"),t.$container.find(".removelink-hook").addClass("o-0 pointer-events-none"),Exposure.showMessage("Click Through Link Removed"),t.$container.find(".big-damn-link").attr("href",null).fadeOut().find("span").html(""),t.$container.find(".add-link-form").fadeOut(),t.saveLink(this,e),!1}),this.$container.find('[data-action="admin-curate-photo"]').on("click",function(t){return t.preventDefault(),$.post("/api/v1/admin/photos/toggle-curated?key="+$(this).attr("data-photo-key")),$el=$(this),isCurated=!$el.data("is-curated"),$el.data("is-curated",isCurated),$el.html("Done."),setTimeout(function(){$el.html((isCurated?"Un-":"")+"Curate Photo")},2e3),!1}),this.$closers.on("click",function(e){return e.preventDefault(),t.close(),t.$container.find(".add-link-form").fadeOut(),!1}),this.$prevers.on("click",function(e){return e.preventDefault(),t.presentPhoto(t.getPrevPhoto()),!1}),this.$nexters.on("click",function(e){return e.preventDefault(),t.presentPhoto(t.getNextPhoto()),!1}),this.$container[0]){var e=new Hammer(this.$container[0],{domEvents:!0});e.on("swipeleft",function(e){return t.presentPhoto(t.getNextPhoto()),!1}),e.on("swiperight",function(e){return t.presentPhoto(t.getPrevPhoto()),!1})}return $(document).bind("keydown",function(e){"INPUT"!=document.activeElement.nodeName&&t._isOpen()&&(27==e.which?(t.close(),t.$container.find(".add-link-form").fadeOut()):37==e.which?t.presentPhoto(t.getPrevPhoto()):39==e.which&&t.presentPhoto(t.getNextPhoto()))}),$("body").on("click","[data-action=save-photo-details]",function(e){return e.preventDefault(),t.savePhotoDetails(this,e),!1}),this},Exposure.Lightbox.prototype._isOpen=function(){return this.isOpen},Exposure.Lightbox.prototype.setURL=function(t){try{history.pushState("",document.title,"/"+$("#post").attr("data-slug")+t)}catch(e){}},Exposure.Lightbox.prototype.photoModelFromKey=function(t){var e;for(gid in window.photoGroups.models)if(e=window.photoGroups.models[gid].photos.get(t))return e},Exposure.Lightbox.prototype.getPrevPhoto=function(){return this.prevPhoto},Exposure.Lightbox.prototype.getNextPhoto=function(){return this.nextPhoto},Exposure.Lightbox.prototype.presentPhoto=function(t){if(t){var e=t.attributes.asset_url.split(".").slice(-1)[0].toLowerCase();this.currentPhoto=t,this.setURL("/photos/"+t.attributes.id);var n="gif"!==e.toLowerCase()?100*Math.ceil($(window).width()/100):"600",i="gif"!==e.toLowerCase()?"?auto=webp":"",o=$("html").hasClass("highresdisplay")&&"gif"!==e.toLowerCase()?"2x":"1x",r=$("div.photo[data-photo-key="+t.attributes.photo_key+"]");this.currentPhotoEl=r,this.$photo.css("background-image",'url("'.concat(t.attributes.asset_url,";").concat(n,"x_/").concat(o,"."+e.concat(i)+'")'));var s=$(".photo"),a=s.index(this.currentPhotoEl);a>0?this.prevPhotoEl=$(s[a-1]):this.prevPhotoEl=null,a<s.length-1?this.nextPhotoEl=$(s[a+1]):this.nextPhotoEl=null,this.prevPhotoEl?(this.prevPhoto=this.photoModelFromKey(this.prevPhotoEl.attr("data-photo-key")),this.$prevers.show()):(this.prevPhoto=null,this.$prevers.hide()),this.nextPhotoEl?(this.nextPhoto=this.photoModelFromKey(this.nextPhotoEl.attr("data-photo-key")),this.$nexters.show()):(this.nextPhoto=null,this.$nexters.hide());var l=this.currentPhoto.attributes.caption;l?(this.$container.find("input.caption").val(l),this.$container.find("span.caption-render").html(l)):(this.$container.find("input.caption").val(""),this.$container.find("span.caption-render").html("")),this.renderLink(this.currentPhoto),this.renderAlt(this.currentPhoto),this.updateShareUrls(this.currentPhoto),this.$container.find('[data-action="admin-curate-photo"]').attr("data-photo-key",this.currentPhotoEl.attr("data-photo-key")).html((this.currentPhotoEl.data("is-curated")?"Un-":"")+"Curate Photo"),this.$container.find("[data-download-link]")&&(window.postSeed.can_dl_photos?this.$container.find("[data-download-link]").attr("href",window.location.href+"/download").show():this.$container.find("[data-download-link]").hide())}},Exposure.Lightbox.prototype.renderAlt=function(t){if(formEl=this.$container.find(".add-alt-text-form"),t.attributes.alt_text){var e=_.escape(t.attributes.alt_text);formEl.find("textarea").val(e)}else formEl.find("textarea").val("")},Exposure.Lightbox.prototype.renderLink=function(t){var e=this.$container.find(".big-damn-link"),n=this.$container.find(".add-link-form"),i=(this.$container.find(".toggle-add-link-form"),this.$container.find(".removelink-hook"));if(t.attributes.link_url){
var o=_.escape(t.attributes.link_url);e.find("span").html(o),e.attr("href",o).show(),n.find("input").val(o),$(".toggle-add-link-form .label").text("Edit Click-Through Link"),i.removeClass("o-0 pointer-events-none")}else e.hide().attr("href",null).find("span").html(""),n.find("input").val(null),$(".toggle-add-link-form .label").text("Add Click-Through Link or Alt Text")},Exposure.Lightbox.prototype.updateShareUrls=function(t){var e=this.$container.find(".share-options.lightbox");if(e.length){var n="",i=(e.attr("data-username"),e.attr("data-title")),o=e.attr("data-realname"),r=e.attr("data-twitter")?e.attr("data-twitter"):null,s=e.attr("data-post-url").replace(":id",t.attributes.id),a=r?"@"+r:o,l=e.find("a.twitter");n=l.attr("data-proto").replace("{twitter}",r).replace("{url}",s).replace("{bestname}",a),l.attr("href",n),e.find("a.facebook").attr("href",e.find("a.facebook").attr("data-proto").replace("{url}",s));var u=e.find("a.pinterest"),c=t.attributes.asset_url.split(".").slice(-1)[0].toLowerCase(),h=t.attributes.asset_url+";quality(95)/resize(700,_)."+c,d=[i,o].join(" by ");n=u.attr("data-proto").replace("{media}",h).replace("{url}",s).replace("{text}",d),u.attr("href",n);var p=e.find("a.email");n=p.attr("data-proto").replace("{body}",s),p.attr("href",n)}},Exposure.Lightbox.prototype.open=function(t){this.isOpen=!0,keypress.stop_listening(),this.presentPhoto(t),this.$container.show()},Exposure.Lightbox.prototype.close=function(){this.isOpen=!1,this.setURL(""),this.currentPhoto=null,this.prevPhoto=null,this.nextPhoto=null,this.currentPhotoEl=null,this.prevPhotoEl=null,this.nextPhotoEl=null,this.$container.hide(),keypress.listen()},Exposure.Lightbox.prototype.saveLink=function(t,e){Exposure.loading(!0),this.currentPhoto.save({link_url:this.$container.find(".add-link-form input").val()},{success:function(){Exposure.loading(!1)},error:function(){Exposure.loading(!1),Exposure.showMessage("Oops, something went wrong. Please try again")}})},Exposure.Lightbox.prototype.saveAlt=function(t,e){Exposure.loading(!0),this.currentPhoto.save({alt_text:this.$container.find(".add-alt-text-form textarea").val()},{success:function(){Exposure.loading(!1),Exposure.showMessage("Alt Text Description saved")},error:function(){Exposure.loading(!1),Exposure.showMessage("Oops, something went wrong. Please try again")}})},Exposure.Lightbox.prototype.savePhotoDetails=function(t,e){Exposure.loading(!0),this.currentPhoto.save({caption:this.$container.find("input.caption").val()},{success:function(){Exposure.loading(!1),Exposure.showMessage("Photo details saved")},error:function(){Exposure.loading(!1),Exposure.showMessage("Oops, something went wrong. Please try again.")}})},window.$lightbox=new Exposure.Lightbox;var lightboxPathMatcher=window.location.pathname.match(/photos\/(\d+)/);if(lightboxPathMatcher&&lightboxPathMatcher[1]){var popID=lightboxPathMatcher[1];$(window).on("load",function(){var t=$("[data-photo-popper-id="+popID+"]").attr("data-photo-key"),e=window.$lightbox.photoModelFromKey(t);requestAnimationFrame(function(){window.$lightbox.open(e)})})}!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ClipboardJS=e():t.ClipboardJS=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=3)}([function(t,e,n){var i,o,r;!function(s,a){o=[t,n(7)],i=a,r="function"==typeof i?i.apply(e,o):i,!(void 0!==r&&(t.exports=r))}(this,function(t,e){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=n(e),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(){function t(e){i(this,t),this.resolveOptions(e),this.initSelection()}return s(t,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=t.action,this.container=t.container,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,e="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[e?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=o["default"](this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=o["default"](this.target),this.copyText()}},{key:"copyText",value:function(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)}},{key:"handleResult",value:function(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!==("undefined"==typeof t?"undefined":r(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),t}();t.exports=a})},function(t,e,n){function i(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!a.string(e))throw new TypeError("Second argument must be a String");if(!a.fn(n))throw new TypeError("Third argument must be a Function");if(a.node(t))return o(t,e,n);if(a.nodeList(t))return r(t,e,n);if(a.string(t))return s(t,e,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function o(t,e,n){return t.addEventListener(e,n),{destroy:function(){t.removeEventListener(e,n)}}}function r(t,e,n){return Array.prototype.forEach.call(t,function(t){t.addEventListener(e,n)}),{destroy:function(){Array.prototype.forEach.call(t,function(t){t.removeEventListener(e,n)})}}}function s(t,e,n){return l(document.body,t,e,n)}var a=n(6),l=n(5);t.exports=i},function(t,e){function n(){}n.prototype={on:function(t,e,n){var i=this.e||(this.e={});return(i[t]||(i[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){function i(){o.off(t,i),e.apply(n,arguments)}var o=this;return i._=e,this.on(t,i,n)},emit:function(t){var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),i=0,o=n.length;for(i;o>i;i++)n[i].fn.apply(n[i].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),i=n[t],o=[];if(i&&e)for(var r=0,s=i.length;s>r;r++)i[r].fn!==e&&i[r].fn._!==e&&o.push(i[r]);return o.length?n[t]=o:delete n[t],this}},t.exports=n},function(t,e,n){var i,o,r;!function(s,a){o=[t,n(0),n(2),n(1)],i=a,r="function"==typeof i?i.apply(e,o):i,!(void 0!==r&&(t.exports=r))}(this,function(t,e,n,i){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(t,e){var n="data-clipboard-"+t;if(e.hasAttribute(n))return e.getAttribute(n)}var u=o(e),c=o(n),h=o(i),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),f=function(t){function e(t,n){r(this,e);var i=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.resolveOptions(n),i.listenClick(t),i}return a(e,t),p(e,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText,this.container="object"===d(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=h["default"](t,"click",function(t){return e.onClick(t)})}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new u["default"]({action:this.action(e),target:this.target(e),text:this.text(e),container:this.container,trigger:e,emitter:this})}},{key:"defaultAction",value:function(t){return l("action",t)}},{key:"defaultTarget",value:function(t){var e=l("target",t);return e?document.querySelector(e):void 0}},{key:"defaultText",value:function(t){return l("text",t)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],e="string"==typeof t?[t]:t,n=!!document.queryCommandSupported;return e.forEach(function(t){n=n&&!!document.queryCommandSupported(t)}),n}}]),e}(c["default"]);t.exports=f})},function(t,e){function n(t,e){for(;t&&t.nodeType!==i;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}var i=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var o=Element.prototype;o.matches=o.matchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector||o.webkitMatchesSelector}t.exports=n},function(t,e,n){function i(t,e,n,i,o){var s=r.apply(this,arguments);return t.addEventListener(n,s,o),{destroy:function(){t.removeEventListener(n,s,o)}}}function o(t,e,n,o,r){return"function"==typeof t.addEventListener?i.apply(null,arguments):"function"==typeof n?i.bind(null,document).apply(null,arguments):("string"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,function(t){return i(t,e,n,o,r)}))}function r(t,e,n,i){return function(n){n.delegateTarget=s(n.target,e),n.delegateTarget&&i.call(t,n)}}var s=n(4);t.exports=o},function(t,e){e.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},e.nodeList=function(t){var n=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in t&&(0===t.length||e.node(t[0]))},e.string=function(t){return"string"==typeof t||t instanceof String},e.fn=function(t){var e=Object.prototype.toString.call(t);return"[object Function]"===e}},function(t,e){function n(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var n=t.hasAttribute("readonly");n||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),n||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var i=window.getSelection(),o=document.createRange();o.selectNodeContents(t),i.removeAllRanges(),i.addRange(o),e=i.toString()}return e}t.exports=n}])});var updateCreateFormUsingAccountType=function(){var t=$("select.member-type");$(".form-row.names");type=t.val(),"personal"==type||"edu"==type?$(".company-input").addClass("hide"):$(".company-input").removeClass("hide");var e={brand:"Type your brand or business name",charity:"Type your nonprofits name.",sports:"Type your team name"}[type],n={brand:"Brand or business name",charity:"Nonprofit name",sports:"Team name"}[type];$("#user_user_company_name").attr("placeholder",e),$("label[for=user_company_name]").html(n)};$(function(){var t=$("select.member-type");t.length&&(t.bind("change",updateCreateFormUsingAccountType),updateCreateFormUsingAccountType(t.val()))}),$("form#invite-form").bind("submit",function(t){t.preventDefault();var e=$(this).find("input[type=email]");return e.removeClass("error animated pulse"),$.post($(this).attr("action"),{email:e.val(),source:$(this).find("input[name=source]").val()}).always(function(){$(".inputs").transition({scale:0},"ease").slideUp("fast"),$(".thank-you").show()}),!1}),$(".avatar-upload input[name=datafile]").on("click",function(t){t.preventDefault(),$("#user-photo-file").remove();var e=$('<input style="display:none;height:0;position:absolute;top:0;left:0" type="file" id="user-photo-file">');$("body").append(e);return e.on("change",function(t){var e=jQuery.Event("drop");e.target={files:[]},e.target.files=t.target.files,$(".avatar-upload .avatar-wrapper").trigger(e)}),e.click(),!1}),$(".author-avatar.editable, .avatar-upload .avatar-wrapper").dropArea().bind("drop",function(t){t.preventDefault();var e=$(this),n=(t.originalEvent?t.originalEvent.dataTransfer:t.target).files[0],i=new FileReader;if(/image/.test(n.type)){var o=new FormData;o.append("user[avatar]",n),Photo.uploadingCount++,Exposure.loading(!0),e.parent().find("input").addClass("processing"),$.ajax({url:"/change-avatar",data:o,cache:!1,contentType:!1,processData:!1,type:"PUT"}).done(function(t){Exposure.showMessage("Your avatar has been updated")}).fail(function(t){Exposure.showMessage("Your avatar photo didn\u2019t upload. Please try again.")}).always(function(){Photo.uploadingCount--,Exposure.loading(!1),e.parent().find("input").removeClass("processing")}),i.onload=function(t){canvasResize(n,{width:300,height:300,crop:!0,quality:95,callback:function(t,n,i){e.find("img").attr("src",t)}})},i.readAsDataURL(n)}}),keypress.combo("left",function(){var t=$("#story-prev-next a.prev");t.length&&window.location.replace(t.attr("href"))}),keypress.combo("right",function(){var t=$("#story-prev-next a.next");t.length&&window.location.replace(t.attr("href"))}),$("input[data-action=update-email-pref]").bind("change",function(t){t.preventDefault();var e=$(this).attr("data-pref"),n=$(this).is(":checked");return Exposure.loading(!0),$.post("/settings/email/update-pref/"+e,{on:n}).always(function(){Exposure.loading(!1),window.noMessages!==!0&&Exposure.showMessage("You\u2019re now "+(n?"subscribed to ":"unsubscribed from ")+"that email.")}),!1}),$(".clear-password-input").on("click",function(){$(".site-password").find("input:text").val(""),Exposure.showMessage("Removing password")}),$("#profile-password-input").keypress(function(t){return/[0-9a-zA-Z-]/.test(String.fromCharCode(t.which))?void 0:!1}),$("input[data-action=update-pref]").on("change",function(t){t.preventDefault();var e=$(this).attr("data-pref"),n=$(this).is(":checked"),i={enable_rss:"RSS preferences updated",disable_seo:"Hide from search engine "+(n?"enabled":"disabled"),toggle_search_member:"Story search "+(n?"enabled":"disabled"),remove_branding:"Branding preferences updated",toggle_subscriber_send:"Story notifications emails "+(n?"enabled":"disabled"),toggle_subscriber_count:"Visible post subscriber count "+(n?"enabled":"disabled"),allow_subs:"Story Mailing List System "+(n?"enabled":"disabled"),toggle_internal_usage_tracking:"Internal Usage Tracking "+(n?"enabled":"disabled"),toggle_visitor_analytics:"Anonymous Visitors Analytics "+(n?"enabled":"disabled"),toggle_featured_content:"Allow Featured Content "+(n?"enabled":"disabled"),toggle_contact_member:"Contact Form "+(n?"enabled":"disabled"),toggle_site_cta:"Site Call to Action "+(n?"enabled":"disabled"),toggle_site_cta_new_window:"Open in New Window "+(n?"enabled":"disabled"),toggle_advanced_accessibility:"Advanced Accessibility "+(n?"enabled":"disabled"),enable_opt_ins:"Opt-in preferences updated",beta_flag:"Beta testing "+(n?"enabled \ud83e\udd13":"disabled"),display_brand_menu_social_links:"Display Social Links In Menu "+(n?"enabled":"disabled"),menu_builder_links_new_tab:"Open Menu Item Links in New Window "+(n?"enabled":"disabled"),display_brand_menu:"Display Menu "+(n?"enabled":"disabled"),display_brand_menu_subscribe:"Display Subscribe Button in Menu "+(n?"enabled":"disabled"),site_categories_feed:"Site Categories Feed "+(n?"enabled":"disabled"),toggle_lightbox:"Photos Open in Lightbox "+(n?"enabled":"disabled"),toggle_custom_site_color_scheme:"Dark Mode "+(n?"enabled":"disabled"),toggle_story_animations:"Site and story animation effects "+(n?"enabled":"disabled"),toggle_display_date:"Published dates "+(n?"now hidden":"now visible"),toggle_custom_fonts:"Custom Fonts "+(n?"enabled":"disabled"),brand_type_heading_weight:"Heading Bold Style "+(n?"enabled":"disabled"),brand_type_heading_case:"Heading Uppercase Style "+(n?"enabled":"disabled"),brand_menu_dark_theme:"Inverted color scheme "+(n?"enabled":"disabled"),brand_menu_accent:"Accent color hint "+(n?"enabled":"disabled"),brand_menu_accent_background:"Accent background color "+(n?"enabled":"disabled"),brand_menu_primary_background:"Custom Menu Background color "+(n?"enabled":"disabled"),display_brand_menu_footer:"Display Footer Menu Items "+(n?"enabled":"disabled"),display_brand_menu_native_exposure:"Native Exposure Items "+(n?"enabled":"disabled"),display_brand_menu_use_website_url:"Use website URL as logo link "+(n?"enabled":"disabled")};return Exposure.loading(!0),$.post("/settings/update-pref/"+e,{on:n}).always(function(){Exposure.loading(!1),window.noMessages!==!0&&Exposure.showMessage(i[e])}),!1}),$("#user_bio,#user_custom_story_subscribe_terms").maxlength({counterContainer:$("span.chr-limit"),text:"%length/%maxlength"}),"#new"==window.location.hash&&($("div.author-avatar.editable").tipsy({trigger:"manual"}).tipsy("show"),window.location.hash="");for(var socialLinks=$(".user-details #social-links a"),socialLink,inc,i=0,c=socialLinks.length;c>i;i++)socialLink=$(socialLinks[i]),inc=.5*(i+1)+"s",socialLink.parent().css({"-webkit-animation-delay":inc,"-moz-animation-delay":inc}).addClass("animated fadeIn").show();if($("#user_custom_domain").on("keyup",function(t){var e=$("#custom-domain-notice").find("a");$(this).val()?($("#custom-domain-notice").show().find("p b").html($(this).val()),e.attr("href",e.attr("data-base-href")+"?domain="+$(this).val())):($("#custom-domain-notice").hide().find("p b").html("your-site.com"),e.attr("href",e.attr("data-base-href")))}),$("body.signed-in .faux-tile-create-post").on("click",function(){var t=$(this).find("a");t.length&&$.rails.handleMethod(t)}),$(".profile-layout-select a.option-chooser").on("click",function(t){t.preventDefault();var e=$(this).attr("data-val");return $(".profile-layout-select a.option-chooser").removeClass("design-active"),$(this).addClass("design-active"),Exposure.loading(!0),$.post("/settings/update-pref/profile_layout",{val:e}).always(function(){Exposure.loading(!1),Exposure.showMessage("Site layout saved")}),!1}),$(".type-theme-select .type-option").on("click",function(t){t.preventDefault();var e=$(this).attr("data-val");return $(".type-theme-select .type-option").removeClass("design-active"),$(this).addClass("design-active"),Exposure.loading(!0),$.post("/settings/update-pref/type_theme",{val:e}).always(function(){Exposure.loading(!1),Exposure.showMessage("Type theme updated")}),!1}),$(".brand-button-shape .shape-option").on("click",function(t){t.preventDefault();var e=$(this).attr("data-val");return $(".brand-button-shape .shape-option").removeClass("bg-off-black"),$(this).addClass("bg-off-black"),Exposure.loading(!0),$.post("/settings/update-pref/brand_button_shape",{val:e}).always(function(){Exposure.loading(!1),Exposure.showMessage("Button shape updated")}),!1}),$(".toggle-brand-type-heading-options").on("click",function(t){return t.preventDefault(),$(".brand-type-heading-options").slideToggle("fast"),$(".brand-type-body-options").slideUp("fast"),$(".toggle-brand-type-heading-options .icon-down-arrow-alt").toggleClass("icon-cross"),$(".toggle-brand-type-body-options .icon-down-arrow-alt").removeClass("icon-cross"),!1}),$("div[data-action=update-brand-type-heading]").on("click",function(t){t.preventDefault();var e=$(this).attr("data-pref"),n=$(this).attr("type-name");return Exposure.loading(!0),$(".brand-type-heading-options .border-black").removeClass("border-black"),$(".toggle-brand-type-heading-options .type-name-placeholder").text(n),$(".preview-brand-type-heading").removeClass(function(t,e){return(e.match(/(^|\s)type-\S+/g)||[]).join(" ")}),$(this).addClass("border-black"),$(".preview-brand-type-heading").addClass("type-"+e),$.post("/settings/update-pref/brand_heading_font",{val:e}).always(function(){Exposure.loading(!1),Exposure.showMessage("Heading type selection updated")}),$.post("/settings/update-pref/type_theme",{val:0}),!1}),$(".toggle-brand-type-body-options").on("click",function(t){return t.preventDefault(),$(".brand-type-body-options").slideToggle("fast"),$(".brand-type-heading-options").slideUp("fast"),$(".toggle-brand-type-body-options .icon-down-arrow-alt").toggleClass("icon-cross"),$(".toggle-brand-type-headin-options .icon-down-arrow-alt").removeClass("icon-cross"),!1}),$("div[data-action=update-brand-type-body]").on("click",function(t){t.preventDefault();var e=$(this).attr("data-pref"),n=$(this).attr("type-name");return Exposure.loading(!0),$(".brand-type-body-options .border-black").removeClass("border-black"),$(".toggle-brand-type-body-options .type-name-placeholder").text(n),$(".preview-brand-type-body").removeClass(function(t,e){return(e.match(/(^|\s)type-\S+/g)||[]).join(" ")}),$(this).addClass("border-black"),$(".preview-brand-type-body").addClass("type-"+e),$.post("/settings/update-pref/brand_body_font",{val:e}).always(function(){Exposure.loading(!1),Exposure.showMessage("Body type selection updated")}),!1}),$("div[data-action=reset-brand-type]").on("click",function(t){t.preventDefault();var e=$(t.target);$(".type-selection").slideUp("fast");var n=new ExposureConfirmModal(e,"#confirm-brand-type-reset",{title:"Reset Typography Selection",description:"This will remove any custom selection for heading and body typography and use the Exposure default appearance.",yesLabel:"Yes, reset selection",noLabel:"No, Nevermind"},function(){$(".preview-brand-type-heading,.preview-brand-type-body").removeClass(function(t,e){return(e.match(/(^|\s)type-\S+/g)||[]).join(" ")}),$(".legacy-font-notice").hide(),$(".brand-type-body-options .border-black,.brand-type-heading-options .border-black,.type-theme-select .type-option").removeClass("border-black"),$(".type-theme-select .type-option").removeClass("design-active"),$(".preview-brand-type-heading").addClass("type-GTWALSHEIM,"),$(".preview-brand-type-heading").css("font-weight","bold"),$(".preview-brand-type-heading").css("text-transform","uppercase"),$(".toggle-brand-type-heading-options .type-name-placeholder").text("Gtwalsheim"),$(".preview-brand-type-body").addClass("type-EB_GARAMOND"),$(".toggle-brand-type-body-options .type-name-placeholder").text("EB Garamond"),$(".type-theme-select .default-theme").addClass("design-active"),$(".custom-font-notice").hide(),$(".custom-font-disable").removeClass("disabled-block"),$(".custom-font-inputs").addClass("disabled-block"),$("#toggle-brand-type-heading-weight,#toggle-brand-type-heading-weight-custom,#toggle-brand-type-heading-case,#toggle-brand-type-heading-case-custom").prop("checked",!0),$("#toggle-use-custom-fonts-rich-toggle").prop("checked",!1),$.post("/settings/update-pref/brand_body_font",{val:"EB_GARAMOND"}),$.post("/settings/update-pref/brand_heading_font",{val:"GTWalsheim"}),$.post("/settings/update-pref/brand_font_theme",{val:"classic"}),$.post("/settings/update-pref/brand_type_heading_case",{on:!0}),$.post("/settings/update-pref/brand_type_heading_weight",{on:!0}),$.post("/settings/update-pref/toggle_custom_fonts",{on:!1}),$.post("/settings/update-pref/type_theme",{val:0}).done(function(){Exposure.showMessage("Type Selection reset")}).fail(function(){Exposure.showMessage("There was an error saving resetting your type selection, please try again")})},function(){});n.show()}),$(".design-options").click(function(t){0===$(t.target).closest(".typography").length&&$(".type-selection").slideUp("fast")}),$("#toggle-brand-type-heading-weight").change(function(){$(this).is(":checked")?$(".preview-brand-type-heading").css("font-weight","bold"):$(".preview-brand-type-heading").css("font-weight","normal")}),$("#toggle-brand-type-heading-case").change(function(){$(this).is(":checked")?$(".preview-brand-type-heading").css("text-transform","uppercase"):$(".preview-brand-type-heading").css("text-transform","none")}),$("a[data-action=font-selection-tab]").on("click",function(t){t.preventDefault(),$(".type-selection").slideUp("fast"),$(this).addClass("active"),$(".type-font-selection").removeClass("hide"),$(".type-theme-selection").addClass("hide"),$(".type-custom-fonts").addClass("hide"),$("a[data-action=type-themes-tab]").removeClass("active"),$("a[data-action=type-custom-fonts-tab]").removeClass("active")}),$("a[data-action=type-themes-tab]").on("click",function(t){t.preventDefault(),$(".type-selection").slideUp("fast"),$(this).addClass("active"),$(".type-theme-selection").removeClass("hide"),$(".type-font-selection").addClass("hide"),$(".type-custom-fonts").addClass("hide"),$("a[data-action=font-selection-tab]").removeClass("active"),$("a[data-action=type-custom-fonts-tab]").removeClass("active")}),$("a[data-action=type-custom-fonts-tab]").on("click",function(t){t.preventDefault(),$(".type-selection").slideUp("fast"),$("a[data-action=type-custom-fonts-tab]").addClass("active"),$(".type-theme-selection").addClass("hide"),$(".type-font-selection").addClass("hide"),$(".type-custom-fonts").removeClass("hide"),$("a[data-action=font-selection-tab]").removeClass("active"),$("a[data-action=type-themes-tab]").removeClass("active")}),$("#toggle-use-custom-fonts-rich-toggle").change(function(){$(this).is(":checked")?($(".custom-font-notice").show(),$(".custom-font-disable").addClass("disabled-block"),$(".custom-font-inputs").removeClass("disabled-block")):($(".custom-font-notice").hide(),$(".custom-font-disable").removeClass("disabled-block"),$(".custom-font-inputs").addClass("disabled-block"))}),$(".brand-button-shape .button-shape-rounded").on("click",function(t){return t.preventDefault(),$(".preview-color-button-background").css("border-radius","5px"),!1}),$(".brand-button-shape .button-shape-pill").on("click",function(t){return t.preventDefault(),$(".preview-color-button-background").css("border-radius","100px"),!1}),$(".brand-button-shape .button-shape-square").on("click",function(t){return t.preventDefault(),$(".preview-color-button-background").css("border-radius","0px"),!1}),$(".embed-profile-hook").on("click",function(t){return t.preventDefault(),$modal=$("#embed-modal"),$modal.is(":visible")?$modal.fadeOut():$modal.fadeIn(),!1}),$("#embed-modal a.close-modal").on("click",function(t){return t.preventDefault(),$("body").removeClass("no-scroll"),$("#embed-modal").fadeOut(),!1}),$(".edit_user #user_location").length){var userLocationAutocompleter=new google.maps.places.Autocomplete($(".edit_user #user_location")[0],{});google.maps.event.addDomListener(userLocationAutocompleter,"place_changed",function(){console.log(userLocationAutocompleter.getPlace())})}$("#facebook-connect").click(function(t){t.preventDefault();var e=function(t){$.post("/auth-service",{"auth[remote_id]":t.userID,"auth[service]":"facebook","auth[access_token]":t.accessToken,"auth[access_token_expires_in]":t.expiresIn},function(){window.location=window.location.toString()}).fail(function(){window.location=window.location.toString()})};FB.getLoginStatus(function(t){"connected"==t.status?e(t.authResponse):FB.login(function(t){"connected"==t.status?e(t.authResponse):console.log("Rejected auth")},{scope:"public_profile,email"})})}),$(".edit-meta-tab").on("click",function(t){t.preventDefault(),$(".meta-tag-preview").toggleClass("hide"),$(".meta-tag-inputs").toggleClass("hide"),$(".preview-meta-tab").removeClass("active"),$(this).addClass("active")}),$(".preview-meta-tab").on("click",function(t){t.preventDefault(),$(".meta-tag-preview").toggleClass("hide"),$(".meta-tag-inputs").toggleClass("hide"),$(".edit-meta-tab").removeClass("active"),$(this).addClass("active")}),$(".edit_user").on("submit",function(t){t.preventDefault(),$.ajax($(t.target).attr("action"),{method:"PATCH",data:{"user[meta_title]":$("#user_meta_title").val(),"user[meta_desc]":$("#user_meta_desc").val(),"user[meta_kw]":$("#user_meta_kw").val(),is_ajax:!0}}).done(function(){Exposure.showMessage("Your meta tags have been saved")}).fail(function(){Exposure.showMessage("There was an error saving your meta tags. Please try again.")})}),$(".account-form-basic-info").on("submit",function(t){t.preventDefault(),$.ajax($(t.target).attr("action"),{method:"PATCH",data:{"user[email]":$("#user_email").val(),"user[account_type]":$("#account_type").val(),"user[company_name]":$("#user_company_name").val(),"user[first_name]":$("#user_first_name").val(),"user[last_name]":$("#user_last_name").val(),is_ajax:!0}}).done(function(){Exposure.showMessage("Your account details have been saved")}).fail(function(){Exposure.showMessage("There was an error saving your account details, please try again")})}),$(".account-form-site-password").on("submit",function(t){t.preventDefault();var e=$(t.target),n=new ExposureConfirmModal(e,"#confirm-site-password",{title:"Save Site Password",description:"Are you sure that you want to save changes to your site password?",yesLabel:"Yes, change it",noLabel:"No, Nevermind"},function(){e.parent().parent().parent();t.preventDefault(),$.ajax($(t.target).attr("action"),{method:"PATCH",data:{"user[profile_pass]":$("#profile-password-input").val(),is_ajax:!0}}).done(function(){Exposure.showMessage("Your new site password have been saved and changed")}).fail(function(){Exposure.showMessage("Your new site password have been saved and changed")})},function(){});n.show()}),$(".no-space-input").keypress(function(t){return/[0-9a-zA-Z-]/.test(String.fromCharCode(t.which))?void 0:!1}),$(function(){$("#user_username").keyup(function(){$(".username-url-preview").text(this.value)})}),$(".account-form-username").on("submit",function(t){t.preventDefault();var e=$(t.target),n=new ExposureConfirmModal(e,"#confirm-username-change",{title:"Change Username",description:"Are you sure that you want to change your username? This will also change your Exposure URL and potential break any links you have already shared to your stories.",
yesLabel:"Yes, change it",noLabel:"No, Nevermind"},function(){e.parent().parent().parent();t.preventDefault(),$.ajax($(t.target).attr("action"),{method:"PATCH",data:{"user[username]":$("#user_username").val(),is_ajax:!0}}).done(function(){Exposure.showMessage("Your new username have been saved and changed")}).fail(function(){Exposure.showMessage("There was an error saving your new username, please try again")})},function(){});n.show()}),$(".account-form-security").on("submit",function(t){t.preventDefault();var e=$(t.target),n=new ExposureConfirmModal(e,"#confirm-password-change",{title:"Change Password",description:"Are you sure that you want to change your account password?",yesLabel:"Yes, change it",noLabel:"No, Nevermind"},function(){e.parent().parent().parent();t.preventDefault(),$.ajax($(t.target).attr("action"),{method:"PATCH",data:{"user[password]":$("#user_password").val(),is_ajax:!0}}).done(function(){Exposure.showMessage("Your new account password have been saved and changed")}).fail(function(){Exposure.showMessage("There was an error saving your new password, please try again")})},function(){});n.show()}),$(".account-form-personal-details").on("submit",function(t){t.preventDefault(),$.ajax($(t.target).attr("action"),{method:"PATCH",data:{"user[contact_number]":$("#user_contact_number").val(),"user[company_role]":$("#user_company_role").val(),"user[postal_address]":$("#user_postal_address").val(),is_ajax:!0}}).done(function(){Exposure.showMessage("Your personal details have been saved")}).fail(function(){Exposure.showMessage("There was an error saving your personal details, please try again")})}),$(".site-cta-form").on("submit",function(t){t.preventDefault(),$.ajax($(t.target).attr("action"),{method:"PATCH",data:{"user[site_cta_url]":$("#user_site_cta_url").val(),"user[site_cta_label]":$("#user_site_cta_label").val(),is_ajax:!0}}).done(function(){Exposure.showMessage("Call to Action Details Saved")}).fail(function(){Exposure.showMessage("There was an error saving your Call To Action details, please try again")})}),$(".account-form-contact").on("submit",function(t){t.preventDefault(),$.ajax($(t.target).attr("action"),{method:"PATCH",data:{"user[public_email]":$("#public_email").val(),is_ajax:!0}}).done(function(){Exposure.showMessage("Your Contact Email has been saved")}).fail(function(){Exposure.showMessage("There was an error saving your contact email, please try again")})}),$(".account-form-bio").on("submit",function(t){t.preventDefault(),$.ajax($(t.target).attr("action"),{method:"PATCH",data:{"user[bio]":$("#user_bio").val(),is_ajax:!0}}).done(function(){Exposure.showMessage("Your Bio has been saved")}).fail(function(){Exposure.showMessage("There was an error saving your bio, please try again")})}),$(".account-form-social").on("submit",function(t){t.preventDefault(),$.ajax($(t.target).attr("action"),{method:"PATCH",data:{"user[url]":$("#personal_url").val(),"user[insta_username]":$("#insta_username").val(),"user[twitter_username]":$("#twitter_username").val(),"user[flickr_username]":$("#flickr_username").val(),"user[youtube_username]":$("#youtube_username").val(),"user[fb_username]":$("#fb_username").val(),"user[social_pinterest]":$("#social_pinterest").val(),"user[social_snapchat]":$("#social_snapchat").val(),"user[social_vsco]":$("#social_vsco").val(),"user[social_linkedin]":$("#social_linkedin").val(),"user[social_500px]":$("#social_500px").val(),"user[social_wp]":$("#social_wp").val(),is_ajax:!0}}).done(function(){Exposure.showMessage("Your links have been saved")}).fail(function(){Exposure.showMessage("There was an error saving your links, please try again")})}),$("#user_meta_title").on("change",function(){$(".preview-title").text($(this).val())}),$("#user_meta_desc").on("change",function(){$(".preview-desc").text($(this).val())}),$("#clear-tags").on("click",function(t){t.preventDefault();var e=$(t.target),n=new ExposureConfirmModal(e,"#confirm-reset-tags",{title:"Reset All Tags",description:"Are you sure that you want to reset all of your current meta&nbsp;tags?",yesLabel:"Yes, reset all tags",noLabel:"No, Nevermind"},function(){var t=e.parent().parent().parent();$(".share-image").addClass("muted"),$.ajax(t.attr("action"),{method:"PATCH",data:{"user[meta_title]":$("#user_meta_title").val(),"user[meta_desc]":$("#user_meta_desc").val(),"user[meta_kw]":$("#user_meta_kw").val(),clear_share_image:!0,is_ajax:!0}}).done(function(t){$(".share-image").removeClass("muted").attr("src",t),$("#user_meta_title").val(""),$("#user_meta_desc").val(""),$("#user_meta_kw").val(""),Exposure.showMessage("Your meta tags have been cleared!")}).fail(function(){Exposure.showMessage("There was an error clearing your meta tags. Please try again.")})},function(){});n.show()}),$("#meta-share-image").on("change",function(t){t.preventDefault();var e=$(this),n=t.target.files[0],i=(new FileReader,$("img.share-image")),o=e.parent().parent().find(".photo-upload-progress");if(/image/.test(n.type)){var r=new FormData;r.append("user[share_image]",n),Photo.uploadingCount++,Exposure.loading(!0),i.addClass("muted"),$(".browse-share-image").addClass("muted"),$(".preview-meta-tab").addClass("muted pointer-events-none"),e.parent().find("input").addClass("disabled"),console.log(o),o.removeClass("hide"),$.ajax({url:"/change-share-image",data:r,cache:!1,contentType:!1,processData:!1,type:"PUT",xhr:function(){var t=new window.XMLHttpRequest;return t.upload.addEventListener("progress",function(t){if(t.lengthComputable){var e=t.loaded/t.total*100;console.log(t.loaded/t.total),o.find(".upload-percent").text(Math.round(e).toString()+"%"),e>99&&o.find(".upload-percent").text("Processing ")}},!1),t}}).done(function(t){window.setTimeout(function(){i.attr("src",t.share_image)},250),Exposure.showMessage("Your share image has been updated"),$(".remove-share-image").fadeIn(300)}).fail(function(t){Exposure.showMessage("Your share image didn\u2019t upload. Please try again")}).always(function(){Photo.uploadingCount--,Exposure.loading(!1),e.parent().find("input").removeClass("disabled"),i.removeClass("muted"),$(".browse-share-image").removeClass("muted"),$(".preview-meta-tab").removeClass("muted pointer-events-none"),o.addClass("hide")})}}),$("form.verify-student-email").bind("submit",function(t){var e=$(this).find("input[type=email]");return e.val().match(/\.(ac\.uk|edu)$/)?void 0:(t.preventDefault(),$(this).find(".micro.error-msg").fadeIn(300),e.addClass("error").focus(),!1)}),"undefined"==typeof ClipboardEvent&&$("[data-action=copy-code]").hide(),$("[data-action=copy-code]").click(function(t){t.preventDefault()});var clipboard=new ClipboardJS("[data-action=copy-code]",{text:function(){return console.log($(".js-copy-code").val()),$(".js-copy-code").val()}}).on("success",function(t){Exposure.showMessage("Copied to clipboard")});window.location.search.match(/sent=1/)&&setTimeout(function(){$(".hero-titles").addClass("success")},300),$("#display-seo-rich-toggle").change(function(){$(this).is(":checked")?$(".display-seo-notice").slideToggle():$(".display-seo-notice").slideToggle()}),$("#new-subscription").bind("submit",function(t){t.preventDefault(),Exposure.loading(!0);var e=($(this),$(".billing-options input[type=radio]:checked").val());return $(".button, button").attr("disabled",!0),$("#confirm-button").attr("disabled",!0).addClass("btn-loading"),console.log(window.elements),"free"!==e?stripe.createToken(window.card).then(function(t){if(console.log("Result",t),t.error)$("#cc-error").find(".cc-error-label").html(t.error.message).end().fadeIn(300),$(".button, button").attr("disabled",!0),$("#confirm-button").attr("disabled",!1).removeClass("btn-loading");else{var e=document.getElementById("payment-form"),n=document.createElement("input");n.setAttribute("type","hidden"),n.setAttribute("name","stripeToken"),n.setAttribute("value",t.token.id),e.appendChild(n),e.submit()}Exposure.loading(!1)}):($("#new-subscription").get(0).submit(),Exposure.loading(!1)),!1}),$(".save-changes-header-button").bind("click",function(t){return t.preventDefault(),$("#settings form").get(0).submit(),!1}),$(".settings-save-changes").bind("click",function(t){return t.preventDefault(),$("#settings form").get(0).submit(),!1}),$(".billing-options input[type=radio]").bind("click",function(t){if("free"===$(this).val()){if("undefined"==typeof $(this).attr("data-saw-downgrade"))return t.preventDefault(),t.stopPropagation(),!1;$(".card-details").transition({opacity:0},300,function(){$(this).hide()})}else $(".card-details").show().transition({opacity:1},500)}),"free"===$(".billing-options input[type=radio]:checked").val()&&$(".card-details").transition({opacity:0},50,function(){$(this).hide()});var stripeUpdateCardResponseHandler=function(t,e){var n=$("#update-card");e.error?($(".card-number .error-description").find("span").html(e.error.message).parent().fadeIn(200),$(".button, button").attr("disabled",!1)):(n.append($('<input type="hidden" name="stripeToken">').val(e.id)),n.get(0).submit()),Exposure.loading(!1)};$("#update-card").bind("submit",function(t){return t.preventDefault(),Exposure.loading(!0),$(".button, button").attr("disabled",!0),Stripe.card.createToken($(this),stripeUpdateCardResponseHandler),!1}),$("a[data-action=apply-coupon]").on("click",function(t){return t.preventDefault(),Exposure.loading(!0),$.post("/subscribe/coupon",{name:$("#coupon-code").val()}).done(function(t){Exposure.showMessage(t.msg)}).error(function(t){Exposure.showMessage("Oops! "+t.responseJSON.msg)}).always(function(){Exposure.loading(!1)}),!1});var manageCommChecks=function(){$('input[type=checkbox]:not([data-pref=""]):checked').length>0?($("#disable-all-communications").prop("checked",!1),$('input[type=checkbox]:not([data-pref=""])').removeData("previously-check")):$("#disable-all-communications").prop("checked",!0)};$("#story-sub-rich-toggle").change(function(){$(this).is(":checked")?($(".subscriber-options").removeClass("muted"),$("#story-subscriber-options").addClass("active"),$(".subscriber-options-helper").addClass("hide"),$("#toggle-subscriber-send-rich-toggle").prop("checked",!0),$("#toggle-subscriber-count-rich-toggle").prop("checked",!0)):($(".subscriber-options").addClass("muted"),$("#story-subscriber-options").removeClass("active"),$(".subscriber-options-helper").removeClass("hide"),$("#toggle-subscriber-send-rich-toggle").prop("checked",!1),$("#toggle-subscriber-count-rich-toggle").prop("checked",!1))}),$("#display-brand-menu-social-icons-rich-toggle").change(function(){$(this).is(":checked")?$(".social-wrapper").slideToggle("fast"):$(".social-wrapper").slideToggle("fast")}),$("#display-native-exposure-items-rich-toggle").change(function(){$(this).is(":checked")?$(".exposure-native-items .wrapper").fadeIn("fast"):$(".exposure-native-items .wrapper").fadeOut("fast")}),$("#display-brand-menu-subscribe-rich-toggle").change(function(){$(this).is(":checked")?$(".subscribe-to-stories-btn").fadeIn("fast"):$(".subscribe-to-stories-btn").fadeOut("fast")}),$("#display-brand-menu-rich-toggle").change(function(){$(this).is(":checked")?($(".menu-status-indicator").addClass("bg-green"),$(".menu-status-indicator").removeClass("bg-red"),$(".menu-status-label").text("Menu Enabled and Live")):($(".menu-status-indicator").removeClass("bg-green"),$(".menu-status-indicator").addClass("bg-red"),$(".menu-status-label").text("Menu Disabled"))}),$("#brand-menu-dark-theme-rich-toggle").change(function(){$(this).is(":checked")?$(".brand-menu").addClass("theme-dark"):$(".brand-menu").removeClass("theme-dark")}),$("#brand-menu-accent-hint-rich-toggle").change(function(){$(this).is(":checked")?$(".brand-menu").addClass("brand-menu-accent-hint"):$(".brand-menu").removeClass("brand-menu-accent-hint")}),$("#brand-menu-primary-color-rich-toggle").change(function(){$(this).is(":checked")?($(".brand-menu").addClass("theme-brand-primary"),$(".logo-wrapper-menu-builder").addClass("theme-brand-primary"),$(".color-picker-row").removeClass("muted pointer-events-none")):($(".brand-menu").removeClass("theme-brand-primary"),$(".color-picker-row").addClass("muted pointer-events-none"),$(".logo-wrapper-menu-builder").removeClass("theme-brand-primary"))}),$("#contact-member-toggle-rich-toggle").change(function(){$(this).is(":checked")?($(".contact-member-email").addClass("active"),$("#contact-form-options").addClass("active p2 bg-silver uber-rounded")):($(".contact-member-email").removeClass("active"),$("#contact-form-options").removeClass("active p2 bg-silver uber-rounded"))}),$("#toggle-custom-site-color-scheme-rich-toggle").change(function(){$(this).is(":checked")?$(".profile-layout-select").addClass("dark-mode"):$(".profile-layout-select").removeClass("dark-mode")}),$("#disable-all-communications").on("change",function(){window.noMessages=!0;var t=$(this).prop("checked");t?$('input[type=checkbox]:not([data-pref=""])').each(function(t,e){var n=$(e);void 0===n.data("previously-check")&&n.data("previously-check",n.prop("checked")),n.prop("checked",!1)}):$("input[type=checkbox][data-pref]").each(function(t,e){var n=$(e);n.prop("checked",void 0===n.data("previously-check")?!0:n.data("previously-check"))}),$('input[type=checkbox]:not([data-pref=""])').trigger("change"),manageCommChecks(),window.setTimeout(function(){t?Exposure.showMessage("All non-vital communications from Exposure disabled"):Exposure.showMessage("Your previous communication preferences has been restored"),window.noMessages=!1},500)}),$('input[type=checkbox]:not([data-pref=""])').on("change",manageCommChecks),manageCommChecks(),function(){$(function(){return $("#homepage-category-changer").on("change",function(){return window.location.replace("/categories/"+this.value)})})}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;window.ModelWithAttachment=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}var i;return t(n,e),n.prototype.type="ModelWithAttachment",n.uploadingCount=0,n.prototype.initialize=function(t,e){return e?(this.file=e.file,e):void 0},n.prototype.toJSON=function(){var t;return t=n.__super__.toJSON.apply(this,arguments),delete t.data_uri,t},i=n.prototype.save,n.prototype.save=function(t,e,n){var o,r,s,a;return s=$.Deferred(),o=arguments,a=function(t){return function(){var e;return e=i.apply(t,o),e?e.done(s.resolve).fail(s.reject):s.reject(!1)}}(this),this.file?(null===t||"object"==typeof t?(r=t,n=e):(r={})[t]=e,n||(n={}),this.upload({success:function(t){return function(){return t.uploading=!0,a(),t.file=null}}(this),error:function(t){return function(e,i,o){return t.trigger("error",t,e,n),"function"==typeof n.error&&n.error(t),s.reject(e,i,o)}}(this),progress:n.progress||function(){}})):a(),s},n.prototype.upload=function(t){return $(".publish-post, .draft-post, .upgrade-account").attr("disabled",!0),Photo.uploadingCount++,this.resize(0,0,95,function(e){return function(n,i,o){var r,s;return n&&o&&i&&e.set({data_uri:n,width:i,height:o,dimensions:i+"x"+o,aspect_ratio:1*i/o}),s=new FormData,s.append("key",_.result(e,"attachment_key")),s.append("AWSAccessKeyId",EXPOSURE_S3_KEY),s.append("acl","public-read"),s.append("policy",EXPOSURE_S3_POLICY),s.append("signature",EXPOSURE_S3_SIGNATURE),s.append("Content-Type",e.file.type),s.append("file",e.file),e.trigger("uploadStart",e),r=e.file.type,$.ajax({url:"https://"+EXPOSURE_S3_BUCKET_NAME+".s3.amazonaws.com/",data:s,cache:!1,contentType:!1,processData:!1,type:"POST",success:function(){return e.set("asset_url",e.assetURL()),t.success.apply(e,arguments)},error:t.error,progress:function(n){return e.trigger("progress",n,e),t.progress(n,e)},complete:function(){return e.trigger("uploadFinish",e),Photo.uploadingCount--,$(".publish-post, .draft-post, .upgrade-account").removeAttr("disabled")}})}}(this))},n.prototype.setAttachment=function(t){this.file=t},n.prototype.resize=function(t,e,n,i){return/video/.test(this.file.type)&&i&&i(),/audio/.test(this.file.type)?i&&i():canvasResize(this.file,{width:t,height:e,crop:!1,quality:n,callback:i||function(){}})},n.prototype.aspectRatio=function(){return 1*this.get("width")/this.get("height")},n.prototype.dimensions=function(){return this.get("width")+"x"+this.get("height")},n.prototype.extension=function(){return this.file&&this.file.name?this.file.name.split(".").reverse()[0]:void 0},n.prototype.attachement_uid=function(){throw new Error("Please define an attachement_uid for this model")},n.prototype.attachment_key=function(){throw new Error("Please define an attachement_key for this model")},n.prototype.assetURL=function(){var t,e;return e=_.result(this,"attachment_key"),"imgix"===EXPOSURE_IMAGE_PROXY&&"https://"+EXPOSURE_IMGIX_PREFIX+".imgix.net/"+e+"?&q=95&fm=jpg","processor_ai"===EXPOSURE_IMAGE_PROXY?(t=e.split(".").slice(-1)[0].toLowerCase(),["mov","mp4","mp3","m4a","wav"].includes(t)?"https://exposure.accelerator.net/"+e:"https://exposure.accelerator.net/"+e+";quality(90)."+t):void 0},n}(Backbone.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;window.Photo=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.type="Photo",n.prototype.idAttribute="photo_key",n.prototype.isNew=function(){return!this.get("id")},n.prototype.urlRoot="/api/v1/photos",n.prototype.initialize=function(t,e){return n.__super__.initialize.apply(this,arguments),this.uploading=!1,(null!=t?t.photo_key:void 0)||this.set("photo_key",Utils.randomStr(36)),this.on("error",this.logError,this)},n.prototype.toJSON=function(){var t;return t=n.__super__.toJSON.apply(this,arguments),t["author-is-viewing"]="true"===$("#post").attr("data-author-viewing"),this.file&&(t=_.extend({photo_file_name:this.file.name,photo_content_type:this.file.type,photo_file_size:this.file.size},t)),t},n.prototype.attachment_uid="photo_key",n.prototype.attachment_key=function(){return EXPOSURE_ENV+"/photos/"+this.get("photo_key")+"/original."+this.extensionName()},n.prototype.extensionName=function(){var t;return t=this.get("file_name").split(".").slice(-1)[0]},n.prototype.logError=function(t,e,n){},n}(ModelWithAttachment)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;window.PhotoGroup=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.type="PhotoGroup",n.prototype.urlRoot="/api/v1/photo_groups",n.prototype.initialize=function(){return null!=this.photos?this.photos:this.photos=new Photos},n.prototype.contextuallyLatestContent=function(t){return t?this.get("content"):this.get("published_content")},n.prototype.limit=function(){switch(this.get("group_type")){case"set":return Constants.photo_group_limit;case"single":case"captioned-single":return 1}},n.prototype.create_photos_from_filelist=function(t,e){var n,i,o,r,s,a,l,u,c,h,d;for(i=[],r=0,s=t.length;s>r;r++)n=t[r],/image|audio|video/.test(n.type)&&/(jpg|jpeg|png|gif|mp4|mov|mp3|m4a|wav)$/i.test(n.name)&&i.push(n);switch(this.get("group_type")){case"set":a=this.limit()-this.photos.length;break;case"single":case"captioned-single":a=1}switch(i=i.slice(0,a),c=(null!=(h=this.photos.last())?h.get("position"):void 0)||0,this.get("group_type")){case"native-video":u=function(){var t,e,r;for(r=[],o=t=0,e=i.length;e>t;o=++t)n=i[o],r.push(new Photo({height:1,file_name:n.name,is_video:!0,pending:!0,photo_group_id:this.get("id"),position:c+o+1,width:1},{file:n}));return r}.call(this);break;case"native-audio":u=function(){var t,e,r;for(r=[],o=t=0,e=i.length;e>t;o=++t)n=i[o],r.push(new Photo({height:1,file_name:n.name,is_audio:!0,pending:!0,photo_group_id:this.get("id"),position:c+o+1,width:1},{file:n}));return r}.call(this);break;case"set":case"single":case"captioned-single":u=function(){var t,e,r;for(r=[],o=t=0,e=i.length;e>t;o=++t)n=i[o],r.push(new Photo({height:1,file_name:n.name,pending:!0,photo_group_id:this.get("id"),position:c+o+1,width:1},{file:n}));return r}.call(this)}return this.photos.add(u,e),d=function(){var t,e,n;for(n=[],t=0,e=u.length;e>t;t++)l=u[t],n.push(l.save());return n}(),d.length?(Exposure.loading(!0),$.when.apply($,d).always(function(){return Exposure.loading(!1)})):void 0},n}(Backbone.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;window.Post=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.type="Post",n.prototype.urlRoot="/api/v1/posts",n.prototype.validate=function(t,e){return null==t.published_at||moment.unix(t.published_at).isValid()?void 0:"invalid date"},n.prototype.initialize=function(t,e){return n.__super__.initialize.apply(this,arguments),this.type="photo",null==this.photo_groups&&(this.photo_groups=new PhotoGroups),!this.file||this.get("cover_photo_updated_at")&&this.get("cover_video_updated_at")?void 0:this.setAttachmentDate()},n.prototype.toJSON=function(){var t;return t=n.__super__.toJSON.apply(this,arguments),this.file&&"video"===this.type?t=_.extend({cover_video_file_name:this.file.name,cover_video_content_type:this.file.type,cover_video_file_size:this.file.size},t):this.file&&(t=_.extend({cover_photo_file_name:this.file.name,cover_photo_content_type:this.file.type,cover_photo_file_size:this.file.size},t)),t},n.prototype.progress=function(t){var e;return console.log("progress for post"),t.lengthComputable?(e=t.loaded/t.total*100,console.log(e)):void 0},n.prototype.setAttachment=function(t,e){return this.file=t,this.type=null!=e?e:"photo",this.setAttachmentDate()},n.prototype.setAttachmentDate=function(){return"video"===this.type?this.set("cover_video_updated_at",moment().unix()):this.set("cover_photo_updated_at",moment().unix())},n.prototype.attachment_key=function(){var t;return"video"===this.type?(t=this.extension()||this.get("cover_video_file_name").split(".").reverse()[0],EXPOSURE_ENV+"/posts/"+this.get("id")+"/cover-video/cover-"+this.get("cover_video_updated_at")+"."+t):(t=this.extension()||this.get("cover_photo_file_name").split(".").reverse()[0],EXPOSURE_ENV+"/posts/"+this.get("id")+"/cover-photo/cover-"+this.get("cover_photo_updated_at")+"."+t)},n}(ModelWithAttachment)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;window.User=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.type="User",n}(Backbone.Model)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;window.PhotoGroups=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.model=PhotoGroup,n.prototype.comparator="position",n}(Backbone.Collection)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;window.Photos=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.model=Photo,n.prototype.comparator="position",n}(Backbone.Collection)}.call(this),function(){return this.JST||(this.JST={}),this.JST["lens/photos/photo"]=Handlebars.template(function(t,e,n,i,o){function r(t,e){return'\n    <div class="controls">\n        <a data-action="delete" class="delete" title="Delete Photo" rel="tipsy" href="">Delete Photo</a>\n        <a data-action="move" class="move" href="" rel="tipsy" title="Re-arrange Photo">Move Photo</a>\n    </div>\n    '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),o=o||{};var s,a,l="",u="function",c=this.escapeExpression,h=this;return l+='<div class="photo" data-photo-key="'+c((s=e&&e.photo,s=null==s||s===!1?s:s.photo_key,typeof s===u?s.apply(e):s))+'" data-position="'+c((s=e&&e.photo,s=null==s||s===!1?s:s.position,typeof s===u?s.apply(e):s))+'">\n    ',a=n["if"].call(e,e&&e.signedInAuthor,{hash:{},inverse:h.noop,fn:h.program(1,r,o),data:o}),(a||0===a)&&(l+=a),l+='\n    <a href="'+c((s=e&&e.photo,s=null==s||s===!1?s:s.large_url,typeof s===u?s.apply(e):s))+'" class="animated fadeIn delay-1s"><img src="'+c((s=e&&e.photo,s=null==s||s===!1?s:s.small_url,typeof s===u?s.apply(e):s))+'"></a>\n</div>\n'}),this.JST["lens/photos/photo"]}.call(this),function(){return this.JST||(this.JST={}),this.JST.photo=Handlebars.template(function(t,e,n,i,o){function r(t,e){return"should-fill-row"}function s(t,e){var n,i="";return i+="\n\n        <a onclick=\"ga('send', 'event', { eventCategory: 'Story', eventAction: 'Click', eventLabel: 'Photo link URL Overlay'})\" title=\"Photo Click Through Link\" href=\""+A((n=t&&t.photo,n=null==n||n===!1?n:n.link_url,typeof n===O?n.apply(t):n))+'" class="source-link-overlay" target="_blank">\n\n          <span class="hide">Click through here</span>\n\n        </a>\n\n\n          <div class="absolute sm-p2 p1 right-0 top-0 z5 source-link-wrapper">\n            <a title="Open link to '+A((n=t&&t.photo,n=null==n||n===!1?n:n.link_url,typeof n===O?n.apply(t):n))+'" href="'+A((n=t&&t.photo,n=null==n||n===!1?n:n.link_url,typeof n===O?n.apply(t):n))+"\" rel=\"tipsy-e\" onclick=\"ga('send', 'event', { eventCategory: 'Story', eventAction: 'Click', eventLabel: 'Photo link icon'})\" title=\"Link to "+A((n=t&&t.photo,n=null==n||n===!1?n:n.link_url,typeof n===O?n.apply(t):n))+'" class="source-link block" target="_blank">\n\n                <span class="hide">Click through here</span>\n\n                <div class="icon-format-link white h3 center relative" style="top: 9px;left: 0px;font-size: 17px;"></div>\n\n            </a>\n\n\n    </div>\n\n\n\n    '}function a(t,e){var i,o,r="";return r+="\n      ",o=n.unless.call(t,(i=t&&t.photo,null==i||i===!1?i:i.is_video),{hash:{},inverse:P.noop,fn:P.program(6,l,e),data:e}),(o||0===o)&&(r+=o),r+="\n    "}function l(t,e){var i,o,r="";return r+="\n        ",o=n.unless.call(t,(i=t&&t.photo,null==i||i===!1?i:i.is_audio),{hash:{},inverse:P.noop,fn:P.program(7,u,e),data:e}),(o||0===o)&&(r+=o),r+="\n      "}function u(t,e){var i,o,s="";return s+='\n            <div class="photo-controls pointer-events-none" aria-hidden="true">\n            <nav class="">\n                <ul class="w-40 p1 pointer-events-auto">\n\n\n                  <li class="nowrap mb1">\n\n                    <div href="#" class="trans-ease-in-out cursor-pointer control flex flex-center pill h6 reorder-photo cursor-grab" onclick="ga(\'send\', \'event\', { eventCategory: \'Story\', eventAction: \'Click\', eventLabel: \'Reorder photo\'})" rel="tipsy-w" title="Reorder this photo by dragging it to a new position">\n                        <div class="icon-move white h3 center relative"></div>\n                        <div class="md-remove hide">\n                          Reorder photo\n                        </div>\n                    </a>\n\n                  </li>\n\n                  <li class="nowrap mb1">\n\n                    <div href="#" class="trans-ease-in-out cursor-pointer control open-light-box flex flex-center pill h6" onclick="ga(\'send\', \'event\', { eventCategory: \'Story\', eventAction: \'Click\', eventLabel: \'Add a click through link to this photo\'})" rel="tipsy-w" title="',o=n["if"].call(t,(i=t&&t.photo,null==i||i===!1?i:i.link_url),{hash:{},inverse:P.program(10,h,e),fn:P.program(8,c,e),data:e}),(o||0===o)&&(s+=o),s+=' link for this photo" style="',o=n["if"].call(t,(i=t&&t.photo,null==i||i===!1?i:i.link_url),{hash:{},inverse:P.noop,fn:P.program(12,d,e),data:e}),(o||0===o)&&(s+=o),s+='">\n                        <div class="icon-format-link white h3 center relative" style="left: 1px;',o=n["if"].call(t,(i=t&&t.photo,null==i||i===!1?i:i.link_url),{hash:{},inverse:P.noop,fn:P.program(14,p,e),data:e}),(o||0===o)&&(s+=o),s+="\"></div>\n                        <div class=\"md-remove hide\">\n                          Add a link to this photo\n                        </div>\n                    </a>\n\n                  </li>\n\n\n\n                    <li class=\"nowrap mb1\">\n                      <a onclick=\"ga('send', 'event', { eventCategory: 'Story', eventAction: 'Click', eventLabel: 'Fill row'})\" href=\"#\" class=\"trans-ease-in-out fill-row-hook flex flex-center pill h6 ",o=n["if"].call(t,(i=t&&t.photo,null==i||i===!1?i:i.fill_width),{hash:{},inverse:P.noop,fn:P.program(1,r,e),data:e}),(o||0===o)&&(s+=o),s+='" rel="tipsy-w" title="Fill an entire row, This will force the photo to extend the width of the photo set">\n                      <div class="icon-maximize white h3 center relative fill-row-icon" style="transform: scale(0.86);"></div>\n                      <div class="md-remove hide">\n                        <div class="un none inline-block">Un</div>Fill Row\n                      </div>\n                    </a>\n\n                    </li>\n\n                    <li class="nowrap py1 mt1 pb0 border-lighten-3" style="margin-right:13px;">\n\n                      <a href="#" class="trans-ease-in-out bg-red delete-photo-hook flex flex-center pill h6" onclick="ga(\'send\', \'event\', { eventCategory: \'Story\', eventAction: \'Click\', eventLabel: \'Remove photo\'})" rel="tipsy-w" title="Remove this photo" style="background:#df3f3f">\n                          <div class="icon-cross white h3 center relative" style="top:-1px"></div>\n                          <div class="md-remove hide">\n                            Remove\n                          </div>\n                      </a>\n\n                    </li>\n\n\n\n\n                </ul>\n            </nav>\n        </div>\n        '}function c(t,e){return"Edit the click through"}function h(t,e){return"Add a click through"}function d(t,e){return"background:#fff;"}function p(t,e){return"color:#292525"}function f(t,e){var n,i="";return i+='\n\n      <div class="native-audio-container clearfix">\n        <div class="audio-player player-accessible close-audio-player-wrapper">\n\n          <div class="ex-spinner cursor-help z1 absolute bg-darken-3 circle p1 mt1 none animated fadeIn sm-remove" rel="tipsy" title="Your audio is processing, please wait. You can keep adding to your story" style="top: 2px;"></div>\n\n          <div class="relative">\n            <a class="btn p0 white h2 caps close-ui-modal w-35 h-35 circle center bg-darken-4 flex flex-center close-audio trans-bouncy animated-fast" href="#" style="position: absolute;top: -48px;right:-40px;">\n                <span class="icon-cross relative h3" style="left: 2px;top: 8px;font-size: 19px;"></span>\n              </a>\n          </div>\n\n          <audio controls playsinline controlsList="nodownload noremoteplayback">\n            <source src="'+A((n=t&&t.photo,n=null==n||n===!1?n:n.asset_url,typeof n===O?n.apply(t):n))+';128kbs.mp3" type="audio/mpeg">\n            Your browser does not support the audio tag.\n          </audio>\n        </div>\n      </div>\n\n\n    '}function g(t,e){var i,o,r="";return r+='\n\n\n\n          <div class="photo-upload-progress video-progress clearfix relative" style="display:none;">\n\n            <div class="processing-state width-100per height-100per z3">\n\n              <div class="flex flex-center absolute top-0 left-0 width-100per height-100per">\n\n                <div class="flex flex-center center col-12" rel="tipsy" title="Once your video has finished processing, you will see a notification that is available for playback. You can keep adding to your story in the meantime">\n                  <div class="h4 bold col-12">\n\n                  <div class="h-40 w-40 circle bg-darken-4 mx-auto mb1">\n                    <div class="ex-spinner mb1 relative" style="top: 10px;"></div>\n                  </div>\n                    <div class="muted">Video Uploading</div>\n                  </div>\n                </div>\n\n              </div>\n\n            </div>\n\n\n          </div>\n\n\n\n        ',o=n["if"].call(t,(i=t&&t.photo,null==i||i===!1?i:i.tier_2_feature),{hash:{},inverse:P.noop,fn:P.program(19,m,e),data:e}),(o||0===o)&&(r+=o),r+="\n\n      "}function m(t,e){var i,o,r="";return r+='\n\n\n          <div class="native-video-container clearfix relative z1">\n\n\n            <div class="video-controls absolute z3 white top-0 left-0 width-100per height-100per flex flex-center">\n\n              <div class="w-100 h-100 col-12 mx-auto relative">\n                <button class="play-video white bg-darken-4 btn absolute top-0 left-0 z1 box-shadow-sm" title="Play video">Play video</a>\n              </div>\n\n            </div>\n\n\n            <div class="processing-progress clearfix absolute width-100per height-100per z3 bg-darken-4" style="display:none;">\n\n              <div class="processing-state width-100per height-100per z3">\n\n                <div class="flex flex-center absolute top-0 left-0 width-100per height-100per">\n\n                  <div class="flex flex-center center col-12 cursor-help" rel="tipsy" title="Once your video has finished processing, you will see a notification that is available for playback. You can keep adding to your story in the meantime">\n                    <div class="h4 bold col-12">\n\n                    <div class="h-40 w-40 circle bg-darken-4 mx-auto mb1">\n                      <div class="ex-spinner mb1 relative" style="top: 10px;"></div>\n                    </div>\n                      <div class="white">Video Processing for Playback, Please Wait</div>\n                    </div>\n                  </div>\n\n                </div>\n\n              </div>\n\n\n            </div>\n\n\n              <video loading="lazy" class="group-native-video left" poster="'+A((i=t&&t.photo,
i=null==i||i===!1?i:i.asset_url,typeof i===O?i.apply(t):i))+';frame(1).jpg" ',o=n["if"].call(t,(i=t&&t.photo,null==i||i===!1?i:i.playback_loop),{hash:{},inverse:P.noop,fn:P.program(20,v,e),data:e}),(o||0===o)&&(r+=o),r+=' playsinline disablePictureInPicture controlsList="nodownload noremoteplayback">\n                <source src="" type="video/mp4">\n                Video tag is not supported in this browser.\n              </video>\n\n            </div>\n\n          </div>\n\n        '}function v(t,e){return" autoplay muted loop "}function y(t,e){var i,o,r="";return r+="\n\n        ",o=n.unless.call(t,(i=t&&t.photo,null==i||i===!1?i:i.is_audio),{hash:{},inverse:P.noop,fn:P.program(23,b,e),data:e}),(o||0===o)&&(r+=o),r+="\n\n      "}function b(t,e){var i,o,r="";return r+='\n\n          <img loading="lazy" alt="',o=n["if"].call(t,(i=t&&t.photo,null==i||i===!1?i:i.alt_text),{hash:{},inverse:P.program(26,_,e),fn:P.program(24,w,e),data:e}),(o||0===o)&&(r+=o),r+='" class="set-photo left scroll-reveal-stories" src="'+A((i=t&&t.photo,i=null==i||i===!1?i:i.src,typeof i===O?i.apply(t):i))+'" rel="group'+A((i=t&&t.photo,i=null==i||i===!1?i:i.photo_group_id,typeof i===O?i.apply(t):i))+'" data-aspect-ratio="'+A((i=t&&t.photo,i=null==i||i===!1?i:i.aspect_ratio,typeof i===O?i.apply(t):i))+'" data-original-dimensions="'+A((i=t&&t.photo,i=null==i||i===!1?i:i.dimensions,typeof i===O?i.apply(t):i))+'">\n\n        '}function w(t,e){var n;return A((n=t&&t.photo,n=null==n||n===!1?n:n.alt_text,typeof n===O?n.apply(t):n))}function _(t,e){var i,o;return o=n["if"].call(t,(i=t&&t.photo,null==i||i===!1?i:i.caption),{hash:{},inverse:P.program(29,k,e),fn:P.program(27,x,e),data:e}),o||0===o?o:""}function x(t,e){var n;return A((n=t&&t.photo,n=null==n||n===!1?n:n.caption,typeof n===O?n.apply(t):n))}function k(t,e){return"A photo in this story"}function C(t,e){var i,o,r="";return r+='\n\n          <div class="photo-caption col-12 type-theme-body ',o=n["if"].call(t,(i=t&&t.photo,null==i||i===!1?i:i.caption),{hash:{},inverse:P.noop,fn:P.program(32,E,e),data:e}),(o||0===o)&&(r+=o),r+='">\n\n              <h3 class="h5 mx-auto white type-theme-body">'+A((i=t&&t.photo,i=null==i||i===!1?i:i.caption,typeof i===O?i.apply(t):i))+"</h3>\n          </div>\n\n\n      "}function E(t,e){return"active-caption"}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),o=o||{};var S,$,T="",O="function",A=this.escapeExpression,P=this;return T+='<div data-sortable-id="'+A((S=e&&e.photo,S=null==S||S===!1?S:S.sortable_id,typeof S===O?S.apply(e):S))+'" class="photo relative clearfix ',$=n["if"].call(e,(S=e&&e.photo,null==S||S===!1?S:S.fill_width),{hash:{},inverse:P.noop,fn:P.program(1,r,o),data:o}),($||0===$)&&(T+=$),T+='" id="photo-'+A((S=e&&e.photo,S=null==S||S===!1?S:S.photo_key,typeof S===O?S.apply(e):S))+'" data-photo-key="'+A((S=e&&e.photo,S=null==S||S===!1?S:S.photo_key,typeof S===O?S.apply(e):S))+'" data-aspect-ratio="'+A((S=e&&e.photo,S=null==S||S===!1?S:S.aspect_ratio,typeof S===O?S.apply(e):S))+'" data-original-dimensions="'+A((S=e&&e.photo,S=null==S||S===!1?S:S.dimensions,typeof S===O?S.apply(e):S))+'" data-position="'+A((S=e&&e.photo,S=null==S||S===!1?S:S.position,typeof S===O?S.apply(e):S))+'" data-photo-popper-id="'+A((S=e&&e.photo,S=null==S||S===!1?S:S.id,typeof S===O?S.apply(e):S))+'">\n\n\n    <div class="photo-upload-progress animated fadeIn" style="display:none;">\n      <div class="left sm-mt2 sm-ml2 ml1 mt1">\n        <div class="px1 pill bg-darken-5 white h-30 flex flex-center sm-h6 h7" style="min-width:64px">\n          <div class="ex-spinner mr1">\n          </div>\n\n          <div class="h5 upload-percent"></div>\n\n        </div>\n      </div>\n\n      <span class="label">Uploading Photo</span>\n    </div>\n\n    <a class="photo-bouncer close-product-card" title="Open photo" data-lightbox-big="'+A((S=e&&e.photo,S=null==S||S===!1?S:S.asset_url,typeof S===O?S.apply(e):S))+"\" onclick=\"ga('send', 'event', { eventCategory: 'Story', eventAction: 'Click', eventLabel: 'Opened photo lightbox'})\" rel=\"group"+A((S=e&&e.photo,S=null==S||S===!1?S:S.photo_group_id,typeof S===O?S.apply(e):S))+'"></a>\n\n\n\n    ',$=n["if"].call(e,(S=e&&e.photo,null==S||S===!1?S:S.link_url),{hash:{},inverse:P.noop,fn:P.program(3,s,o),data:o}),($||0===$)&&(T+=$),T+="\n\n    ",$=n.unless.call(e,e&&e.pending,{hash:{},inverse:P.noop,fn:P.program(5,a,o),data:o}),($||0===$)&&(T+=$),T+="\n\n\n    ",$=n["if"].call(e,(S=e&&e.photo,null==S||S===!1?S:S.is_audio),{hash:{},inverse:P.noop,fn:P.program(16,f,o),data:o}),($||0===$)&&(T+=$),T+="\n\n\n      ",$=n["if"].call(e,(S=e&&e.photo,null==S||S===!1?S:S.is_video),{hash:{},inverse:P.program(22,y,o),fn:P.program(18,g,o),data:o}),($||0===$)&&(T+=$),T+="\n\n      ",$=n["if"].call(e,(S=e&&e.photo,null==S||S===!1?S:S.caption),{hash:{},inverse:P.noop,fn:P.program(31,C,o),data:o}),($||0===$)&&(T+=$),T+="\n\n    </div>\n\n\n\n\n\n</div>\n"}),this.JST.photo}.call(this),function(){return this.JST||(this.JST={}),this.JST.photo_group=Handlebars.template(function(t,e,n,i,o){function r(t,e){return"first-group"}function s(t,e){return"has-photo-set-caption"}function a(t,e){var i;return i=n["if"].call(t,t&&t["left-align"],{hash:{},inverse:ut.noop,fn:ut.program(6,l,e),data:e}),i||0===i?i:""}function l(t,e){return"left-aligned"}function u(t,e){return"dropcap"}function c(t,e){return"info-box"}function h(t,e){return"full-width-group"}function d(t,e){var i,o="";return o+="\n              captioned-single\n              captioned-single-",(i=n["caption-align"])?i=i.call(t,{hash:{},data:e}):(i=t&&t["caption-align"],i=typeof i===ct?i.call(t,{hash:{},data:e}):i),o+=ht(i)+"\n            "}function p(t,e){return"photo-set-group content"}function f(t,e){return"super-quote"}function g(t,e){return"column-options-2"}function m(t,e){return"video-embed print-remove content"}function v(t,e){return"full-width-video"}function y(t,e){return"text-only-group content"}function b(t,e){return"playback-loop"}function w(t,e){return"playback-default"}function _(t,e){var i,o="";return o+="\n              ",i=n.unless.call(t,t&&t["is-native-video"],{hash:{},inverse:ut.noop,fn:ut.program(33,x,e),data:e}),(i||0===i)&&(o+=i),o+="\n            "}function x(t,e){var i,o="";return o+="\n                ",i=n.unless.call(t,t&&t["is-native-audio"],{hash:{},inverse:ut.noop,fn:ut.program(34,k,e),data:e}),(i||0===i)&&(o+=i),o+="\n              "}function k(t,e){var i,o="";return o+='\n                  <div class="pill border bg-white mb1 box-shadow-xsm">\n\n\n                  <div class="alignment-controls btn w-40 h-35 p0 py1 flex flex-center border-none\n                  " rel="tipsy-w" title="Choose text alignment" onclick="ga(\'send\', \'event\', { eventCategory: \'Story\', eventAction: \'Click\', eventLabel: \'Change group text alignment\'})">\n                    <span class="hide">Change text alignment</span>\n                    <div class="mx-auto text-align-icon relative" style="top:3px;"></div>\n                  </div>\n\n                  <div class="relative">\n\n                    <div class="column-option-hook column-option-1-column btn w-40 h-35 p0 py1 pb0 flex flex-center absolute z2 top-0 left-0 pointer-events-none pointer-events-none" rel="tipsy-w" data-column="column-option-1-column" title="Toggle two columns for this text in this group" onclick="ga(\'send\', \'event\', { eventCategory: \'Story\', eventAction: \'Click\', eventLabel: \'Toggle two column layout\'})">\n                      <span class="hide">1 Columns</span>\n                      <div class="mx-auto option-two-column-bg o-0"></div>\n                    </div>\n\n                    <div class="relative column-option-hook column-option-2-column btn w-40 h-35 p0 flex flex-center border-top" rel="tipsy-w" data-column="column-option-2-column" title="Use 2 column layout for this text" onclick="ga(\'send\', \'event\', { eventCategory: \'Story\', eventAction: \'Click\', eventLabel: \'Change group text alignment\'})">\n                      <div class="dot bg-black absolute ',i=n["if"].call(t,t&&t["is-2-column-option"],{hash:{},inverse:ut.program(37,E,e),fn:ut.program(35,C,e),data:e}),(i||0===i)&&(o+=i),o+='" style="top:14px"></div>\n                      <span class="hide">2 Columns</span>\n                      <div class="mx-auto option-two-column-bg"></div>\n                    </div>\n\n                    <div class="dropcap-hook relative btn w-40 h-35 p0 py1 pt0 flex flex-center border-top" rel="tipsy-w" data-dropcap="',i=n["if"].call(t,t&&t["is-dropcap"],{hash:{},inverse:ut.noop,fn:ut.program(39,S,e),data:e}),(i||0===i)&&(o+=i),o+="dropcap\" title=\"Enable a drop cap at the beginning of the first paragraph. A drop cap is a large capital letter\" onclick=\"ga('send', 'event', { eventCategory: 'Story', eventAction: 'Click', eventLabel: 'Change group text alignment'})\">\n                      <div class=\"dot bg-black absolute ",i=n["if"].call(t,t&&t["is-dropcap"],{hash:{},inverse:ut.program(37,E,e),fn:ut.program(35,C,e),data:e}),(i||0===i)&&(o+=i),o+='" style="top:15px"></div>\n                      <span class="hide">Dropcaps</span>\n                      <div class="mx-auto option-dropcap-bg"></div>\n                    </div>\n\n\n                    ',i=n["if"].call(t,t&&t["is-text"],{hash:{},inverse:ut.noop,fn:ut.program(41,$,e),data:e}),(i||0===i)&&(o+=i),o+="\n\n\n                 </div>\n\n\n\n                </div>\n                "}function C(t,e){return"block"}function E(t,e){return"none"}function S(t,e){return"is-"}function $(t,e){var i,o="";return o+='\n                      <div class="info-box-hook relative btn w-40 h-35 p0 py1 pt0 flex flex-center border-top" rel="tipsy-w" data-info-box="',i=n["if"].call(t,t&&t["is-info-box"],{hash:{},inverse:ut.noop,fn:ut.program(39,S,e),data:e}),(i||0===i)&&(o+=i),o+="info-box\" title=\"Enable a information call out style for your text\" onclick=\"ga('send', 'event', { eventCategory: 'Story', eventAction: 'Click', eventLabel: 'Toggle info-box style'})\" style=\"margin-top: -7px;\">\n                        <div class=\"dot bg-black absolute ",i=n["if"].call(t,t&&t["is-info-box"],{hash:{},inverse:ut.program(37,E,e),fn:ut.program(35,C,e),data:e}),(i||0===i)&&(o+=i),o+='" style="top:15px"></div>\n                        <span class="hide">Info Box Call Out Style</span>\n                        <div class="mx-auto icon-info off-black" style="position: relative;top: 2px;font-size: 20px;"></div>\n                      </div>\n                    '}function T(t,e){var i,o="";return o+='\n            <div class="border mb1 pill bg-white box-shadow-xsm">\n\n            <!--- Standard full width option --->\n            <div class="md-remove md-ls-remove">\n              <a href="#" class="full-width-options-hook full-width-options-hook-default pill-top btn w-40 h-35 p0 py1 pb0 flex flex-center border-none" data-layout="full-width-standard" rel="tipsy-w" title="Make photo full width of story" onclick="ga(\'send\', \'event\', { eventCategory: \'Story\', eventAction: \'Click\', eventLabel: \'Make photo full width\'})">\n                <div class="dot bg-black absolute ',i=n["if"].call(t,t&&t["is-full-width-default"],{hash:{},inverse:ut.program(37,E,e),fn:ut.program(35,C,e),data:e}),(i||0===i)&&(o+=i),o+='" style="top:22px"></div>\n                <span class="hide">Full width photo</span>\n                <div class="mx-auto option-full-width"></div>\n              </a>\n            </div>\n\n            <!--- Parallax --->\n            <div class="border-top relative md-remove md-ls-remove">\n              <a href="#" class="uber-rounded full-width-options-hook full-width-options-hook-parallax btn w-40 h-35 p0 flex flex-center border-none" data-layout="full-width-parallax" rel="tipsy-w" title="Make photo full width and use parallax scroll effect - Desktop only" onclick="ga(\'send\', \'event\', { eventCategory: \'Story\', eventAction: \'Click\', eventLabel: \'Make full width parallax\'})">\n                <div class="dot bg-black absolute ',i=n["if"].call(t,t&&t["is-full-width-parallax"],{hash:{},inverse:ut.program(37,E,e),fn:ut.program(35,C,e),data:e}),(i||0===i)&&(o+=i),o+='"></div>\n                <span class="hide">Parallax scroll photo</span>\n                <div class="mx-auto option-full-width-parallax"></div>\n              </a>\n            </div>\n\n            <!--- Parallax with overlay --->\n            <div class="parallax-overlay-options relative">\n              <div class="border-top relative md-remove md-ls-remove">\n                <a href="#" class="pill-bottom full-width-options-hook full-width-options-hook-overlay btn w-40 h-35 p0 py1 pt0 flex flex-center border-none" data-layout="full-width-parallax-overlay" rel="tipsy-w" title="Make photo full width and use parallax scroll effect with overlay" onclick="ga(\'send\', \'event\', { eventCategory: \'Story\', eventAction: \'Click\', eventLabel: \'Make full width parallax with overlay\'})">\n                  <div class="dot bg-black absolute ',i=n["if"].call(t,t&&t["is-full-width-parallax-overlay"],{hash:{},inverse:ut.program(37,E,e),fn:ut.program(35,C,e),data:e}),(i||0===i)&&(o+=i),o+='"></div>\n                  <span class="hide">Parallax scroll with text overlay</span>\n                  <div class="mx-auto option-full-width-parallax-overlay"></div>\n                </a>\n              </div>\n\n\n            <!--- Color options --->\n              <div class="parallax-overlay-color-options absolute left-0 px3 top-0 hidden trans-bouncy md-remove" style="top:-42px;left:25px">\n\n                <a href="#" rel="tipsy-s" title="Dark overlay for your photo" class="color-option-hook color-option-default btn pill btn-primary h7 bg-off-black nowrap caps btn-small border-none" data-color="color-option-default" rel="tipsy-w" onclick="ga(\'send\', \'event\', { eventCategory: \'Story\', eventAction: \'Click\', eventLabel: \'Make full width parallax with overlay default\'})" style="width: 38px;margin-bottom:4px;">\n                  Dark\n                </a>\n\n                <a href="#" rel="tipsy-s" title="Transparent overlay for your photo" class="color-option-hook color-option-light btn pill btn-primary h7 bg-white black nowrap caps btn-small border-none" data-color="color-option-light" rel="tipsy-w" onclick="ga(\'send\', \'event\', { eventCategory: \'Story\', eventAction: \'Click\', eventLabel: \'Make full width parallax with overlay light\'})" style="color:#000 !important">\n                  Clear\n                </a>\n\n              </div>\n\n\n          </div>\n\n\n        </div>\n\n            '}function O(t,e){var i,o="";return o+='\n            <div class="border mb1 pill bg-white box-shadow-xsm">\n\n              <!--- Standard width option --->\n              <div class="md-remove md-ls-remove">\n                <a href="" class="pill-top video-width-hook video-width-hook-standard  btn w-40 h-35 p0 py1 pb0 flex flex-center border-none" data-align="video-standard" rel="tipsy-w" title="Make standard width" onclick="ga(\'send\', \'event\', { eventCategory: \'Story\', eventAction: \'Click\', eventLabel: \'Standard width\'})">\n                  <div class="dot bg-black absolute ',i=n["if"].call(t,t&&t["is-standard-width"],{hash:{},inverse:ut.program(37,E,e),fn:ut.program(35,C,e),data:e}),(i||0===i)&&(o+=i),o+='" style="top:22px"></div>\n                  <span class="hide">Standard width video</span>\n                  <div class="mx-auto option-center-align-bg"></div>\n                </a>\n              </div>\n\n              <!--- Full width option --->\n              <div class="border-top relative" rel="tipsy-w" title="Make full width">\n                <a href="" class="pill-bottom video-width-hook video-width-hook-full btn w-40 h-35 p0 py1 pt0 flex flex-center border-none" data-align="video-full-width" onclick="ga(\'send\', \'event\', { eventCategory: \'Story\', eventAction: \'Click\', eventLabel: \'Full width\'})">\n                  <div class="dot bg-black absolute ',i=n["if"].call(t,t&&t["is-full-width"],{hash:{},inverse:ut.program(37,E,e),fn:ut.program(35,C,e),data:e}),(i||0===i)&&(o+=i),o+='" style="top:15px"></div>\n                  <span class="hide">Full width video</span>\n                  <div class="mx-auto option-full-width "></div>\n                </a>\n              </div>\n            </div>\n            '}function A(t,e){var i,o="";return o+='\n            <div class="border mb1 pill bg-white box-shadow-xsm video-playback-options">\n\n              <!--- Click and play default --->\n              <div class="md-remove md-ls-remove">\n                <a href="" class="pill-top video-play-type-hook playback-default-hook btn w-40 h-35 p0 py1 pb0 flex flex-center border-none" data-play="default" rel="tipsy-w" title="Traditional click and play playback" onclick="ga(\'send\', \'event\', { eventCategory: \'Story\', eventAction: \'Click\', eventLabel: \'Default video\'})">\n                  <div class="dot bg-black absolute ',i=n["if"].call(t,t&&t["playback-default"],{hash:{},inverse:ut.program(37,E,e),fn:ut.program(35,C,e),data:e}),(i||0===i)&&(o+=i),o+='" style="top:20px"></div>\n                  <span class="hide">Standard click and play behavior for video</span>\n                  <div class="mx-auto option-video-default"></div>\n                </a>\n              </div>\n\n              <!--- Silent Loop --->\n              <div class="border-top relative" rel="tipsy-w" title="Silent looping playback">\n                <a href="" class="pill-bottom video-play-type-hook playback-loop-hook btn w-40 h-35 p0 py1 pt0 flex flex-center border-none" data-play="video-full-width" onclick="ga(\'send\', \'event\', { eventCategory: \'Story\', eventAction: \'Click\', eventLabel: \'Loop Video\'})">\n                  <div class="dot bg-black absolute ',i=n["if"].call(t,t&&t["playback-loop"],{hash:{},inverse:ut.program(37,E,e),fn:ut.program(35,C,e),data:e}),(i||0===i)&&(o+=i),o+='"></div>\n                  <span class="hide">Silently loop video</span>\n                  <div class="mx-auto option-video-loop"></div>\n                </a>\n              </div>\n            </div>\n\n            '}function P(t,e){var i,o="";return o+='\n\n            <div class="border mb1 pill bg-white box-shadow-xsm">\n\n              <div class="border-bottom relative">\n                <a href="" class="single-center-align pill-top sm-remove align-caption-hook btn w-40 h-35 p0 py1 pb0 flex flex-center border-none" data-align="center" onclick="ga(\'send\', \'event\', { eventCategory: \'Story\', eventAction: \'Click\', eventLabel: \'Center align photo\'})">\n                  <div class="dot bg-black absolute ',i=n["if"].call(t,t&&t["is-single-center-aligned"],{hash:{},inverse:ut.program(37,E,e),fn:ut.program(35,C,e),data:e}),(i||0===i)&&(o+=i),o+='"></div>\n                  <span class="hide">Center align photo</span>\n                  <div class="mx-auto option-center-align-bg"></div>\n                </a>\n\n                <!--- Alignment options single --->\n                  <div class="alignment-options-single absolute left-0 px3 top-0 trans-bouncy md-remove pointer-events-none" style="top:35px;left:25px">\n\n                    <a href="#" rel="tipsy-s" title="The photo will be the width of your text" class="zfu alignment-option-hook alignment-option-default alignment-option-small btn pill btn-primary h7 bg-off-black nowrap caps btn-small border-none" data-alignment="alignment-option-default" rel="tipsy-w" onclick="ga(\'send\', \'event\', { eventCategory: \'Story\', eventAction: \'Click\', eventLabel: \'Small single photo\'})" style="margin-bottom:6px;width: 75px;">\n                      Small\n                    </a>\n\n\n                    <a href="#" rel="tipsy-s" title="The photo will be the wider than your text" class="alignment-option-hook alignment-option-wide zfu btn pill btn-primary h7 bg-off-black nowrap caps btn-small border-none muted" data-alignment="alignment-option-wide" rel="tipsy-w" onclick="ga(\'send\', \'event\', { eventCategory: \'Story\', eventAction: \'Click\', eventLabel: \'Wide single photo\'})" style="margin-bottom:6px;width: 75px;">\n                      Wide\n                    </a>\n\n                  </div>\n\n\n\n\n              </div>\n\n\n              <div class="relative left-right-options">\n\n                <div class="border-bottom sm-remove ">\n                  <a href="" class="single-left-align uber-rounded align-caption-hook btn w-40 h-35 p0 flex flex-center border-none" data-align="right"  onclick="ga(\'send\', \'event\', { eventCategory: \'Story\', eventAction: \'Click\', eventLabel: \'Right align photo\'})">\n                    <div class="dot bg-black absolute ',i=n["if"].call(t,t&&t["is-single-right-aligned"],{hash:{},inverse:ut.program(37,E,e),fn:ut.program(35,C,e),data:e}),(i||0===i)&&(o+=i),o+='"></div>\n                    <span class="hide">Left align photo</span>\n                    <div class="mx-auto option-left-align-bg"></div>\n                  </a>\n                </div>\n\n                <div class="sm-remove ">\n                  <a href="" class="single-right-align pill-bottom align-caption-hook btn w-40 h-35 p0 flex flex-center py1 pt0 border-none" data-align="left" onclick="ga(\'send\', \'event\', { eventCategory: \'Story\', eventAction: \'Click\', eventLabel: \'Left align photo\'})">\n                    <div class="dot bg-black absolute ',i=n["if"].call(t,t&&t["is-single-left-aligned"],{hash:{},inverse:ut.program(37,E,e),fn:ut.program(35,C,e),data:e}),(i||0===i)&&(o+=i),o+='"></div>\n                    <span class="hide">Right align photo</span>\n                    <div class="mx-auto option-right-align-bg"></div>\n                  </a>\n                </div>\n\n\n                <!--- Alignment options --->\n                  <div class="alignment-options o-0 absolute left-0 px3 top-0 trans-bouncy md-remove pointer-events-none" style="top:-43px;left:25px">\n\n                    <a href="#" rel="tipsy-s" title="Align photo to the top of your writing" class="pointer-events-none alignment-option-hook alignment-option-default btn pill btn-primary h7 bg-off-black nowrap caps btn-small border-none" data-alignment="alignment-option-default" rel="tipsy-w" onclick="ga(\'send\', \'event\', { eventCategory: \'Story\', eventAction: \'Click\', eventLabel: \'Align text to the top of the photo\'})" style="margin-bottom:6px;width: 75px;">\n                      Top\n                    </a>\n\n                    <a href="#" rel="tipsy-s" title="Align photo vertically center of your writing" class="pointer-events-none alignment-option-hook alignment-option-vertical btn pill btn-primary h7 bg-black nowrap caps btn-small border-none" data-alignment="alignment-option-vertical" rel="tipsy-w" onclick="ga(\'send\', \'event\', { eventCategory: \'Story\', eventAction: \'Click\', eventLabel: \'Align text vertically centered the photo\'})" style="width: 75px; margin-bottom:6px;">\n                      Centered\n                    </a>\n\n                    <a href="#" rel="tipsy-s" title="Align photo to the bottom of your writing" class="pointer-events-none alignment-option-hook alignment-option-bottom btn pill btn-primary h7 bg-black nowrap caps btn-small border-none" data-alignment="alignment-option-bottom" rel="tipsy-w" onclick="ga(\'send\', \'event\', { eventCategory: \'Story\', eventAction: \'Click\', eventLabel: \'Align text bottom to the photo\'})" style="width: 75px; margin-bottom:4px;">\n                      Bottom\n                    </a>\n\n                    <a href="#" rel="tipsy-s" title="Enable a sticky effect for the photo that will follow your writing" class="pointer-events-none alignment-option-hook alignment-option-sticky btn pill btn-primary h7 bg-black nowrap caps btn-small border-none" data-alignment="alignment-option-sticky" rel="tipsy-w" onclick="ga(\'send\', \'event\', { eventCategory: \'Story\', eventAction: \'Click\', eventLabel: \'Align text sticky to the photo\'})" style="width: 75px;">\n                      Sticky\n                    </a>\n\n                  </div>\n\n\n              </div>\n\n\n\n              </div>\n            '}function L(t,e){return'style="display:none;"'}function N(t,e){return"content"}function M(t,e){return"\u201cType a quote you want to highlight\u201d"}function j(t,e){return"Group Title (Optional)"}function D(t,e){var n,i;return n=t&&t.group,n=null==n||n===!1?n:n.content,i=typeof n===ct?n.apply(t):n,i||0===i?i:""}function I(t,e){var n,i;return n=t&&t.group,n=null==n||n===!1?n:n.published_content,i=typeof n===ct?n.apply(t):n,i||0===i?i:""}function q(t,e){return'style="display: none"'}function R(t,e){return'\n                  <div class="sm-h2 h4 bold">Drag and drop to replace this photo</div>\n                  <div class="h5 m0 mb2">You can only add one photo</div>\n                  '}function F(t,e){return'\n                  <div class="sm-h2 h4 bold">Drag and drop to add more to this set</div>\n                  <div class="h5 m0 mb2">Maximum of 9 photos per photo set</div>\n                  '}function B(t,e){return"full-width-controls"}function H(t,e){return"photo-set-controls"}function z(t,e){return"\n\n                  "}function W(t,e){var i,o="";return o+="\n                      ",i=n["if"].call(t,t&&t["is-video"],{hash:{},inverse:ut.program(78,Y,e),fn:ut.program(76,U,e),data:e}),(i||0===i)&&(o+=i),o+="\n              "}function U(t,e){return"\n                          <a href=\"\" class=\"sm-h6 h7 replace-video-hook trans-ease-in-out\" title=\"Edit or replace embed\" onclick=\"ga('send', 'event', { eventCategory: 'Story', eventAction: 'Click', eventLabel: 'Replace embed'})\">Edit Embed</a>\n                      "}function Y(t,e){var i,o="";return o+="\n                          ",i=n.unless.call(t,t&&t["is-set"],{hash:{},inverse:ut.program(83,K,e),fn:ut.program(79,V,e),data:e}),(i||0===i)&&(o+=i),o+="\n                      "}function V(t,e){var i,o="";return o+="\n                            ",i=n.unless.call(t,t&&t["is-native-video"],{hash:{},inverse:ut.noop,fn:ut.program(80,G,e),data:e}),(i||0===i)&&(o+=i),o+="\n                          "}function G(t,e){var i,o="";return o+="\n                              ",i=n.unless.call(t,t&&t["is-native-audio"],{hash:{},inverse:ut.noop,fn:ut.program(81,X,e),data:e}),(i||0===i)&&(o+=i),o+="\n                            "}function X(t,e){return"\n                                <a href=\"\" class=\"replace-photo-hook add-new-photos-menu-button sm-h6 h7 trans-ease-in-out\" onclick=\"ga('send', 'event', { eventCategory: 'Story', eventAction: 'Click', eventLabel: 'Replace photo'})\">\n                                  Replace Photo\n                                </a>\n                              "}function K(t,e){return"\n                          <a href=\"\" class=\"sm-h6 h7 add-new-photos-hook add-new-photos-menu-button trans-ease-in-out \" onclick=\"ga('send', 'event', { eventCategory: 'Story', eventAction: 'Click', eventLabel: 'Add new photos'})\">\n                            Add New\n                            <b class=\"sm-remove\">\n                              Photos\n                            </b>\n                          </a>\n                          <a href=\"\" class=\"sm-h6 h7 legacy-reorder-photos-hook hide\" onclick=\"ga('send', 'event', { eventCategory: 'Story', eventAction: 'Click', eventLabel: 'Legacy Reorder photos'})\">\n                            Reorder\n                            <b class=\"sm-remove\">\n                              Photos\n                            </b>\n                          </a>\n                          "}function Z(t,e){var i,o,r="";return r+='\n        <div class="video-embed-area" data-service="'+ht((i=t&&t.group,i=null==i||i===!1?i:i.video_type,typeof i===ct?i.apply(t):i))+'">\n\n          <div class="getting-video-info" style="display:none;">\n\n              <div class="ex-spinner mx-auto relative" style="top: 25%;"></div>\n\n          </div>\n\n\n          <div class="video-container" data-is-custom-embed="'+ht((i=t&&t.group,i=null==i||i===!1?i:i.video_embed,i=null==i||i===!1?i:i.ex_custom,typeof i===ct?i.apply(t):i))+'" data-service="'+ht((i=t&&t.group,i=null==i||i===!1?i:i.video_type,typeof i===ct?i.apply(t):i))+'">',i=t&&t.group,i=null==i||i===!1?i:i.video_embed,i=null==i||i===!1?i:i.html,o=typeof i===ct?i.apply(t):i,(o||0===o)&&(r+=o),r+="</div>\n\n          ",o=n["if"].call(t,t&&t["author-is-viewing"],{hash:{},inverse:ut.noop,fn:ut.program(86,Q,e),data:e}),(o||0===o)&&(r+=o),r+="\n\n        </div>\n\n\n\n        "}function Q(t,e){var i,o,r="";return r+='\n          <div class="cnt add-video-url animated fadeIn flex flex-center" style="display:none;">\n\n            <!-- Embed Navgation -->\n            ',i=n["if"].call(t,t&&t["author-is-viewing"],{hash:{},inverse:ut.noop,fn:ut.program(87,J,e),data:e}),(i||0===i)&&(r+=i),r+='\n\n\n            <!-- Validation -->\n            <div class="video-validation animated fadeInUp off-black">\n                <b>This URL is not correct or has embedding disabled.</b>\n            </div>\n\n\n              <form>\n\n                <!-- Embed own content -->\n                <div class="black embed-own-code mt3 hide">\n\n\n\n                  <div class="h5 m0 mb2 mx-auto off-black">Paste your own HTML code below to embed almost any content you\'d like.\n                    <div>\n                      <b>Please note:</b> Be considerate when embedding external content. Embedding malicious scripts and content may result in account deletion.\n                    </div>\n                  </div>\n\n\n                  <textarea name="raw-markup" ',i=n.unless.call(t,t&&t["pro-or-biz"],{hash:{},inverse:ut.noop,fn:ut.program(89,tt,e),data:e}),(i||0===i)&&(r+=i),r+=' placeholder="Paste your code here" class="col-12 h-200 field mono black h6 p2 overflow-scroll">',i=t&&t.group,i=null==i||i===!1?i:i.video_embed,i=null==i||i===!1?i:i.html,o=typeof i===ct?i.apply(t):i,(o||0===o)&&(r+=o),r+="</textarea>\n\n\n                   ",o=n["if"].call(t,t&&t["pro-or-biz"],{hash:{},inverse:ut.noop,fn:ut.program(91,et,e),data:e}),(o||0===o)&&(r+=o),r+="\n\n                   ",o=n.unless.call(t,t&&t["pro-or-biz"],{hash:{},inverse:ut.noop,fn:ut.program(93,nt,e),data:e}),(o||0===o)&&(r+=o),r+='\n\n\n                   <div class="h6 m0 py2 muted center">\n                      HTML, CSS, and Javascript accepted. Need help? Email us at <a class="black bold" href="mailto:support@exposure.co?subject=Custom embed help">support@exposure.co</a>\n                   </div>\n\n                </div>\n\n\n                <!-- Embed social post -->\n                <div class="embed-social-post">\n\n                  <div class="h5 m0 mb2 mx-auto off-black">Enter the URL of a YouTube, Vimeo, Google Maps, Facebook post, Tweet, Instagram or SoundCloud page.</div>\n\n                  <input class="rounded field border" type="url" placeholder="http://example.com/url-to-embed" value="'+ht((i=t&&t.group,i=null==i||i===!1?i:i.video_url,typeof i===ct?i.apply(t):i))+"\" name=\"video-url\" style=\"border:solid 1px #ccc\">\n                  <button class=\"h6\" onclick=\"ga('send', 'event', { eventCategory: 'Story', eventAction: 'Click', eventLabel: 'Embed post'})\">Embed Post</button>\n                </div>\n\n              </form>\n\n          </div>\n          "}function J(t,e){return'\n              <div class="py2 relative z4 embed-tabs absolute top-0 col-12 md-remove md-ls-remove">\n                <a class="btn caps h5 py2 btn-tab active toggle-embed-url border-none">\n                  Embed a social post\n                </a>\n\n                <i class="muted italic san-serif off-black">or</i>\n\n                <a class="btn caps h5 py2 btn-tab toggle-embed-raw  border-none">\n                  Embed your own code\n                </a>\n\n              </div>\n            '}function tt(t,e){return"disabled"}function et(t,e){return"\n                   <button class=\"h6\" onclick=\"ga('send', 'event', { eventCategory: 'Story', eventAction: 'Click', eventLabel: 'Embed content'})\">Embed Content</button>\n                   "}function nt(t,e){var i,o="";return o+='\n                   <a class="btn btn-primary bg-off-black h7 caps block mt1 py2 embed-upgrade-wall-link" href="',(i=n["sub-url"])?i=i.call(t,{hash:{},data:e}):(i=t&&t["sub-url"],i=typeof i===ct?i.call(t,{hash:{},data:e}):i),o+=ht(i)+"&source=story-embed-upgrade\" title=\"Upgrade to Pro to enable\" target=\"_blank\" onclick=\"ga('send', 'event', { eventCategory: 'Story', eventAction: 'Click', eventLabel: 'Upgrade from embed content'})\">Upgrade to Pro to enable</a>\n                   ";
}function it(t,e){var i,o="";return o+="\n\n      ",i=n["if"].call(t,t&&t["is-super-quote"],{hash:{},inverse:ut.program(98,rt,e),fn:ut.program(96,ot,e),data:e}),(i||0===i)&&(o+=i),o+="\n\n\n    "}function ot(t,e){var i,o="";return o+='\n      <div class="center serif italic type-theme-body sm-w-700 col-10 mx-auto photo-set-caption sm-mt2 mt1 h4" ',i=n.unless.call(t,t&&t.has_citation,{hash:{},inverse:ut.noop,fn:ut.program(51,L,e),data:e}),(i||0===i)&&(o+=i),o+=">\n         "+ht((i=t&&t.group,i=null==i||i===!1?i:i.caption,typeof i===ct?i.apply(t):i))+"\n      </div>\n\n      "}function rt(t,e){var i,o="";return o+='\n\n      <div class="font-body-color center serif italic type-theme-body sm-w-700 col-10 mx-auto photo-set-caption sm-mt2 mt1 h4 darkknight-text" ',i=n.unless.call(t,t&&t.has_caption,{hash:{},inverse:ut.noop,fn:ut.program(51,L,e),data:e}),(i||0===i)&&(o+=i),o+=">\n         "+ht((i=t&&t.group,i=null==i||i===!1?i:i.caption,typeof i===ct?i.apply(t):i))+"\n      </div>\n\n      "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,t.helpers),o=o||{};var st,at,lt="",ut=this,ct="function",ht=this.escapeExpression;return lt+='<div class="group-wrapper relative">\n\n\n<div class="story-section-anchor absolute top-0 left-0 z4 sm-remove trans-fade o-0 pointer-events-none">\n    <div class="p2">\n      <a class="black no-ul h4 btn mb1 bg-white circle px1 ml1 xsm-shadow box-shadow-xsm overflow-hidden link-to-story-section" rel="tipsy-w" href="#section-'+ht((st=e&&e.group,st=null==st||st===!1?st:st.id,typeof st===ct?st.apply(e):st))+'" style="width:16px;height:16px;" title="Link to story section">\n        <span class="hide">Link to story section</span>\n        <div class="icon-menu relative muted"></div>\n      </a>\n    </div>\n</div>\n\n\n<div class="relative group story-rhythm\n            ',at=n["if"].call(e,e&&e.is_first,{hash:{},inverse:ut.noop,fn:ut.program(1,r,o),data:o}),(at||0===at)&&(lt+=at),lt+="\n            ",at=n["if"].call(e,e&&e.has_caption,{hash:{},inverse:ut.noop,fn:ut.program(3,s,o),data:o}),(at||0===at)&&(lt+=at),lt+="\n            ",at=n.unless.call(e,e&&e["is-super-quote"],{hash:{},inverse:ut.noop,fn:ut.program(5,a,o),data:o}),(at||0===at)&&(lt+=at),lt+="\n            ",at=n["if"].call(e,e&&e["is-dropcap"],{hash:{},inverse:ut.noop,fn:ut.program(8,u,o),data:o}),(at||0===at)&&(lt+=at),lt+="\n            ",at=n["if"].call(e,e&&e["is-info-box"],{hash:{},inverse:ut.noop,fn:ut.program(10,c,o),data:o}),(at||0===at)&&(lt+=at),lt+="\n            ",at=n["if"].call(e,e&&e["full-width"],{hash:{},inverse:ut.noop,fn:ut.program(12,h,o),data:o}),(at||0===at)&&(lt+=at),lt+="\n            ",at=n["if"].call(e,e&&e["captioned-single"],{hash:{},inverse:ut.noop,fn:ut.program(14,d,o),data:o}),(at||0===at)&&(lt+=at),lt+="\n            ",at=n["if"].call(e,e&&e["is-set"],{hash:{},inverse:ut.noop,fn:ut.program(16,p,o),data:o}),(at||0===at)&&(lt+=at),lt+="\n            ",at=n["if"].call(e,e&&e["is-super-quote"],{hash:{},inverse:ut.noop,fn:ut.program(18,f,o),data:o}),(at||0===at)&&(lt+=at),lt+="\n            ",at=n["if"].call(e,e&&e["is-2-column-option"],{hash:{},inverse:ut.noop,fn:ut.program(20,g,o),data:o}),(at||0===at)&&(lt+=at),lt+="\n            ",at=n["if"].call(e,e&&e["is-video"],{hash:{},inverse:ut.noop,fn:ut.program(22,m,o),data:o}),(at||0===at)&&(lt+=at),lt+="\n            ",at=n["if"].call(e,e&&e["is-full-width-video"],{hash:{},inverse:ut.noop,fn:ut.program(24,v,o),data:o}),(at||0===at)&&(lt+=at),lt+="\n            ",at=n["if"].call(e,e&&e["is-text"],{hash:{},inverse:ut.noop,fn:ut.program(26,y,o),data:o}),(at||0===at)&&(lt+=at),lt+='"\n    data-group-id="'+ht((st=e&&e.group,st=null==st||st===!1?st:st.id,typeof st===ct?st.apply(e):st))+'"\n    id="section-'+ht((st=e&&e.group,st=null==st||st===!1?st:st.id,typeof st===ct?st.apply(e):st))+'"\n    data-group-type="'+ht((st=e&&e.group,st=null==st||st===!1?st:st.group_type,typeof st===ct?st.apply(e):st))+'"\n    data-playback="',at=n["if"].call(e,e&&e["playback-loop"],{hash:{},inverse:ut.noop,fn:ut.program(28,b,o),data:o}),(at||0===at)&&(lt+=at),at=n["if"].call(e,e&&e["playback-default"],{hash:{},inverse:ut.noop,fn:ut.program(30,w,o),data:o}),(at||0===at)&&(lt+=at),lt+='"\n    >\n\n    <div class="group-actions-wrapper height-100per pointer-events-none center absolute top-0 left-0 col-12 center z4" aria-hidden="true">\n      <div class="group-actions pointer-events-none inline-block relative clearfix mb2" style="width:95%;position: sticky;top: 65px;left: 0;">\n\n      <div class="left clearfix option-groups">\n\n\n\n          <div class="center single-photo-alignment-controls edit-mode-component-show left pointer-events-auto md-ml2" style="display:none" aria-hidden="true">\n\n            ',at=n.unless.call(e,e&&e["is-super-quote"],{hash:{},inverse:ut.noop,fn:ut.program(32,_,o),data:o}),(at||0===at)&&(lt+=at),lt+="\n\n\n            ",at=n["if"].call(e,e&&e["full-width"],{hash:{},inverse:ut.noop,fn:ut.program(43,T,o),data:o}),(at||0===at)&&(lt+=at),lt+="\n\n\n            ",at=n["if"].call(e,e&&e["has-width-options"],{hash:{},inverse:ut.noop,fn:ut.program(45,O,o),data:o}),(at||0===at)&&(lt+=at),lt+="\n\n            ",at=n["if"].call(e,e&&e["is-native-video"],{hash:{},inverse:ut.noop,fn:ut.program(47,A,o),data:o}),(at||0===at)&&(lt+=at),lt+="\n\n\n            ",at=n["if"].call(e,e&&e["captioned-single"],{hash:{},inverse:ut.noop,fn:ut.program(49,P,o),data:o}),(at||0===at)&&(lt+=at),lt+='\n\n          </div>\n\n\n          <div class="col-12"></div>\n\n          <div class="relative pill bg-red box-shadow-xsm center remove-controls edit-mode-component-show left pointer-events-auto md-ml2 mt1 clear-both h-40" style="display:none;left:2px" aria-hidden="true">\n\n            <a href="" class="remove-photos-hook btn pill w-40 h-40 p0 flex flex-center border-none center" onclick="ga(\'send\', \'event\', { eventCategory: \'Story\', eventAction: \'Click\', eventLabel: \'Remove group\'})" rel="tipsy-w" title="Remove entire group including photos and text">\n              <span class="hide">Remove group</span>\n              <div class="mx-auto option-remove relative h3 regular" style="top:1px"></div>\n            </a>\n\n          </div>\n\n      </div>\n\n\n\n\n        <!---Move group controls --->\n        <div class="edit-mode-component-show right none">\n          <div class="relative pill w-40 h-40 center position-controls box-sizing md-mr2 right animated fadeIn tour-tip pointer-events-auto" title="Move this group up or down your post" rel="tipsy-e">\n              <a onclick="ga(\'send\', \'event\', { eventCategory: \'Story\', eventAction: \'Click\', eventLabel: \'Move group up\'})" href="#" class="pill move-group-up bg-center bg-no-repeat h-40 w-40 border uber-rounded mb1 bg-white box-shadow-xsm" data-direction="up" ',at=n["if"].call(e,e&&e.is_first,{hash:{},inverse:ut.noop,fn:ut.program(51,L,o),data:o}),(at||0===at)&&(lt+=at),lt+=">\n\n                Move This Group Up\n\n              </a>\n\n\n              <a onclick=\"ga('send', 'event', { eventCategory: 'Story', eventAction: 'Click', eventLabel: 'Move group down'})\" href=\"#\" class=\"pill move-group-down bg-center bg-no-repeat h-40 w-40 border uber-rounded bg-white box-shadow-xsm\" data-direction=\"down\"",at=n["if"].call(e,e&&e.is_last,{hash:{},inverse:ut.noop,fn:ut.program(51,L,o),data:o}),(at||0===at)&&(lt+=at),lt+='>\n\n                Move This Group Down\n\n              </a>\n            </div>\n\n      </div>\n      </div>\n    </div>\n\n    <div class="group-wrapper clearfix">\n\n    <div class="group-details type-theme-body lg-col-12 sm-col-8 col-10 clearfix ',at=n.unless.call(e,e&&e["is-set"],{hash:{},inverse:ut.noop,fn:ut.program(53,N,o),data:o}),(at||0===at)&&(lt+=at),lt+=' animateHeight">\n      <div class="group-details-wrapper mx-auto">\n\n          <h2 class="type-theme-heading h1 lg-h0 caps letter-spacing-reset md-letter-spacing-1 lg-mb3 sm-mb2 mb1 mt0 clearfix" data-placeholder="',at=n["if"].call(e,e&&e["super-quote"],{hash:{},inverse:ut.program(57,j,o),fn:ut.program(55,M,o),data:o}),(at||0===at)&&(lt+=at),lt+='" data-field-name="title" ',at=n.unless.call(e,e&&e.has_title,{hash:{},inverse:ut.noop,fn:ut.program(51,L,o),data:o}),(at||0===at)&&(lt+=at),lt+=">",st=e&&e.group,st=null==st||st===!1?st:st.title,at=typeof st===ct?st.apply(e):st,(at||0===at)&&(lt+=at),lt+='\n          </h2>\n\n          <div class="group-description serif story-rhythm type-theme-body clearfix" data-quill-id="group_content_'+ht((st=e&&e.group,st=null==st||st===!1?st:st.id,typeof st===ct?st.apply(e):st))+'" ',at=n.unless.call(e,e&&e.has_desc,{hash:{},inverse:ut.noop,fn:ut.program(51,L,o),data:o}),(at||0===at)&&(lt+=at),lt+=">",at=n["if"].call(e,e&&e["author-is-viewing"],{hash:{},inverse:ut.program(61,I,o),fn:ut.program(59,D,o),data:o}),(at||0===at)&&(lt+=at),lt+='</div>\n      </div>\n    </div>\n\n    <div class="photo-set clearfix">\n\n        <div class="add-new-photos uber-rounded" ',at=n["if"].call(e,e&&e["is-text"],{hash:{},inverse:ut.noop,fn:ut.program(63,q,o),data:o}),(at||0===at)&&(lt+=at),lt+='>\n\n            <div class="add-wrapper uber-rounded">\n              <div class="headings sm-py4 py3 col-12 center">\n                  ',at=n.unless.call(e,e&&e["is-set"],{hash:{},inverse:ut.program(67,F,o),fn:ut.program(65,R,o),data:o}),(at||0===at)&&(lt+=at),lt+="\n\n\n                  <div class=\"btn inline-block pill btn-primary caps bg-off-black open-file-dialog sm-h6 h7\" onclick=\"ga('send', 'event', { eventCategory: 'Story', eventAction: 'Click', eventLabel: 'Browse photos'})\">Browse</div>\n\n                  <div class=\"btn inline-block pill btn-primary caps finish-adding-photos sm-h6 h7 ml2\" onclick=\"ga('send', 'event', { eventCategory: 'Story', eventAction: 'Click', eventLabel: 'Finish replacing photo'})\">Finish</div>\n\n\n              </div>\n            </div>\n\n        </div>\n\n        <div aria-hidden=\"true\" class=\"group-controls pointer-events-none ",at=n.unless.call(e,e&&e["is-set"],{hash:{},inverse:ut.program(71,H,o),fn:ut.program(69,B,o),data:o}),(at||0===at)&&(lt+=at),lt+='">\n\n            <div class="buttons nowrap pointer-events-auto" aria-hidden="true">\n              ',at=n["if"].call(e,e&&e["is-text"],{hash:{},inverse:ut.program(75,W,o),fn:ut.program(73,z,o),data:o}),(at||0===at)&&(lt+=at),lt+='\n            </div>\n\n        </div>\n\n\n        <div class="photos-container" ',at=n["if"].call(e,e&&e["is-text"],{hash:{},inverse:ut.noop,fn:ut.program(63,q,o),data:o}),(at||0===at)&&(lt+=at),lt+=">\n        </div>\n\n        ",at=n["if"].call(e,e&&e["is-video"],{hash:{},inverse:ut.noop,fn:ut.program(85,Z,o),data:o}),(at||0===at)&&(lt+=at),lt+="\n\n    </div>\n\n  </div>\n\n    ",at=n["if"].call(e,e&&e["has-group-caption"],{hash:{},inverse:ut.noop,fn:ut.program(95,it,o),data:o}),(at||0===at)&&(lt+=at),lt+='\n\n\n</div>\n\n\n</div>\n<script type="text/javascript">\n$(document).ready(function() {\n  $(".photos-container").sortable({\n    items: ".sortable-photo > .photo",\n    handle: ".reorder-photo",\n    update: function(event, ui) {\n      $(ui.item).trigger("sort", [$(this).sortable(\'toArray\', { attribute: \'data-sortable-id\' })])\n    },\n    tolerance: "pointer"\n  });\n});\n</script>\n'}),this.JST.photo_group}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;window.CollectionView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.initialize=function(t){return this.listenTo(this.collection,"add",this.add),this.listenTo(this.collection,"reset",this.addAll),null!=t.modelView?this.modelView=t.modelView:void 0},n.prototype.addAll=function(){var t,e,n,i,o,r;for(t=$("<div>"),i=[],this.collection.each(function(e){return function(n){return i.push(e.add(n,null,null,t))}}(this)),this.$el.html(t.contents()),o=[],e=0,n=i.length;n>e;e++)r=i[e],o.push(null!=r&&"function"==typeof r.initQuill?r.initQuill():void 0);return o},n.prototype.add=function(t,e,n,i){var o,r,s,a;return null==i&&(i=this.$el),s=this.collection.indexOf(t),r=i.children().length,o=r<this.collection.length-1,a=new this.modelView({model:t}),a.render(),r===this.collection.length-1&&r>s?i.children().eq(s).before(a.el):i.append(a.el),e&&"function"==typeof a.initQuill&&a.initQuill(),a},n.prototype.render=function(){return this.addAll(),this},n}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;window.PhotoView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.className="sortable-photo",n.prototype.tagName="div",n.prototype.events={"click .photo-bouncer,.open-light-box":"open_lightbox","click .active-caption":"open_lightbox","click .fill-row-hook":"toggle_fill_row","click .delete-photo-hook":"destroy","click .save-caption":"update_caption","click .play-video":"play_video","click .edit-details-hook":"open_lightbox",sort:"sort"},n.prototype.initialize=function(){return this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove),this.listenTo(this.model,"error",this.error),this.listenTo(this.model,"progress",this.progress)},n.prototype.open_lightbox=function(t){return window.$lightbox.open(this.model)},n.prototype.play_video=function(t){var e,n;return e=$(t.target),n=this.$(".native-video-container video"),e.fadeOut("fast"),this.$(".native-video-container video")[0].play(),n.prop({controls:!0}),!1},n.prototype.sort=function(t,e){return this.$el.trigger("update-sort",[e])},n.prototype.update_caption=function(t){return this.model.save({caption:this.$("textarea.caption").val()}),Exposure.showMessage("Saved")},n.prototype.toggle_fill_row=function(){return $(".tipsy").remove(),Exposure.loading(!0),this.model.save({fill_width:!this.model.get("fill_width")},{success:function(){return Exposure.showMessage("Set layout saved."),Exposure.loading(!1)},error:function(){return Exposure.loading(!1)}}),!1},n.prototype.destroy=function(t){var e,n,i,o,r;return e=$(t.target),o={title:"Remove Photo",description:"This will remove the photo from this set. There is no undo.",yesLabel:"Yes, Remove",noLabel:"No, Nevermind"},r=function(t){return function(){t.model.destroy(),Exposure.loading(!1),Exposure.showMessage("Photo Removed successfully")}}(this),i=function(){return Exposure.loading(!1)},n=new ExposureConfirmModal(e,"#confirm-remove",o,r,i),n.show(),!1},n.prototype.remove=function(){var t;return t=this.model.collection,this.$el.find(".photo img").transition({scale:0},"linear",function(e){return function(){return e.$el.remove(),t.trigger("change")}}(this)),!1},n.prototype.error=function(){var t,e;try{e=this.model.file.name}catch(n){t=n,e="one of your photos"}return Exposure.showMessage("There was a problem uploading "+e+". Please try again."),this.model.isNew()?this.model.destroy():void 0},n.prototype.progress=function(t){var e,n;if(t.lengthComputable)return n=t.loaded/t.total*100,e=this.$(".photo-upload-progress"),100>n?(e.show().find(".upload-percent").text(Math.round(n).toString()+"%"),this.$el.find(".photo-controls").hide(),this.$el.closest(".photo-set").find(".group-controls").fadeOut(200)):(e.fadeOut(200),"native-video"===this.$el.closest(".photo-set").closest("[data-group-type]").attr("data-group-type")&&Exposure.showMessage("Video Upload complete, processing started"),this.$el.find(".photo-controls").show(),this.$el.closest(".photo-set").find(".group-controls").fadeIn(200))},n.prototype.json=function(){var t,e;return t={src:this.model.get("data_uri")||_.last(img_cache[this.model.get("photo_key")]||[]),aspect_ratio:1,is_curated:this.model.get("is_curated")},e={photo:_.extend(t,this.model.toJSON())}},n.prototype.render=function(){return this.$el.html(JST.photo(this.json())),this.trigger("render",this),this},n}(Backbone.View)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e=function(t,e){function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;window.PhotoGroupView=function(n){function i(){return this.update_full_width_video=t(this.update_full_width_video,this),this.update_playback_default=t(this.update_playback_default,this),this.update_playback_loop=t(this.update_playback_loop,this),this.update_full_width_options=t(this.update_full_width_options,this),this.update_column_option=t(this.update_column_option,this),this.update_dropcap_option=t(this.update_dropcap_option,this),this.update_alignment_option=t(this.update_alignment_option,this),this.update_color_option=t(this.update_color_option,this),this.update_caption_align=t(this.update_caption_align,this),this.open_file=t(this.open_file,this),i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.events={"click .remove-photos-hook":"destroy","click .alignment-controls":"toggle_align_text","click .info-box-hook":"toggle_info_box","click .position-controls a":"reorder_group","click .replace-video-hook":"toggle_video_form","keypress .group-description":"handle_content","keypress .photo-set-caption":"handle_caption","blur .group-description":"handle_content","blur .photo-set-caption":"handle_caption","focusout .group-description":"handle_content","focusout .photo-set-caption":"handle_caption","keyup .group-details [data-field-name='title']":"set_title","click .add-new-photos-hook, .replace-photo-hook, .finish-adding-photos":"upload_toggle","click .align-caption-hook":"update_caption_align","click .full-width-options-hook":"update_full_width_options","click .color-option-hook":"update_color_option","click .alignment-option-hook":"update_alignment_option","click .column-option-hook":"update_column_option","click .dropcap-hook":"update_dropcap_option","click .playback-default-hook":"update_playback_default","click .playback-loop-hook":"update_playback_loop","click .video-width-hook":"update_full_width_video","drop .add-new-photos":"upload_drop","click .add-video-url form button":"update_video_from_url","click .toggle-embed-raw":"show_embed_raw_code","click .toggle-embed-url":"show_embed_url","click .open-file-dialog":"open_file","update-sort":"updateSort"},i.prototype.initialize=function(){return this.listenTo(this.model,"destroy",this.remove),this.listenTo(this.model,"change",this.set_group_id),this.listenTo(this.model,"quill:enable",function(){var t;return null!=(t=this.$quill)?t.enable(!0):void 0}),this.listenTo(this.model,"quill:disable",function(){var t;return null!=(t=this.$quill)?t.enable(!1):void 0}),this.listenTo(this.model.collection,"add",this.update_order_controls),this.listenTo(this.model.collection,"remove",this.update_order_controls),this.listenTo(this.model.collection,"sort",this.update_order_controls),this.listenTo(this.model.photos,"add",this.update_remaining),this.listenTo(this.model.photos,"remove",this.update_remaining),this.listenTo(this.model.photos,"reset",this.update_remaining),this.subview=new PhotosView({collection:this.model.photos}),window.setTimeout(this.update_full_width_options,0),window.setTimeout(this.update_full_width_video,0),window.setTimeout(this.update_playback,0),window.setTimeout(this.update_color_option,0),window.setTimeout(this.update_alignment_option,0),window.setTimeout(this.update_column_option,0),window.setTimeout(this.update_dropcap_option,0)},i.prototype.set_group_id=function(){var t;return t=this.model.get("id"),this.$(".group").attr("data-group-id",t).attr("id","photo-group-"+t),this.$(".story-section-anchor a").attr("href","#section-"+t)},i.prototype.destroy=function(t){var e,n,i,o,r;return e=$(t.target),o={title:"Remove group and contents",description:"This will remove any photos and writing for this group. There is no undo.",yesLabel:"Yes, Remove",noLabel:"No, Nevermind"},r=function(t){return function(){t.model.destroy(),t.stopListening(),Exposure.showMessage("Group Removed successfully")}}(this),i=function(){},n=new ExposureConfirmModal(e,"#confirm-remove",o,r,i),n.show(),!1},i.prototype.remove=function(){return this.$el.transition({opacity:0},"ease").slideUp("ease",function(t){return function(){return t.$el.remove()}}(this)),this.subview.cleanup(),!1},i.prototype.toggle_align_text=function(){return this.model.save({align:"left"===this.model.get("align")?"center":"left"}),this.$(".group").toggleClass("left-aligned","left"===this.model.get("align")),this.$(".info-box-hook .dot").fadeToggle(),Exposure.showMessage("Alignment saved"),!1},i.prototype.toggle_info_box=function(){return this.model.save({alignment_option:"default"===this.model.get("alignment_option")?"info-box":"default"}),this.$(".group").toggleClass("info-box","info-box"===this.model.get("alignment_option")),this.$(".group .info-box-hook .dot").fadeToggle(),Exposure.showMessage("Information Box Style Toggled and Saved"),!1},i.prototype.upload_toggle=function(){return $("#post").toggleClass("post-adding-photos"),$(".story-drag-drop-overlay-wrapper").addClass("hide"),this.$(".photo-set").toggleClass("adding-new-photos").find(".add-new-photos,.legacy-reorder-photos-hook").fadeToggle("fast"),!1},i.prototype.upload_drop=function(t){var e,n,i,o;return o=("single"===(n=this.model.get("group_type"))||"captioned-single"===n)&&1===this.model.photos.length,e=this.model.create_photos_from_filelist((t.originalEvent.dataTransfer||t.target).files,o?{silent:!0}:{sort:!1}),o&&this.listenToOnce(this.model.photos.last(),"change:width",function(){return this.model.photos.first().destroy(),this.model.photos.trigger("reset",this.model.photos)}),e&&(Exposure.loading(!0),e.always(function(){return Exposure.loading(!1)}),("single"===(i=this.model.get("group_type"))||"captioned-single"===i)&&this.upload_toggle(),Exposure.showMessage("Uploading photo")),!1},i.prototype.open_file=function(t){var e;return e=$('<input style="display:none;height:0;position:absolute;top:0;left:0" type="file" id="_post-cover-photo-file">'),"set"===this.model.get("group_type")&&e.attr("multiple",!0),$("body").append(e),e.on("change",function(t){return function(e){return t.upload_drop(e)}}(this)),e.click()},i.prototype.update_remaining=function(){return this.$(".add-new-photos h5 span").html(this.model.limit()-this.model.photos.length)},i.prototype.update_order_controls=function(){return 1===this.model.collection.length?(this.$(".move-group-up, .move-group-down").fadeOut(),this.$(".position-control-sep").fadeOut()):this.model.collection.length>1&&this.model===this.model.collection.first()?(this.$(".move-group-up").fadeOut(),this.$(".position-control-sep").fadeOut(),this.$(".move-group-down").fadeIn()):this.model.collection.length>1&&this.model===this.model.collection.last()?(this.$(".move-group-up").fadeIn(),this.$(".position-control-sep").fadeOut(),this.$(".move-group-down").fadeOut()):(this.$(".move-group-up, .move-group-down").fadeIn(),this.$(".position-control-sep").fadeIn())},i.prototype.reorder_group=function(t){var e,n,i,o;return Exposure.loading(!0),n=$(t.target).attr("data-direction"),window.$lightbox.close(),"up"===n?i=this.$el.prev():"down"===n&&(i=this.$el.next()),i.length?("up"===n?i.before(this.$el):"down"===n&&i.after(this.$el),$.scrollTo(this.$el,300,{offset:{top:-100}}),o=[],e=$(".photo-groups-container .group"),this.model.collection.each(function(t){var n,i;return n=e.filter("[data-group-id='"+t.get("id")+"']"),t.set("position",e.index(n)+1),t.hasChanged()&&(i=t.save()),i&&o.push(i),1===t.get("position")?n.addClass("first-group"):n.removeClass("first-group")}),o.length&&(Exposure.loading(!0),$.when.apply($,o).done(function(){return Exposure.showMessage("Group moved "+n+" and saved")}).always(function(){return Exposure.loading(!1)})),this.model.collection.sort(),window.setTimeout(function(){return $("html,body").animate({scrollTop:$(t.target).parents(".group-wrapper").offset().top-76},250)},0),!1):!1},i.prototype.update_caption_align=function(t){var e,n;return t.preventDefault(),this.$(".group").removeClass("captioned-single-"+this.model.get("caption_align")),e=$(t.currentTarget),n=e.data("align"),this.$(".group").addClass("captioned-single-"+n),e&&"center"===e.data("align")&&(this.$(".single-center-align .dot").fadeIn("fast"),this.$(".single-left-align .dot,.single-right-align .dot").fadeOut("fast")),e&&"left"===e.data("align")&&(this.$(".single-right-align .dot").fadeIn("fast"),this.$(".single-left-align .dot,.single-center-align .dot").fadeOut("fast")),e&&"right"===e.data("align")&&(this.$(".single-left-align .dot").fadeIn("fast"),this.$(".single-right-align .dot,.single-center-align .dot").fadeOut("fast")),this.model.save({caption_align:n}),Exposure.showMessage("Alignment saved")},i.prototype.update_color_option=function(t){var e,n;return t&&t.preventDefault(),e=t&&$(t.currentTarget),(e&&"color-option-default"===e.data("color")||!t&&"default"===this.model.get("color_option"))&&(n=this.$(".group"),n.addClass("color-option-default"),n.removeClass("color-option-light"),this.$(".color-option-light").addClass("muted"),t&&(Exposure.showMessage("Default colour option saved"),this.$(".color-option-default").removeClass("muted"),this.$(".color-option-light").addClass("muted"),this.model.save({color_option:"default"}))),(e&&"color-option-light"===e.data("color")||!t&&"light"===this.model.get("color_option"))&&(n=this.$(".group"),n.addClass("color-option-light"),n.removeClass("color-option-default"),this.$(".color-option-default").addClass("muted"),t)?(Exposure.showMessage("Light colour option saved"),this.$(".color-option-default").addClass("muted"),this.$(".color-option-light").removeClass("muted"),this.model.save({color_option:"light"})):void 0},i.prototype.update_alignment_option=function(t){var e,n;return t&&t.preventDefault(),e=t&&$(t.currentTarget),(e&&"alignment-option-wide"===e.data("alignment")||!t&&"wide"===this.model.get("alignment_option"))&&(n=this.$(".group"),n.addClass("group-alignment-option-wide"),n.removeClass("group-alignment-option-vertical"),n.removeClass("group-alignment-option-sticky"),n.removeClass("group-alignment-option-default"),n.removeClass("group-alignment-option-bottom"),this.$(".alignment-option-bottom").addClass("muted"),this.$(".alignment-option-sticky").addClass("muted"),this.$(".alignment-option-default").addClass("muted"),this.$(".alignment-option-vertical").addClass("muted"),this.$(".alignment-option-wide").removeClass("muted"),this.$(".alignment-option-small").removeClass("muted"),t&&(Exposure.showMessage("Alignment option saved"),this.$(".alignment-option-bottom").addClass("muted"),this.$(".alignment-option-sticky").addClass("muted"),this.$(".alignment-option-default").addClass("muted"),this.$(".alignment-option-vertical").addClass("muted"),this.$(".alignment-option-wide").removeClass("muted"),this.$(".alignment-option-small").removeClass("muted"),this.model.save({alignment_option:"wide"}))),(e&&"alignment-option-default"===e.data("alignment")||!t&&"default"===this.model.get("alignment_option"))&&(n=this.$(".group"),n.addClass("group-alignment-option-default"),n.removeClass("group-alignment-option-vertical"),n.removeClass("group-alignment-option-sticky"),n.removeClass("group-alignment-option-wide"),n.removeClass("group-alignment-option-bottom"),this.$(".alignment-option-bottom").addClass("muted"),this.$(".alignment-option-sticky").addClass("muted"),this.$(".alignment-option-default").removeClass("muted"),this.$(".alignment-option-vertical").addClass("muted"),this.$(".alignment-option-wide").addClass("muted"),this.$(".alignment-option-small").removeClass("muted"),t&&(Exposure.showMessage("Alignment option saved"),this.$(".alignment-option-bottom").addClass("muted"),this.$(".alignment-option-sticky").addClass("muted"),this.$(".alignment-option-default").removeClass("muted"),this.$(".alignment-option-vertical").addClass("muted"),this.$(".alignment-option-wide").addClass("muted"),this.$(".alignment-option-small").removeClass("muted"),this.model.save({alignment_option:"default"}))),(e&&"alignment-option-vertical"===e.data("alignment")||!t&&"vertical"===this.model.get("alignment_option"))&&(n=this.$(".group"),n.addClass("group-alignment-option-vertical"),n.removeClass("group-alignment-option-default"),n.removeClass("group-alignment-option-sticky"),n.removeClass("group-alignment-option-wide"),n.removeClass("group-alignment-option-bottom"),this.$(".alignment-option-bottom").addClass("muted"),this.$(".alignment-option-sticky").addClass("muted"),this.$(".alignment-option-default").addClass("muted"),this.$(".alignment-option-vertical").removeClass("muted"),this.$(".alignment-option-wide").addClass("muted"),this.$(".alignment-option-small").removeClass("muted"),t&&(Exposure.showMessage("Alignment option saved"),this.$(".alignment-option-bottom").addClass("muted"),this.$(".alignment-option-sticky").addClass("muted"),this.$(".alignment-option-default").addClass("muted"),this.$(".alignment-option-vertical").removeClass("muted"),this.$(".alignment-option-wide").addClass("muted"),this.$(".alignment-option-small").removeClass("muted"),this.model.save({alignment_option:"vertical"}))),(e&&"alignment-option-sticky"===e.data("alignment")||!t&&"sticky"===this.model.get("alignment_option"))&&(n=this.$(".group"),n.addClass("group-alignment-option-sticky"),n.removeClass("group-alignment-option-vertical"),n.removeClass("group-alignment-option-default"),n.removeClass("group-alignment-option-wide"),n.removeClass("group-alignment-option-bottom"),this.$(".alignment-option-bottom").addClass("muted"),this.$(".alignment-option-sticky").removeClass("muted"),this.$(".alignment-option-default").addClass("muted"),this.$(".alignment-option-vertical").addClass("muted"),this.$(".alignment-option-wide").addClass("muted"),this.$(".alignment-option-small").removeClass("muted"),t&&(Exposure.showMessage("Alignment option saved"),this.$(".alignment-option-bottom").addClass("muted"),this.$(".alignment-option-sticky").removeClass("muted"),this.$(".alignment-option-default").addClass("muted"),this.$(".alignment-option-vertical").addClass("muted"),this.$(".alignment-option-wide").addClass("muted"),this.$(".alignment-option-small").removeClass("muted"),this.model.save({alignment_option:"sticky"}))),(e&&"alignment-option-bottom"===e.data("alignment")||!t&&"bottom"===this.model.get("alignment_option"))&&(n=this.$(".group"),n.addClass("group-alignment-option-bottom"),n.removeClass("group-alignment-option-sticky"),n.removeClass("group-alignment-option-vertical"),n.removeClass("group-alignment-option-default"),n.removeClass("group-alignment-option-wide"),this.$(".alignment-option-bottom").removeClass("muted"),this.$(".alignment-option-sticky").addClass("muted"),this.$(".alignment-option-default").addClass("muted"),this.$(".alignment-option-vertical").addClass("muted"),this.$(".alignment-option-wide").addClass("muted"),this.$(".alignment-option-small").removeClass("muted"),t)?(Exposure.showMessage("Alignment option saved"),this.$(".alignment-option-bottom").removeClass("muted"),this.$(".alignment-option-sticky").addClass("muted"),this.$(".alignment-option-default").addClass("muted"),this.$(".alignment-option-vertical").addClass("muted"),this.$(".alignment-option-wide").addClass("muted"),this.$(".alignment-option-small").removeClass("muted"),this.model.save({alignment_option:"bottom"})):void 0},i.prototype.update_dropcap_option=function(t){var e,n;return t&&t.preventDefault(),e=t&&$(t.currentTarget),(e&&"is-dropcap"===e.data("dropcap")||!t&&"false"===this.model.get("dropcap_option"))&&(n=this.$(".group"),n.toggleClass("dropcap"),t&&(Exposure.showMessage("Drop Cap Saved"),this.$(".dropcap-hook .dot").fadeToggle("fast"),this.model.save({dropcap_option:!1}))),(e&&"dropcap"===e.data("dropcap")||!t&&"true"===this.model.get("dropcap_option"))&&(n=this.$(".group"),n.toggleClass("dropcap"),t)?(Exposure.showMessage("Drop Cap Saved"),this.$(".dropcap-hook .dot").fadeToggle("fast"),this.model.save({dropcap_option:!0})):void 0},i.prototype.update_column_option=function(t){var e,n;return t&&t.preventDefault(),e=t&&$(t.currentTarget),(e&&"column-option-1-column"===e.data("column")||!t&&"1-column"===this.model.get("column_option"))&&(n=this.$(".group"),n.removeClass("column-options-2"),t&&(Exposure.showMessage("1 column layout enabled and saved"),this.$(".column-option-1-column").addClass("pointer-events-none"),this.$(".column-option-2-column .dot").fadeToggle("fast"),this.model.save({column_option:"1-column"}))),(e&&"column-option-2-column"===e.data("column")||!t&&"2-column"===this.model.get("column_option"))&&(n=this.$(".group"),n.addClass("column-options-2"),
t)?(Exposure.showMessage("2 column layout enabled and saved"),this.$(".column-option-1-column").removeClass("pointer-events-none"),this.$(".column-option-2-column .dot").fadeToggle("fast"),this.model.save({column_option:"2-column"})):void 0},i.prototype.update_full_width_options=function(t){var e,n,i,o,r;return t&&t.preventDefault(),e=t&&$(t.currentTarget),(e&&"full-width-parallax"===e.data("layout")||!t&&"parallax"===this.model.get("full_width_layout"))&&(r=this.$(".photo"),n=this.$(".group"),i=this.$(".group-details"),r.addClass("full-width-parallax"),r.removeClass("full-width-parallax-overlay"),n.removeClass("full-width-parallax-overlay-wrapper"),n.addClass("full-width-parallax-wrapper"),n.removeClass("full-width-parallax-overlay-group"),i.removeClass("full-width-parallax-overlay-group-details"),o=this.$(".photo img"),o.addClass("parallax-hide"),this.$(".full-width-options-hook-parallax .dot").fadeIn("fast"),this.$(".full-width-options-hook-default .dot,.full-width-options-hook-overlay .dot").fadeOut("fast"),r.css("background-image","url('"+o.attr("src")+"')"),t&&(Exposure.showMessage("Parallax layout saved"),this.$(".parallax-overlay-color-options").addClass("hidden"),this.model.save({full_width_layout:"parallax"}))),(e&&"full-width-parallax-overlay"===e.data("layout")||!t&&"parallax_overlay"===this.model.get("full_width_layout"))&&(r=this.$(".photo"),i=this.$(".group-details"),n=this.$(".group"),r.addClass("full-width-parallax-overlay"),i.addClass("full-width-parallax-overlay-group-details"),n.addClass("full-width-parallax-overlay-group"),r.removeClass("full-width-parallax"),n.addClass("full-width-parallax-overlay-wrapper"),n.removeClass("full-width-parallax-wrapper"),this.$(".parallax-overlay-color-options").removeClass("hidden"),this.$(".full-width-options-hook-overlay .dot").fadeIn("fast"),this.$(".full-width-options-hook-default .dot,.full-width-options-hook-parallax .dot").fadeOut("fast"),o=this.$(".photo img"),o.addClass("parallax-hide"),r.css("background-image","url('"+o.attr("src")+"')"),t&&(Exposure.showMessage("Parallax with overlay layout saved"),this.$(".parallax-overlay-color-options").removeClass("hidden"),this.model.save({full_width_layout:"parallax_overlay"}))),(e&&"full-width-standard"===e.data("layout")||!t&&"normal"===this.model.get("full_width_layout"))&&(i=this.$(".group-details"),n=this.$(".group"),r=this.$(".photo"),n.removeClass("full-width-parallax-overlay-wrapper"),n.removeClass("full-width-parallax-wrapper"),r.removeClass("full-width-parallax-overlay "),n.removeClass("full-width-parallax-overlay-group"),i.removeClass("full-width-parallax-overlay-group-details"),this.$(".photo").removeClass("full-width-parallax").css("background-image","none"),this.$(".photo img").removeClass("parallax-hide"),this.$(".full-width-options-hook-default .dot").fadeIn("fast"),this.$(".full-width-options-hook-overlay .dot,.full-width-options-hook-parallax .dot").fadeOut("fast"),t)?(Exposure.showMessage("Default full-width layout saved"),this.$(".parallax-overlay-color-options").addClass("hidden"),this.model.save({full_width_layout:"normal"})):void 0},i.prototype.update_playback_loop=function(t){return t&&t.preventDefault(),Exposure.showMessage("Silent loop playback saved"),this.$(".native-video-container video")[0].play(),this.$(".native-video-container video").prop({autoplay:!0,muted:!0,playsinline:!0,loop:!0,controls:!1}),this.$(".native-video-container .play-video").fadeOut(),this.$(".playback-default-hook .dot").fadeOut("fast"),this.$(".playback-loop-hook .dot").fadeIn("fast"),t?this.model.save({playback_option:"loop"}):void 0},i.prototype.update_playback_default=function(t){return t&&t.preventDefault(),Exposure.showMessage("Traditional video playback saved"),this.$(".native-video-container video")[0].pause(),this.$(".native-video-container video")[0].currentTime=0,this.$(".native-video-container .play-video").fadeIn(),this.$(".native-video-container video").prop({autoplay:!1,muted:!1,playsinline:!1,loop:!1,controls:!1}),this.$(".playback-default-hook .dot").fadeIn("fast"),this.$(".playback-loop-hook .dot").fadeOut("fast"),t?this.model.save({playback_option:"default"}):void 0},i.prototype.update_full_width_video=function(t){var e;return t&&t.preventDefault(),e=t&&$(t.currentTarget),t?(this.$(".group").toggleClass("full-width-video"),this.model.save({embed_layout:this.$(".group").hasClass("full-width-video")?"full-width":"normal"},this.$(".group").hasClass("full-width-video")?(this.$(".video-width-hook-full .dot").fadeIn("fast"),this.$(".video-width-hook-standard .dot").fadeOut("fast")):(this.$(".video-width-hook-full .dot").fadeOut("fast"),this.$(".video-width-hook-standard .dot").fadeIn("fast")))):void 0},i.prototype.set_title=function(t){var e,n;return n=$(t.target).makeEditable("getValue"),e=this.model.get("title")===n?!1:!0,this.model.set("title",n),PostsView.dirty=!0},i.prototype.handle_content=function(t){var e;return e=$(t.target),this.model.set("content",e.html()),PostsView.dirty=!0},i.prototype.handle_caption=function(t){var e;return e=$(t.target),this.model.set("caption",e.html()),PostsView.dirty=!0},i.prototype.endPhotoReordering=function(){return $("#snowstorm-overlay").fadeOut(200)},i.prototype.updateAndPersistPhotoOrder=function(t){var e,n;return n=[],e=$("#photo-reordering-container img"),this.model.photos.each(function(e){var i;return e.set("position",t[e.get("id")]),e.hasChanged()&&(i=e.save()),i?n.push(i):void 0}),n.length?(this.model.photos.sort(),Exposure.loading(!0),$.when.apply($,n).always(function(){return Exposure.loading(!1)})):void 0},i.prototype.make_editable=function(){return this.$(".photo-set-caption").makeEditable("super-quote"===this.model.get("group_type")?{placeholder:"Type an optional quote citation"}:{placeholder:"Type an optional group caption"},{multiLine:!1,maxLength:250}).makeEditable(!1),this.$(".group-details h2").makeEditable("super-quote"===this.model.get("group_type")?{placeholder:"\u201cType a quote you want to highlight\u201d"}:{placeholder:"Group Title (Optional)"},{multiLine:!1,maxLength:250}).makeEditable(!1)},i.prototype.make_dropable=function(){return this.$(".add-new-photos").dropArea()},i.prototype.updateSort=function(t,e){var n,i;return i=this,n=this.makePostDataForSortable(e),$.ajax({type:"POST",url:"/sortable/reorder",dataType:"json",contentType:"application/json",data:JSON.stringify({sort:n}),success:function(t){return i.updateAndPersistPhotoOrder(t),Exposure.showMessage("Photo order updated")},error:function(t,e,n){return Exposure.showMessage("There was a problem saving your reorder, please try again")}})},i.prototype.makePostDataForSortable=function(t){return $.map(t,function(t){var e,n,i;return i=t.split("_"),n=i[0],e=i[1],{klass:n,id:e}})},i.prototype.json=function(){var t,e,n,i;return n={"has-group-caption":"set"===this.model.get("group_type")||"native-video"===this.model.get("group_type")||"super-quote"===this.model.get("group_type")||"native-audio"===this.model.get("group_type"),"has-width-options":"video"===this.model.get("group_type")||"native-video"===this.model.get("group_type"),"has-text":"video"!==this.model.get("group_type"),"playback-default":"default"===this.model.get("playback_option"),"playback-loop":"loop"===this.model.get("playback_option"),"is-full-width":"full-width"===this.model.get("embed_layout"),"is-standard-width":"normal"===this.model.get("embed_layout"),"is-super-quote":"super-quote"===this.model.get("group_type"),"is-set":"set"===this.model.get("group_type"),"full-width":"single"===this.model.get("group_type"),"captioned-single":"captioned-single"===this.model.get("group_type"),align:this.model.get("align"),"caption-align":this.model.get("caption_align"),"is-full-width-video":"full-width"===this.model.get("embed_layout"),"is-single-right-aligned":"right"===this.model.get("caption_align"),"is-single-left-aligned":"left"===this.model.get("caption_align"),"is-single-center-aligned":"center"===this.model.get("caption_align"),"is-full-width-parallax":"parallax"===this.model.get("full_width_layout"),"is-full-width-default":"normal"===this.model.get("full_width_layout"),"is-full-width-parallax-overlay":"parallax_overlay"===this.model.get("full_width_layout"),"is-default-color-option":"default"===this.model.get("color_option"),"is-default-column-option":"1-column"===this.model.get("column_option"),"is-2-column-option":"2-column"===this.model.get("column_option"),"is-dropcap":this.model.get("dropcap_option")===!0,"is-info-box":"info-box"===this.model.get("alignment_option"),"is-video":"video"===this.model.get("group_type"),"is-native-video":"native-video"===this.model.get("group_type"),"is-native-audio":"native-audio"===this.model.get("group_type"),"is-text":"text"===this.model.get("group_type"),"left-align":"left"===this.model.get("align")||!this.model.get("align"),group:this.model.toJSON(),video_type:this.model.get("video_type"),"show-group-help":current_user.get("posts_count")<3,remaining_count:this.model.limit()-this.model.photos.length,is_first:this.model===this.model.collection.first(),is_last:this.model===this.model.collection.last(),"author-is-viewing":"true"===$("#post").attr("data-author-viewing"),"pro-or-biz":"true"===$('meta[name="user-is-pro-or-biz"]').attr("content"),"tier-3-feature":"true"===$("#post").attr("data-is-tier-3"),"tier-2-feature":"true"===$("#post").attr("data-is-tier-2"),"tier-1-feature":"true"===$("#post").attr("data-is-tier-1"),"sub-url":$("[data-sub-url]").attr("data-sub-url")},n.has_title=!(!this.model.get("title")||"Group Title (Optional)"===$("<div>"+this.model.get("title")+"</div>").text()||"Group Title"===$("<div>"+this.model.get("title")+"</div>").text()),n.has_caption=!(!this.model.get("caption")||"Type an optional group caption"===$("<div>"+this.model.get("caption")+"</div>").text()||"Type an group photo set caption"===$("<div>"+this.model.get("caption")+"</div>").text()||"Type an optional photo set caption"===$("<div>"+this.model.get("caption")+"</div>").text()),n.has_citation=!(!this.model.get("caption")||"Type an optional quote citation"===$("<div>"+this.model.get("caption")+"</div>").text()||"Type an optional quote citation"===$("<div>"+this.model.get("caption")+"</div>").text()),n.has_desc=(i=/^\<p\>(write your story here|what (is this|are these) photo)/i,t="true"===$("#post").attr("data-author-viewing"),e=this.model.contextuallyLatestContent(t),!!(e&&!e.match(i))),n},i.prototype.initQuill=function(){var t;return"true"===$("#post").attr("data-author-viewing")&&!this.$quill&&(t={readOnly:!0,modules:{toolbar:[["bold","italic","underline","strike",{header:4},{size:["small",!1,"large","huge"]}],[{align:[]}],[{list:"ordered"},{list:"bullet"}],["blockquote"],["link"],[{header:6}],["clean"]],clipboard:{matchVisual:!1}},placeholder:"Write your story here. (Optional)",theme:"bubble"},this.$quill||(this.$quill=new Quill(this.$(".group").find("[data-quill-id]").get(0),t)),this.$(".ql-blank").length)?this.$(".group-description").hide():void 0},i.prototype.render=function(){var t,e,n;return this.$el.html(JST.photo_group(this.json())),this.subview.setElement(this.$(".photos-container")),this.subview.render(),this.make_editable(),"ex.custom"===this.$(".video-container").attr("data-service")?this.$(".toggle-embed-raw").trigger("click"):this.$(".toggle-embed-url").trigger("click"),"gmaps"===this.$(".video-container").attr("data-service")&&(t=function(i){var o;return o=$(this),o.off("click",t),n.css("pointer-events","auto"),o.on("mouseleave",e)},e=function(i){var o;return o=$(this),o.on("click",t),o.off("mouseleave",e),n.css("pointer-events","none")},n=this.$(".video-container iframe"),n.css("pointer-events","none").closest(".video-embed-area").bind("click",t)),this},i.prototype.update_video_from_url=function(t){var e,n,i,o,r,s,a;return t.preventDefault(),n=this.$("input[name=video-url]"),a=n.val().trim(),r=this.$("textarea[name=raw-markup]"),o=r.val().trim(),e=this,!a&&o&&"true"===$('meta[name="user-is-pro-or-biz"]').attr("content")?(e.model.save({video_url:null,video_embed:JSON.stringify({ex_custom:!0,html:o,video_type:"ex.custom"})}),e.$(".video-embed-area").attr("data-is-custom-embed",!0),e.$(".video-container").attr("data-service","ex.custom"),e.$(".video-embed-area").attr("data-service","ex.custom"),this.$(".video-validation").hide(),this.$("form").removeClass("error"),e.$(".video-container").html(o.replace(/<script /gi,"<script async ")).show(),e.$(".add-video-url").hide(),void this.$(".video-container, .video-embed-area").toggleClass("embed-edit")):a||o||!this.$(".embed-social-post").hasClass("hide")?(this.$(".video-validation").hide(),this.$("form").removeClass("error"),a&&a.match(/(twitter|facebook|animoto|video214|vimeo|youtu|soundcloud|spotify|instagram|(?=.*\bgoogle\b)(?=.*\bmaps\b))/i)?(i=a.match(/vimeo/i)?"https://vimeo.com/api/oembed.json?title=false&byline=false&portrait=false&color=fff&url="+encodeURIComponent(a):a.match(/twitter/i)?"https://api.twitter.com/1/statuses/oembed.json?url="+encodeURIComponent(a):a.match(/facebook/i)?"https://www.facebook.com/plugins/post/oembed.json/?url="+encodeURIComponent(a):a.match(/instagram/i)?"https://api.instagram.com/oembed?url="+encodeURIComponent(a):"/oembed.json?url="+encodeURIComponent(a),this.$(".getting-video-info").fadeIn("slow"),e.$(".video-container, .video-embed-area").removeAttr("data-service"),e.$(".content-og-link").hide(),s=a.match(/instagram/)?"":"jsonp",$.ajax({url:i+"&callback=?",dataType:s,complete:function(){return e.$(".getting-video-info").fadeOut("slow")},success:function(t){var n;return a.match(/vimeo/)?n="vimeo":a.match(/twitter/)?n="twitter":a.match(/facebook/)?n="facebook":a.match(/soundcloud/)?n="soundcloud":a.match(/spotify/)?n="spotify":a.match(/youtu/)?n="youtube":a.match(/instagram/)?n="instagram":a.match(/(?=.*\bgoogle\b)(?=.*\bmaps\b)/)?n="gmaps":a.match(/(animoto|video214)\./)&&(n="animoto"),e.$(".add-video-url").hide(),e.$(".content-og-link").attr("href",a).show(),e.$(".video-container").attr("data-service",n).html(t.html).show(),e.$(".video-embed-area").attr("data-service",n).attr("data-is-custom-embed",!1),e.$(".video-container, .video-embed-area").removeClass("embed-edit"),e.model.save({video_url:a,video_embed:JSON.stringify(t)})},error:function(){return e.$(".video-validation").show(),e.$("form").addClass("error"),n.focus()}}),!1):(this.$(".video-validation").show(),this.$("form").addClass("error"),void n.focus())):void r.focus()},i.prototype.toggle_video_form=function(t){return t.preventDefault(),this.$(".add-video-url").fadeToggle("fast","linear"),this.$(".video-container").fadeToggle("fast","linear"),this.$(".video-container, .video-embed-area").removeAttr("data-service"),this.$(".video-container, .video-embed-area").toggleClass("embed-edit"),!1},i.prototype.show_embed_url=function(t){return $(t.target).addClass("active"),this.$(".toggle-embed-raw").removeClass("active"),this.$(".embed-own-code").addClass("hide"),this.$(".embed-social-post").removeClass("hide"),this.$(".video-validation").hide(),this.$("form").removeClass("error")},i.prototype.show_embed_raw_code=function(t){return $(t.target).addClass("active"),this.$(".toggle-embed-url").removeClass("active"),this.$(".embed-social-post").addClass("hide"),this.$(".embed-own-code").removeClass("hide"),this.$("input[name=video-url]").val(""),this.$(".video-validation").hide(),this.$("form").removeClass("error")},i}(Backbone.View)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;window.PhotoGroupsView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.modelView=PhotoGroupView,n}(CollectionView)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;window.img_cache={},window.PhotosView=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.modelView=PhotoView,n.prototype.initialize=function(){return n.__super__.initialize.apply(this,arguments),this.listenTo(this.collection,"change",function(){return this.render_grid()}),this.listenTo(this.collection,"sort",this.addAll)},n.prototype.initAudios=function(t){return $(window).width()>680?(t.removeClass("audio-player").addClass("new-audio"),t.addClass("processing-audio"),console.log("************* initAudios()",t.attr("class")),setTimeout(function(){return t.removeClass("processing-audio"),new GreenAudioPlayer(".new-audio")},1e4)):void 0},n.prototype.add=function(t,e,i,o){var r;return null==o&&(o=this.$el),r=n.__super__.add.apply(this,arguments),r.on("render",function(t){return function(){return t.render_grid()}}(this)),o.children().length===this.collection.length?this.render_grid(o):void 0},n.prototype.render_grid=function(t){var e,n,i,o,r,s,a,l,u,c,h,d,p,f,g,m,v,y,b,w,x,k,C,E,S,T,O,A;if(null==t&&(t=this.$el),x=function(t){return function(e,n,i){var o,r,s,a,l,u,c,h,d,p;return null==i&&(i=e.get("width")),/^data:/.test(n.attr("src"))||!e.get("asset_url")||/^data:/.test(e.get("asset_url"))?void 0:(d=t.scale_width(i),(h=img_cache[e.get("photo_key")])&&(o=h[d]||_.last(h),r=h.indexOf(o),/mp4|mov/.test(o)?t.preload(o,n):(n.attr("src",c),t.initAudios(n))),!o||d>r?(l=e.get("asset_url"),a=l.split(".").slice(-1)[0].toLowerCase(),s=t.cdn_params(d,a),null!=s&&(l=l.concat(s)),c=l,p=n.attr("data-lazy-loaded"),p?n.attr("src",l):n.attr("src",c),n.attr("data-full-src",l),img_cache[u=e.get("photo_key")]||(img_cache[u]=[]),img_cache[e.get("photo_key")][d]=l):void 0)}}(this),1===this.collection.length)return t.find(".photo").addClass("single").width("").height(""),void x(this.collection.first(),t.find("img, .native-video-container video, .native-video-container video source, .native-audio-container .audio-player"),$(window).width()*this.scale_multiplier());for(d=Math.pow(1.618,2),$(window).width()<680&&(d=4.8),T=.8333333*$(".photo-groups-container").width(),$(window).width()<680&&(T=1*$(".photo-groups-container").width()),o=Math.round($(window).height()/d),o>500&&(o=500),E=this.collection.reduce(function(t,e){return t+=e.get("aspect_ratio")*o},0),w=Math.round(E/T),f=Partition.partition(this.collection,w),b={},i=r=0,l=f.length;l>r;i=++r){for(m=f[i],C=_.reduce(m,function(t,e){return t+=parseFloat(e.get("aspect_ratio"))},0),y=0,a=0,u=m.length;u>a;a++)g=m[a],e=t.find("#photo-"+g.get("photo_key")),e.find("a.fill-row-hook").parent("li").toggle(1!==this.collection.length),O=parseInt(T/C*g.get("aspect_ratio"))-1,n=parseInt(T/C),e.width(O).height(n),y+=O,x(g,e.find("img, .native-video-container video, .native-video-container video source,.native-audio-container audio source"),O);b[i]=y}k=Number.POSITIVE_INFINITY,p=!1;for(s in b)S=b[s],k>S&&(k=S,p=!0);if(p){for(v=[],i=h=0,c=f.length;c>h;i=++h)m=f[i],A=b[i]-k,A>0?(g=_.last(m),e=t.find("#photo-"+g.get("photo_key")),v.push(e.width(e.width()-A))):v.push(void 0);return v}},n.prototype.scale_multiplier=_.once(function(){return $("html").hasClass("highresdisplay")?1.6:1}),n.prototype.scale_width=function(t){return 100*Math.ceil(t*this.scale_multiplier()/100)},n.prototype.cdn_params=function(t,e){return null==e&&(e="jpeg"),"gif"!==e.toLowerCase()?($(window).width()>680&&t>3e3&&(t="2000px"),$(window).width()<680&&t>3e3&&(t="1200px")):($(window).width()>680&&(t="600"),$(window).width()<680&&(t="500")),"embedly"===EXPOSURE_IMAGE_PROXY?"&quality=100&width="+t:"imgix"===EXPOSURE_IMAGE_PROXY?"&fm=jpg&w="+t:"processor_ai"===EXPOSURE_IMAGE_PROXY?["mov","mp4"].includes(e.toLowerCase())?$(window).width()<680?";/resize(800px,_,fit)/crf(20).mp4":";/resize(1920,_,fit)/crf(20).mp4":";resize("+t+",_)."+e.toLowerCase()+("gif"!==e.toLowerCase()?"?auto=webp":""):void 0},n.prototype.make_resizeable=function(){return this._resize_event=_.debounce(function(t){return function(e){return t.render_grid()}}(this),250),$(window).bind("resize",this._resize_event)},n.prototype.cleanup=function(){return $(window).unbind("resize",this._resize_event)},n.prototype.preload=function(t,e){var n,i;return i=this.sleep,(n=function(o){return function(){return $.getJSON(t+"?preload").done(function(o){return"ok"===o.status?($(window).width()>820&&Exposure.showMessage("Video Processing complete"),$(".processing-progress").fadeOut(),$("button.play-video").fadeIn(),e.attr("src",t),!0):(i(2500).then(n),$(".processing-progress").fadeIn(),$("button.play-video").fadeOut())}).fail(function(t){return i(2500).then(n),$(".processing-progress").fadeIn(),$("button.play-video").fadeOut()})}}(this))()},n.prototype.sleep=function(t){return new Promise(function(e){return function(e){return setTimeout(e,t)}}(this))},n.prototype.render=function(){return n.__super__.render.apply(this,arguments),this.make_resizeable(),this},n}(CollectionView)}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty,o=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};window.PostView=function(t){function i(){return this.cover_video_processed=e(this.cover_video_processed,this),this.watch_cover_video_processing=e(this.watch_cover_video_processing,this),i.__super__.constructor.apply(this,arguments)}return n(i,t),i.prototype.events={"drop header":"cover_drop","drop .upload-target":"upload_drop","click .edit-post":"edit_start","click .cancel-changes":"edit_cancel","click .password .button,#story-password .story-password-save":"save_password","click .story-password-remove":"remove_password","click .save-story-cta-button":"save_cta_btn","click  #story-url .save-story-url":"save_slug","click .change-related-user .button":"save_related_user","click  #story-keywords .save-story-keywords":"save_meta_kw","click  .save-cover-layout-split":"save_cover_split","click  .save-cover-layout-split-fixed":"save_cover_split_fixed","click  .save-cover-layout-split-scroll":"save_cover_split_scroll","click  .save-cover-layout-simple":"save_cover_simple","click  .save-cover-layout-overlay":"save_cover_overlay","click  .cover-photo-position-bottom":"save_cover_position_bottom","click  .cover-photo-position-top":"save_cover_position_top","click  .cover-photo-position-left":"save_cover_position_left","click  .cover-photo-position-right":"save_cover_position_right","click  .cover-photo-position-center":"save_cover_position_center","click  .upload-cover-video":"upload_cover_video","click  .remove-cover-video":"remove_cover_video","click  .toggle-hide-cover-video":"toggle_hide_cover_video","click  .close-audio":"close_audio","click  .audio-helper-modal-hook":"audio_helper_modal","click  .video-cover-upsell-hook":"video_cover_upsell","click  .quote-helper-modal-hook":"quote_helper_modal","click  .video-helper-modal-hook":"video_helper_modal","click  .interaction-label-helper-modal-hook":"interaction_label_helper_modal","click  #story-desc .save-story-desc":"save_meta_desc","click .post-date .button,#story-publish-date .save-story-publish-date":"save_date","click .story-options-panel input[type=checkbox],.pre-publish-options input[type=checkbox],.options-panel":"save_options","click .post-settings":"toggle_settings","click .cover-options-hook":"toggle_cover_settings","click .publish-post":"publish","click .un-publish-story":"un_publish","click .draft-post":"save","click .delete-post":"destroy","click .upgrade-account":"upgrade_account","click .cover-hotspot":"toggle_cover","click #open-category-list-hook":"show_category_picker","click #save-category-changes-hook":"close_category_picker","click #category-list .list a.button":"toggle_category","click .upload-change-cover-image":"open_cover_file_dialog","click .upload-target":"open_photo_file_dialog","click .embed-upgrade-wall-link":"upgrade_account"},i.prototype.initialize=function(){var t,e,n,i;return this.listenTo(this.model,"change:published_at",this.update_date),this.listenTo(this.model,"change:slug",this.update_slug),this.listenTo(this.model,"change:disable_enjoys",this.toggle_enjoys),this.listenTo(this.model,"change:hide_cover",this.hide_cover),this.listenTo(this.model,"change:hide_avatar",this.hide_avatar),this.listenTo(this.model,"change:send_email_notification",this.send_email_notification),this.listenTo(this.model,"change:show_donate",this.show_donate),this.listenTo(this.model,"change:lightbox_toggle",this.toggle_lightbox),this.listenTo(this.model,"change:hide_date",this.toggle_date),this.listenTo(this.model,{"change:categories":this.refresh_category_links}),this.listenTo(this.model,"progress",this.progress),this.listenTo(this.model,"uploadStart",this.uploadStart),this.listenTo(this.model,"uploadFinish",this.uploadFinish),this.subview=new PhotoGroupsView({collection:this.model.photo_groups}),this.refresh_category_links(this.model),t=Quill["import"]("formats/link"),t.sanitize=function(t){return t.match(/^mailto:/)?t:t.match(/^https?/i)?t:"http://"+t},this.model.get("copy_of_id")&&(null!==window.location.search.match(/copied=1/)&&Exposure.showMessage("Your story has been successfully duplicated"),null===this.model.get("copy_done_at")&&(e=$("#copying-loading-overlay"),e.removeClass("hide"),i=this.model.get("slug"),(n=function(){return $.get(i+"/dupe-status").done(function(t){return t.done===!0?(e.find(".icon-copy, .hide-done").hide(),e.find(".copy-h1").html("All done."),e.find(".icon-check").removeClass("hide"),e.find("#copy-overlay-reload-btn").removeClass("hide"),e.find("#copy-overlay-back").hide()):setTimeout(n,2500)})})())),this.$(".upload-target").on("dragover dragenter",function(t){return $(t.currentTarget).addClass("muted")}).on("dragleave dragend drop",function(t){return $(t.currentTarget).removeClass("muted")})},i.prototype.video_cover_upsell=function(){return $("#video-cover-upsell").show(),!1},i.prototype.close_audio=function(){var t,e;for(e=document.querySelectorAll(".green-audio-player audio"),t=0;t<e.length;)GreenAudioPlayer.pausePlayer(e[t]),e[t].parentNode.classList.remove("playing"),t++;return!1},i.prototype.quote_helper_modal=function(){return $("#quote-helper-modal").show(),!1},i.prototype.video_helper_modal=function(){return $("#video-helper-modal").show()},i.prototype.audio_helper_modal=function(){return $("#audio-helper-modal").show()},i.prototype.interaction_label_helper_modal=function(){return $("#interaction-label-helper-modal").show(),!1},i.prototype.watch_cover_video_processing=function(){var t;return t="https://exposure.accelerator.net/"+this.model.attachment_key()+";video/resize(1920,1080,fit)/crf(22).mp4",this.interval=window.setInterval(function(e){return function(){return $.ajax({url:t}).done(function(n){return n&&"processing"!==n.status?e.cover_video_processed(t):void 0})}}(this),5e3)},i.prototype.cover_video_processed=function(t){return window.clearInterval(this.interval),$(".upload-cover-video").removeClass("disabled-block").text("Upload looping video"),$(".uploading-cover-video").addClass("hide"),$(".remove-cover-video,.toggle-hide-cover-video").removeClass("hide"),Exposure.showMessage("Video cover processing finished"),this.$("#cover-image video").attr("src",t),console.log("[VIDEO]",this.$("video")),this.$("video").get(0)?this.$("#cover-image video").get(0).play():void 0},i.prototype.upload_cover_video=function(t){var e,n;return e=["video/mp4","video/quicktime"],this.model.get("cover_photo_file_name")?($("#_post-cover-video-file").remove(),n=$('<input accept="'+e.join(",")+'" style="display:none;height:0;position:absolute;top:0;left:0" type="file" id="_post-cover-video-file">'),$("body").append(n),n.on("change",function(t){return function(n){var i;return i=(n.originalEvent.dataTransfer||n.target).files[0],i?!e.includes(i.type)||i.size>52428800?Exposure.showMessage("Video file must be MP4 and below 50MB and 30 seconds or less"):(Exposure.showMessage("Uploading cover video, you can add to your story as this is processing"),$(".upload-cover-video").addClass("disabled-block"),$(".remove-cover-video,.toggle-hide-cover-video").addClass("hide"),$(".uploading-cover-video").removeClass("hide"),$(".looping-video-info").addClass("hide"),t.model.setAttachment(i,"video"),t.model.file&&/video/.test(t.model.file.type)?(Exposure.loading(!0),$(".upload-cover-video").text("Uploading your video\u2026"),t.model.save({cover_video_file_name:i.name,cover_video_file_size:i.size,cover_video_content_type:i.type},{success:function(){return Exposure.loading(!1),$(".upload-cover-video").text("Processing the video\u2026"),t.$("#cover-image video").attr("poster","https://exposure.accelerator.net/"+t.model.attachment_key()+";frame(1).jpg"),t.$("#cover-image video").attr("src",!1),t.$("#cover-image #video-container").removeClass("hide"),t.watch_cover_video_processing()},error:function(){return Exposure.loading(!1),Exposure.showMessage("We couldn\u2019t upload that cover video. Please try again.")}})):!1):!1}}(this)),n.click()):Exposure.showMessage("Upload a cover photo first, this will be used as your share image and in your story feed"),!1},i.prototype.toggle_hide_cover_video=function(t){return $(".toggle-hide-cover-video").toggleClass("video-hidden"),$("#cover-image #video-container").toggle(),Exposure.showMessage("Cover Video Visibility Toggled"),!0},i.prototype.remove_cover_video=function(t){var e,n,i,o,r;return e=$(t.target),o={title:"Remove looping video",description:"Removing this video is permanent. Once it\u2019s gone, it\u2019s gone for good. Are you sure? <b>This will save and reload your story</b>.",yesLabel:"Yes, Remove It",noLabel:"No, Keep It"},r=function(t){return function(){Exposure.loading(!0),t.model.save({_delete_cover_video:!0},{wait:!0,success:function(){return Exposure.loading(!1),$(".remove-cover-video,.toggle-hide-cover-video").addClass("hide"),$("#cover-image #video-container").addClass("hide"),Exposure.showMessage("Removing Video..."),window.location.reload()},error:function(){return Exposure.loading(!1),Exposure.showMessage("We couldn\u2019t remove that cover video. Please try again.")}})}}(this),i=function(){},n=new ExposureConfirmModal(e,"#confirm-video-cover-delete",o,r,i),n.show(),!1},i.prototype.show_category_picker=function(t){return t.preventDefault(),this.$(".options-panel").removeClass("active"),window.$categoryManager||(window.$categoryManager=new ExposureCategoryManager),window.$categoryManager.show(),!1},i.prototype.close_category_picker=function(t){return t.preventDefault(),window.$categoryManager&&window.$categoryManager.hide(),!1},i.prototype.hide_cover=function(t){return $("body").toggleClass("hide-cover"),$(".toggle-show-cover-photo").toggle(),!0},i.prototype.hide_avatar=function(t){return $("body").toggleClass("hide-avatar"),!0},i.prototype.send_email_notification=function(t){return Exposure.showMessage("Email notification Toggled"),!0},i.prototype.show_donate=function(t){return $(".partner-buttons").slideToggle(),$(".story-cta-option-inputs").toggleClass("muted pointer-events-none"),!0},i.prototype.toggle_category=function(t){var e,n,i,o,r;if(t.preventDefault(),r=$(t.target),o=+r.attr("data-id"),i=r.hasClass("active"),e=_.clone(this.model.get("categories")),n=_.size(e),i)delete e[o],this.$("#category-list").removeClass("maxed-out");else{if(n>=EXPOSURE_MAX_CATS-1&&this.$("#category-list").addClass("maxed-out"),!r.hasClass("subject")&&n+1>EXPOSURE_MAX_CATS)return!1;e[o]={slug:r.attr("data-slug"),name:r.attr("data-name")}}return this.model.set({categories:e}),this.model.save({categories:e,changing_cats:"yes"}),r.toggleClass("active"),!1},i.prototype.refresh_category_links=function(t){return!1},i.prototype.open_cover_file_dialog=function(t){var e,n;return $("#_post-cover-photo-file").remove(),n=$('<input style="display:none;height:0;position:absolute;top:0;left:0" type="file" id="_post-cover-photo-file" accept="image/x-png,image/gif,image/jpeg" >'),$("body").append(n),e=this,n.on("change",function(t){return e.cover_drop(t)}),n.click()},i.prototype.open_video_file_dialog=function(t){return this.open_photo_file_dialog(t)},i.prototype.open_photo_file_dialog=function(t){var e,n,i,o,r,s;return $(".ui-modal").hide(),s=$(t.target).closest("[data-group-type]").attr("data-group-type"),"text"===s||"video"===s||"super-quote"===s?(e=null,n=$(".group"),n.each(function(){return $(this).isOnScreen()?e||(e=$(this)):void 0}),e||(e=n.last()),e&&(r=this.model.photo_groups.get(e.data("group-id"))),this.model.photo_groups.each(function(t){return t.get("position")>r.get("position")?t.save({position:t.get("position")+1}):void 0}),void this.model.photo_groups.create({post_id:this.model.get("id"),
position:r&&r.get("position")+1,group_type:s},{success:function(t){return function(e){return t.edit_start(),$("#photo-group-"+e.get("id")+" .add-video-url").show(),$("#photo-group-"+e.get("id")+" .video-container").hide(),$("#photo-group-"+e.get("id")+" .video-container").addClass("embed-edit"),$("#photo-group-"+e.get("id")+" .video-embed-area").addClass("embed-edit"),window.setTimeout(function(){return $("html,body").animate({scrollTop:$("#photo-group-"+e.get("id")).offset().top-76},250)},250)}}(this)})):($("#_photo-file").remove(),"native-video"===s&&(o=$('<input style="display:none;height:0;position:absolute;top:0;left:0" type="file" id="_photo-file" accept=".mp4,.mov" name="photos[]">')),"native-audio"===s&&(o=$('<input style="display:none;height:0;position:absolute;top:0;left:0" type="file" id="_photo-file" accept=".mp3,.m4a,.wav" name="photos[]">')),("set"===s||"captioned-single"===s||"single"===s)&&(o=$('<input style="display:none;height:0;position:absolute;top:0;left:0" type="file" id="_photo-file" accept="image/*" name="photos[]" multiple>')),$("body").append(o),i=this,o.on("change",function(t){var e,n;return e=[].map.call(t.target.files,function(t){return!!t.type.match(/image\/.|video\/.|audio\/./g)}),n="native-audio"===s?[].map.call(t.target.files,function(t){return t.size>1e7}):[].map.call(t.target.files,function(t){return t.size>314572800}),e.includes(!1)?(Exposure.showMessage("Only image, video and audio files are supported at this time"),!1):n.includes(!0)?("native-audio"===s?Exposure.showMessage("Audio files can not exceed 10MB"):Exposure.showMessage("Files can not exceed 300MB"),!1):i.upload_drop(t,s)}),o.click())},i.prototype.progress=function(t,e){var n;if(t.lengthComputable)return n=t.loaded/t.total*100,$(".cover-photo-upload-progress .upload-percent").text(Math.round(n)+"%"),Math.round(n)>99?$(".cover-photo-upload-progress").hide():void 0},i.prototype.uploadStart=function(t){return this.$(".cover-photo-upload-progress").show()},i.prototype.uploadFinished=function(t){return $(".cover-photo-upload-progress").hide()},i.prototype.save_meta_kw=function(t){return Exposure.loading(!0),this.model.save({meta_kw:this.$("input.set-meta-kw,.story-keywords-input").val()},{success:function(t){return Exposure.loading(!1),Exposure.showMessage("Meta keywords tag saved")}}),!1},i.prototype.save_cover_position_bottom=function(t){return Exposure.loading(!0),this.model.save({cover_photo_position:"bottom"},{success:function(t){return $(".cover-image-src").removeClass("object-fit-left object-fit-right object-fit-bottom object-fit-top"),$(".cover-image-src").addClass("object-fit-bottom"),$(".cover-photo-position-group .btn").removeClass("active"),$(".cover-photo-position-bottom").addClass("active"),Exposure.loading(!1),Exposure.showMessage("Cover Photo Position Bottom Enabled")}}),!1},i.prototype.save_cover_position_top=function(t){return Exposure.loading(!0),this.model.save({cover_photo_position:"top"},{success:function(t){return $(".cover-image-src").removeClass("object-fit-left object-fit-right object-fit-bottom object-fit-top"),$(".cover-image-src").addClass("object-fit-top"),$(".cover-photo-position-group .btn").removeClass("active"),$(".cover-photo-position-top").addClass("active"),Exposure.loading(!1),Exposure.showMessage("Cover Photo Position Top Enabled")}}),!1},i.prototype.save_cover_position_left=function(t){return Exposure.loading(!0),this.model.save({cover_photo_position:"left"},{success:function(t){return $(".cover-image-src").removeClass("object-fit-left object-fit-right object-fit-bottom object-fit-top"),$(".cover-image-src").addClass("object-fit-left"),$(".cover-photo-position-group .btn").removeClass("active"),$(".cover-photo-position-left").addClass("active"),Exposure.loading(!1),Exposure.showMessage("Cover Photo Position Left Enabled")}}),!1},i.prototype.save_cover_position_right=function(t){return Exposure.loading(!0),this.model.save({cover_photo_position:"right"},{success:function(t){return $(".cover-image-src").removeClass("object-fit-left object-fit-right object-fit-bottom object-fit-top"),$(".cover-image-src").addClass("object-fit-right"),$(".cover-photo-position-group .btn").removeClass("active"),$(".cover-photo-position-right").addClass("active"),Exposure.loading(!1),Exposure.showMessage("Cover Photo Position Right Enabled")}}),!1},i.prototype.save_cover_position_center=function(t){return Exposure.loading(!0),this.model.save({cover_photo_position:"center"},{success:function(t){return $(".cover-image-src").removeClass("object-fit-left object-fit-right object-fit-bottom object-fit-top"),$(".cover-photo-position-group .btn").removeClass("active"),$(".cover-photo-position-center").addClass("active"),Exposure.loading(!1),Exposure.showMessage("Cover Photo Position Center Enabled")}}),!1},i.prototype.save_cover_split=function(t){var e;return Exposure.loading(!0),e=this,this.model.save({cover_layout:"split"},{success:function(t){return $("body").removeClass("cover-layout-simple"),$("body").addClass("cover-layout-two-fold"),$(".save-cover-layout-overlay").removeClass("muted"),$(".save-cover-layout-split").addClass("muted"),$(".save-cover-layout-simple").removeClass("muted"),$(".overlay-cover-options").slideUp("fast"),$("body").removeClass("cover-layout-default"),Exposure.loading(!1),Exposure.showMessage("Story Layout Two Fold Enabled"),e.render_edit_mode()}}),!1},i.prototype.save_cover_split_fixed=function(t){var e;return Exposure.loading(!0),e=this,this.model.save({cover_layout:"split",cover_layout_option:"fixed"},{success:function(t){return $(".overlay-cover-options").slideUp("fast"),$("body").removeClass("cover-layout-simple"),$("body").addClass("cover-layout-two-fold"),$("body").addClass("cover-layout-fixed"),$("body").removeClass("cover-layout-default"),$(".save-cover-layout-overlay").removeClass("muted"),$(".save-cover-layout-split").addClass("muted"),$(".save-cover-layout-simple").removeClass("muted"),$(".save-cover-layout-split-fixed").removeClass("bg-black white"),$(".save-cover-layout-split-fixed").addClass("bg-white off-black"),$(".save-cover-layout-split-scroll").removeClass("bg-white off-black"),$(".save-cover-layout-split-scroll").addClass("bg-black white"),Exposure.loading(!1),Exposure.showMessage("Fixed Two-Fold Layout Saved"),e.render_edit_mode()}}),!1},i.prototype.save_cover_split_scroll=function(t){var e;return Exposure.loading(!0),e=this,this.model.save({cover_layout:"split",cover_layout_option:"default"},{success:function(t){return $(".overlay-cover-options").slideUp("fast"),$("body").removeClass("cover-layout-simple"),$("body").addClass("cover-layout-two-fold"),$("body").removeClass("cover-layout-fixed"),$("body").removeClass("cover-layout-default"),$(".save-cover-layout-overlay").removeClass("muted"),$(".save-cover-layout-split").addClass("muted"),$(".save-cover-layout-simple").removeClass("muted"),$(".save-cover-layout-split-fixed").addClass("bg-black white"),$(".save-cover-layout-split-fixed").removeClass("bg-white off-black"),$(".save-cover-layout-split-scroll").removeClass("bg-black white"),$(".save-cover-layout-split-scroll").addClass("bg-white off-black"),Exposure.loading(!1),Exposure.showMessage("Scroll Two-Fold Layout Saved"),e.render_edit_mode()}})},i.prototype.save_cover_simple=function(t){var e;return Exposure.loading(!0),e=this,this.model.save({cover_layout:"simple"},{success:function(t){return $(".overlay-cover-options").slideUp("fast"),$("body").addClass("cover-layout-simple"),$("body").removeClass("cover-layout-two-fold"),$("body").removeClass("cover-layout-default"),$(".save-cover-layout-overlay").removeClass("muted"),$(".save-cover-layout-split").removeClass("muted"),$(".save-cover-layout-simple").addClass("muted"),Exposure.loading(!1),Exposure.showMessage("Story Layout Simple Enabled"),e.render_edit_mode()}}),!1},i.prototype.save_cover_overlay=function(t){var e;return Exposure.loading(!0),e=this,this.model.save({cover_layout:"overlay"},{success:function(t){return $(".overlay-cover-options").slideDown("fast"),$("body").removeClass("cover-layout-simple"),$("body").removeClass("cover-layout-two-fold"),$("body").addClass("cover-layout-default"),$(".save-cover-layout-overlay").addClass("muted"),$(".save-cover-layout-split").removeClass("muted"),$(".save-cover-layout-simple").removeClass("muted"),Exposure.loading(!1),Exposure.showMessage("Story Layout Overlay Enabled"),e.render_edit_mode()}}),!1},i.prototype.save_meta_desc=function(t){return Exposure.loading(!0),this.model.save({meta_desc:this.$(".story-desc-input").val()},{success:function(t){return Exposure.loading(!1),Exposure.showMessage("Meta description tag saved")}}),!1},i.prototype.save_related_user=function(t){return Exposure.loading(!0),this.model.save({rel_user:this.$("input.change-related-user").val()},{success:function(t){return Exposure.loading(!1),Exposure.showMessage("Related User saved")}}),!1},i.prototype.update_date=function(t){return this.$(".author-details .post-date").html(moment.unix(t.get("published_at")).format("MMMM Do YYYY"))},i.prototype.update_slug=function(t){return window.location.replace("/"+t.get("slug")+"?new&edit"+window.location.hash)},i.prototype.toggle_enjoys=function(t){return this.$(".enjoy.button").toggle(!t.get("disable_enjoys"))},i.prototype.toggle_date=function(t){var e;return e=this.$("span.post-date"),t.get("hide_date")?e.slideUp().fadeOut():e.fadeIn().slideDown()},i.prototype.un_publish=function(t){var e,n,i,o,r;return e=$(t.target),o={title:"Un-publish Story?",description:"Un-publishing your story will make it publicly inaccessible and hide it from your site. You can re-publish it at anytime",yesLabel:"Yes, Un-publish Story",noLabel:"No, Nevermind"},r=function(t){return function(){t.model.save({about_story:!1}),t.save(function(t){return t===!0?$.rails.handleMethod(this.$(".un-publish-story")):void 0}),Exposure.showMessage("Un-publishing Story...")}}(this),i=function(){Exposure.showMessage("Un-publishing Canceled")},n=new ExposureConfirmModal(e,"#confirm-un-publish-story",o,r,i),n.show(),!1},i.prototype.publish=function(t){var e,n,i,o,r,s,a;return"undefined"!=typeof this.$(".publish-post").attr("disabled")?!1:(s=!0,"Untitled Story"===$("[data-field-name]").html()?(i="Please add a title.",s=!1):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8Xw8AAoMBgDTD2qgAAAAASUVORK5CYII="===$("#cover-image .cover-image-src").attr("src")?(i="Please add a cover photo",$(".upload-change-cover-image").addClass("error"),s=!1):0===$("div[data-group-id]").length&&(i="Add content to your story before publishing",$("#content-power-bar .publish-error").removeClass("hide"),s=!1),s?this.model.get("published_at")||this.model.get("ever_published")?void 0:(e=$(t.target),r={title:"Publish Story",yesLabel:"Publish Story Now",noLabel:"Keep Editing"},a=function(t){return function(){return t.save(function(t){return t===!0?$.rails.handleMethod(this.$(".publish-post")):void 0}),Exposure.showMessage("Publishing Story...")}}(this),o=function(){Exposure.showMessage("Publishing Canceled")},n=new ExposureConfirmModal(e,"#confirm-publish-dialog",r,a,o),n.show(),!1):(Exposure.showMessage(i),!1))},i.prototype.sanitizeXss=function(t){return t.replace(/<\/?script\s?.*?>/g,"")},i.prototype.sanitizeDiv=function(t){return t.replace(/<\/?div\s?.*?>/g," ")},i.prototype.sanitizeBr=function(t){return t.replace(/<\/?div\s?.*?>/g," ")},i.prototype.save=function(t){var e,n;return Photo.uploadingCount>0?!1:(PostsView.dirty=!1,Exposure.loading(!0),this.model.photo_groups.each(function(t){var e;return e=$("[data-group-id="+t.id+"] .group-description .ql-editor").html(),t.set("content",e),t.save()}),n="Untitled Story"===$(".post-titles h1").makeEditable("getValue")?"":$(".post-titles h1").makeEditable("getValue"),e=this,this.model.save({title:e.sanitizeXss(n),subtitle:$(".post-titles h2").makeEditable("getValue"),location:$("input.location-lookup").val(),lat:$("input[name=location-lat]").val(),lon:$("input[name=location-lon]").val(),footnotes:$(".post-footnotes span").makeEditable("getValue")},{success:function(n){return $("title").html(e.sanitizeXss(n.get("title"))+" "+$("title").text().match(/(by (.+))/)[0]),$("title").html(e.sanitizeDiv(n.get("title"))+" "+$("title").text().match(/(by (.+))/)[0]),$("title").html(e.sanitizeBr(n.get("title"))+" "+$("title").text().match(/(by (.+))/)[0]),"function"!=typeof t?Exposure.showMessage("Your story was saved"):t(!0),Exposure.loading(!1)},error:function(e,n){var i,o,r,s;r=[];try{for(s in n.responseJSON.errors)r.push(s+" "+n.responseJSON.errors[s].join(", ").replace(/can't be blank/,"is missing"))}catch(a){o=a,r.push("Please try again")}return i={"title is missing":"Please add a story title."},Exposure.showMessage("Your story had errors:<br>"+r.join("<br>")||"Your story wasn\u2019t saved"),"function"==typeof t&&t(!1),Exposure.loading(!1)}}),!1)},i.prototype.destroy=function(t){var e,n,i,o,r;return e=$(t.target),o={title:"Delete This Story",description:"Deleting this story is permanent. Once it\u2019s gone, it\u2019s gone for good. Are you sure?",yesLabel:"Yes, Delete",noLabel:"No, Nevermind"},r=function(t){return function(){t.model.destroy({success:function(){return window.location.href="/?story-deleted"}}),Exposure.showMessage("Deleting Story...")}}(this),i=function(){},n=new ExposureConfirmModal(e,"#confirm-remove",o,r,i),n.show(),!1},i.prototype.save_password=function(){return Exposure.loading(!0),this.model.save({post_password:this.$(".password input,.story-password-input").val()},{success:function(t){return this.$(".story-password-remove").fadeIn(400),this.$(".story-password-status").fadeIn(400),this.$(".email-go").addClass("hide"),this.$(".email-no-password").removeClass("hide"),this.$(".accessible-no-password").removeClass("hide"),this.$(".fully-accessible-go").addClass("hide"),this.$(".seo-accessible-no").addClass("hide"),this.$(".export-password-notice").fadeIn(400),this.$(".export-group").addClass("muted pointer-events-none"),Exposure.showMessage("Story password "+(""===t.get("post_password")?"removed":"changed")),Exposure.loading(!1)},error:function(){return Exposure.loading(!1)}}),!1},i.prototype.remove_password=function(){return Exposure.loading(!0),this.model.save({post_password:this.$(".password input,.story-password-input").val("")},this.model.save({post_password:this.$(".password input,.story-password-input").val()},{success:function(t){return this.$(".story-password-remove").fadeOut(400),this.$(".story-password-status").fadeOut(400),this.$(".email-go").removeClass("hide"),this.$(".accessible-no-password").addClass("hide"),this.$(".email-no-password").addClass("hide"),this.$(".seo-accessible-no").addClass("hide"),this.$(".export-password-notice").fadeOut(400),this.$(".export-group").removeClass("muted pointer-events-none"),Exposure.showMessage("Story password removed"),Exposure.loading(!1)},error:function(){return Exposure.loading(!1)}})),!1},i.prototype.upgrade_account=function(){var t;return t=$(event.target),"undefined"!=typeof t.attr("disabled")?!1:(this.save(function(e){return e===!0?window.location.href=t.attr("href"):void 0}),!1)},i.prototype.save_slug=function(){var t,e,n;return t=this.$("#story-url .story-url-input"),e=this.$(".save-story-url"),n=$.trim(t.val()),n!==this.model.get("slug")&&confirm("Are you sure you want to save changes and update this post\u2019s URL?")?(t.removeClass("animated pulse"),n?(this.save(function(i){return function(o){return o?(Exposure.loading(!0),e.addClass("btn-loading"),i.model.save({slug:n},{wait:!0,success:function(t){return Exposure.loading(!1)},error:function(n){return Exposure.showMessage("That URL\u2019s taken"),t.addClass("animated pulse is-error").focus(),e.removeClass("btn-loading"),Exposure.loading(!1)}})):void 0}}(this)),!1):(t.focus(),e.removeClass("btn-loading"),!1)):!1},i.prototype.save_cta_btn=function(t){return t.preventDefault(),t.stopPropagation(),Exposure.loading(!0),this.model.save({cta_btn_color:this.$("#cta-button-color").val(),cta_btn_label:this.$("#cta-button-label").val(),cta_btn_url:this.$("#cta-button-url").val()},{success:function(t){return this.$(".partner-button").css("background-color",this.$("#cta-button-color").val()),this.$(".partner-button").attr("href",this.$("#cta-button-url").val()),this.$(".partner-button").text(this.$("#cta-button-label").val()),Exposure.showMessage("Saved Call To Action Button"),Exposure.loading(!1)},error:function(t){return console.log("Error",t),Exposure.loading(!1)}}),!1},i.prototype.save_date=function(){var t,e;return Exposure.loading(!0),t=moment(this.$(".post-date input,.set-story-publish-date").val()).unix(),e=function(){return Exposure.showMessage("Oops. Please type a valid date in the format yy/dd/mm"),Exposure.loading(!1)},this.model.save({published_at:t},{success:function(){return Exposure.showMessage("Story date changed"),Exposure.loading(!1)},error:e}),this.model.validationError&&e(),!1},i.prototype.save_options=function(t){var e,n,i;return e=$(t.target),i=!0,"can-dl-photos-rich-toggle"===e.attr("name")&&(i=!1,e.is(":checked")?($("[data-download-link]").show(),n=new ExposureConfirmModal(e,"#confirm-allow-downloads",{title:"Enable photo downloads",description:"Allow visitors to download and potentially distribute copies of the photos in this story.",yesLabel:"I agree and enable",noLabel:"No, Nevermind"},function(t){return function(){window.postSeed.can_dl_photos=!0,Exposure.loading(!0),t.model.save(e.attr("data-attr"),e.is(":checked"),{success:function(){return Exposure.loading(!1),Exposure.showMessage("Photo Downloads Enabled")},error:function(){return Exposure.loading(!1)}})}}(this),function(){e.prop("checked",!1)}),n.show()):($("[data-download-link]").hide(),n=new ExposureConfirmModal(this.$el,"#confirm-disallow-downloads",{title:"Turn off photo downloads?",description:"Stop allowing visitors to download copies of the photos in this story?",yesLabel:"Yes, turn off",noLabel:"No, Nevermind"},function(t){return function(){window.postSeed.can_dl_photos=!1,Exposure.loading(!0),t.model.save(e.attr("data-attr"),e.is(":checked"),{success:function(){return Exposure.loading(!1),Exposure.showMessage("Photo Downloads Disabled")},error:function(){return Exposure.loading(!1)}})}}(this),function(){e.prop("checked",!0)}),n.show())),"base-font-size-large"===e.attr("data-attr")&&(e.is(":checked")?$("#post").attr("data-base-font-size","large"):$("#post").attr("data-base-font-size","default"),this.model.save({base_font_size:"large",success:function(){return Exposure.loading(!1),Exposure.showMessage("Large base font size enabled")}})),"base-font-size-medium"===e.attr("data-attr")&&(e.is(":checked")?$("#post").attr("data-base-font-size","medium"):$("#post").attr("data-base-font-size","default"),this.model.save({base_font_size:"medium",success:function(){return Exposure.loading(!1),Exposure.showMessage("Medium base font size enabled")}})),"base-font-size-default"===e.attr("data-attr")&&(e.is(":checked")?$("#post").attr("data-base-font-size","default"):$("#post").attr("data-base-font-size","default"),this.model.save({base_font_size:"default",success:function(){return Exposure.loading(!1),Exposure.showMessage("Normal base font size enabled")}})),"story-interaction-label-enjoy"===e.attr("data-attr")&&(e.is(":checked")&&$(".interaction-label").text("Enjoy"),this.model.save({story_interaction_label:"Enjoy",success:function(){return Exposure.loading(!1)}})),"story-interaction-label-appreciate"===e.attr("data-attr")&&(e.is(":checked")&&$(".interaction-label").text("Appreciate"),this.model.save({story_interaction_label:"Appreciate",success:function(){return Exposure.loading(!1)}})),"story-interaction-label-give-thanks"===e.attr("data-attr")&&(e.is(":checked")&&$(".interaction-label").text("Give Thanks"),this.model.save({story_interaction_label:"Give Thanks",success:function(){return Exposure.loading(!1)}})),"story-interaction-label-endorse"===e.attr("data-attr")&&(e.is(":checked")&&$(".interaction-label").text("Endorse"),this.model.save({story_interaction_label:"Endorse",success:function(){return Exposure.loading(!1)}})),"story-interaction-label-like"===e.attr("data-attr")&&(e.is(":checked")&&$(".interaction-label").text("Like"),this.model.save({story_interaction_label:"Like",success:function(){return Exposure.loading(!1)}})),"story-interaction-label-acknowledge"===e.attr("data-attr")&&(e.is(":checked")&&$(".interaction-label").text("Acknowledge"),this.model.save({story_interaction_label:"Acknowledge",success:function(){return Exposure.loading(!1)}})),"padding-toggle-rich-toggle"===e.attr("name")&&(e.is(":checked")?$("body").addClass("no-photoset-padding"):$("body").removeClass("no-photoset-padding")),"lightbox-toggle-rich-toggle"===e.attr("name")&&(e.is(":checked")?$("#post").attr("data-is-lightbox-toggle",!0):$("#post").attr("data-is-lightbox-toggle",!1)),"dark_theme"===e.attr("data-attr")&&(e.is(":checked")?$("body").addClass("theme-darkknight"):$("body").removeClass("theme-darkknight")),"hide_disqus"===e.attr("data-attr")&&(e.is(":checked")?$("#disqus-wrapper").hide():$("#disqus-wrapper").show()),"toggle_story_embed"===e.attr("data-attr")&&(e.is(":checked")?$(".embed-story-button").removeClass("hide"):$(".embed-story-button").addClass("hide"),e.is(":checked")?$(".embed-post").removeClass("disabled-block"):$(".embed-post").addClass("disabled-block")),"hide_date"===e.attr("data-attr")&&(e.is(":checked")?$(".hide-all-dates-prompt").slideDown():$(".hide-all-dates-prompt").slideUp()),"rtl-toggle-rich-toggle"===e.attr("name")&&(e.is(":checked")?$("body").addClass("rtl-text"):$("body").removeClass("rtl-text")),"toggle_cover_overlay"===e.attr("data-attr")&&(e.is(":checked")?$("#post").attr("data-is-toggle-cover-overlay",!0):$("#post").attr("data-is-toggle-cover-overlay",!1),this.model.save({hide_cover:"false"},this.$(".hide-video-cover-row").hide())),"toggle_cover_titles"===e.attr("data-attr")&&(e.is(":checked")?$("#post").attr("data-is-toggle-cover-titles",!0):$("#post").attr("data-is-toggle-cover-titles",!1),this.model.save({hide_cover:"false"},this.$(".hide-video-cover-row").hide())),"send-email-notification-rich-toggle"===e.attr("name")&&(e.is(":checked")?$(".email-no").addClass("hide"):$(".email-no").removeClass("hide"),e.is(":checked")?$(".email-go").removeClass("hide"):$(".email-go").addClass("hide")),"hide-from-site-rich-toggle"===e.attr("name")&&(e.is(":checked")?$(".fully-accessible-go").addClass("hide"):$(".fully-accessible-go").removeClass("hide"),e.is(":checked")?$(".fully-accessible-no").removeClass("hide"):$(".fully-accessible-no").addClass("hide"),e.is(":checked")?$(".fully-accessible-no").removeClass("hide"):$(".fully-accessible-no").addClass("hide"),e.is(":checked")&&$(".seo-accessible-no").addClass("hide")),"undefined"!=typeof DISQUS&&null!==DISQUS&&DISQUS.reset({reload:!0}),i?(Exposure.loading(!0),this.model.save(e.attr("data-attr"),e.is(":checked"),{success:function(){var t;return Exposure.loading(!1),t=e.is(":checked")?e.attr("data-enabled-message"):e.attr("data-disabled-message"),Exposure.showMessage(t||"Setting updated")},error:function(){return Exposure.loading(!1)}})):void 0},i.prototype.toggle_settings=function(){return this.$(".story-options-panel").toggleClass("active"),this.$(".cover-options-panel").removeClass("active"),!1},i.prototype.toggle_cover_settings=function(){return this.$(".cover-options-panel").toggleClass("active"),this.$(".story-options-panel").removeClass("active"),!1},i.prototype.edit_start=function(t){return this.$el.addClass("edit-mode"),this.$("#cover-image").removeClass("hide-overlay"),this.$(".toggle-show-cover-photo").removeClass("o-1 pulse animated animated-loop"),this.$(".upload-area,.categories-details-select,.edit-mode-component").fadeIn("fast").transition({scale:1},"ease"),this.$(".edit-mode-component-show").show(),this.$(".edit-mode-component-hide").hide(),this.$("#story-prev-next,.post-next-prev,.author-meta-footer").transition({scale:0},"ease").slideUp("fast"),this.$(".post-location-tag").slideDown("fast").transition({scale:1},"ease"),this.$(".upload-change-cover-image").fadeIn("fast"),this.$(".location-hook-added,#enjoy-share,#story-footer-nav,.story-member-meta,.global-footer").slideUp("fast"),this.$(".post-footnotes").slideDown("fast").transition({scale:1},"ease"),this.$("footer").removeClass("share-enabled"),this.$(".hides-in-preview").show(),this.$(".pre-edit-post-button-group-wrapper").hide(),this.$(".edit-post-button-group-wrapper").show(),this.$(".HW_visible").addClass("hide"),this.$(".video-embed-area form").removeClass("error"),this.$(".video-embed-area .video-validation").hide(),Exposure.features.editor?(keypress.stop_listening(),this.$(".post-titles h1, .post-titles h2").makeEditable(!0),this.$(".post-titles h2").fadeIn("fast"),this.subview.collection.each(function(t){return t.trigger("quill:enable")}),this.$(".group-details h2").makeEditable(!0).fadeIn("fast"),this.$(".photo-set-caption").makeEditable(!0).fadeIn("fast"),this.$(".group-details .group-description").fadeIn("fast"),current_user.get("id")===this.model.get("user_id")&&this.$(".post-footnotes span").makeEditable(!0),!1):!1},i.prototype.edit_cancel=function(t){var e,n;return this.$el.removeClass("edit-mode"),this.$(".options-panel").removeClass("active"),this.$(".upload-area,.categories-details-select,.edit-mode-component").fadeOut("fast"),this.$(".edit-mode-component-show").hide(),this.$(".edit-mode-component-hide").show(),this.$("#story-prev-next,.post-next-prev,.author-meta-footer,.categories-details-render").slideDown("fast").transition({scale:1},"ease"),this.$(".post-location-tag").transition({scale:0},"ease").slideUp("fast"),this.$(".upload-change-cover-image").fadeOut("fast"),this.$(".location-hook-added,#enjoy-share,#story-footer-nav,.story-member-meta,.global-footer").slideDown("fast"),this.$(".footnotes-empty").transition({scale:0},"ease").slideUp("fast"),this.$("footer").addClass("share-enabled"),this.$(".HW_visible").removeClass("hide"),this.$(".add-video-url, .getting-video-info").fadeOut("slow"),this.$(".video-container").fadeIn("fast"),this.$(".hides-in-preview").hide(),this.$(".pre-edit-post-button-group-wrapper").show(),this.$(".edit-post-button-group-wrapper").hide(),this.$(".pre-edit-post-button-group-wrapper").removeClass("pointer-events-none"),keypress.listen(),PostsView.populateLocation(),$("#share-post-reveal").show(),this.$(".options-panel").removeClass(".active"),this.$(".post-titles h1, .post-titles h2").makeEditable(!1),"Type a subtitle"===this.$(".post-titles h2").text()&&this.$(".post-titles h2").fadeOut("fast"),this.$(".toggle-hide-cover-video").removeClass("video-hidden"),this.$("#video-container").show(),this.$(".group-details h2").makeEditable(!1),this.$(".photo-set-caption").makeEditable(!1),this.subview.collection.each(function(t){return t.trigger("quill:disable")}),_.each(this.$(".group-details h2"),function(t){return t=$(t),"Group Title (Optional)"===t.text()&&t.fadeOut("fast"),"\u201cType a quote you want to highlight\u201d"===t.text()?t.fadeOut("fast"):void 0}),_.each(this.$(".photo-set-caption"),function(t){return t=$(t),"Type an optional group caption"===t.text()&&t.fadeOut("fast"),"Type an optional quote citation"===t.text()?t.fadeOut("fast"):void 0}),_.each(this.$(".group-description"),function(t){return t=$(t),t.find(".ql-blank").length?t.fadeOut("fast"):void 0}),this.$(".add-new-photos").fadeOut("fast").closest(".photo-set").removeClass("adding-new-photos"),n=this.$(".post-footnotes span"),e=this.$(".post-footnotes"),n.makeEditable(!1),"Type here to add optional details or credits to the end of your story"===$(".post-footnotes span").makeEditable("getValue")?e.addClass("footnotes-empty"):e.removeClass("footnotes-empty"),!1},i.prototype.upload_drop=function(t,e){var n,i,r,s,a,l;return l=["text","video","super-quote"],o.call(l,e)>=0||(a=$(t.currentTarget).attr("data-group-type"),o.call(l,a)>=0)?void 0:($(".upload-area.tour-tip h2").removeClass("error"),Exposure.loading(!0),r=(t.originalEvent.dataTransfer||t.target).files,n=null,i=$(".group"),i.each(function(){return $(this).isOnScreen()?n||(n=$(this)):void 0}),n||(n=i.last()),n&&(s=this.model.photo_groups.get(n.data("group-id"))),this.model.photo_groups.each(function(t){return t.get("position")>s.get("position")||$(window).scrollTop()<=$(window).height()?t.save({position:t.get("position")+1}):void 0}),this.model.photo_groups.create({post_id:this.model.get("id"),position:$(window).scrollTop()<=$(window).height()?0:s&&s.get("position")+1,group_type:e||$(t.currentTarget).attr("data-group-type")},{success:function(t){return function(e){var n;return t.edit_start(),n=e.create_photos_from_filelist(r),n?n.always(function(){return Exposure.loading(!1)}):Exposure.loading(!1),e.on("progress",function(t,e){var n;if(t.lengthComputable)return n=t.loaded/t.total*100,$("photo-"+e.get("photo_key")).find(".photo-upload-progress").data("loaded",n)}),window.setTimeout(function(){return $("html,body").animate({scrollTop:$("#photo-group-"+e.get("id")).offset().top-76},250)},250)}}(this),error:function(){return Exposure.loading(!1)}}),!1)},i.prototype.cover_drop=function(t){return $("body").hasClass("signed-in")?($(".upload-change-cover-image").removeClass("error"),this.model.setAttachment((t.originalEvent.dataTransfer||t.target).files[0]),this.model.file&&/image/.test(this.model.file.type)?(this.$("#cover-image-container").css("background-image",null),this.model.once("change:data_uri",function(t){return function(e){return t.$("#cover-image .cover-image-src").attr({src:e.get("data_uri"),srcset:null})}}(this)),this.model.once("change:asset_url",function(t){return function(e){return t.$("#cover-image .cover-image-src").attr({src:""+(e.get("data_uri")||e.get("asset_url")),srcset:null})}}(this)),Exposure.loading(!0),this.model.save({cover_photo_file_name:this.model.file.name,cover_photo_file_size:this.model.file.size,cover_photo_content_type:this.model.file.type},{success:function(){return Exposure.loading(!1)},error:function(){return Exposure.showMessage("We couldn\u2019t upload that cover photo. Please try again"),Exposure.loading(!1)}}),!1):!1):!1},i.prototype.toggle_cover=function(){return this.$(".post-titles, .author-meta").fadeToggle("fast","linear"),this.$("#cover-image").toggleClass("fade-overlay"),this.$(".cover-hotspot").toggleClass("cover-hotspot-active"),!1},i.prototype.setup=function(){return this.$("header").dropArea(),this.$(".upload-target").dropArea()},i.prototype.render=function(){return this.subview.setElement(this.$(".photo-groups-container")),this.subview.render()},i.prototype.render_edit_mode=function(){return this.subview.setElement(this.$(".photo-groups-container")),this.subview.render(),this.edit_start()},i}(Backbone.View),"undefined"!=typeof page_post&&null!==page_post&&(t=new PostView({model:page_post,el:$("#post")}),t.setup())}.call(this),function(){var t,e,n,i,o,r,s,a,l;window.PostsView={locationAutocompleter:!1,dirty:!1,showingOptions:!1},PostsView.setup=function(){if($("body").bind("click",function(t){return"app-message"===t.target.id||$(t.target).closest("#post-settings-container").length?void 0:$(".story-options-panel").removeClass(".active")}),$(window).resize(function(){}).bind("beforeunload",function(){return PostsView.dirty===!0&&$("body").hasClass("own-post")?"You have unsaved changes to your story which will be lost if you leave now.":void 0}).scroll(function(){var t,e;return e=$(this).scrollTop(),t=$("#post-content"),20>e?($(".nav-chrome").removeClass("not-at-the-top"),$("#content-power-bar-wrapper").removeClass("not-at-the-top"),$(".sticky-interaction-share").fadeOut("fast"),$(".green-audio-player.playing").removeClass("stick")):($(".nav-chrome").addClass("not-at-the-top"),$(".sticky-interaction-share").fadeIn("fast"),$("#content-power-bar-wrapper").addClass("not-at-the-top"),$(".cover-options-panel").removeClass("active"),$(".green-audio-player.playing").addClass("stick"))}),$("input.location-lookup").length)try{PostsView.locationAutocompleter=new google.maps.places.Autocomplete($("input.location-lookup")[0],{}),google.maps.event.addDomListener(PostsView.locationAutocompleter,"place_changed",function(){var t;t=PostsView.locationAutocompleter.getPlace(),$("input[name=location-lat]").val(t.geometry.location.d),$("input[name=location-lon]").val(t.geometry.location.e),PostsView.populateLocation()})}catch(t){return}return $("#post").on("keyup","input:not(.no-dirty), textarea:not(.caption), input[type=text]:not(.post-option), textarea:not(#embed-code-snippt), [contenteditable]",function(t){PostsView.dirty=!0}),keypress.combo("left",function(){var t;t=$(".post-next-prev .prev h4 a"),t.length&&window.location.replace(t.attr("href"))}),keypress.combo("right",function(){var t;t=$(".post-next-prev .next h4 a"),t.length&&window.location.replace(t.attr("href"));
}),$(".own-post .post-footnotes span").makeEditable({multiLine:!1,placeholder:"Type here to add optional details or credits to the end of your post (200 character limit)",maxLength:250}).makeEditable(!1),$(".footnotes-empty").hide(),PostsView.populateLocation(),$("a.share-to-facebook").bind("click",function(t){return t.preventDefault(),window.open($(this).attr("href"),"exposure-fb-share","width=626,height=436"),!1}),$("#story-url .story-url-input").bind("blur",function(t){var e;e=$(this),e.val(PostsView.cleanSlug(e.val()))})},PostsView.cleanSlug=function(t){return String(t.replace(/[^ \-\w]+/g,"").replace(RegExp(" +","g"),"-")).toLowerCase()},PostsView.populateLocation=function(){var t,e,n;return t=$(".location-hook-added"),n=t.attr("data-url-proto"),(e=$(".location-lookup").val())?(e=strip_tags(e,""),t.html($("<a>").attr("target","_blank").attr("href",n.replace(":query",encodeURIComponent(e))).html(e)),$(".location-lookup").trigger("keydown")):void 0},$("#post .post-titles h1").makeEditable({placeholder:"Untitled Story",multiLine:!1,maxLength:150,alwaysShowPlaceholder:!0}).makeEditable(!1),$("#post .post-titles h2").makeEditable({placeholder:"Type a subtitle",multiLine:!1,maxLength:150}).makeEditable(!1),"Type a subtitle"===$("#post .post-titles h2").text()&&$("#post .post-titles h2").hide(),$("#custom-domain-agree").length&&($("#custom-domain-agree a.button").on("click",function(t){return t.preventDefault(),$("#custom-domain-agree").transition({opacity:0},function(){$(this).hide(),$.post("/users/saw-domain-notice",{saw:!0})}),!1}),$("#custom-domain-agree").show()),o=null,s=!1,e=["\ud83d\udc4d","\u2764\ufe0f","\u2728","\ud83d\ude00","\u270c\ufe0f","\ud83c\udf89","\ud83c\udfc5","\ud83c\udfc6"],n=function(n){return function(){var n,i,o,r;return s=!0,o=t.find(".enjoy-count,.count-inline"),i=Math.floor(o.html()),r="true"===t.attr("data-agent-likes"),n=t.attr("data-agent"),$.post("/update-like-status",{id:$("#post").attr("data-id"),agent:n,src:$("[data-enjoy-source]").attr("data-enjoy-source")}).done(function(n){return n?(t.attr("data-agent-likes",!0),$(".new-tab .share-buttons").addClass("active"),$(".count-wrapper").addClass("bg-red border-red animated pulse animated-slow box-shadow-xsm white enjoyed"),$(".enjoy-count").addClass("animated flash animated-slow"),$(".interaction-label").addClass("active"),$(".interaction-icon").hide().text(Utils.random(e)),window.setTimeout(function(){return $(".interaction-icon").show()},0),o.html(i+=1)):(Exposure.showMessage("Maximum feedback reached"),$(".interaction-label").addClass("muted"))})}}(this),i=function(t){return t.preventDefault(),s=!1,o=window.setInterval(n,250),!1},r=function(t){return t.preventDefault(),window.clearInterval(o),s||n(),!1},t=$(".enjoy,.story-interaction"),t.on("mousedown",i),t.on("touchstart",i),t.on("mouseup",r),t.on("touchend",r),$("#mature-content .dismiss").click(function(){return $("#mature-content").removeClass("animated fadeIn").addClass("animated fadeOut").hide(),!1}),document.addEventListener("DOMContentLoaded",function(){GreenAudioPlayer.init({selector:".audio-player",stopOthersOnPlay:!0})}),a=window.location.hash.match(/view:(.+)/),a&&(l="#photo-"+a[1],setTimeout(function(){$.scrollTo(l,400,{offset:-200}),$(l).find(".photo-bouncer").click()},100)),PostsView.setup()}.call(this),function(){var t,e,n;if(window.current_user=new User("undefined"!=typeof currentUserSeed&&null!==currentUserSeed?currentUserSeed:{}),"undefined"!=typeof postSeed&&null!==postSeed&&(window.page_post=new Post(postSeed)),"undefined"!=typeof photos&&null!==photos)for(t in photos)n=photos[t],photos[t]=new Photos(n);if("undefined"!=typeof photoGroups&&null!==photoGroups&&(window.photoGroups=new PhotoGroups(photoGroups),"undefined"!=typeof photos&&null!==photos))for(t in photos)n=photos[t],null!=(e=photoGroups.findWhere({id:parseInt(t,10)}))&&(e.photos=n);"undefined"!=typeof page_post&&null!==page_post&&"undefined"!=typeof photoGroups&&null!==photoGroups&&(page_post.photo_groups=window.photoGroups)}.call(this),function(){"undefined"!=typeof page_post&&null!==page_post&&$(function(){var t;return t=new PostView({model:page_post,el:$("#post")}),t.render()}),"undefined"!=typeof photoGroups&&$(function(){return $("body").dropArea().bind("drop",function(t){return t.preventDefault(),t.originalEvent.dataTransfer.files[0]?$("#post").hasClass("edit-mode")?(Exposure.showMessage("Oops! Drop your photo(s) above to add them to your post."),$.scrollTo(".upload-area",400,{offset:{top:-100}})):Exposure.showMessage("Oops! Click Edit Post before adding photos."):void 0}),photoGroups.length||$("#post-controls a.edit-post").click(),Exposure.features.editor&&window.location.search&&window.location.search.match(/edit/)&&$("#post-controls a.edit-post").click(),$(window).bind("beforeunload",function(){return Photo.uploadingCount>0?"Your photos won\u2019t finish uploading if you leave now.":void 0})})}.call(this),function(){"use strict";var t=this,e=t.Chart,n=function(t){this.canvas=t.canvas,this.ctx=t;this.width=t.canvas.width,this.height=t.canvas.height;return this.aspectRatio=this.width/this.height,i.retinaScale(this),this};n.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",onAnimationProgress:function(){},onAnimationComplete:function(){}}},n.types={};var i=n.helpers={},o=i.each=function(t,e,n){var i=Array.prototype.slice.call(arguments,3);if(t)if(t.length===+t.length){var o;for(o=0;o<t.length;o++)e.apply(n,[t[o],o].concat(i))}else for(var r in t)e.apply(n,[t[r],r].concat(i))},r=i.clone=function(t){var e={};return o(t,function(n,i){t.hasOwnProperty(i)&&(e[i]=n)}),e},s=i.extend=function(t){return o(Array.prototype.slice.call(arguments,1),function(e){o(e,function(n,i){e.hasOwnProperty(i)&&(t[i]=n)})}),t},a=i.merge=function(t,e){var n=Array.prototype.slice.call(arguments,0);return n.unshift({}),s.apply(null,n)},l=i.indexOf=function(t,e){if(Array.prototype.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},u=i.inherits=function(t){var e=this,n=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},i=function(){this.constructor=n};return i.prototype=e.prototype,n.prototype=new i,n.extend=u,t&&s(n.prototype,t),n.__super__=e.prototype,n},c=i.noop=function(){},h=i.uid=function(){var t=0;return function(){return"chart-"+t++}}(),d=i.warn=function(t){window.console&&"function"==typeof window.console.warn&&console.warn(t)},p=i.amd="function"==typeof t.define&&t.define.amd,f=i.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},g=i.max=function(t){return Math.max.apply(Math,t)},m=i.min=function(t){return Math.min.apply(Math,t)},v=(i.cap=function(t,e,n){if(f(e)){if(t>e)return e}else if(f(n)&&n>t)return n;return t},i.getDecimalPlaces=function(t){return t%1!==0&&f(t)?t.toString().split(".")[1].length:0}),y=i.radians=function(t){return t*(Math.PI/180)},b=(i.getAngleFromPoint=function(t,e){var n=e.x-t.x,i=e.y-t.y,o=Math.sqrt(n*n+i*i),r=2*Math.PI+Math.atan2(i,n);return 0>n&&0>i&&(r+=2*Math.PI),{angle:r,distance:o}},i.aliasPixel=function(t){return t%2===0?0:.5}),w=(i.splineCurve=function(t,e,n,i){var o=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),r=Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2)),s=i*o/(o+r),a=i*r/(o+r);return{inner:{x:e.x-s*(n.x-t.x),y:e.y-s*(n.y-t.y)},outer:{x:e.x+a*(n.x-t.x),y:e.y+a*(n.y-t.y)}}},i.calculateOrderOfMagnitude=function(t){return Math.floor(Math.log(t)/Math.LN10)}),_=(i.calculateScaleRange=function(t,e,n,i,o){var r=2,s=Math.floor(e/(1.5*n)),a=r>=s,l=g(t),u=m(t);l===u&&(l+=.5,u>=.5&&!i?u-=.5:l+=.5);for(var c=Math.abs(l-u),h=w(c),d=Math.ceil(l/(1*Math.pow(10,h)))*Math.pow(10,h),p=i?0:Math.floor(u/(1*Math.pow(10,h)))*Math.pow(10,h),f=d-p,v=Math.pow(10,h),y=Math.round(f/v);(y>s||s>2*y)&&!a;)if(y>s)v*=2,y=Math.round(f/v),y%1!==0&&(a=!0);else if(o&&h>=0){if(v/2%1!==0)break;v/=2,y=Math.round(f/v)}else v/=2,y=Math.round(f/v);return a&&(y=r,v=f/y),{steps:y,stepValue:v,min:p,max:p+y*v}},i.template=function(t,e){function n(t,e){var n=/\W/.test(t)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+t.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):i[t]=i[t];return e?n(e):n}if(t instanceof Function)return t(e);var i={};return n(t,e)}),x=(i.generateLabels=function(t,e,n,i){var r=new Array(e);return labelTemplateString&&o(r,function(e,o){r[o]=_(t,{value:n+i*(o+1)})}),r},i.easingEffects={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-1*t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-0.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1)},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*((t=t/1-1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-0.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return 1*(t/=1)*t*t*t*t},easeOutQuint:function(t){return 1*((t=t/1-1)*t*t*t*t+1)},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-1*Math.cos(t/1*(Math.PI/2))+1},easeOutSine:function(t){return 1*Math.sin(t/1*(Math.PI/2))},easeInOutSine:function(t){return-0.5*(Math.cos(Math.PI*t/1)-1)},easeInExpo:function(t){return 0===t?1:1*Math.pow(2,10*(t/1-1))},easeOutExpo:function(t){return 1===t?1:1*(-Math.pow(2,-10*t/1)+1)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){return t>=1?t:-1*(Math.sqrt(1-(t/=1)*t)-1)},easeOutCirc:function(t){return 1*Math.sqrt(1-(t=t/1-1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-0.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:1==(t/=1)?1:(n||(n=.3),i<Math.abs(1)?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),-(i*Math.pow(2,10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/n)))},easeOutElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:1==(t/=1)?1:(n||(n=.3),i<Math.abs(1)?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),i*Math.pow(2,-10*t)*Math.sin((1*t-e)*(2*Math.PI)/n)+1)},easeInOutElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:2==(t/=.5)?1:(n||(n=1*(.3*1.5)),i<Math.abs(1)?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),1>t?-.5*(i*Math.pow(2,10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/n)):i*Math.pow(2,-10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/n)*.5+1)},easeInBack:function(t){var e=1.70158;return 1*(t/=1)*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return 1*((t=t/1-1)*t*((e+1)*t+e)+1)},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:function(t){return 1-x.easeOutBounce(1-t)},easeOutBounce:function(t){return(t/=1)<1/2.75?1*(7.5625*t*t):2/2.75>t?1*(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?1*(7.5625*(t-=2.25/2.75)*t+.9375):1*(7.5625*(t-=2.625/2.75)*t+.984375)},easeInOutBounce:function(t){return.5>t?.5*x.easeInBounce(2*t):.5*x.easeOutBounce(2*t-1)+.5}}),k=i.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}}(),C=(i.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return window.clearTimeout(t,1e3/60)}}(),i.animationLoop=function(t,e,n,i,o,r){var s=0,a=x[n]||x.linear,l=function(){s++;var n=s/e,u=a(n);t.call(r,u,n,s),i.call(r,u,n),e>s?r.animationFrame=k(l):o.apply(r)};k(l)},i.getRelativePosition=function(t){var e,n,i=t.originalEvent||t,o=t.currentTarget||t.srcElement,r=o.getBoundingClientRect();return i.touches?(e=i.touches[0].clientX-r.left,n=i.touches[0].clientY-r.top):(e=i.clientX-r.left,n=i.clientY-r.top),{x:e,y:n}},i.addEvent=function(t,e,n){t.addEventListener?t.addEventListener(e,n):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}),E=i.removeEvent=function(t,e,n){t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=c},S=(i.bindEvents=function(t,e,n){t.events||(t.events={}),o(e,function(e){t.events[e]=function(){n.apply(t,arguments)},C(t.chart.canvas,e,t.events[e])})},i.unbindEvents=function(t,e){o(e,function(e,n){E(t.chart.canvas,n,e)})}),$=i.getMaximumWidth=function(t){var e=t.parentNode;return e.clientWidth},T=i.getMaximumHeight=function(t){var e=t.parentNode;return e.clientHeight},O=(i.getMaximumSize=i.getMaximumWidth,i.retinaScale=function(t){var e=t.ctx,n=t.canvas.width,i=t.canvas.height;window.devicePixelRatio&&(e.canvas.style.width=n+"px",e.canvas.style.height=i+"px",e.canvas.height=i*window.devicePixelRatio,e.canvas.width=n*window.devicePixelRatio,e.scale(window.devicePixelRatio,window.devicePixelRatio))}),A=i.clear=function(t){t.ctx.clearRect(0,0,t.width,t.height)},P=i.fontString=function(t,e,n){return e+" "+t+"px "+n},L=i.longestText=function(t,e,n){t.font=e;var i=0;return o(n,function(e){var n=t.measureText(e).width;i=n>i?n:i}),i},N=i.drawRoundedRectangle=function(t,e,n,i,o,r){t.beginPath(),t.strokeStyle="#000",t.moveTo(e+r,n),t.lineTo(e+i-r,n),t.quadraticCurveTo(e+i,n,e+i,n+r),t.lineTo(e+i,n+o-r),t.quadraticCurveTo(e+i,n+o,e+i-r,n+o),t.lineTo(e+r,n+o),t.quadraticCurveTo(e,n+o,e,n+o-r),t.lineTo(e,n+r),t.quadraticCurveTo(e,n,e+r,n),t.stroke(),t.closePath()};n.instances={},n.Type=function(t,e,i){this.options=e,this.chart=i,this.id=h(),n.instances[this.id]=this,e.responsive&&this.resize(),this.initialize.call(this,t)},s(n.Type.prototype,{initialize:function(){return this},clear:function(){return A(this.chart),this},stop:function(){return i.cancelAnimFrame.call(t,this.animationFrame),this},resize:function(t){this.stop();var e=this.chart.canvas,n=$(this.chart.canvas),i=this.options.maintainAspectRatio?n/this.chart.aspectRatio:T(this.chart.canvas);return e.width=this.chart.width=n,e.height=this.chart.height=i,O(this.chart),"function"==typeof t&&t.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:c,render:function(t){return t&&this.reflow(),this.options.animation&&!t?i.animationLoop(this.draw,this.options.animationSteps,this.options.animationEasing,this.options.onAnimationProgress,this.options.onAnimationComplete,this):(this.draw(),this.options.onAnimationComplete.call(this)),this},generateLegend:function(){return _(this.options.legendTemplate,this)},destroy:function(){this.clear(),S(this,this.events),delete n.instances[this.id]},showTooltip:function(t,e){"undefined"==typeof this.activeElements&&(this.activeElements=[]);var r=function(t){var e=!1;return t.length!==this.activeElements.length?e=!0:(o(t,function(t,n){t!==this.activeElements[n]&&(e=!0)},this),e)}.call(this,t);if(r||e){if(this.activeElements=t,this.draw(),t.length>0)if(this.datasets&&this.datasets.length>1){for(var s,a,u=this.datasets.length-1;u>=0&&(s=this.datasets[u].points||this.datasets[u].bars||this.datasets[u].segments,a=l(s,t[0]),-1===a);u--);var c=[],h=[],d=function(t){var e,n,o,r,s,l=[],u=[],d=[];return i.each(this.datasets,function(t){e=t.points||t.bars||t.segments,e[a]&&l.push(e[a])}),i.each(l,function(t){u.push(t.x),d.push(t.y),c.push(i.template(this.options.multiTooltipTemplate,t)),h.push({fill:t._saved.fillColor||t.fillColor,stroke:t._saved.strokeColor||t.strokeColor})},this),s=m(d),o=g(d),r=m(u),n=g(u),{x:r>this.chart.width/2?r:n,y:(s+o)/2}}.call(this,a);new n.MultiTooltip({x:d.x,y:d.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:c,legendColors:h,legendColorBackground:this.options.multiTooltipKeyBackground,title:t[0].label,chart:this.chart,ctx:this.chart.ctx}).draw()}else o(t,function(t){var e=t.tooltipPosition();new n.Tooltip({x:Math.round(e.x),y:Math.round(e.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:_(this.options.tooltipTemplate,t),chart:this.chart}).draw()},this);return this}},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}}),n.Type.extend=function(t){var e=this,i=function(){return e.apply(this,arguments)};if(i.prototype=r(e.prototype),s(i.prototype,t),i.extend=n.Type.extend,t.name||e.prototype.name){var o=t.name||e.prototype.name,l=n.defaults[e.prototype.name]?r(n.defaults[e.prototype.name]):{};n.defaults[o]=s(l,t.defaults),n.types[o]=i,n.prototype[o]=function(t,e){var r=a(n.defaults.global,n.defaults[o],e||{});return new i(t,r,this)}}else d("Name not provided for this chart, so it hasn't been registered");return e},n.Element=function(t){s(this,t),this.initialize.apply(this,arguments),this.save()},s(n.Element.prototype,{initialize:function(){},restore:function(t){return t?o(t,function(t){this[t]=this._saved[t]},this):s(this,this._saved),this},save:function(){return this._saved=r(this),delete this._saved._saved,this},update:function(t){return o(t,function(t,e){this._saved[e]=this[e],this[e]=t},this),this},transition:function(t,e){return o(t,function(t,n){this[n]=(t-this._saved[n])*e+this._saved[n]},this),this},tooltipPosition:function(){return{x:this.x,y:this.y}}}),n.Element.extend=u,n.Point=n.Element.extend({display:!0,inRange:function(t,e){var n=this.hitDetectionRadius+this.radius;return Math.pow(t-this.x,2)+Math.pow(e-this.y,2)<Math.pow(n,2)},draw:function(){if(this.display){var t=this.ctx;t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.closePath(),t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.fillStyle=this.fillColor,t.fill(),t.stroke()}}}),n.Arc=n.Element.extend({inRange:function(t,e){var n=i.getAngleFromPoint(this,{x:t,y:e}),o=n.angle>=this.startAngle&&n.angle<=this.endAngle,r=n.distance>=this.innerRadius&&n.distance<=this.outerRadius;return o&&r},tooltipPosition:function(){var t=this.startAngle+(this.endAngle-this.startAngle)/2,e=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(t)*e,y:this.y+Math.sin(t)*e}},draw:function(t){var e=this.ctx;e.beginPath(),e.arc(this.x,this.y,this.outerRadius,this.startAngle,this.endAngle),e.arc(this.x,this.y,this.innerRadius,this.endAngle,this.startAngle,!0),e.closePath(),e.strokeStyle=this.strokeColor,e.lineWidth=this.strokeWidth,e.fillStyle=this.fillColor,e.fill(),e.lineJoin="bevel",this.showStroke&&e.stroke()}}),n.Rectangle=n.Element.extend({draw:function(){var t=this.ctx,e=this.width/2,n=this.x-e,i=this.x+e,o=this.base-(this.base-this.y),r=this.strokeWidth/2;this.showStroke&&(n+=r,i-=r,o+=r),t.beginPath(),t.fillStyle=this.fillColor,t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.moveTo(n,this.base),t.lineTo(n,o),t.lineTo(i,o),t.lineTo(i,this.base),t.fill(),this.showStroke&&t.stroke()},height:function(){return this.base-this.y},inRange:function(t,e){return t>=this.x-this.width/2&&t<=this.x+this.width/2&&e>=this.y&&e<=this.base}}),n.Tooltip=n.Element.extend({draw:function(){var t=this.chart.ctx;t.font=P(this.fontSize,this.fontStyle,this.fontFamily),this.xAlign="center",this.yAlign="above";var e=2,n=t.measureText(this.text).width+2*this.xPadding,i=this.fontSize+2*this.yPadding,o=i+this.caretHeight+e;this.x+n/2>this.chart.width?this.xAlign="left":this.x-n/2<0&&(this.xAlign="right"),this.y-o<0&&(this.yAlign="below");var r=this.x-n/2,s=this.y-o;switch(t.fillStyle=this.fillColor,this.yAlign){case"above":t.beginPath(),t.moveTo(this.x,this.y-e),t.lineTo(this.x+this.caretHeight,this.y-(e+this.caretHeight)),t.lineTo(this.x-this.caretHeight,this.y-(e+this.caretHeight)),t.closePath(),t.fill();break;case"below":s=this.y+e+this.caretHeight,t.beginPath(),t.moveTo(this.x,this.y+e),t.lineTo(this.x+this.caretHeight,this.y+e+this.caretHeight),t.lineTo(this.x-this.caretHeight,this.y+e+this.caretHeight),t.closePath(),t.fill()}switch(this.xAlign){case"left":r=this.x-n+(this.cornerRadius+this.caretHeight);break;case"right":r=this.x-(this.cornerRadius+this.caretHeight)}N(t,r,s,n,i,this.cornerRadius),t.fill(),t.fillStyle=this.textColor,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,r+n/2,s+i/2)}}),n.MultiTooltip=n.Element.extend({initialize:function(){this.font=P(this.fontSize,this.fontStyle,this.fontFamily),this.titleFont=P(this.titleFontSize,this.titleFontStyle,this.titleFontFamily),this.height=this.labels.length*this.fontSize+(this.labels.length-1)*(this.fontSize/2)+2*this.yPadding+1.5*this.titleFontSize,this.ctx.font=this.titleFont;var t=this.ctx.measureText(this.title).width,e=L(this.ctx,this.font,this.labels)+this.fontSize+3,n=g([e,t]);this.width=n+2*this.xPadding;var i=this.height/2;this.y-i<0?this.y=i:this.y+i>this.chart.height&&(this.y=this.chart.height-i),this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(t){var e=this.y-this.height/2+this.yPadding,n=t-1;return 0===t?e+this.titleFontSize/2:e+(1.5*this.fontSize*n+this.fontSize/2)+1.5*this.titleFontSize},draw:function(){N(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var t=this.ctx;t.fillStyle=this.fillColor,t.fill(),t.closePath(),t.textAlign="left",t.textBaseline="middle",t.fillStyle=this.titleTextColor,t.font=this.titleFont,t.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0)),t.font=this.font,i.each(this.labels,function(e,n){var i=e.split(": ");t.fillStyle="#999",t.fillText(i[0].toUpperCase()+": ",this.x+this.fontSize+3,this.getLineHeight(n+1)),t.fillStyle="#000";var o=i[1].toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");t.fillText(o,t.measureText(i[0].toUpperCase()+": ").width+2+this.x+this.fontSize+3,this.getLineHeight(n+1))},this)}}),n.Scale=n.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];for(var t=v(this.stepValue),e=0;e<=this.steps;e++)this.yLabels.push(_(this.templateString,{value:(this.min+e*this.stepValue).toFixed(t)}));this.yLabelWidth=this.display&&this.showLabels?L(this.ctx,this.font,this.yLabels):0},addXLabel:function(t){this.xLabels.push(t),this.valuesCount++,this.fit()},removeXLabel:function(){this.xLabels.shift(),this.valuesCount--,this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0,this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height,this.startPoint+=this.padding,this.endPoint-=this.padding;var t,e=this.endPoint-this.startPoint;for(this.calculateYRange(e),this.buildYLabels(),this.calculateXLabelRotation();e>this.endPoint-this.startPoint;)e=this.endPoint-this.startPoint,t=this.yLabelWidth,this.calculateYRange(e),this.buildYLabels(),t<this.yLabelWidth&&this.calculateXLabelRotation()},calculateXLabelRotation:function(){this.ctx.font=this.font;var t,e,n=this.ctx.measureText(this.xLabels[0]).width,i=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width;if(this.xScalePaddingRight=i/2+3,this.xScalePaddingLeft=n/2>this.yLabelWidth+10?n/2:this.yLabelWidth+10,this.xLabelRotation=0,this.display){var o,r=L(this.ctx,this.font,this.xLabels);this.xLabelWidth=r;for(var s=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>s&&0===this.xLabelRotation||this.xLabelWidth>s&&this.xLabelRotation<=90&&this.xLabelRotation>0;)o=Math.cos(y(this.xLabelRotation)),t=o*n,e=o*i,t+this.fontSize/2>this.yLabelWidth+8&&(this.xScalePaddingLeft=t+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=o*r;this.xLabelRotation>0&&(this.endPoint-=Math.sin(y(this.xLabelRotation))*r+3)}else this.xLabelWidth=0,this.xScalePaddingRight=this.padding,this.xScalePaddingLeft=this.padding},calculateYRange:c,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(t){var e=this.drawingArea()/(this.min-this.max);return this.endPoint-e*(t-this.min)},calculateX:function(t){var e=(this.xLabelRotation>0,this.width-(this.xScalePaddingLeft+this.xScalePaddingRight)),n=e/(this.valuesCount-(this.offsetGridLines?0:1)),i=n*t+this.xScalePaddingLeft;return this.offsetGridLines&&(i+=n/2),Math.round(i)},update:function(t){i.extend(this,t),this.fit()},draw:function(){var t=this.ctx,e=(this.endPoint-this.startPoint)/this.steps,n=Math.round(this.xScalePaddingLeft);this.display&&(t.fillStyle=this.textColor,t.font=this.font,o(this.yLabels,function(o,r){var s=this.endPoint-e*r,a=Math.round(s);t.textAlign="right",t.textBaseline="middle",this.showLabels&&t.fillText(o,n-10,s),t.beginPath(),r>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor),a+=i.aliasPixel(t.lineWidth),t.moveTo(n,a),t.lineTo(this.width,a),t.stroke(),t.closePath(),t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor,t.beginPath(),t.moveTo(n-5,a),t.lineTo(n,a),t.stroke(),t.closePath()},this),o(this.xLabels,function(e,n){var i=this.calculateX(n)+b(this.lineWidth),o=this.calculateX(n-(this.offsetGridLines?.5:0))+b(this.lineWidth),r=this.xLabelRotation>0;t.beginPath(),n>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor),t.moveTo(o,this.endPoint),t.lineTo(o,this.startPoint-3),t.stroke(),t.closePath(),t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor,t.beginPath(),t.moveTo(o,this.endPoint),t.lineTo(o,this.endPoint+5),t.stroke(),t.closePath(),t.save(),t.translate(i,r?this.endPoint+12:this.endPoint+8),t.rotate(-1*y(this.xLabelRotation)),t.font=this.font,t.textAlign=r?"right":"center",t.textBaseline=r?"middle":"top",t.fillText(e,0,0),t.restore()},this))}}),n.RadialScale=n.Element.extend({initialize:function(){this.size=m([this.height,this.width]),this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(t){var e=this.drawingArea/(this.max-this.min);return(t-this.min)*e},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize(),this.buildYLabels()},buildYLabels:function(){this.yLabels=[];for(var t=v(this.stepValue),e=0;e<=this.steps;e++)this.yLabels.push(_(this.templateString,{value:(this.min+e*this.stepValue).toFixed(t)}))},getCircumference:function(){return 2*Math.PI/this.valuesCount},setScaleSize:function(){var t,e,n,i,o,r,s,a,l,u,c,h,d=m([this.height/2-this.pointLabelFontSize-5,this.width/2]),p=this.width,g=0;for(this.ctx.font=P(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),e=0;e<this.valuesCount;e++)t=this.getPointPosition(e,d),n=this.ctx.measureText(_(this.templateString,{value:this.labels[e]})).width+5,0===e||e===this.valuesCount/2?(i=n/2,t.x+i>p&&(p=t.x+i,o=e),t.x-i<g&&(g=t.x-i,s=e)):e<this.valuesCount/2?t.x+n>p&&(p=t.x+n,o=e):e>this.valuesCount/2&&t.x-n<g&&(g=t.x-n,s=e);l=g,u=Math.ceil(p-this.width),r=this.getIndexAngle(o),a=this.getIndexAngle(s),c=u/Math.sin(r+Math.PI/2),h=l/Math.sin(a+Math.PI/2),c=f(c)?c:0,h=f(h)?h:0,this.drawingArea=d-(h+c)/2,this.setCenterPoint(h,c)},setCenterPoint:function(t,e){var n=this.width-e-this.drawingArea,i=t+this.drawingArea;this.xCenter=(i+n)/2,this.yCenter=this.height/2},getIndexAngle:function(t){var e=2*Math.PI/this.valuesCount;return t*e-Math.PI/2},getPointPosition:function(t,e){var n=this.getIndexAngle(t);return{x:Math.cos(n)*e+this.xCenter,y:Math.sin(n)*e+this.yCenter}},draw:function(){if(this.display){var t=this.ctx;if(o(this.yLabels,function(e,n){if(n>0){var i,o=n*(this.drawingArea/this.steps),r=this.yCenter-o;if(this.lineWidth>0)if(t.strokeStyle=this.lineColor,t.lineWidth=this.lineWidth,this.lineArc)t.beginPath(),t.arc(this.xCenter,this.yCenter,o,0,2*Math.PI),t.closePath(),t.stroke();else{t.beginPath();for(var s=0;s<this.valuesCount;s++)i=this.getPointPosition(s,this.calculateCenterOffset(this.min+n*this.stepValue)),0===s?t.moveTo(i.x,i.y):t.lineTo(i.x,i.y);t.closePath(),t.stroke()}if(this.showLabels){if(t.font=P(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop){var a=t.measureText(e).width;t.fillStyle=this.backdropColor,t.fillRect(this.xCenter-a/2-this.backdropPaddingX,r-this.fontSize/2-this.backdropPaddingY,a+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY)}t.textAlign="center",t.textBaseline="middle",t.fillStyle=this.fontColor,t.fillText(e,this.xCenter,r)}}},this),!this.lineArc){t.lineWidth=this.angleLineWidth,t.strokeStyle=this.angleLineColor;for(var e=this.valuesCount-1;e>=0;e--){if(this.angleLineWidth>0){var n=this.getPointPosition(e,this.calculateCenterOffset(this.max));t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(n.x,n.y),t.stroke(),t.closePath()}var i=this.getPointPosition(e,this.calculateCenterOffset(this.max)+5);t.font=P(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),t.fillStyle=this.pointLabelFontColor;var r=this.labels.length,s=this.labels.length/2,a=s/2,l=a>e||e>r-a,u=e===a||e===r-a;0===e?t.textAlign="center":e===s?t.textAlign="center":s>e?t.textAlign="left":t.textAlign="right",u?t.textBaseline="middle":l?t.textBaseline="bottom":t.textBaseline="top",t.fillText(this.labels[e],i.x,i.y)}}}}}),i.addEvent(window,"resize",function(){var t;return function(){clearTimeout(t),t=setTimeout(function(){o(n.instances,function(t){t.options.responsive&&t.resize(t.render,!0)})},50)}}()),p?define(function(){return n}):"object"==typeof module&&module.exports&&(module.exports=n),t.Chart=n,n.noConflict=function(){return t.Chart=e,n}}.call(this),function(){"use strict";var t=this,e=t.Chart,n=e.helpers,i={scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};e.Type.extend({name:"Bar",defaults:i,initialize:function(t){var i=this.options;this.ScaleClass=e.Scale.extend({offsetGridLines:!0,calculateBarX:function(t,e,n){var o=this.calculateBaseWidth(),r=this.calculateX(n)-o/2,s=this.calculateBarWidth(t);return r+s*e+e*i.barDatasetSpacing+s/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*i.barValueSpacing},calculateBarWidth:function(t){var e=this.calculateBaseWidth()-(t-1)*i.barDatasetSpacing;return e/t}}),this.datasets=[],this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getBarsAtEvent(t):[];this.eachBars(function(t){t.restore(["fillColor","strokeColor"])}),n.each(e,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(e)}),this.BarClass=e.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx}),n.each(t.datasets,function(e,i){var o={label:e.label||null,fillColor:e.fillColor,
strokeColor:e.strokeColor,bars:[]};this.datasets.push(o),n.each(e.data,function(i,r){n.isNumber(i)&&o.bars.push(new this.BarClass({value:i,label:t.labels[r],datasetLabel:e.label,strokeColor:e.strokeColor,fillColor:e.fillColor,highlightFill:e.highlightFill||e.fillColor,highlightStroke:e.highlightStroke||e.strokeColor}))},this)},this),this.buildScale(t.labels),this.BarClass.prototype.base=this.scale.endPoint,this.eachBars(function(t,e,i){n.extend(t,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,i,e),y:this.scale.endPoint}),t.save()},this),this.render()},update:function(){this.scale.update(),n.each(this.activeElements,function(t){t.restore(["fillColor","strokeColor"])}),this.eachBars(function(t){t.save()}),this.render()},eachBars:function(t){n.each(this.datasets,function(e,i){n.each(e.bars,t,this,i)},this)},getBarsAtEvent:function(t){for(var e,i=[],o=n.getRelativePosition(t),r=function(t){i.push(t.bars[e])},s=0;s<this.datasets.length;s++)for(e=0;e<this.datasets[s].bars.length;e++)if(this.datasets[s].bars[e].inRange(o.x,o.y))return n.each(this.datasets,r),i;return i},buildScale:function(t){var e=this,i=function(){var t=[];return e.eachBars(function(e){t.push(e.value)}),t},o={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var e=n.calculateScaleRange(i(),t,this.fontSize,this.beginAtZero,this.integersOnly);n.extend(this,e)},xLabels:t,font:n.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&n.extend(o,{calculateYRange:n.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new this.ScaleClass(o)},addData:function(t,e){n.each(t,function(t,i){n.isNumber(t)&&this.datasets[i].bars.push(new this.BarClass({value:t,label:e,x:this.scale.calculateBarX(this.datasets.length,i,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[i].strokeColor,fillColor:this.datasets[i].fillColor}))},this),this.scale.addXLabel(e),this.update()},removeData:function(){this.scale.removeXLabel(),n.each(this.datasets,function(t){t.bars.shift()},this),this.update()},reflow:function(){n.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var t=n.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var e=t||1;this.clear();this.chart.ctx;this.scale.draw(e),n.each(this.datasets,function(t,i){n.each(t.bars,function(t,n){t.base=this.scale.endPoint,t.transition({x:this.scale.calculateBarX(this.datasets.length,i,n),y:this.scale.calculateY(t.value),width:this.scale.calculateBarWidth(this.datasets.length)},e).draw()},this)},this)}})}.call(this),function(){"use strict";var t=this,e=t.Chart,n=e.helpers,i={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};e.Type.extend({name:"Doughnut",defaults:i,initialize:function(t){this.segments=[],this.outerRadius=(n.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,this.SegmentArc=e.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2}),this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];n.each(this.segments,function(t){t.restore(["fillColor"])}),n.each(e,function(t){t.fillColor=t.highlightColor}),this.showTooltip(e)}),this.calculateTotal(t),n.each(t,function(t,e){this.addData(t,e,!0)},this),this.render()},getSegmentsAtEvent:function(t){var e=[],i=n.getRelativePosition(t);return n.each(this.segments,function(t){t.inRange(i.x,i.y)&&e.push(t)},this),e},addData:function(t,e,n){var i=e||this.segments.length;this.segments.splice(i,0,new this.SegmentArc({value:t.value,outerRadius:this.options.animateScale?0:this.outerRadius,innerRadius:this.options.animateScale?0:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:t.color,highlightColor:t.highlight||t.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:1.5*Math.PI,circumference:this.options.animateRotate?0:this.calculateCircumference(t.value),label:t.label})),n||(this.reflow(),this.update())},calculateCircumference:function(t){return 2*Math.PI*(t/this.total)},calculateTotal:function(t){this.total=0,n.each(t,function(t){this.total+=t.value},this)},update:function(){this.calculateTotal(this.segments),n.each(this.activeElements,function(t){t.restore(["fillColor"])}),n.each(this.segments,function(t){t.save()}),this.render()},removeData:function(t){var e=n.isNumber(t)?t:this.segments.length-1;this.segments.splice(e,1),this.reflow(),this.update()},reflow:function(){n.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.outerRadius=(n.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,n.each(this.segments,function(t){t.update({outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout})},this)},draw:function(t){var e=t?t:1;this.clear(),n.each(this.segments,function(t,n){t.transition({circumference:this.calculateCircumference(t.value),outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout},e),t.endAngle=t.startAngle+t.circumference,t.draw(),0===n&&(t.startAngle=1.5*Math.PI),n<this.segments.length-1&&(this.segments[n+1].startAngle=t.endAngle)},this)}}),e.types.Doughnut.extend({name:"Pie",defaults:n.merge(i,{percentageInnerCutout:0})})}.call(this),function(){"use strict";var t=this,e=t.Chart,n=e.helpers,i={scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};e.Type.extend({name:"Line",defaults:i,initialize:function(t){this.PointClass=e.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx,inRange:function(t){return Math.pow(t-this.x,2)<Math.pow(this.radius+this.hitDetectionRadius,2)}}),this.datasets=[],this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints(function(t){t.restore(["fillColor","strokeColor"])}),n.each(e,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(e)}),n.each(t.datasets,function(e){var i={label:e.label||null,fillColor:e.fillColor,strokeColor:e.strokeColor,pointColor:e.pointColor,pointStrokeColor:e.pointStrokeColor,points:[]};this.datasets.push(i),n.each(e.data,function(o,r){n.isNumber(o)&&i.points.push(new this.PointClass({value:o,label:t.labels[r],datasetLabel:e.label,strokeColor:e.pointStrokeColor,fillColor:e.pointColor,highlightFill:e.pointHighlightFill||e.pointColor,highlightStroke:e.pointHighlightStroke||e.pointStrokeColor}))},this),this.buildScale(t.labels),this.eachPoints(function(t,e){n.extend(t,{x:this.scale.calculateX(e),y:this.scale.endPoint}),t.save()},this)},this),this.render()},update:function(){this.scale.update(),n.each(this.activeElements,function(t){t.restore(["fillColor","strokeColor"])}),this.eachPoints(function(t){t.save()}),this.render()},eachPoints:function(t){n.each(this.datasets,function(e){n.each(e.points,t,this)},this)},getPointsAtEvent:function(t){var e=[],i=n.getRelativePosition(t);return n.each(this.datasets,function(t){n.each(t.points,function(t){t.inRange(i.x,i.y)&&e.push(t)})},this),e},buildScale:function(t){var i=this,o=function(){var t=[];return i.eachPoints(function(e){t.push(e.value)}),t},r={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var e=n.calculateScaleRange(o(),t,this.fontSize,this.beginAtZero,this.integersOnly);n.extend(this,e)},xLabels:t,font:n.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&n.extend(r,{calculateYRange:n.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new e.Scale(r)},addData:function(t,e){n.each(t,function(t,i){n.isNumber(t)&&this.datasets[i].points.push(new this.PointClass({value:t,label:e,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[i].pointStrokeColor,fillColor:this.datasets[i].pointColor}))},this),this.scale.addXLabel(e),this.update()},removeData:function(){this.scale.removeXLabel(),n.each(this.datasets,function(t){t.points.shift()},this),this.update()},reflow:function(){var t=n.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var e=t||1;this.clear();var i=this.chart.ctx;this.scale.draw(e),n.each(this.datasets,function(t){n.each(t.points,function(t,n){t.transition({y:this.scale.calculateY(t.value),x:this.scale.calculateX(n)},e)},this),this.options.bezierCurve&&n.each(t.points,function(e,i){0===i?e.controlPoints=n.splineCurve(e,e,t.points[i+1],0):i>=t.points.length-1?e.controlPoints=n.splineCurve(t.points[i-1],e,e,0):e.controlPoints=n.splineCurve(t.points[i-1],e,t.points[i+1],this.options.bezierCurveTension)},this),i.lineWidth=this.options.datasetStrokeWidth,i.strokeStyle=t.strokeColor,i.beginPath(),n.each(t.points,function(e,n){n>0?this.options.bezierCurve?i.bezierCurveTo(t.points[n-1].controlPoints.outer.x,t.points[n-1].controlPoints.outer.y,e.controlPoints.inner.x,e.controlPoints.inner.y,e.x,e.y):i.lineTo(e.x,e.y):i.moveTo(e.x,e.y)},this),i.stroke(),this.options.datasetFill&&(i.lineTo(t.points[t.points.length-1].x,this.scale.endPoint),i.lineTo(this.scale.calculateX(0),this.scale.endPoint),i.fillStyle=t.fillColor,i.closePath(),i.fill()),n.each(t.points,function(t){t.draw()})},this)}})}.call(this),function(){"use strict";var t=this,e=t.Chart,n=e.helpers,i={scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:!0,scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,scaleShowLine:!0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};e.Type.extend({name:"PolarArea",defaults:i,initialize:function(t){this.segments=[],this.SegmentArc=e.Arc.extend({showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,ctx:this.chart.ctx,innerRadius:0,x:this.chart.width/2,y:this.chart.height/2}),this.scale=new e.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,lineArc:!0,width:this.chart.width,height:this.chart.height,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,valuesCount:t.length}),this.updateScaleRange(t),this.scale.update(),n.each(t,function(t,e){this.addData(t,e,!0)},this),this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];n.each(this.segments,function(t){t.restore(["fillColor"])}),n.each(e,function(t){t.fillColor=t.highlightColor}),this.showTooltip(e)}),this.render()},getSegmentsAtEvent:function(t){var e=[],i=n.getRelativePosition(t);return n.each(this.segments,function(t){t.inRange(i.x,i.y)&&e.push(t)},this),e},addData:function(t,e,n){var i=e||this.segments.length;this.segments.splice(i,0,new this.SegmentArc({fillColor:t.color,highlightColor:t.highlight||t.color,label:t.label,value:t.value,outerRadius:this.options.animateScale?0:this.scale.calculateCenterOffset(t.value),circumference:this.options.animateRotate?0:this.scale.getCircumference(),startAngle:1.5*Math.PI})),n||(this.reflow(),this.update())},removeData:function(t){var e=n.isNumber(t)?t:this.segments.length-1;this.segments.splice(e,1),this.reflow(),this.update()},calculateTotal:function(t){this.total=0,n.each(t,function(t){this.total+=t.value},this),this.scale.valuesCount=this.segments.length},updateScaleRange:function(t){var e=[];n.each(t,function(t){e.push(t.value)});var i=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:n.calculateScaleRange(e,n.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);n.extend(this.scale,i,{size:n.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2})},update:function(){this.calculateTotal(this.segments),n.each(this.segments,function(t){t.save()}),this.render()},reflow:function(){n.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.updateScaleRange(this.segments),this.scale.update(),n.extend(this.scale,{xCenter:this.chart.width/2,yCenter:this.chart.height/2}),n.each(this.segments,function(t){t.update({outerRadius:this.scale.calculateCenterOffset(t.value)})},this)},draw:function(t){var e=t||1;this.clear(),n.each(this.segments,function(t,n){t.transition({circumference:this.scale.getCircumference(),outerRadius:this.scale.calculateCenterOffset(t.value)},e),t.endAngle=t.startAngle+t.circumference,0===n&&(t.startAngle=1.5*Math.PI),n<this.segments.length-1&&(this.segments[n+1].startAngle=t.endAngle),t.draw()},this),this.scale.draw()}})}.call(this),function(){"use strict";var t=this,e=t.Chart,n=e.helpers;e.Type.extend({name:"Radar",defaults:{scaleShowLine:!0,angleShowLineOut:!0,scaleShowLabels:!1,scaleBeginAtZero:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:10,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},initialize:function(t){this.PointClass=e.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx}),this.datasets=[],this.buildScale(t),this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints(function(t){t.restore(["fillColor","strokeColor"])}),n.each(e,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(e)}),n.each(t.datasets,function(e){var i={label:e.label||null,fillColor:e.fillColor,strokeColor:e.strokeColor,pointColor:e.pointColor,pointStrokeColor:e.pointStrokeColor,points:[]};this.datasets.push(i),n.each(e.data,function(o,r){if(n.isNumber(o)){var s;this.scale.animation||(s=this.scale.getPointPosition(r,this.scale.calculateCenterOffset(o))),i.points.push(new this.PointClass({value:o,label:t.labels[r],datasetLabel:e.label,x:this.options.animation?this.scale.xCenter:s.x,y:this.options.animation?this.scale.yCenter:s.y,strokeColor:e.pointStrokeColor,fillColor:e.pointColor,highlightFill:e.pointHighlightFill||e.pointColor,highlightStroke:e.pointHighlightStroke||e.pointStrokeColor}))}},this)},this),this.render()},eachPoints:function(t){n.each(this.datasets,function(e){n.each(e.points,t,this)},this)},getPointsAtEvent:function(t){var e=n.getRelativePosition(t),i=n.getAngleFromPoint({x:this.scale.xCenter,y:this.scale.yCenter},e),o=2*Math.PI/this.scale.valuesCount,r=Math.round((i.angle-1.5*Math.PI)/o),s=[];return(r>=this.scale.valuesCount||0>r)&&(r=0),i.distance<=this.scale.drawingArea&&n.each(this.datasets,function(t){s.push(t.points[r])}),s},buildScale:function(t){this.scale=new e.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,angleLineColor:this.options.angleLineColor,angleLineWidth:this.options.angleShowLineOut?this.options.angleLineWidth:0,pointLabelFontColor:this.options.pointLabelFontColor,pointLabelFontSize:this.options.pointLabelFontSize,pointLabelFontFamily:this.options.pointLabelFontFamily,pointLabelFontStyle:this.options.pointLabelFontStyle,height:this.chart.height,width:this.chart.width,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,labels:t.labels,valuesCount:t.datasets[0].data.length}),this.scale.setScaleSize(),this.updateScaleRange(t.datasets),this.scale.buildYLabels()},updateScaleRange:function(t){var e=function(){var e=[];return n.each(t,function(t){t.data?e=e.concat(t.data):n.each(t.points,function(t){e.push(t.value)})}),e}(),i=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:n.calculateScaleRange(e,n.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);n.extend(this.scale,i)},addData:function(t,e){this.scale.valuesCount++,n.each(t,function(t,i){if(n.isNumber(t)){var o=this.scale.getPointPosition(this.scale.valuesCount,this.scale.calculateCenterOffset(t));this.datasets[i].points.push(new this.PointClass({value:t,label:e,x:o.x,y:o.y,strokeColor:this.datasets[i].pointStrokeColor,fillColor:this.datasets[i].pointColor}))}},this),this.scale.labels.push(e),this.reflow(),this.update()},removeData:function(){this.scale.valuesCount--,this.scale.labels.shift(),n.each(this.datasets,function(t){t.points.shift()},this),this.reflow(),this.update()},update:function(){this.eachPoints(function(t){t.save()}),this.reflow(),this.render()},reflow:function(){n.extend(this.scale,{width:this.chart.width,height:this.chart.height,size:n.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2}),this.updateScaleRange(this.datasets),this.scale.setScaleSize(),this.scale.buildYLabels()},draw:function(t){var e=t||1,i=this.chart.ctx;this.clear(),this.scale.draw(),n.each(this.datasets,function(t){n.each(t.points,function(t,n){t.transition(this.scale.getPointPosition(n,this.scale.calculateCenterOffset(t.value)),e)},this),i.lineWidth=this.options.datasetStrokeWidth,i.strokeStyle=t.strokeColor,i.beginPath(),n.each(t.points,function(t,e){0===e?i.moveTo(t.x,t.y):i.lineTo(t.x,t.y)},this),i.closePath(),i.stroke(),i.fillStyle=t.fillColor,i.fill(),n.each(t.points,function(t){t.draw()})},this)}})}.call(this),$(function(){if($("#stats").length){$("body").on("click","a.toggle-referrers",function(t){return t.preventDefault(),$(this).closest(".story-stats").find(".list-popout").fadeToggle(100),!1}),$("body").on("click",".close-popout",function(t){return t.preventDefault(),$(this).closest(".list-popout").fadeOut(100),!1});var t=function(){var t=$("#load-more-stories");t.html("Loading more stories...").addClass("loading");var e={page:+$(".post-stats-container").attr("data-page"),sort:$(".post-stats-container").attr("data-sort")};$.get("/stats/posts.json",e).done(function(e){$(".post-stats-container").attr("data-page",+$(".post-stats-container").attr("data-page")+1);for(var n=$("#stats-post-template").html(),i=Handlebars.compile(n),o=0,r=e.length;r>o;o++)$(".post-stats-container").append(i({post:e[o]}));e.length<10&&t.remove()}).always(function(){t.html("Load more stories").removeClass("loading")})};t(),$("#load-more-stories").on("click",function(e){return e.preventDefault(),t(),!1}),$("#top-posts-sorter").on("change",function(e){$(".post-stats-container").attr("data-page",1),$(".post-stats-container").attr("data-sort",$(this).val()),$(".post-stats-container").empty(),t()}),Chart.defaults.global.responsive=!0;var e=$(".views-graph canvas"),n=e.get(0).getContext("2d"),i={labels:statsGraphData.labels,datasets:[{label:"Your Site",fillColor:"rgba(220,220,220,0.2)",strokeColor:"rgba(220,220,220,1)",pointColor:"rgba(220,220,220,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:statsGraphData.user},{label:"Your Stories",fillColor:"rgba(151,187,205,0.2)",strokeColor:"rgba(151,187,205,1)",pointColor:"rgba(151,187,205,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(151,187,205,1)",data:statsGraphData.posts},{label:"Total Views",fillColor:"rgba(145,194,95,0.3)",strokeColor:"rgba(145,194,95,0.9)",pointColor:"rgba(145,194,95,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(151,187,205,1)",data:statsGraphData.totals}]},o={pointHitDetectionRadius:2,scaleShowGridLines:!0,maintainAspectRatio:!1,datasetFill:!0,scaleLineWidth:1,scaleFontColor:"#BDBDBD",pointDotRadius:6,pointDotStrokeWidth:1,datasetStrokeWidth:1,tooltipFontFamily:"GTWalsheim",tooltipTitleFontFamily:"GTWalsheim",pointLabelFontFamily:"GTWalsheim",scaleFontFamily:"GTWalsheim",tooltipFillColor:"#fff",tooltipFontColor:"#000",tooltipTitleFontColor:"#000",multiTooltipTemplate:"<%= datasetLabel %>: <%= value %>",tooltipXPadding:16,animationEasing:"easeOutQuart",tooltipYPadding:12};new Chart(n).Line(i,o)}}),$(function(){var t=$(".stats-header");$(window).scroll(function(){var e=$(window).scrollTop();e>=19.1?t.css("top","0"):t.css("top","5rem")})}),function(){var t;t=function(t){var e,n,i,o,r,s;for(o=window.location.search.substring(1),s=o.split("&"),e=0,n=s.length;n>e;e++)if(r=s[e],i=r.split("="),i[0]===t)return i[1];return!1},$(".search-input").on("focus",function(){return $("#search").removeClass("start-view"),$("#search-input-wrapper").toggleClass("active")}),$("#load-more-stories.inline-true").on("click",function(t){var e,n;return t.preventDefault(),Exposure.loading(!0),n=+$("body").attr("data-search-page")+1,e=window.location.href.replace(/\?page=\d+/,"")+("?page="+n),$("body").attr("data-search-page",n),$.get(e).done(function(t){return $.scrollTo(".square:last-child",400),$(".square-grid-receiver").append(t),""===t?$(".search-footer").slideUp(400):void 0}).always(function(){return Exposure.loading(!1)}),!1}),1===+$("body").attr("data-search-page")&&$("#load-more-stories.inline-true").trigger("click")}.call(this),$(function(){var t={};t.updateSetting=function(t,e){Exposure.loading(!0),$.post("/settings/design-options/update/"+t,{_method:"patch",value:e}).always(function(){Exposure.loading(!1),Exposure.showMessage("Setting saved")})},$("div[data-action=remove-logo").on("click",function(t){var e=$(t.target),n=new ExposureConfirmModal(e,"#confirm-remove-logo",{title:"Remove Brand Logo",description:"This will remove your logo and we will use your display name in its place across your Exposure site and stories.",yesLabel:"Yes, remove logo",noLabel:"No, Nevermind"},function(){$.post("/settings/design-options/remove-logo").done(function(){$(".logo-wrapper img").fadeOut(300),$(".logo-wrapper img, .logo-place").attr("src","").parent().removeClass("uploaded"),$(".logo-size h6").text("Awesome Inc"),$(".no-logo-indicator").text("No logo uploaded"),$(".no-logo-indicator").fadeIn(300),$(".brand-menu .member-logo-wrapper").fadeOut(100),$(".brand-menu-display-name").fadeIn(300)}).done(function(){Exposure.showMessage("Logo removed")}).fail(function(){Exposure.showMessage("There was an error saving removing your logo, please try again")})},function(){});n.show()}),t.removeShareImage=function(t){var e=this;return t.preventDefault(),confirm("Are you sure you want to remove your Share Image?")?($.post("/settings/design-options/remove-share-image").done(function(){$(e).fadeOut(300),Exposure.showMessage("Share Image removed, now using Avatar"),location.reload()}),!1):!1},t.uploadLogo=function(t){Exposure.loading(!0);var e=t.target.files[0],n=$(this),i=(new FileReader,$(".logo-wrapper img,.selection img.logo-place,.brand-menu .member-logo-wrapper img"));if(!/image/.test(e.type))return void Exposure.showMessage("Please upload a PNG or JPG.");var o=new FormData;o.append("user[brand_logo]",e),Exposure.loading(!0),n.attr("disabled",!0),i.attr("src",""),i.parent().removeClass("error").removeClass("uploaded").addClass("uploading"),$(".no-logo-indicator").fadeIn(100),$(".selection h6").text("Uploading"),$(".member-logo-wrapper").fadeOut(100),$(".fake-choose-file").addClass("btn-loading"),$(".no-logo-indicator").text("Uploading Logo"),$.ajax({url:"/settings/design-options/upload-logo",data:o,cache:!1,contentType:!1,processData:!1,type:"POST"}).done(function(t){i.parent().addClass("uploaded"),i.attr("src",t.resp+"resize(500,_).png"),$("div[data-action=remove-logo]").fadeIn(300),Exposure.showMessage("Logo uploaded"),$(".no-logo-indicator").fadeOut(300),$(".fake-choose-file").removeClass("btn-loading"),$(".brand-menu-display-name").fadeOut(100),$(".member-logo-wrapper").fadeIn(100),$(".logo-wrapper img").fadeIn(300)}).fail(function(t){Exposure.showMessage(t.responseJSON.resp),i.parent().addClass("error")}).always(function(){Exposure.loading(!1),n.removeAttr("disabled"),i.parent().removeClass("uploading")})},$("input[name=brand_logo]").on("change",t.uploadLogo),$("a[data-action=remove-share-image]").on("click",t.removeShareImage),$(".logo-wrapper .dark-toggle").on("click",function(t){return t.preventDefault(),$(".logo-wrapper").toggleClass("dark"),!1}),$(".color-choices input[type=radio]").on("change",function(e){var n="brand_color_for_"+this.name,i=this.value;t.updateSetting(n,i),$("body").trigger("color:changedEl",{name:this.name,value:this.value})}),$("input[name=color-menu-background],input[name=color-main], input[name=color-accent],        input[name=color-main-1], input[name=color-accent-1],        input[name=color-main-2], input[name=color-accent-2]").colpick({layout:"hex",submit:0,onChange:function(t,e,n,i,o){o||$("input[name="+i.name.replace(/-\d/,"")+"]").val(e).trigger("change")},onBeforeShow:function(t){}}).on("keyup change",function(t){var e=($(this),$(this).attr("name").replace("color-","").replace(/-\d/,"")),n=$(this).val().toUpperCase().replace(/[^A-F0-9]/g,""),i=$(".color-spot.color-"+e);i.css("background-color","#"+n);var o=$("input[name=color-"+e+"]"),r=$("input[name=color-"+e+"-1]"),s=$("input[name=color-"+e+"-2]");o.val(n),r.val("#"+n),s.val("#"+n),o.colpickSetColor(n),r.colpickSetColor(n),s.colpickSetColor(n),$("[data-color-bind="+e+"]").attr("data-color",n),$("body").trigger("color:change",{name:e,color:n}),$(".design-options .empty").removeClass("empty");var a=["cover_overlay"],l=null;a.forEach(function(t,i){l=t.replace("_","-"),$("span."+l+"-radio-"+e).css("background-color","#"+n),$(".brand-menu.theme-brand-primary").css("background-color","#"+n),$(".brand-menu-color-preview").css("background-color","#"+n),$(".logo-wrapper-menu-builder").css("background-color","#"+n)}),$("a.save-color."+e).fadeIn(300)}),$("a.save-color").on("click",function(e){e.preventDefault();var n=$.trim(this.className.replace("save-color","").replace("button",""));return t.updateSetting("brand_color_"+n,$("input[name=color-"+n+"]").val()),$(this).fadeOut(300),$(".logo-wrapper-menu-builder").css("background-color","#F8F8F8"),!1}),$("body").on("color:change",function(t,e){$("[data-color]:checked").each(function(t,e){$("body").trigger("color:changedEl",{name:e.name,value:e.value})})}),$("body").on("color:changedEl",function(t,e){var n;-1==e.value?n=$("input[name="+e.name+"][data-color-bind=default][data-black]"):0==e.value?n=$("input[name="+e.name+"][data-color-bind=default][data-white]"):1==e.value?n=$("input[name="+e.name+"][data-color-bind=main]"):2==e.value?n=$("input[name="+e.name+"][data-color-bind=accent]"):3==e.value&&(n=$("input[name="+e.name+"][data-color-bind=menu_background]"));var i=n.attr("data-color"),o=$(".preview-color-"+e.name.replace("_","-"));"cover_overlay"==e.name||"bg"==e.name?o.css("background-color","#"+i):o.css("color","#"+i),"button_background"==e.name||"bg"==e.name?o.css("background-color","#"+i):o.css("color","#"+i)}),$("body").trigger("color:change",{name:null,color:null}),$(".logo-size a").on("click",function(e){return e.preventDefault(),$(".logo-size a").removeClass("active"),$(this).addClass("active"),t.updateSetting("brand_logo_size",$(this).attr("data-size")),!1}),$("#font-themes input[type=radio]").on("click",function(e){var n=$(this).parent().attr("class").match(/theme-(.+)/)[1];$(this).is(":checked")&&t.updateSetting("brand_font_theme",n)}),$("#fb-pixel-manager button").on("click",function(e){var n=$("#fb-pixel-manager #fb-pixel-id");t.updateSetting("fb_pixel_id",n.val())}),$("#disqus-manager button").on("click",function(e){var n=$("#disqus-manager #disqus-shortcode");t.updateSetting("disqus",n.val())}),$("#clear-disqus").on("click",function(t){""!==$("#disqus-manager #disqus-shortcode").val()&&($("#disqus-manager #disqus-shortcode").val(""),$("#disqus-manager button").addClass("animated pulse"),window.setTimeout(function(){$("#fb-pixel-manager button").removeClass("animated pulse")},500))}),$("#coil-payment-point-manager button").on("click",function(e){var n=$("#coil-payment-point-manager #coil-payment-point");t.updateSetting("coil_payment_point",n.val())}),$("#clear-tags-fb").on("click",function(t){
(""!==$("#fb-pixel-manager #fb-pixel-id").val()||""!==$("#fb-pixel-manager #tag-manager-id").val())&&($("#fb-pixel-manager #fb-pixel-id").val(""),$("#fb-pixel-manager #tag-manager-id").val(""),$("#fb-pixel-manager button").addClass("animated pulse"),window.setTimeout(function(){$("#fb-pixel-manager button").removeClass("animated pulse")},500))}),$("#ga-manager button").on("click",function(e){var n=$("#ga-manager #analytics-id"),i=$("#ga-manager #tag-manager-id");n[0].validity.patternMismatch||i[0].validity.patternMismatch||(t.updateSetting("ga_analytics_tracking_id",n.val()),t.updateSetting("ga_tag_manager_id",i.val()))}),$("#clear-tags").on("click",function(t){(""!==$("#ga-manager #analytics-id").val()||""!==$("#ga-manager #tag-manager-id").val())&&($("#ga-manager #analytics-id").val(""),$("#ga-manager #tag-manager-id").val(""),$("#ga-manager button").addClass("animated pulse"),window.setTimeout(function(){$("#ga-manager button").removeClass("animated pulse")},500))}),$(".type-custom-fonts .save-custom-fonts").on("click",function(e){var n=$("#custom-font-heading-family"),i=$("#custom-font-body-family");n[0].validity.patternMismatch||i[0].validity.patternMismatch||(t.updateSetting("brand_type_heading_custom_family",n.val()),t.updateSetting("brand_type_body_custom_family",i.val()))}),$("#webhook-manager button").click("click",function(e){var n=$("#webhook-manager #webhook-url");n[0].validity.typeMismatch||t.updateSetting("webhook_url",n.val())}),$("#clear-webhook").on("click",function(t){$("#webhook-manager #webhook-url").val("")}),$("#test-webhook").on("click",function(t){Exposure.loading(!0);var e=$("#webhook-manager #webhook-url");if(!e[0].validity.typeMismatch){var n=window.location.toString()+"/test-webhook";$.post(n,{test_url:e.val()}).always(function(){Exposure.loading(!1),Exposure.showMessage("Test Webhook Fired")})}})}),$(function(){var t={path:"/subscribe-via-email"};t.user=function(){return $(".subscribe-to-stories").attr("data-user")},t.sub=function(e){e.preventDefault(),Exposure.loading(!0);var n=$(".subscribe-email");n.removeClass("error");var i=$(".subscribe-locale");return $.post(t.path,{user:t.user(),email:n.val(),locale:i.val(),source:"post"}).done(function(t){$(".subscribe-to-stories").addClass("subscribed").find(".subscribe-successful").fadeIn(300),$(".subscribe-to-stories").attr("data-token",t.sub.unsub_key)}).error(function(t){Exposure.showMessage(t.responseJSON.msg.replace(/Validation failed: /,"")),n.addClass("error").focus()}).always(function(){Exposure.loading(!1)}),!1},t.unsub=function(t){return t.preventDefault(),Exposure.loading(!0),$.get("/email-subs/unsub/"+$(".subscribe-to-stories").attr("data-token")).done(function(t){$(".subscribe-to-stories").removeClass("subscribed").find(".subscribe-successful").fadeOut(300),$(".subscribe-email").val("")}).always(function(){Exposure.loading(!1)}),!1},$(".subscribe-to-stories button.submit-email").on("click",t.sub),$(".subscribe-to-stories a.unsubscribe").on("click",t.unsub)}),window.$googleApiKey="AIzaSyDYjM9eyJGTGekOXbakPjSJ4lHSKK-r3tQ",$(".close-ui-modal,.modal-cover").click(function(t){return $(".ui-modal").hide(),!1}),$(".toggle-publications-menu").on("click",function(t){return $(".publications-menu").toggleClass("open"),$(".member-site-preview-wrapper").toggleClass("member-site-scroll-stop"),!1}),$(".cancel-changes").click(function(t){$(".ui-modal").hide()}),$("body").on("click",function(t){$(".latest-updates").removeClass("open")}),$(".latest-updates").on("click",function(t){t.stopPropagation()}),$(".account-settings-toggle-password-show").on("click",function(t){return t.preventDefault(),$(".account-settings-toggle-password-show").toggleClass("muted border"),$(this).text(function(e,n){var i=$("#user_password");"password"===i.attr("type")?i.attr("type","text"):i.attr("type","password"),t.preventDefault()}),!1}),$(document).on("keydown",".password-space-stopper",function(t){return 32==t.keyCode?!1:void 0}),$(".admin-controls-hook").click(function(t){$(".admin-controls-panel").toggleClass("open")}),$(".mobile-nav-trigger").click(function(t){$(this).toggleClass("active"),$("#mobile-nav").toggleClass("active")}),$("#share-options-hook").click(function(){$(".share-options").toggleClass("active"),$(this).toggleClass("muted")}),$(".power-bar-alignment").click(function(){return $("#content-power-bar-wrapper").toggleClass("center"),$("#content-power-bar").toggleClass("minimize"),$("#content-power-bar-wrapper .label").toggleClass("hide"),!1}),$(".toggle-show-cover-photo a").click(function(){return $("#post header #cover-image").toggleClass("hide-overlay"),$(".toggle-show-cover-photo").toggleClass("o-1 pulse animated animated-loop"),!1}),$(".light-enterprise-nav-mobile-trigger").click(function(){$(".light-enterprise-nav-mobile").toggleClass("active"),$(".light-enterprise-nav").toggleClass("active")}),$(".open-modal-w-dialog").click(function(t){return $("#ui-modal-w-dialog").show(),!1}),$("body").bind("touchstart",function(){});var Exposure=Exposure||{};Exposure.simplePost=function(t){var e=$('<form action="'+t+'" method="post">'),n=$('<input type="hidden" name="authenticity_token">').val(document.querySelector("meta[name=csrf-token]").getAttribute("content"));e.append(n),$("body").append(e),e.submit()},Exposure.loading=function(t){el=$(".global-loading-indicator"),t?el.show():el.hide()},Exposure.showMessage=function(t){var e=$("#app-message");e.removeClass("active").addClass("active").find(".message").html(t),e.show(),setTimeout(function(){$("#app-message").click()},8e3);var e=$(".app-feedback");e.on("click",function(t){return t.preventDefault(),e.removeClass("active"),!1}),e.find(".text-holder").html(t),e.removeClass("active"),e.addClass("active"),e.show(),"undefined"!=typeof n&&clearTimeout(n);var n=setTimeout(function(){e.click()},8e3)},$appMsg=$("[data-message]"),$appMsg.attr("data-message")&&Exposure.showMessage($appMsg.attr("data-message")),window.location.search&&window.location.search.match(/Downgraded=1/)&&Exposure.showMessage("You\u2019ve been downgraded back to the Free plan."),$(".exposure-status-bar .hide-status-bar").click(function(t){return $(".exposure-status-bar").slideUp(),!1}),$(".global-menu-hook").click(function(t){t.preventDefault(),$(".global-menu").toggleClass("show"),$(".main-wrapper").toggleClass("global-menu-show"),$("body").toggleClass("overflow-x-hidden"),$("header .icon-cross").toggle(),$("header .icon-cross").toggleClass("show"),$("header .icon-menu").toggleClass("hide-icon"),$(".menu-page-cover").fadeToggle("fast"),t.stopPropagation()}),$(".menu-page-cover").click(function(t){t.preventDefault(),$(".global-menu").toggleClass("show"),$(".main-wrapper").toggleClass("global-menu-show"),$("header .icon-cross").toggle(),$("header .icon-cross").toggleClass("show"),$("header .icon-menu").toggleClass("hide-icon"),$(".menu-page-cover").fadeToggle("fast"),t.stopPropagation()}),$("body").on("click touchstart",function(t){$(t.target).is(".user-menu, .user-menu *")||$(".user-menu").removeClass("show")}),$(".latest-updates-hook").click(function(t){t.preventDefault(),$(".latest-updates").hasClass("open")||$.post("/_track/update-panel-opened"),$(".latest-updates").toggleClass("open"),t.stopPropagation()}),$(".user-menu-hook").click(function(t){t.preventDefault(),$(".user-menu").toggleClass("show"),t.stopPropagation()}),$(".close-modal").click(function(t){t.preventDefault(),$("#confirm-remove-account, #confirm-downgrade-plan").hide()}),$(".livechat-hook").click(function(){$("#chatlio-widget").fadeToggle("fast","linear"),window._chatlio.show({expanded:!0})}),$(function(){var t=$(".fixed-nav-home");$(window).scroll(function(){$(document).scrollTop()>5?(t.addClass("fixed-home-nav-scrolling top-0"),$(".create-site span").addClass("bg-green white")):(t.removeClass("fixed-home-nav-scrolling top-0"),$(".create-site span").removeClass("bg-green white"))})}),$(function(){var t=$(".fixed-nav-bottom");$(window).scroll(function(){$(document).scrollTop()>100?(t.addClass("fixed block bottom-0 left-0 z3 box-shadow-xsm scrolling-fixed-nav animated animated-fast delay-0-2s fadeInUp border-top"),t.removeClass("border-bottom")):(t.removeClass("fixed block bottom-0 left-0 z3 box-shadow-xsm scrolling-fixed-nav animated animated-fast delay-0-2s fadeInUp border-top"),t.addClass("border-bottom"))})}),$(function(){var t=$(".back-to-top");$(window).scroll(function(){$(document).scrollTop()>600?t.fadeIn("fast"):t.fadeOut("fast")})}),$(document).ready(function(){$("#post[data-is-animation-effects='true'] .smoothScroll,.member-site-wrapper[data-is-animation-effects='true'] .smoothScroll").click(function(t){t.preventDefault(),anchorScroll($(this),$($(this).attr("href")),100)})}),$personas=$(".persona-overlay"),$personas.length&&($(".persona-hook").on("click",function(t){t.preventDefault(),$personas.show()}),$personas.find(".close-persona").on("click",function(t){t.preventDefault(),$personas.fadeOut("fast")})),$(function(){$("*[rel=tooltip-auto]").tipsy({gravity:$.fn.tipsy.autoNS})}),$(function(){$("*[rel=tooltip]").tipsy({fade:!0,gravity:"s"})}),$(function(){$("*[rel=tooltip-top]").tipsy({fade:!0,gravity:"n"})}),$(function(){$("*[rel=tooltip-left]").tipsy({fade:!0,gravity:"w"})}),$(function(){$("*[rel=tooltip-right]").tipsy({fade:!0,gravity:"e"})}),$(".see-pro-features-trigger").click(function(t){t.preventDefault(),$(".pro-features-list").slideToggle("400"),t.stopPropagation()});var retina=window.devicePixelRatio,PI=Math.PI,sqrt=Math.sqrt,round=Math.round,random=Math.random,cos=Math.cos,sin=Math.sin,rAF=window.requestAnimationFrame,cAF=window.cancelAnimationFrame||window.cancelRequestAnimationFrame,_now=Date.now||function(){return(new Date).getTime()};!function(t){function e(t){var e=_now(),i=Math.max(0,16-(e-n)),o=setTimeout(t,i);return n=e,o}var n=_now(),i=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.clearTimeout;rAF=t.requestAnimationFrame||t.webkitRequestAnimationFrame||e,cAF=function(e){i.call(t,e)}}(window),document.addEventListener("DOMContentLoaded",function(){function t(e,n){this.x=e,this.y=n,this.Length=function(){return sqrt(this.SqrLength())},this.SqrLength=function(){return this.x*this.x+this.y*this.y},this.Add=function(t){this.x+=t.x,this.y+=t.y},this.Sub=function(t){this.x-=t.x,this.y-=t.y},this.Div=function(t){this.x/=t,this.y/=t},this.Mul=function(t){this.x*=t,this.y*=t},this.Normalize=function(){var t=this.SqrLength();if(0!=t){var e=1/sqrt(t);this.x*=e,this.y*=e}},this.Normalized=function(){var e=this.SqrLength();if(0!=e){var n=1/sqrt(e);return new t(this.x*n,this.y*n)}return new t(0,0)}}function e(e,n,i,o){this.position=new t(e,n),this.mass=i,this.drag=o,this.force=new t(0,0),this.velocity=new t(0,0),this.AddForce=function(t){this.force.Add(t)},this.Integrate=function(e){var n=this.CurrentForce(this.position);n.Div(this.mass);var i=new t(this.velocity.x,this.velocity.y);i.Mul(e),this.position.Add(i),n.Mul(e),this.velocity.Add(n),this.force=new t(0,0)},this.CurrentForce=function(e,n){var i=new t(this.force.x,this.force.y),o=this.velocity.Length(),r=new t(this.velocity.x,this.velocity.y);return r.Mul(this.drag*this.mass*o),i.Sub(r),i}}function n(e,i){this.pos=new t(e,i),this.rotationSpeed=600*random()+800,this.angle=h*random()*360,this.rotation=h*random()*360,this.cosA=1,this.size=5,this.oscillationSpeed=1.5*random()+.5,this.xSpeed=40,this.ySpeed=60*random()+50,this.corners=new Array,this.time=random();var o=round(random()*(d.length-1));this.frontColor=d[o][0],this.backColor=d[o][1];for(var r=0;4>r;r++){var s=cos(this.angle+h*(90*r+45)),a=sin(this.angle+h*(90*r+45));this.corners[r]=new t(s,a)}this.Update=function(t){this.time+=t,this.rotation+=this.rotationSpeed*t,this.cosA=cos(h*this.rotation),this.pos.x+=cos(this.time*this.oscillationSpeed)*this.xSpeed*t,this.pos.y+=this.ySpeed*t,this.pos.y>n.bounds.y&&(this.pos.x=random()*n.bounds.x,this.pos.y=0)},this.Draw=function(t){this.cosA>0?t.fillStyle=this.frontColor:t.fillStyle=this.backColor,t.beginPath(),t.moveTo((this.pos.x+this.corners[0].x*this.size)*retina,(this.pos.y+this.corners[0].y*this.size*this.cosA)*retina);for(var e=1;4>e;e++)t.lineTo((this.pos.x+this.corners[e].x*this.size)*retina,(this.pos.y+this.corners[e].y*this.size*this.cosA)*retina);t.closePath(),t.fill()}}function i(n,o,r,s,a,l,u,c){this.particleDist=s,this.particleCount=r,this.particleMass=u,this.particleDrag=c,this.particles=new Array;var p=round(random()*(d.length-1));this.frontColor=d[p][0],this.backColor=d[p][1],this.xOff=cos(h*l)*a,this.yOff=sin(h*l)*a,this.position=new t(n,o),this.prevPosition=new t(n,o),this.velocityInherit=2*random()+4,this.time=100*random(),this.oscillationSpeed=2*random()+2,this.oscillationDistance=40*random()+40,this.ySpeed=40*random()+80;for(var f=0;f<this.particleCount;f++)this.particles[f]=new e(n,o-f*this.particleDist,this.particleMass,this.particleDrag);this.Update=function(e){var n=0;this.time+=e*this.oscillationSpeed,this.position.y+=this.ySpeed*e,this.position.x+=cos(this.time)*this.oscillationDistance*e,this.particles[0].position=this.position;var o=this.prevPosition.x-this.position.x,r=this.prevPosition.y-this.position.y,s=sqrt(o*o+r*r);for(this.prevPosition=new t(this.position.x,this.position.y),n=1;n<this.particleCount;n++){var a=t.Sub(this.particles[n-1].position,this.particles[n].position);a.Normalize(),a.Mul(s/e*this.velocityInherit),this.particles[n].AddForce(a)}for(n=1;n<this.particleCount;n++)this.particles[n].Integrate(e);for(n=1;n<this.particleCount;n++){var l=new t(this.particles[n].position.x,this.particles[n].position.y);l.Sub(this.particles[n-1].position),l.Normalize(),l.Mul(this.particleDist),l.Add(this.particles[n-1].position),this.particles[n].position=l}this.position.y>i.bounds.y+this.particleDist*this.particleCount&&this.Reset()},this.Reset=function(){this.position.y=-random()*i.bounds.y,this.position.x=random()*i.bounds.x,this.prevPosition=new t(this.position.x,this.position.y),this.velocityInherit=2*random()+4,this.time=100*random(),this.oscillationSpeed=2*random()+1.5,this.oscillationDistance=40*random()+40,this.ySpeed=40*random()+80;var n=round(random()*(d.length-1));this.frontColor=d[n][0],this.backColor=d[n][1],this.particles=new Array;for(var o=0;o<this.particleCount;o++)this.particles[o]=new e(this.position.x,this.position.y-o*this.particleDist,this.particleMass,this.particleDrag)},this.Draw=function(e){for(var n=0;n<this.particleCount-1;n++){var i=new t(this.particles[n].position.x+this.xOff,this.particles[n].position.y+this.yOff),o=new t(this.particles[n+1].position.x+this.xOff,this.particles[n+1].position.y+this.yOff);this.Side(this.particles[n].position.x,this.particles[n].position.y,this.particles[n+1].position.x,this.particles[n+1].position.y,o.x,o.y)<0?(e.fillStyle=this.frontColor,e.strokeStyle=this.frontColor):(e.fillStyle=this.backColor,e.strokeStyle=this.backColor),0==n?(e.beginPath(),e.moveTo(this.particles[n].position.x*retina,this.particles[n].position.y*retina),e.lineTo(this.particles[n+1].position.x*retina,this.particles[n+1].position.y*retina),e.lineTo(.5*(this.particles[n+1].position.x+o.x)*retina,.5*(this.particles[n+1].position.y+o.y)*retina),e.closePath(),e.stroke(),e.fill(),e.beginPath(),e.moveTo(o.x*retina,o.y*retina),e.lineTo(i.x*retina,i.y*retina),e.lineTo(.5*(this.particles[n+1].position.x+o.x)*retina,.5*(this.particles[n+1].position.y+o.y)*retina),e.closePath(),e.stroke(),e.fill()):n==this.particleCount-2?(e.beginPath(),e.moveTo(this.particles[n].position.x*retina,this.particles[n].position.y*retina),e.lineTo(this.particles[n+1].position.x*retina,this.particles[n+1].position.y*retina),e.lineTo(.5*(this.particles[n].position.x+i.x)*retina,.5*(this.particles[n].position.y+i.y)*retina),e.closePath(),e.stroke(),e.fill(),e.beginPath(),e.moveTo(o.x*retina,o.y*retina),e.lineTo(i.x*retina,i.y*retina),e.lineTo(.5*(this.particles[n].position.x+i.x)*retina,.5*(this.particles[n].position.y+i.y)*retina),e.closePath(),e.stroke(),e.fill()):(e.beginPath(),e.moveTo(this.particles[n].position.x*retina,this.particles[n].position.y*retina),e.lineTo(this.particles[n+1].position.x*retina,this.particles[n+1].position.y*retina),e.lineTo(o.x*retina,o.y*retina),e.lineTo(i.x*retina,i.y*retina),e.closePath(),e.stroke(),e.fill())}},this.Side=function(t,e,n,i,o,r){return(t-n)*(r-i)-(e-i)*(o-n)}}var o=100,r=1/o,s=0,a=30,l=8,u=8,c=100,h=PI/180,d=[["#df0049","#660671"],["#00e857","#005291"],["#2bebbc","#05798a"],["#ffd200","#b06c00"]];if(t.Lerp=function(e,n,i){return new t((n.x-e.x)*i+e.x,(n.y-e.y)*i+e.y)},t.Distance=function(e,n){return sqrt(t.SqrDistance(e,n))},t.SqrDistance=function(t,e){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i+z*z},t.Scale=function(e,n){return new t(e.x*n.x,e.y*n.y)},t.Min=function(e,n){return new t(Math.min(e.x,n.x),Math.min(e.y,n.y))},t.Max=function(e,n){return new t(Math.max(e.x,n.x),Math.max(e.y,n.y))},t.ClampMagnitude=function(e,n){var i=e.Normalized;return new t(i.x*n,i.y*n)},t.Sub=function(e,n){return new t(e.x-n.x,e.y-n.y,e.z-n.z)},n.bounds=new t(0,0),i.bounds=new t(0,0),p={},p.Context=function(e){var o=0,h=document.getElementById(e),d=h.parentNode,f=d.offsetWidth,g=d.offsetHeight;h.width=f*retina,h.height=g*retina;var m=h.getContext("2d"),v=new Array;for(i.bounds=new t(f,g),o=0;s>o;o++)v[o]=new i(random()*f,-random()*g*0,a,l,u,45,1,.05);var y=new Array;for(n.bounds=new t(f,g),o=0;c>o;o++)y[o]=new n(random()*f,random()*g);this.resize=function(){f=d.offsetWidth,g=d.offsetHeight,h.width=f*retina,h.height=g*retina,n.bounds=new t(f,g),i.bounds=new t(f,g)},this.start=function(){this.stop();this.update()},this.stop=function(){cAF(this.interval)},this.update=function(){var t=0;for(m.clearRect(0,0,h.width,h.height),t=0;c>t;t++)y[t].Update(r),y[t].Draw(m);for(t=0;s>t;t++)v[t].Update(r),v[t].Draw(m);this.interval=rAF(function(){p.update()})}},$("#confetti").length){var p=new p.Context("confetti");p.start(),window.addEventListener("resize",function(t){p.resize()})}}),$('[data-action="mark-updates-as-seen"]').on("click",function(t){t.preventDefault();var e=$(this);return e.tipsy("hide").fadeOut(200,function(){e.remove()}),$(".menu-bar-site-update-count").fadeOut(200),$(".unread").removeClass("unread").addClass("read"),$.post("/saw-updates"),!1}),String.prototype.capitalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)},$("#feed-search-stories").on("keypress",function(t){if(13==t.which){var e=$(this).attr("data-search-endpoint");window.location.replace(e+"?q="+$(this).val())}}),$(".js-loading").on("click",function(t){var e=$(this);e.addClass("btn-loading"),setTimeout(function(){e.removeClass("btn-loading")},3e3)}),$("#resubscribe").on("click",function(t){return t.preventDefault(),$(this).data("resubscribed")?void window.location.reload():void $.ajax({data:{resubscribe:!0},url:window.location,cache:!1}).done(function(){$("#resubscribe").removeClass("bg-off-black").addClass("bg-green").data("resubscribed",!0).text("Resubscribed!")})}),window.setTimeout(function(){$("img[src*='exposure.imgix.net']").each(function(){var t=$(this),e=t.attr("src"),n=new Image;n.onerror=function(){e&&(t.removeAttr("srcset"),t.attr("src",e.replace("exposure.imgix.net","s3.amazonaws.com/exposure-media")));t.attr("srcset")},n.src=e})},2500),$("#post-content").on("dragover",function(t){t.preventDefault();var e=$(".story-drag-drop-overlay-wrapper");e.hasClass("hide")&&e.removeClass("hide")}),$(".story-drag-drop-overlay-wrapper").on("dragend",function(t){t.preventDefault(),$(".story-drag-drop-overlay-wrapper").addClass("hide")}),$(".story-drag-drop-overlay-wrapper").on("drop",function(t){t.preventDefault(),$(".story-drag-drop-overlay-wrapper").addClass("hide")}),$('[data-action="close-story-arrow-drag-drop"]').on("click",function(t){return t.preventDefault(),$(".story-drag-drop-overlay-wrapper").addClass("hide"),!1}),$(".cover-layout-overlay-wrapper").click(function(){$(this).removeClass("muted"),$(".cover-layout-two-fold-wrapper").addClass("muted"),$("body").removeclass("cover-layout-two-fold"),$("body").removeclass("cover-layout-simple"),$('#cover-layout-two-fold-toggle-radio[type="radio"]').prop("checked",!1),$('#cover-layout-simple-toggle-radio[type="radio"]').prop("checked",!1)}),"?feedback-sent"==location.search&&$("#feedback-sent").show(),$(".brand-mobile-menu-hook").click(function(t){$(this).toggleClass("active"),$(".brand-menu-mobile").toggleClass("active")}),$("#post-content,#cover-image,.publish-post").mousedown(function(){$(".options-panel").removeClass("active")}),window.onload=function(){window.sr=ScrollReveal({reset:!1}),sr.reveal('#post[data-is-animation-effects="true"] .photo-set-group .photo, #post[data-is-animation-effects="true"] .captioned-single .photo ,.general-scroll-reveal',{viewport:window.document.documentElement,duration:500,viewFactor:.01,reset:!1,delay:10,easing:"cubic-bezier(0.420, 0.000, 0.200, 0.990)",distance:"10px",scale:.99})},$(window).scroll(function(){if($(window).width()<1040){var t=$(window).scrollTop();$(".full-width-parallax,.full-width-parallax-overlay-wrapper .photo").each(function(e,n){var i=$(this).offset().top,o=$(this).height(),r=(i+$(this).height(),isInViewport(this));if(r){var s=t-i,a=Math.round(s/o*50);a=2*a>100?50:a,$(this).css("background-position","center "+parseInt(-(1.2*a))+"px")}})}});var motionQuery=matchMedia("(prefers-reduced-motion)");reducedMotionCheck(),motionQuery.addListener(reducedMotionCheck),$(document).ready(function(){$(".skip-to-content").click(function(t){var e="#"+this.href.split("#")[1];$(e).attr("tabindex",-1).on("blur focusout",function(){$(this).removeAttr("tabindex")}).focus()})}),$(function(){$(".filter-drafts").on("click",function(t){t.preventDefault(),$(".member-stories-draft-sort").fadeToggle(),$(".member-stories-published-sort").fadeToggle(),$(".stories-wrapper").toggleClass("draft-filter-stories-wrapper"),$(".filter-drafts span.label").text(function(t,e){return"View Draft Stories"===e?"Hide Draft Stories":"View Draft Stories"})})});var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),ExposureCategoryManager=function(){function t(){_classCallCheck(this,t),this.$el=$("#category-manager-modal"),this.currentCategories={member:[],community:[]},this.memberCategories=[],this.editingCategory=null,this.deletingCategory=null;var e=this;this.$el.find("#excm-nav-member").on("click",function(t){t.preventDefault(),e.resetState(),e.showMemberList()}),this.$el.find("#excm-nav-community").on("click",function(t){t.preventDefault(),e.resetState(),e.showCommunityList()}),this.$el.find('[data-action="save-story-categories"]').on("click",function(t){t.preventDefault(),e.save()}),this.$el.find('[data-action="confirm-edits"]').on("click",function(t){t.preventDefault(),e.$el.find("#excm-confirm-slug-change").removeClass("hide"),e.$el.find(".editing-category-actions").addClass("hide")}),this.$el.find('[data-action="save-category-edits"]').on("click",function(t){t.preventDefault(),e.saveEdits()}),this.$el.find("input[type=checkbox]").on("change",function(t){e.render()}),this.$el.find('[data-action="toggle-add-category-form"]').on("click",function(t){t.preventDefault(),e.resetState(),e.$el.find(".choosing-category-actions").addClass("hide"),e.$el.find("#excm-add-form, .save-adding-category-actions").removeClass("hide"),e.$el.find("input#add-category-name").val("").focus().trigger("input"),e.updateAddSlugPreview("Category Name")}),this.$el.find('[data-action="category-modal-cancel-action"]').on("click",function(t){t.preventDefault(),e.resetState()}),this.$el.find("input#add-category-name").on("keypress",function(t){13==t.which&&e.addNewCategory($(this).val())}),this.$el.find("input#add-category-name").on("input",debounce(function(t){e.updateAddSlugPreview(this.value)},500)),this.$el.find('[data-action="add-new-category"]').on("click",function(t){t.preventDefault(),e.addNewCategory(e.$el.find("input#add-category-name").val())}),this.$el.on("click",'[data-action="start-edit-category"]',function(t){t.preventDefault(),e.startEditing(this)}),this.$el.on("click",'[data-action="start-remove-category"]',function(t){t.preventDefault(),e.startDeleting(this)}),this.$el.on("click",'.confirm-remove [data-action="yes"]',function(t){t.preventDefault(),e.deleteCategory(e.deletingCategory)}),this.$el.on("click",'.confirm-remove [data-action="no"]',function(t){t.preventDefault(),$(this).closest(".confirm-remove").addClass("hide")}),this.$el.find("input#edit-category-name").on("keypress",function(t){13==t.which&&e.saveEdits()}),this.$el.find("input#edit-category-name").on("input",debounce(function(t){e.updateEditSlugPreview(this.value)},500)),this.currentCategories=window.storyCategoriesSeed,this.memberCategories=window.memberCategoriesSeed,this.render(),this._renderMemberCategoryList()}return _createClass(t,[{key:"startEditing",value:function(t){this.resetState(),this.updateEditSlugPreview("Category Name");var e=this.$el.find("#excm-edit-form"),n=+$(t).attr("data-id"),i=this.findCategory(n);this.editingCategory=i,this.$el.find(".choosing-category-actions").addClass("hide"),e.removeClass("hide"),this.$el.find(".editing-category-actions").removeClass("hide"),e.find("#edit-category-name").val(i[1]).focus(),e.find(".edit-category-name-label").html(i[0])}},{key:"startDeleting",value:function(t){var e=+$(t).attr("data-id"),n=this.findCategory(e);this.deletingCategory=n;var i=$(t).closest(".member-category-meta").find(".confirm-remove");i.removeClass("hide"),this.$el.find(".member-category-list").scrollTo(i,300)}},{key:"addNewCategory",value:function(t){if(t=strip_tags($.trim(t)),""==t)return void Exposure.showMessage("Oops! Please type a category name.");var e=this;$.post("/member-categories/create",{name:t}).done(function(t){e.memberCategories=t,e._renderMemberCategoryList(),e.resetState(),Exposure.showMessage("Category created!"),$(".no-categories-present").addClass("hide")}).error(function(t){Exposure.showMessage("Oops! That category name is already in use."),e.$el.find("#add-category-name").focus()}).always(function(){})}},{key:"_nameToSlug",value:function(t,e){var n=this;this.$el.find(".btn-loading-dark").removeClass("hide"),$.post("/tools/slugger",{s:t}).done(function(t){e.call(this,t.slug)}).always(function(){n.$el.find(".btn-loading-dark").addClass("hide")})}},{key:"updateAddSlugPreview",value:function(t){var e=$(".add-category-name-label");this._nameToSlug(t,function(t){e.html(""==t?"category-name":t)})}},{key:"updateEditSlugPreview",value:function(t){var e=this.$el.find(".edit-category-name-label");this._nameToSlug(t,function(t){e.html(""==t?"category-name":t)})}},{key:"resetState",value:function(){this.$el.find("#excm-add-form, #excm-edit-form").addClass("hide"),this.$el.find(".save-adding-category-actions, .editing-category-actions").addClass("hide"),this.$el.find("#excm-confirm-slug-change").addClass("hide"),this.$el.find(".choosing-category-actions").removeClass("hide"),this.editingCategory=null,this.deletingCategory=null}},{key:"show",value:function(){this.$el.show(),this.resetState()}},{key:"hide",value:function(){this.$el.hide()}},{key:"render",value:function(){this._renderStoryCategoryList(),this._enableOrDisableToggles()}},{key:"_renderMemberCategoryList",value:function(){var t=this.$el.find(".member-category-list-wrapper"),e=this.$el.find(".member-category-template");if(t.html(""),this.memberCategories.length)for(var n,i,o=0;o<this.memberCategories.length;++o)n=this.memberCategories[o],i=e.clone(!0).removeClass("member-category-template hide").attr("data-slug",n[0]),i.find('[data-tpl-var="cat-name"]').html(n[1]),i.find("label").attr("for","toggle_m_"+n[2]),i.find("input.toggle").attr("id","toggle_m_"+n[2]).attr("checked",this.storyInCategory(n[2])),i.find("label.toggle-btn").attr("for","toggle_m_"+n[2]),i.find('[data-action="start-edit-category"]').attr("data-id",n[2]),i.find('[data-action="start-remove-category"]').attr("data-id",n[2]),t.append(i);this._enableOrDisableToggles()}},{key:"findCategory",value:function(t){for(var e=0;e<this.memberCategories.length;++e)if(this.memberCategories[e][2]==t)return this.memberCategories[e];return null}},{key:"storyInCategory",value:function(t){for(var e=0;e<this.currentCategories.member.length;++e)if(this.currentCategories.member[e][2]==t)return!0;return!1}},{key:"_enableOrDisableToggles",value:function(){var t=this.currentCount("member"),e=this.currentCount("community"),n=window.$maxCats||3;n>t?this.$el.find('[id^="toggle_m_"]').removeAttr("disabled").closest(".category-toggle").removeClass("muted"):this.$el.find('[id^="toggle_m_"]:not(:checked)').attr("disabled",!0).closest(".category-toggle").addClass("muted"),n>e?this.$el.find('[id^="toggle_c_"]').removeAttr("disabled").closest(".category-toggle").removeClass("muted"):this.$el.find('[id^="toggle_c_"]:not(:checked)').attr("disabled",!0).closest(".category-toggle").addClass("muted")}},{key:"currentCount",value:function(t){return"member"==t?this.$el.find('[id^="toggle_m_"]:checked').length:"community"==t?this.$el.find('[id^="toggle_c_"]:checked').length:void 0}},{key:"_renderStoryCategoryList",value:function(){var t,e,n,i,o=$(".categories-details-render-wrap"),r=o.find(".categories-details-render");r.html("");var s=$('<div class="categories-wrapper-for-members type-theme-body">');for(t=this.currentCategories.member.length,t&&s.append("<span>In</span> "),e=0;t>e;++e)n=this.currentCategories.member[e],i='<a class="type-theme-body" href="/categories/'+n[0]+'">'+n[1]+"</a>",s.append($(i)),e==t-2?s.append(" & "):t>2&&t-1>e&&s.append(", ");for(t&&(r.append(s),s=$('<div class="categories-wrapper-for-community hide">')),t=this.currentCategories.community.length,e=0;t>e;++e);t&&r.append(s)}},{key:"showMemberList",value:function(){this.$el.find(".community-category-list").addClass("hide"),this.$el.find(".member-category-list").removeClass("hide"),this.$el.find("#excm-nav-community").removeClass("active"),this.$el.find("#excm-nav-member").addClass("active")}},{key:"showCommunityList",value:function(){this.$el.find(".member-category-list").addClass("hide"),this.$el.find(".community-category-list").removeClass("hide"),this.$el.find("#excm-nav-member").removeClass("active"),this.$el.find("#excm-nav-community").addClass("active")}},{key:"saveEdits",value:function(){if(!this.editingCategory)return!1;var t=this,e=$.trim(this.$el.find("#edit-category-name").val());$.post("/member-categories/"+this.editingCategory[2]+"/update",{name:e}).done(function(e){t.memberCategories=e,t._renderStoryCategoryList(),t._renderMemberCategoryList(),t.resetState(),Exposure.showMessage("Category updated!")}).error(function(e){Exposure.showMessage("That name is already being used. Try another one."),t.$el.find("#edit-category-name").focus()}).always(function(){})}},{key:"deleteCategory",value:function(t){if(!t)return!1;var e=this;$.post("/member-categories/"+t[2],{_method:"DELETE"}).done(function(t){e.memberCategories=t,e._renderStoryCategoryList(),e._renderMemberCategoryList(),e.resetState(),Exposure.showMessage("Category deleted.")}).error(function(t){alert(t)}).always(function(){})}},{key:"save",value:function(){var t=this,e=[];this.$el.find('[id^="toggle_m_"]').map(function(t,n){n=$(n),n.is(":checked")&&e.push(n.attr("id").replace(/^toggle_m_/,""))});var n=[];this.$el.find('[id^="toggle_c_"]').map(function(t,e){e=$(e),e.is(":checked")&&n.push(e.attr("id").replace(/^toggle_c_/,""))}),window.$gallery||$("#exposure-loading-overlay").removeClass("hide"),$.post("/stories/"+this.postID+"/save-categories",{m:e,c:n}).done(function(e){window.$gallery||Exposure.showMessage("Story categories saved"),t.currentCategories=e,t.render(),t.hide()}).error(function(t){alert(t)}).always(function(){if(window.$gallery){var t=new ArrowFeedbackBar({type:"success",message:"Your gallery categories have been updated.",leftButton:{label:"Okay",callback:function(){t.hide()}}});t.showWithCloseTimeout(3e3)}else $("#exposure-loading-overlay").addClass("hide")})}},{key:"postID",get:function(){return+$("#post").attr("data-id")}}]),t}();$("#post[data-id]").length&&(window.$categoryManager=new ExposureCategoryManager);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),ExposureConfirmModal=function(){function t(e,n,i,o,r){_classCallCheck(this,t),this.openingEl=e,this.selector=n,this.opts=i,this.yesCallback=o,this.noCallback=r,this.id="excm_"+(new Date).getTime(),this.$el=$(n).clone({withDataAndEvents:!0}).attr("id",this.id),$("body").append(this.$el);var s=this;this.$el.find('[data-action="modal-yes"]').on("click",function(t){
t.preventDefault(),s.yesCallback.call(),s.hide()}),this.$el.find('[data-action="modal-no"]').on("click",function(t){t.preventDefault(),s.noCallback.call(),s.hide()}),this.$el.find('[data-modal-label="title"]').html(i.title),this.$el.find('[data-modal-label="description"]').html(i.description),this.$el.find('[data-modal-label="yes-label"]').html(i.yesLabel),this.$el.find('[data-modal-label="no-label"]').html(i.noLabel)}return _createClass(t,[{key:"show",value:function(){this.$el.show()}},{key:"hide",value:function(){this.$el.hide()}}]),t}();!function(){"use strict";function t(n){return"undefined"==typeof this||Object.getPrototypeOf(this)!==t.prototype?new t(n):(C=this,C.version="3.3.6",C.tools=new k,C.isSupported()?(C.tools.extend(C.defaults,n||{}),C.defaults.container=e(C.defaults),C.store={elements:{},containers:[]},C.sequences={},C.history=[],C.uid=0,C.initialized=!1):"undefined"!=typeof console&&null!==console,C)}function e(t){if(t&&t.container){if("string"==typeof t.container)return window.document.documentElement.querySelector(t.container);if(C.tools.isNode(t.container))return t.container}return C.defaults.container}function n(t,e){return"string"==typeof t?Array.prototype.slice.call(e.querySelectorAll(t)):C.tools.isNode(t)?[t]:C.tools.isNodeList(t)?Array.prototype.slice.call(t):[]}function i(){return++C.uid}function o(t,e,n){e.container&&(e.container=n),t.config?t.config=C.tools.extendClone(t.config,e):t.config=C.tools.extendClone(C.defaults,e),"top"===t.config.origin||"bottom"===t.config.origin?t.config.axis="Y":t.config.axis="X"}function r(t){var e=window.getComputedStyle(t.domEl);t.styles||(t.styles={transition:{},transform:{},computed:{}},t.styles.inline=t.domEl.getAttribute("style")||"",t.styles.inline+="; visibility: visible; ",t.styles.computed.opacity=e.opacity,e.transition&&"all 0s ease 0s"!==e.transition?t.styles.computed.transition=e.transition+", ":t.styles.computed.transition=""),t.styles.transition.instant=s(t,0),t.styles.transition.delayed=s(t,t.config.delay),t.styles.transform.initial=" -webkit-transform:",t.styles.transform.target=" -webkit-transform:",a(t),t.styles.transform.initial+="transform:",t.styles.transform.target+="transform:",a(t)}function s(t,e){var n=t.config;return"-webkit-transition: "+t.styles.computed.transition+"-webkit-transform "+n.duration/1e3+"s "+n.easing+" "+e/1e3+"s, opacity "+n.duration/1e3+"s "+n.easing+" "+e/1e3+"s; transition: "+t.styles.computed.transition+"transform "+n.duration/1e3+"s "+n.easing+" "+e/1e3+"s, opacity "+n.duration/1e3+"s "+n.easing+" "+e/1e3+"s; "}function a(t){var e,n=t.config,i=t.styles.transform;e="top"===n.origin||"left"===n.origin?/^-/.test(n.distance)?n.distance.substr(1):"-"+n.distance:n.distance,parseInt(n.distance)&&(i.initial+=" translate"+n.axis+"("+e+")",i.target+=" translate"+n.axis+"(0)"),n.scale&&(i.initial+=" scale("+n.scale+")",i.target+=" scale(1)"),n.rotate.x&&(i.initial+=" rotateX("+n.rotate.x+"deg)",i.target+=" rotateX(0)"),n.rotate.y&&(i.initial+=" rotateY("+n.rotate.y+"deg)",i.target+=" rotateY(0)"),n.rotate.z&&(i.initial+=" rotateZ("+n.rotate.z+"deg)",i.target+=" rotateZ(0)"),i.initial+="; opacity: "+n.opacity+";",i.target+="; opacity: "+t.styles.computed.opacity+";"}function l(t){var e=t.config.container;e&&-1===C.store.containers.indexOf(e)&&C.store.containers.push(t.config.container),C.store.elements[t.id]=t}function u(t,e,n){var i={target:t,config:e,interval:n};C.history.push(i)}function c(){if(C.isSupported()){p();for(var t=0;t<C.store.containers.length;t++)C.store.containers[t].addEventListener("scroll",h),C.store.containers[t].addEventListener("resize",h);C.initialized||(window.addEventListener("scroll",h),window.addEventListener("resize",h),C.initialized=!0)}return C}function h(){E(p)}function d(){var t,e,n,i;C.tools.forOwn(C.sequences,function(o){i=C.sequences[o],t=!1;for(var r=0;r<i.elemIds.length;r++)n=i.elemIds[r],e=C.store.elements[n],x(e)&&!t&&(t=!0);i.active=t})}function p(){var t,e;d(),C.tools.forOwn(C.store.elements,function(n){e=C.store.elements[n],t=v(e),m(e)?(e.config.beforeReveal(e.domEl),t?e.domEl.setAttribute("style",e.styles.inline+e.styles.transform.target+e.styles.transition.delayed):e.domEl.setAttribute("style",e.styles.inline+e.styles.transform.target+e.styles.transition.instant),g("reveal",e,t),e.revealing=!0,e.seen=!0,e.sequence&&f(e,t)):y(e)&&(e.config.beforeReset(e.domEl),e.domEl.setAttribute("style",e.styles.inline+e.styles.transform.initial+e.styles.transition.instant),g("reset",e),e.revealing=!1)})}function f(t,e){var n=0,i=0,o=C.sequences[t.sequence.id];o.blocked=!0,e&&"onload"===t.config.useDelay&&(i=t.config.delay),t.sequence.timer&&(n=Math.abs(t.sequence.timer.started-new Date),window.clearTimeout(t.sequence.timer)),t.sequence.timer={started:new Date},t.sequence.timer.clock=window.setTimeout(function(){o.blocked=!1,t.sequence.timer=null,h()},Math.abs(o.interval)+i-n)}function g(t,e,n){var i=0,o=0,r="after";switch(t){case"reveal":o=e.config.duration,n&&(o+=e.config.delay),r+="Reveal";break;case"reset":o=e.config.duration,r+="Reset"}e.timer&&(i=Math.abs(e.timer.started-new Date),window.clearTimeout(e.timer.clock)),e.timer={started:new Date},e.timer.clock=window.setTimeout(function(){e.config[r](e.domEl),e.timer=null},o-i)}function m(t){if(t.sequence){var e=C.sequences[t.sequence.id];return e.active&&!e.blocked&&!t.revealing&&!t.disabled}return x(t)&&!t.revealing&&!t.disabled}function v(t){var e=t.config.useDelay;return"always"===e||"onload"===e&&!C.initialized||"once"===e&&!t.seen}function y(t){if(t.sequence){var e=C.sequences[t.sequence.id];return!e.active&&t.config.reset&&t.revealing&&!t.disabled}return!x(t)&&t.config.reset&&t.revealing&&!t.disabled}function b(t){return{width:t.clientWidth,height:t.clientHeight}}function w(t){if(t&&t!==window.document.documentElement){var e=_(t);return{x:t.scrollLeft+e.left,y:t.scrollTop+e.top}}return{x:window.pageXOffset,y:window.pageYOffset}}function _(t){var e=0,n=0,i=t.offsetHeight,o=t.offsetWidth;do isNaN(t.offsetTop)||(e+=t.offsetTop),isNaN(t.offsetLeft)||(n+=t.offsetLeft),t=t.offsetParent;while(t);return{top:e,left:n,height:i,width:o}}function x(t){function e(){var e=u+a*s,n=c+l*s,i=h-a*s,p=d-l*s,f=r.y+t.config.viewOffset.top,g=r.x+t.config.viewOffset.left,m=r.y-t.config.viewOffset.bottom+o.height,v=r.x-t.config.viewOffset.right+o.width;return m>e&&i>f&&v>n&&p>g}function n(){return"fixed"===window.getComputedStyle(t.domEl).position}var i=_(t.domEl),o=b(t.config.container),r=w(t.config.container),s=t.config.viewFactor,a=i.height,l=i.width,u=i.top,c=i.left,h=u+a,d=c+l;return e()||n()}function k(){}var C,E;t.prototype.defaults={origin:"bottom",distance:"20px",duration:500,delay:0,rotate:{x:0,y:0,z:0},opacity:0,scale:.9,easing:"cubic-bezier(0.6, 0.2, 0.1, 1)",container:window.document.documentElement,mobile:!0,reset:!1,useDelay:"always",viewFactor:.2,viewOffset:{top:0,right:0,bottom:0,left:0},beforeReveal:function(t){},beforeReset:function(t){},afterReveal:function(t){},afterReset:function(t){}},t.prototype.isSupported=function(){var t=document.documentElement.style;return"WebkitTransition"in t&&"WebkitTransform"in t||"transition"in t&&"transform"in t},t.prototype.reveal=function(t,s,a,h){var d,p,f,g,m,v;if(void 0!==s&&"number"==typeof s?(a=s,s={}):void 0!==s&&null!==s||(s={}),d=e(s),p=n(t,d),!p.length)return C;a&&"number"==typeof a&&(v=i(),m=C.sequences[v]={id:v,interval:a,elemIds:[],active:!1});for(var y=0;y<p.length;y++)g=p[y].getAttribute("data-sr-id"),g?f=C.store.elements[g]:(f={id:i(),domEl:p[y],seen:!1,revealing:!1},f.domEl.setAttribute("data-sr-id",f.id)),m&&(f.sequence={id:m.id,index:m.elemIds.length},m.elemIds.push(f.id)),o(f,s,d),r(f),l(f),C.tools.isMobile()&&!f.config.mobile||!C.isSupported()?(f.domEl.setAttribute("style",f.styles.inline),f.disabled=!0):f.revealing||f.domEl.setAttribute("style",f.styles.inline+f.styles.transform.initial);return!h&&C.isSupported()&&(u(t,s,a),C.initTimeout&&window.clearTimeout(C.initTimeout),C.initTimeout=window.setTimeout(c,0)),C},t.prototype.sync=function(){if(C.history.length&&C.isSupported()){for(var t=0;t<C.history.length;t++){var e=C.history[t];C.reveal(e.target,e.config,e.interval,!0)}c()}return C},k.prototype.isObject=function(t){return null!==t&&"object"==typeof t&&t.constructor===Object},k.prototype.isNode=function(t){return"object"==typeof window.Node?t instanceof window.Node:t&&"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},k.prototype.isNodeList=function(t){var e=Object.prototype.toString.call(t),n=/^\[object (HTMLCollection|NodeList|Object)\]$/;return"object"==typeof window.NodeList?t instanceof window.NodeList:t&&"object"==typeof t&&n.test(e)&&"number"==typeof t.length&&(0===t.length||this.isNode(t[0]))},k.prototype.forOwn=function(t,e){if(!this.isObject(t))throw new TypeError('Expected "object", but received "'+typeof t+'".');for(var n in t)t.hasOwnProperty(n)&&e(n)},k.prototype.extend=function(t,e){return this.forOwn(e,function(n){this.isObject(e[n])?(t[n]&&this.isObject(t[n])||(t[n]={}),this.extend(t[n],e[n])):t[n]=e[n]}.bind(this)),t},k.prototype.extendClone=function(t,e){return this.extend(this.extend({},t),e)},k.prototype.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},E=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return t}):"undefined"!=typeof module&&module.exports?module.exports=t:window.ScrollReveal=t}(),$("#test-domain").on("input",function(t){$("#finish-setup-button-wrapper a").attr("href","/custom-domains/apply-existing?domain="+$(this).val())}).on("keypress",function(t){13==t.which&&$('[data-action="test-custom-domain"]').click()}),$('[data-action="test-custom-domain"]').on("click",function(t){var e=$("#test-domain").val(),n=$(this);n.addClass("btn-loading"),$(".domain-taken").addClass("hide"),$.post("/custom-domains/test",{domain:e}).done(function(t){t.taken&&1==t.taken?($(".domain-taken").removeClass("hide"),$(".check-success").addClass("hide"),$(".check-failure").addClass("hide"),$("#test-domain").focus()):($(".domain-taken").addClass("hide"),1==t?($(".check-success").removeClass("hide"),$(".check-failure").addClass("hide")):($(".check-success").addClass("hide"),$(".check-failure").removeClass("hide")))}).always(function(){n.removeClass("btn-loading")})}),$('[data-action="remove-custom-domain"]').on("click",function(t){t.preventDefault();new ExposureConfirmModal($(this),"#confirm-remove-custom-domain",{title:"Remove your custom domain?",description:"Are you sure? Your Exposure site will no longer be available at your custom domain and will not redirect.",yesLabel:"Yes, remove my domain",noLabel:"No, nevermind"},function(){Exposure.simplePost("/custom-domains/remove")},function(){}).show();return!1}),$('[data-action="confirm-username-changee"]').on("click",function(t){t.preventDefault();new ExposureConfirmModal($(this),"#confirm-username-change",{title:"Confirm Username Change",description:"Changing your username will also change your Exposure URL, this will cause any previously shared exposure.co links to break. This does no apply if you have shared links with a custom domain connected.",yesLabel:"Yes, change username",noLabel:"No, nevermind"},function(){$("#edit_user_1").trigger("submit.rails")},function(){}).show();return!1}),$(".close-sale-promo").on("click",function(t){return t.preventDefault(),Cookies.set("hide-bday3-flash-promo","yes",{expires:"01/01/2019"}),$(".sale-promo-wrapper, .sale-prompt-birthday").remove(),!1}),Cookies.get("hide-bday3-flash-promo")?$(".sale-promo-wrapper, .sale-prompt-birthday").remove():$(".sale-promo-wrapper, .sale-prompt-birthday").removeClass("hide");